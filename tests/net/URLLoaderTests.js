var URLLoader = require("awayjs-core/lib/net/URLLoader");
var URLLoaderDataFormat = require("awayjs-core/lib/net/URLLoaderDataFormat");
var URLRequest = require("awayjs-core/lib/net/URLRequest");
var URLRequestMethod = require("awayjs-core/lib/net/URLRequestMethod");
var URLVariables = require("awayjs-core/lib/net/URLVariables");
var URLLoaderEvent = require("awayjs-core/lib/events/URLLoaderEvent");
/**
 *
 */
var URLLoaderTests = (function () {
    function URLLoaderTests() {
        var _this = this;
        console.log('start');
        //---------------------------------------------------------------------------------------------------------------------------------------------------------
        // POST URL Variables to PHP script
        //---------------------------------------------------------------------------------------------------------------------------------------------------------
        this.urlLoaderPostURLVars = new URLLoader();
        this.urlLoaderPostURLVars.dataFormat = URLLoaderDataFormat.VARIABLES;
        var urlStr = 'fname=karim&lname=' + Math.floor(Math.random() * 100);
        var urlVars = new URLVariables(urlStr);
        var req = new URLRequest('assets/saveData.php');
        req.method = URLRequestMethod.POST;
        req.data = urlVars;
        this.urlLoaderPostURLVars.addEventListener(URLLoaderEvent.LOAD_COMPLETE, function (event) { return _this.postURLTestComplete(event); });
        this.urlLoaderPostURLVars.addEventListener(URLLoaderEvent.LOAD_ERROR, function (event) { return _this.ioError(event); });
        this.urlLoaderPostURLVars.load(req);
        //---------------------------------------------------------------------------------------------------------------------------------------------------------
        // GET CSV File
        //---------------------------------------------------------------------------------------------------------------------------------------------------------
        var csrReq = new URLRequest('assets/airports.csv');
        this.urlLoaderGetCSV = new URLLoader();
        this.urlLoaderGetCSV.dataFormat = URLLoaderDataFormat.TEXT;
        this.urlLoaderGetCSV.addEventListener(URLLoaderEvent.LOAD_COMPLETE, function (event) { return _this.getCsvComplete(event); });
        this.urlLoaderGetCSV.addEventListener(URLLoaderEvent.LOAD_START, function (event) { return _this.getCsvOpen(event); });
        this.urlLoaderGetCSV.addEventListener(URLLoaderEvent.LOAD_ERROR, function (event) { return _this.ioError(event); });
        this.urlLoaderGetCSV.load(csrReq);
        //---------------------------------------------------------------------------------------------------------------------------------------------------------
        // ERROR test - load a non-existing object
        //---------------------------------------------------------------------------------------------------------------------------------------------------------
        var errorReq = new URLRequest('assets/generatingError');
        this.urlLoaderErrorTest = new URLLoader();
        this.urlLoaderErrorTest.dataFormat = URLLoaderDataFormat.TEXT;
        this.urlLoaderErrorTest.addEventListener(URLLoaderEvent.LOAD_COMPLETE, function (event) { return _this.errorComplete(event); });
        this.urlLoaderErrorTest.addEventListener(URLLoaderEvent.LOAD_ERROR, function (event) { return _this.ioError(event); });
        this.urlLoaderErrorTest.addEventListener(URLLoaderEvent.HTTP_STATUS, function (event) { return _this.httpStatusChange(event); });
        this.urlLoaderErrorTest.load(errorReq);
        //---------------------------------------------------------------------------------------------------------------------------------------------------------
        // GET URL Vars - get URL variables
        //---------------------------------------------------------------------------------------------------------------------------------------------------------
        var csrReq = new URLRequest('assets/getUrlVars.php');
        this.urlLoaderGetURLVars = new URLLoader();
        this.urlLoaderGetURLVars.dataFormat = URLLoaderDataFormat.VARIABLES;
        this.urlLoaderGetURLVars.addEventListener(URLLoaderEvent.LOAD_ERROR, function (event) { return _this.ioError(event); });
        this.urlLoaderGetURLVars.addEventListener(URLLoaderEvent.LOAD_COMPLETE, function (event) { return _this.getURLVarsComplete(event); });
        this.urlLoaderGetURLVars.load(csrReq);
        //---------------------------------------------------------------------------------------------------------------------------------------------------------
        // LOAD Binary file
        //---------------------------------------------------------------------------------------------------------------------------------------------------------
        var binReq = new URLRequest('assets/suzanne.awd');
        this.urlLoaderBinary = new URLLoader();
        this.urlLoaderBinary.dataFormat = URLLoaderDataFormat.BINARY;
        this.urlLoaderBinary.addEventListener(URLLoaderEvent.LOAD_ERROR, function (event) { return _this.ioError(event); });
        this.urlLoaderBinary.addEventListener(URLLoaderEvent.LOAD_COMPLETE, function (event) { return _this.binFileLoaded(event); });
        this.urlLoaderBinary.load(binReq);
        //---------------------------------------------------------------------------------------------------------------------------------------------------------
        // LOAD Blob file
        //---------------------------------------------------------------------------------------------------------------------------------------------------------
        var blobReq = new URLRequest('assets/2.png');
        this.urlLoaderBlob = new URLLoader();
        this.urlLoaderBlob.dataFormat = URLLoaderDataFormat.BLOB;
        this.urlLoaderBlob.addEventListener(URLLoaderEvent.LOAD_COMPLETE, function (event) { return _this.blobFileLoaded(event); });
        this.urlLoaderBlob.load(blobReq);
        //---------------------------------------------------------------------------------------------------------------------------------------------------------
        // ARRAY_BUFFER Test
        //---------------------------------------------------------------------------------------------------------------------------------------------------------
        var arrBReq = new URLRequest('assets/1.jpg');
        this.urlLoaderArrb = new URLLoader();
        this.urlLoaderArrb.dataFormat = URLLoaderDataFormat.ARRAY_BUFFER;
        this.urlLoaderArrb.addEventListener(URLLoaderEvent.LOAD_COMPLETE, function (event) { return _this.arrayBufferLoaded(event); });
        this.urlLoaderArrb.load(arrBReq);
    }
    URLLoaderTests.prototype.arrayBufferLoaded = function (event) {
        var arrayBuffer = this.urlLoaderArrb.data;
        var byteArray = new Uint8Array(arrayBuffer);
        console.log('URLLoaderTests.arrayBufferLoaded', byteArray[1]);
        for (var i = 0; i < byteArray.byteLength; i++) {
        }
    };
    URLLoaderTests.prototype.blobFileLoaded = function (event) {
        var blob = new Blob([this.urlLoaderBlob.data], { type: 'image/png' });
        var img = document.createElement('img');
        img.src = this.createObjectURL(blob); //window['URL']['createObjectURL'](blob);
        img.onload = function (e) {
            window['URL']['revokeObjectURL'](img.src); // Clean up after yourself.
        };
        console.log('URLLoaderTests.blobFileLoaded', blob);
        document.body.appendChild(img);
    };
    URLLoaderTests.prototype.createObjectURL = function (fileBlob) {
        // For some reason TypeScript has "window.URL.createObjectURL" in it's dictionary -
        // but window.URL causes an error
        // cannot make my own .d.ts file either ( results in duplicate definition error )
        // This HACK gets it to work: window['URL']['createObjectURL']
        if (window['URL']) {
            if (window['URL']['createObjectURL']) {
                return window['URL']['createObjectURL'](fileBlob);
            }
        }
        else {
            if (window['webkitURL']) {
                return window['webkitURL']['createObjectURL'](fileBlob);
            }
        }
        return null;
    };
    URLLoaderTests.prototype.binFileLoaded = function (event) {
        var loader = event.target;
        console.log('URLLoaderTests.binFileLoaded', loader.data.length);
    };
    URLLoaderTests.prototype.getURLVarsComplete = function (event) {
        var loader = event.target;
        console.log('URLLoaderTests.getURLVarsComplete', loader.data);
    };
    URLLoaderTests.prototype.httpStatusChange = function (event) {
        console.log('URLLoaderTests.httpStatusChange', event.target.status);
    };
    URLLoaderTests.prototype.ioError = function (event) {
        var loader = event.target;
        console.log('URLLoaderTests.ioError', loader.url);
    };
    URLLoaderTests.prototype.errorComplete = function (event) {
        var loader = event.target;
        console.log('Loader.errorComplete'); //, loader.data );
    };
    URLLoaderTests.prototype.postURLTestComplete = function (event) {
        var loader = event.target;
        console.log('URLLoaderTests.postURLTestComplete', loader.data);
    };
    URLLoaderTests.prototype.getCsvComplete = function (event) {
        var loader = event.target;
        console.log('URLLoaderTests.getCsvComplete'); //, loader.data );
    };
    URLLoaderTests.prototype.getCsvOpen = function (event) {
        var loader = event.target;
        console.log('URLLoaderTests.getCsvStart');
    };
    return URLLoaderTests;
})();

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5ldC9VUkxMb2FkZXJUZXN0cy50cyJdLCJuYW1lcyI6WyJVUkxMb2FkZXJUZXN0cyIsIlVSTExvYWRlclRlc3RzLmNvbnN0cnVjdG9yIiwiVVJMTG9hZGVyVGVzdHMuYXJyYXlCdWZmZXJMb2FkZWQiLCJVUkxMb2FkZXJUZXN0cy5ibG9iRmlsZUxvYWRlZCIsIlVSTExvYWRlclRlc3RzLmNyZWF0ZU9iamVjdFVSTCIsIlVSTExvYWRlclRlc3RzLmJpbkZpbGVMb2FkZWQiLCJVUkxMb2FkZXJUZXN0cy5nZXRVUkxWYXJzQ29tcGxldGUiLCJVUkxMb2FkZXJUZXN0cy5odHRwU3RhdHVzQ2hhbmdlIiwiVVJMTG9hZGVyVGVzdHMuaW9FcnJvciIsIlVSTExvYWRlclRlc3RzLmVycm9yQ29tcGxldGUiLCJVUkxMb2FkZXJUZXN0cy5wb3N0VVJMVGVzdENvbXBsZXRlIiwiVVJMTG9hZGVyVGVzdHMuZ2V0Q3N2Q29tcGxldGUiLCJVUkxMb2FkZXJUZXN0cy5nZXRDc3ZPcGVuIl0sIm1hcHBpbmdzIjoiQUFBQSxJQUFPLFNBQVMsV0FBYSwrQkFBK0IsQ0FBQyxDQUFDO0FBQzlELElBQU8sbUJBQW1CLFdBQVcseUNBQXlDLENBQUMsQ0FBQztBQUNoRixJQUFPLFVBQVUsV0FBYSxnQ0FBZ0MsQ0FBQyxDQUFDO0FBQ2hFLElBQU8sZ0JBQWdCLFdBQVksc0NBQXNDLENBQUMsQ0FBQztBQUMzRSxJQUFPLFlBQVksV0FBYSxrQ0FBa0MsQ0FBQyxDQUFDO0FBQ3BFLElBQU8sY0FBYyxXQUFZLHVDQUF1QyxDQUFDLENBQUM7QUFFMUUsQUFHQTs7R0FERztJQUNHLGNBQWM7SUFXbkJBLFNBWEtBLGNBQWNBO1FBQXBCQyxpQkFzTUNBO1FBeExDQSxPQUFPQSxDQUFDQSxHQUFHQSxDQUFFQSxPQUFPQSxDQUFDQSxDQUFDQTtRQUV0QkEsQUFJQUEsMkpBSjJKQTtRQUMzSkEsbUNBQW1DQTtRQUNuQ0EsMkpBQTJKQTtRQUUzSkEsSUFBSUEsQ0FBQ0Esb0JBQW9CQSxHQUFHQSxJQUFJ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SUFDbEVBLENBQUNBLEdBRCtDQTtJQUd4Q1gsbUNBQVVBLEdBQWxCQSxVQUFtQkEsS0FBb0JBO1FBRXRDWSxJQUFJQSxNQUFNQSxHQUFhQSxLQUFLQSxDQUFDQSxNQUFNQSxDQUFDQTtRQUNwQ0EsT0FBT0EsQ0FBQ0EsR0FBR0EsQ0FBRUEsNEJBQTRCQSxDQUFFQSxDQUFDQTtJQUM3Q0EsQ0FBQ0E7SUFDRloscUJBQUNBO0FBQURBLENBdE1BLEFBc01DQSxJQUFBIiwiZmlsZSI6Im5ldC9VUkxMb2FkZXJUZXN0cy5qcyIsInNvdXJjZVJvb3QiOiIuL3Rlc3RzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFVSTExvYWRlclx0XHRcdD0gcmVxdWlyZShcImF3YXlqcy1jb3JlL2xpYi9uZXQvVVJMTG9hZGVyXCIpO1xuaW1wb3J0IFVSTExvYWRlckRhdGFGb3JtYXRcdD0gcmVxdWlyZShcImF3YXlqcy1jb3JlL2xpYi9uZXQvVVJMTG9hZGVyRGF0YUZvcm1hdFwiKTtcbmltcG9ydCBVUkxSZXF1ZXN0XHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLWNvcmUvbGliL25ldC9VUkxSZXF1ZXN0XCIpO1xuaW1wb3J0IFVSTFJlcXVlc3RNZXRob2RcdFx0PSByZXF1aXJlKFwiYXdheWpzLWNvcmUvbGliL25ldC9VUkxSZXF1ZXN0TWV0aG9kXCIpO1xuaW1wb3J0IFVSTFZhcmlhYmxlc1x0XHRcdD0gcmVxdWlyZShcImF3YXlqcy1jb3JlL2xpYi9uZXQvVVJMVmFyaWFibGVzXCIpO1xuaW1wb3J0IFVSTExvYWRlckV2ZW50XHRcdD0gcmVxdWlyZShcImF3YXlqcy1jb3JlL2xpYi9ldmVudHMvVVJMTG9hZGVyRXZlbnRcIik7XG5cbi8qKlxuICogXG4gKi9cbmNsYXNzIFVSTExvYWRlclRlc3RzXG57XG5cblx0cHJpdmF0ZSB1cmxMb2FkZXJQb3N0VVJMVmFyczpVUkxMb2FkZXI7XG5cdHByaXZhdGUgdXJsTG9hZGVyR2V0Q1NWOlVSTExvYWRlcjtcblx0cHJpdmF0ZSB1cmxMb2FkZXJFcnJvclRlc3Q6VVJMTG9hZGVyO1xuXHRwcml2YXRlIHVybExvYWRlckdldFVSTFZhcnM6VVJMTG9hZGVyO1xuXHRwcml2YXRlIHVybExvYWRlckJpbmFyeTpVUkxMb2FkZXI7XG5cdHByaXZhdGUgdXJsTG9hZGVyQmxvYjpVUkxMb2FkZXI7XG5cdHByaXZhdGUgdXJsTG9hZGVyQXJyYjpVUkxMb2FkZXI7XG5cblx0Y29uc3RydWN0b3IoKVxuXHR7XG5cblx0XHRjb25zb2xlLmxvZyggJ3N0YXJ0Jyk7XG5cblx0XHQvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHRcdC8vIFBPU1QgVVJMIFZhcmlhYmxlcyB0byBQSFAgc2NyaXB0XG5cdFx0Ly8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuXHRcdHRoaXMudXJsTG9hZGVyUG9zdFVSTFZhcnMgPSBuZXcgVVJMTG9hZGVyKCk7XG5cdFx0dGhpcy51cmxMb2FkZXJQb3N0VVJMVmFycy5kYXRhRm9ybWF0ID0gVVJMTG9hZGVyRGF0YUZvcm1hdC5WQVJJQUJMRVM7XG5cblx0XHR2YXIgdXJsU3RyOnN0cmluZyA9ICdmbmFtZT1rYXJpbSZsbmFtZT0nICsgTWF0aC5mbG9vciggTWF0aC5yYW5kb20oKSAqIDEwMCApO1xuXHRcdHZhciB1cmxWYXJzID0gbmV3IFVSTFZhcmlhYmxlcyggdXJsU3RyICk7XG5cblx0XHR2YXIgcmVxID0gbmV3IFVSTFJlcXVlc3QoICdhc3NldHMvc2F2ZURhdGEucGhwJyApO1xuXHRcdFx0cmVxLm1ldGhvZCA9IFVSTFJlcXVlc3RNZXRob2QuUE9TVDtcblx0XHRcdHJlcS5kYXRhID0gdXJsVmFycztcblxuXHRcdHRoaXMudXJsTG9hZGVyUG9zdFVSTFZhcnMuYWRkRXZlbnRMaXN0ZW5lcihVUkxMb2FkZXJFdmVudC5MT0FEX0NPTVBMRVRFLCAoZXZlbnQ6VVJMTG9hZGVyRXZlbnQpID0+IHRoaXMucG9zdFVSTFRlc3RDb21wbGV0ZShldmVudCkpO1xuXHRcdHRoaXMudXJsTG9hZGVyUG9zdFVSTFZhcnMuYWRkRXZlbnRMaXN0ZW5lcihVUkxMb2FkZXJFdmVudC5MT0FEX0VSUk9SLCAoZXZlbnQ6VVJMTG9hZGVyRXZlbnQpID0+IHRoaXMuaW9FcnJvcihldmVudCkpO1xuXHRcdHRoaXMudXJsTG9hZGVyUG9zdFVSTFZhcnMubG9hZCggcmVxICk7XG5cblx0XHQvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHRcdC8vIEdFVCBDU1YgRmlsZVxuXHRcdC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cblx0XHR2YXIgY3NyUmVxID0gbmV3IFVSTFJlcXVlc3QoICdhc3NldHMvYWlycG9ydHMuY3N2JyApO1xuXG5cdFx0dGhpcy51cmxMb2FkZXJHZXRDU1YgPSBuZXcgVVJMTG9hZGVyKCk7XG5cdFx0dGhpcy51cmxMb2FkZXJHZXRDU1YuZGF0YUZvcm1hdCA9IFVSTExvYWRlckRhdGFGb3JtYXQuVEVYVDtcblx0XHR0aGlzLnVybExvYWRlckdldENTVi5hZGRFdmVudExpc3RlbmVyKFVSTExvYWRlckV2ZW50LkxPQURfQ09NUExFVEUsIChldmVudDpVUkxMb2FkZXJFdmVudCkgPT4gdGhpcy5nZXRDc3ZDb21wbGV0ZShldmVudCkpO1xuXHRcdHRoaXMudXJsTG9hZGVyR2V0Q1NWLmFkZEV2ZW50TGlzdGVuZXIoVVJMTG9hZGVyRXZlbnQuTE9BRF9TVEFSVCwgKGV2ZW50OlVSTExvYWRlckV2ZW50KSA9PiB0aGlzLmdldENzdk9wZW4oZXZlbnQpKTtcblx0XHR0aGlzLnVybExvYWRlckdldENTVi5hZGRFdmVudExpc3RlbmVyKFVSTExvYWRlckV2ZW50LkxPQURfRVJST1IsIChldmVudDpVUkxMb2FkZXJFdmVudCkgPT4gdGhpcy5pb0Vycm9yKGV2ZW50KSk7XG5cdFx0dGhpcy51cmxMb2FkZXJHZXRDU1YubG9hZCggY3NyUmVxICk7XG5cblx0XHQvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHRcdC8vIEVSUk9SIHRlc3QgLSBsb2FkIGEgbm9uLWV4aXN0aW5nIG9iamVjdFxuXHRcdC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cblx0XHR2YXIgZXJyb3JSZXEgPSBuZXcgVVJMUmVxdWVzdCggJ2Fzc2V0cy9nZW5lcmF0aW5nRXJyb3InICk7XG5cblx0XHR0aGlzLnVybExvYWRlckVycm9yVGVzdCA9IG5ldyBVUkxMb2FkZXIoKTtcblx0XHR0aGlzLnVybExvYWRlckVycm9yVGVzdC5kYXRhRm9ybWF0ID0gVVJMTG9hZGVyRGF0YUZvcm1hdC5URVhUO1xuXHRcdHRoaXMudXJsTG9hZGVyRXJyb3JUZXN0LmFkZEV2ZW50TGlzdGVuZXIoVVJMTG9hZGVyRXZlbnQuTE9BRF9DT01QTEVURSwgKGV2ZW50OlVSTExvYWRlckV2ZW50KSA9PiAgdGhpcy5lcnJvckNvbXBsZXRlKGV2ZW50KSk7XG5cdFx0dGhpcy51cmxMb2FkZXJFcnJvclRlc3QuYWRkRXZlbnRMaXN0ZW5lcihVUkxMb2FkZXJFdmVudC5MT0FEX0VSUk9SLCAoZXZlbnQ6VVJMTG9hZGVyRXZlbnQpID0+IHRoaXMuaW9FcnJvcihldmVudCkpO1xuXHRcdHRoaXMudXJsTG9hZGVyRXJyb3JUZXN0LmFkZEV2ZW50TGlzdGVuZXIoVVJMTG9hZGVyRXZlbnQuSFRUUF9TVEFUVVMsIChldmVudDpVUkxMb2FkZXJFdmVudCkgPT4gdGhpcy5odHRwU3RhdHVzQ2hhbmdlKGV2ZW50KSk7XG5cdFx0dGhpcy51cmxMb2FkZXJFcnJvclRlc3QubG9hZCggZXJyb3JSZXEgKTtcblxuXHRcdC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdFx0Ly8gR0VUIFVSTCBWYXJzIC0gZ2V0IFVSTCB2YXJpYWJsZXNcblx0XHQvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5cdFx0dmFyIGNzclJlcSA9IG5ldyBVUkxSZXF1ZXN0KCAnYXNzZXRzL2dldFVybFZhcnMucGhwJyApO1xuXG5cdFx0dGhpcy51cmxMb2FkZXJHZXRVUkxWYXJzID0gbmV3IFVSTExvYWRlcigpO1xuXHRcdHRoaXMudXJsTG9hZGVyR2V0VVJMVmFycy5kYXRhRm9ybWF0ID0gVVJMTG9hZGVyRGF0YUZvcm1hdC5WQVJJQUJMRVM7XG5cdFx0dGhpcy51cmxMb2FkZXJHZXRVUkxWYXJzLmFkZEV2ZW50TGlzdGVuZXIoVVJMTG9hZGVyRXZlbnQuTE9BRF9FUlJPUiwgKGV2ZW50OlVSTExvYWRlckV2ZW50KSA9PiB0aGlzLmlvRXJyb3IoZXZlbnQpKTtcblx0XHR0aGlzLnVybExvYWRlckdldFVSTFZhcnMuYWRkRXZlbnRMaXN0ZW5lcihVUkxMb2FkZXJFdmVudC5MT0FEX0NPTVBMRVRFLCAoZXZlbnQ6VVJMTG9hZGVyRXZlbnQpID0+IHRoaXMuZ2V0VVJMVmFyc0NvbXBsZXRlKGV2ZW50KSk7XG5cdFx0dGhpcy51cmxMb2FkZXJHZXRVUkxWYXJzLmxvYWQoIGNzclJlcSApO1xuXG5cdFx0Ly8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0XHQvLyBMT0FEIEJpbmFyeSBmaWxlXG5cdFx0Ly8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuXHRcdHZhciBiaW5SZXEgPSBuZXcgVVJMUmVxdWVzdCggJ2Fzc2V0cy9zdXphbm5lLmF3ZCcgKTtcblxuXHRcdHRoaXMudXJsTG9hZGVyQmluYXJ5ID0gbmV3IFVSTExvYWRlciggICk7XG5cdFx0dGhpcy51cmxMb2FkZXJCaW5hcnkuZGF0YUZvcm1hdCA9IFVSTExvYWRlckRhdGFGb3JtYXQuQklOQVJZO1xuXHRcdHRoaXMudXJsTG9hZGVyQmluYXJ5LmFkZEV2ZW50TGlzdGVuZXIoVVJMTG9hZGVyRXZlbnQuTE9BRF9FUlJPUiwgKGV2ZW50OlVSTExvYWRlckV2ZW50KSA9PiB0aGlzLmlvRXJyb3IoZXZlbnQpKTtcblx0XHR0aGlzLnVybExvYWRlckJpbmFyeS5hZGRFdmVudExpc3RlbmVyKFVSTExvYWRlckV2ZW50LkxPQURfQ09NUExFVEUsIChldmVudDpVUkxMb2FkZXJFdmVudCkgPT4gdGhpcy5iaW5GaWxlTG9hZGVkKGV2ZW50KSk7XG5cdFx0dGhpcy51cmxMb2FkZXJCaW5hcnkubG9hZCggYmluUmVxICk7XG5cblx0XHQvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHRcdC8vIExPQUQgQmxvYiBmaWxlXG5cdFx0Ly8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuXHRcdHZhciBibG9iUmVxID0gbmV3IFVSTFJlcXVlc3QoICdhc3NldHMvMi5wbmcnICk7XG5cblx0XHR0aGlzLnVybExvYWRlckJsb2IgPSBuZXcgVVJMTG9hZGVyKCAgKTtcblx0XHR0aGlzLnVybExvYWRlckJsb2IuZGF0YUZvcm1hdCA9IFVSTExvYWRlckRhdGFGb3JtYXQuQkxPQjtcblx0XHR0aGlzLnVybExvYWRlckJsb2IuYWRkRXZlbnRMaXN0ZW5lcihVUkxMb2FkZXJFdmVudC5MT0FEX0NPTVBMRVRFLCAoZXZlbnQ6VVJMTG9hZGVyRXZlbnQpID0+IHRoaXMuYmxvYkZpbGVMb2FkZWQoZXZlbnQpKTtcblx0XHR0aGlzLnVybExvYWRlckJsb2IubG9hZCggYmxvYlJlcSApO1xuXG5cdFx0Ly8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0XHQvLyBBUlJBWV9CVUZGRVIgVGVzdFxuXHRcdC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cblx0XHR2YXIgYXJyQlJlcSA9IG5ldyBVUkxSZXF1ZXN0KCAnYXNzZXRzLzEuanBnJyApO1xuXG5cdFx0dGhpcy51cmxMb2FkZXJBcnJiID0gbmV3IFVSTExvYWRlciggICk7XG5cdFx0dGhpcy51cmxMb2FkZXJBcnJiLmRhdGFGb3JtYXQgPSBVUkxMb2FkZXJEYXRhRm9ybWF0LkFSUkFZX0JVRkZFUjtcblx0XHR0aGlzLnVybExvYWRlckFycmIuYWRkRXZlbnRMaXN0ZW5lcihVUkxMb2FkZXJFdmVudC5MT0FEX0NPTVBMRVRFLCAoZXZlbnQ6VVJMTG9hZGVyRXZlbnQpID0+IHRoaXMuYXJyYXlCdWZmZXJMb2FkZWQoZXZlbnQpKTtcblx0XHR0aGlzLnVybExvYWRlckFycmIubG9hZCggYXJyQlJlcSApO1xuXHR9XG5cblx0cHJpdmF0ZSBhcnJheUJ1ZmZlckxvYWRlZCggZXZlbnQ6VVJMTG9hZGVyRXZlbnQgKTp2b2lkXG5cdHtcblx0XHR2YXIgYXJyYXlCdWZmZXIgPSB0aGlzLnVybExvYWRlckFycmIuZGF0YTtcblx0XHR2YXIgYnl0ZUFycmF5ID0gbmV3IFVpbnQ4QXJyYXkoYXJyYXlCdWZmZXIpO1xuXG5cdFx0Y29uc29sZS5sb2coICdVUkxMb2FkZXJUZXN0cy5hcnJheUJ1ZmZlckxvYWRlZCcgLCBieXRlQXJyYXlbMV0pO1xuXG5cdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBieXRlQXJyYXkuYnl0ZUxlbmd0aDsgaSsrKSB7XG5cdFx0XHQvL2NvbnNvbGUubG9nKCBieXRlQXJyYXlbaV0gKTtcblx0XHR9XG5cdH1cblxuXHRwcml2YXRlIGJsb2JGaWxlTG9hZGVkKCBldmVudDpVUkxMb2FkZXJFdmVudCApOnZvaWRcblx0e1xuXHRcdHZhciBibG9iPSBuZXcgQmxvYihbdGhpcy51cmxMb2FkZXJCbG9iLmRhdGFdLCB7dHlwZTogJ2ltYWdlL3BuZyd9KTtcblx0XHR2YXIgaW1nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7XG5cdFx0XHRpbWcuc3JjICA9IHRoaXMuY3JlYXRlT2JqZWN0VVJMKCBibG9iICk7Ly93aW5kb3dbJ1VSTCddWydjcmVhdGVPYmplY3RVUkwnXShibG9iKTtcblx0XHRcdGltZy5vbmxvYWQgID0gZnVuY3Rpb24oZSkge1xuXHRcdFx0XHR3aW5kb3dbJ1VSTCddWydyZXZva2VPYmplY3RVUkwnXShpbWcuc3JjKTsgLy8gQ2xlYW4gdXAgYWZ0ZXIgeW91cnNlbGYuXG5cdFx0XHR9O1xuXG5cdFx0Y29uc29sZS5sb2coICdVUkxMb2FkZXJUZXN0cy5ibG9iRmlsZUxvYWRlZCcgLCBibG9iICk7XG5cblx0XHRkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKCBpbWcgKTtcblx0fVxuXG5cdHByaXZhdGUgY3JlYXRlT2JqZWN0VVJMKCBmaWxlQmxvYiApXG5cdHtcblx0XHQvLyBGb3Igc29tZSByZWFzb24gVHlwZVNjcmlwdCBoYXMgXCJ3aW5kb3cuVVJMLmNyZWF0ZU9iamVjdFVSTFwiIGluIGl0J3MgZGljdGlvbmFyeSAtXG5cdFx0Ly8gYnV0IHdpbmRvdy5VUkwgY2F1c2VzIGFuIGVycm9yXG5cdFx0Ly8gY2Fubm90IG1ha2UgbXkgb3duIC5kLnRzIGZpbGUgZWl0aGVyICggcmVzdWx0cyBpbiBkdXBsaWNhdGUgZGVmaW5pdGlvbiBlcnJvciApXG5cdFx0Ly8gVGhpcyBIQUNLIGdldHMgaXQgdG8gd29yazogd2luZG93WydVUkwnXVsnY3JlYXRlT2JqZWN0VVJMJ11cblx0XHRpZiggd2luZG93WydVUkwnXSApe1xuXHRcdFx0aWYgKCB3aW5kb3dbJ1VSTCddWydjcmVhdGVPYmplY3RVUkwnXSApIHtcblx0XHRcdFx0cmV0dXJuIHdpbmRvd1snVVJMJ11bJ2NyZWF0ZU9iamVjdFVSTCddKCBmaWxlQmxvYiApO1xuXHRcdFx0fVxuXHRcdH0gZWxzZSB7XG5cdFx0XHRpZiAoIHdpbmRvd1snd2Via2l0VVJMJ10gKXtcblx0XHRcdFx0cmV0dXJuIHdpbmRvd1snd2Via2l0VVJMJ11bJ2NyZWF0ZU9iamVjdFVSTCddKCBmaWxlQmxvYiApO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiBudWxsO1xuXHR9XG5cblx0cHJpdmF0ZSBiaW5GaWxlTG9hZGVkKGV2ZW50OlVSTExvYWRlckV2ZW50KTp2b2lkXG5cdHtcblx0XHR2YXIgbG9hZGVyOlVSTExvYWRlciA9IGV2ZW50LnRhcmdldDtcblx0XHRjb25zb2xlLmxvZyggJ1VSTExvYWRlclRlc3RzLmJpbkZpbGVMb2FkZWQnICwgbG9hZGVyLmRhdGEubGVuZ3RoICk7XG5cdH1cblxuXHRwcml2YXRlIGdldFVSTFZhcnNDb21wbGV0ZShldmVudDpVUkxMb2FkZXJFdmVudCk6dm9pZFxuXHR7XG5cdFx0dmFyIGxvYWRlcjpVUkxMb2FkZXIgPSBldmVudC50YXJnZXQ7XG5cdFx0Y29uc29sZS5sb2coICdVUkxMb2FkZXJUZXN0cy5nZXRVUkxWYXJzQ29tcGxldGUnICwgbG9hZGVyLmRhdGEgKTtcblx0fVxuXG5cdHByaXZhdGUgaHR0cFN0YXR1c0NoYW5nZShldmVudDpVUkxMb2FkZXJFdmVudCk6dm9pZFxuXHR7XG5cdFx0Y29uc29sZS5sb2coICdVUkxMb2FkZXJUZXN0cy5odHRwU3RhdHVzQ2hhbmdlJyAsIGV2ZW50LnRhcmdldC5zdGF0dXMgKTtcblx0fVxuXG5cdHByaXZhdGUgaW9FcnJvcihldmVudDpVUkxMb2FkZXJFdmVudCk6dm9pZFxuXHR7XG5cdFx0dmFyIGxvYWRlcjpVUkxMb2FkZXIgPSBldmVudC50YXJnZXQ7XG5cdFx0Y29uc29sZS5sb2coICdVUkxMb2FkZXJUZXN0cy5pb0Vycm9yJyAsIGxvYWRlci51cmwgKTtcblx0fVxuXG5cdHByaXZhdGUgZXJyb3JDb21wbGV0ZSggZXZlbnQgKTp2b2lkXG5cdHtcblx0XHR2YXIgbG9hZGVyOlVSTExvYWRlciA9IGV2ZW50LnRhcmdldDtcblx0XHRjb25zb2xlLmxvZyggJ0xvYWRlci5lcnJvckNvbXBsZXRlJyApOy8vLCBsb2FkZXIuZGF0YSApO1xuXHR9XG5cblx0cHJpdmF0ZSBwb3N0VVJMVGVzdENvbXBsZXRlKGV2ZW50OlVSTExvYWRlckV2ZW50KTp2b2lkXG5cdHtcblx0XHR2YXIgbG9hZGVyOlVSTExvYWRlciA9IGV2ZW50LnRhcmdldDtcblx0XHRjb25zb2xlLmxvZyggJ1VSTExvYWRlclRlc3RzLnBvc3RVUkxUZXN0Q29tcGxldGUnICwgbG9hZGVyLmRhdGEgKTtcblx0fVxuXG5cdHByaXZhdGUgZ2V0Q3N2Q29tcGxldGUoZXZlbnQ6VVJMTG9hZGVyRXZlbnQpOnZvaWRcblx0e1xuXHRcdHZhciBsb2FkZXI6VVJMTG9hZGVyID0gZXZlbnQudGFyZ2V0O1xuXHRcdGNvbnNvbGUubG9nKCAnVVJMTG9hZGVyVGVzdHMuZ2V0Q3N2Q29tcGxldGUnICk7Ly8sIGxvYWRlci5kYXRhICk7XG5cdH1cblxuXHRwcml2YXRlIGdldENzdk9wZW4oZXZlbnQ6VVJMTG9hZGVyRXZlbnQpOnZvaWRcblx0e1xuXHRcdHZhciBsb2FkZXI6VVJMTG9hZGVyID0gZXZlbnQudGFyZ2V0O1xuXHRcdGNvbnNvbGUubG9nKCAnVVJMTG9hZGVyVGVzdHMuZ2V0Q3N2U3RhcnQnICk7XG5cdH1cbn0iXX0=