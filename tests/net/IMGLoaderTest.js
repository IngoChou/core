var URLLoader = require("awayjs-core/lib/net/URLLoader");
var URLLoaderDataFormat = require("awayjs-core/lib/net/URLLoaderDataFormat");
var URLRequest = require("awayjs-core/lib/net/URLRequest");
var Event = require("awayjs-core/lib/events/Event");
var IOErrorEvent = require("awayjs-core/lib/events/IOErrorEvent");
var ParserUtils = require("awayjs-core/lib/parsers/ParserUtils");
var IMGLoaderTest = (function () {
    function IMGLoaderTest() {
        //-----------------------------------------------------------------------------------------------
        // load a png
        //-----------------------------------------------------------------------------------------------
        var _this = this;
        var pngURLrq = new URLRequest('assets/2.png');
        this.pngLoader = new URLLoader();
        this.pngLoader.dataFormat = URLLoaderDataFormat.BLOB;
        this.pngLoader.addEventListener(Event.COMPLETE, function (event) { return _this.pngLoaderComplete(event); });
        this.pngLoader.addEventListener(IOErrorEvent.IO_ERROR, function (event) { return _this.ioError(event); });
        this.pngLoader.load(pngURLrq);
        //-----------------------------------------------------------------------------------------------
        // Load a jpg
        //-----------------------------------------------------------------------------------------------
        var jpgURLrq = new URLRequest('assets/1.jpg');
        this.jpgLoader = new URLLoader();
        this.jpgLoader.dataFormat = URLLoaderDataFormat.BLOB;
        this.jpgLoader.addEventListener(Event.COMPLETE, function (event) { return _this.jpgLoaderComplete(event); });
        this.jpgLoader.addEventListener(IOErrorEvent.IO_ERROR, function (event) { return _this.ioError(event); });
        this.jpgLoader.load(jpgURLrq);
        //-----------------------------------------------------------------------------------------------
        // Load file of wrong format
        //-----------------------------------------------------------------------------------------------
        var notURLrq = new URLRequest('assets/data.txt');
        this.noAnImageLoader = new URLLoader();
        this.noAnImageLoader.dataFormat = URLLoaderDataFormat.BLOB;
        this.noAnImageLoader.addEventListener(Event.COMPLETE, function (event) { return _this.noAnImageLoaderComplete(event); });
        this.noAnImageLoader.addEventListener(IOErrorEvent.IO_ERROR, function (event) { return _this.ioError(event); });
        this.noAnImageLoader.load(notURLrq);
        //-----------------------------------------------------------------------------------------------
        // Load image that does not exist
        //-----------------------------------------------------------------------------------------------
        var wrongURLrq = new URLRequest('assets/iDontExist.png');
        this.wrongURLLoader = new URLLoader();
        this.wrongURLLoader.dataFormat = URLLoaderDataFormat.BLOB;
        this.wrongURLLoader.addEventListener(Event.COMPLETE, function (event) { return _this.wrongURLLoaderComplete(event); });
        this.wrongURLLoader.addEventListener(IOErrorEvent.IO_ERROR, function (event) { return _this.ioError(event); });
        this.wrongURLLoader.load(wrongURLrq);
    }
    IMGLoaderTest.prototype.pngLoaderComplete = function (e) {
        this.logSuccessfullLoad(e);
        var imgLoader = e.target;
        document.body.appendChild(ParserUtils.blobToImage(imgLoader.data));
    };
    IMGLoaderTest.prototype.jpgLoaderComplete = function (e) {
        this.logSuccessfullLoad(e);
        var imgLoader = e.target;
        document.body.appendChild(ParserUtils.blobToImage(imgLoader.data));
    };
    IMGLoaderTest.prototype.noAnImageLoaderComplete = function (e) {
        this.logSuccessfullLoad(e);
    };
    IMGLoaderTest.prototype.wrongURLLoaderComplete = function (e) {
        this.logSuccessfullLoad(e);
    };
    IMGLoaderTest.prototype.logSuccessfullLoad = function (event) {
        var imgLoader = event.target;
        console.log('IMG.Event.Complete', imgLoader.url);
    };
    IMGLoaderTest.prototype.ioError = function (event) {
        var imgLoader = event.target;
        console.log('ioError', imgLoader.url);
    };
    IMGLoaderTest.prototype.abortError = function (event) {
        var imgLoader = event.target;
        console.log('abortError', imgLoader.url);
    };
    return IMGLoaderTest;
})();

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5ldC9pbWdsb2FkZXJ0ZXN0LnRzIl0sIm5hbWVzIjpbIklNR0xvYWRlclRlc3QiLCJJTUdMb2FkZXJUZXN0LmNvbnN0cnVjdG9yIiwiSU1HTG9hZGVyVGVzdC5wbmdMb2FkZXJDb21wbGV0ZSIsIklNR0xvYWRlclRlc3QuanBnTG9hZGVyQ29tcGxldGUiLCJJTUdMb2FkZXJUZXN0Lm5vQW5JbWFnZUxvYWRlckNvbXBsZXRlIiwiSU1HTG9hZGVyVGVzdC53cm9uZ1VSTExvYWRlckNvbXBsZXRlIiwiSU1HTG9hZGVyVGVzdC5sb2dTdWNjZXNzZnVsbExvYWQiLCJJTUdMb2FkZXJUZXN0LmlvRXJyb3IiLCJJTUdMb2FkZXJUZXN0LmFib3J0RXJyb3IiXSwibWFwcGluZ3MiOiJBQUFBLElBQU8sU0FBUyxXQUFhLCtCQUErQixDQUFDLENBQUM7QUFDOUQsSUFBTyxtQkFBbUIsV0FBVyx5Q0FBeUMsQ0FBQyxDQUFDO0FBQ2hGLElBQU8sVUFBVSxXQUFhLGdDQUFnQyxDQUFDLENBQUM7QUFDaEUsSUFBTyxLQUFLLFdBQWMsOEJBQThCLENBQUMsQ0FBQztBQUMxRCxJQUFPLFlBQVksV0FBYSxxQ0FBcUMsQ0FBQyxDQUFDO0FBQ3ZFLElBQU8sV0FBVyxXQUFhLHFDQUFxQyxDQUFDLENBQUM7QUFFdEUsSUFBTSxhQUFhO0lBUWxCQSxTQVJLQSxhQUFhQTtRQVdqQkMsaUdBQWlHQTtRQUNqR0EsYUFBYUE7UUFDYkEsaUdBQWlHQTtRQWJuR0EsaUJBdUhDQTtRQXhHQ0EsSUFBSUEsUUFBUUEsR0FBY0EsSUFBSUEsVUFBVUEsQ0FBRUEsY0FBY0EsQ0FBQ0EsQ0FBQ0E7UUFFMURBLElBQUlBLENBQUNBLFNBQVNBLEdBQVlBLElBQUlBLFNBQVNBLEVBQUVBLENBQUNBO1FBQzFDQSxJQUFJQSxDQUFDQSxTQUFTQSxDQUFDQSxVQUFVQSxHQUFHQSxtQkFBbUJBLENBQUNBLElBQUlBLENBQUNBO1FBQ3JEQSxJQUFJQSxDQUFDQSxTQUFTQSxDQUFDQSxnQkFBZ0JBLENBQUVBLEtB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QSxDQUFDQSxrQkFBa0JBLENBQUVBLENBQUNBLENBQUVBLENBQUNBO0lBRTlCQSxDQUFDQTtJQUVPSiw4Q0FBc0JBLEdBQTlCQSxVQUFpQ0EsQ0FBU0E7UUFHekNLLElBQUlBLENBQUNBLGtCQUFrQkEsQ0FBRUEsQ0FBQ0EsQ0FBRUEsQ0FBQ0E7SUFFOUJBLENBQUNBO0lBRU9MLDBDQUFrQkEsR0FBMUJBLFVBQTRCQSxLQUFhQTtRQUd4Q00sSUFBSUEsU0FBU0EsR0FBMkJBLEtBQUtBLENBQUNBLE1BQU1BLENBQUNBO1FBQ3JEQSxPQUFPQSxDQUFDQSxHQUFHQSxDQUFFQSxvQkFBb0JBLEVBQUdBLFNBQVNBLENBQUNBLEdBQUdBLENBQUVBLENBQUNBO0lBRXJEQSxDQUFDQTtJQUVPTiwrQkFBT0EsR0FBZkEsVUFBa0JBLEtBQW9CQTtRQUdyQ08sSUFBSUEsU0FBU0EsR0FBMkJBLEtBQUtBLENBQUNBLE1BQU1BLENBQUNBO1FBQ3JEQSxPQUFPQSxDQUFDQSxHQUFHQSxDQUFFQSxTQUFTQSxFQUFHQSxTQUFTQSxDQUFDQSxHQUFHQSxDQUFFQSxDQUFDQTtJQUUxQ0EsQ0FBQ0E7SUFFT1Asa0NBQVVBLEdBQWxCQSxVQUFxQkEsS0FBYUE7UUFHakNRLElBQUlBLFNBQVNBLEdBQTJCQSxLQUFLQSxDQUFDQSxNQUFNQSxDQUFDQTtRQUNyREEsT0FBT0EsQ0FBQ0EsR0FBR0EsQ0FBRUEsWUFBWUEsRUFBR0EsU0FBU0EsQ0FBQ0EsR0FBR0EsQ0FBRUEsQ0FBQ0E7SUFFN0NBLENBQUNBO0lBRUZSLG9CQUFDQTtBQUFEQSxDQXZIQSxBQXVIQ0EsSUFBQSIsImZpbGUiOiJuZXQvSU1HTG9hZGVyVGVzdC5qcyIsInNvdXJjZVJvb3QiOiIuL3Rlc3RzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFVSTExvYWRlclx0XHRcdD0gcmVxdWlyZShcImF3YXlqcy1jb3JlL2xpYi9uZXQvVVJMTG9hZGVyXCIpO1xuaW1wb3J0IFVSTExvYWRlckRhdGFGb3JtYXRcdD0gcmVxdWlyZShcImF3YXlqcy1jb3JlL2xpYi9uZXQvVVJMTG9hZGVyRGF0YUZvcm1hdFwiKTtcbmltcG9ydCBVUkxSZXF1ZXN0XHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLWNvcmUvbGliL25ldC9VUkxSZXF1ZXN0XCIpO1xuaW1wb3J0IEV2ZW50XHRcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtY29yZS9saWIvZXZlbnRzL0V2ZW50XCIpO1xuaW1wb3J0IElPRXJyb3JFdmVudFx0XHRcdD0gcmVxdWlyZShcImF3YXlqcy1jb3JlL2xpYi9ldmVudHMvSU9FcnJvckV2ZW50XCIpO1xuaW1wb3J0IFBhcnNlclV0aWxzXHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLWNvcmUvbGliL3BhcnNlcnMvUGFyc2VyVXRpbHNcIik7XG5cbmNsYXNzIElNR0xvYWRlclRlc3RcbntcblxuXHRwcml2YXRlIHBuZ0xvYWRlciAgICAgICA6IFVSTExvYWRlcjtcblx0cHJpdmF0ZSBqcGdMb2FkZXIgICAgICAgOiBVUkxMb2FkZXI7XG5cdHByaXZhdGUgbm9BbkltYWdlTG9hZGVyIDogVVJMTG9hZGVyO1xuXHRwcml2YXRlIHdyb25nVVJMTG9hZGVyICA6IFVSTExvYWRlcjtcblxuXHRjb25zdHJ1Y3RvcigpXG5cdHtcblxuXHRcdC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0XHQvLyBsb2FkIGEgcG5nXG5cdFx0Ly8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5cdFx0dmFyIHBuZ1VSTHJxICAgICAgICAgICAgPSBuZXcgVVJMUmVxdWVzdCggJ2Fzc2V0cy8yLnBuZycpO1xuXG5cdFx0dGhpcy5wbmdMb2FkZXIgICAgICAgICAgPSBuZXcgVVJMTG9hZGVyKCk7XG5cdFx0dGhpcy5wbmdMb2FkZXIuZGF0YUZvcm1hdCA9IFVSTExvYWRlckRhdGFGb3JtYXQuQkxPQjtcblx0XHR0aGlzLnBuZ0xvYWRlci5hZGRFdmVudExpc3RlbmVyKCBFdmVudC5DT01QTEVURSAsICggZXZlbnQgOiBFdmVudCkgPT4gdGhpcy5wbmdMb2FkZXJDb21wbGV0ZShldmVudCkgKTtcblx0XHR0aGlzLnBuZ0xvYWRlci5hZGRFdmVudExpc3RlbmVyKCBJT0Vycm9yRXZlbnQuSU9fRVJST1IgLCAoIGV2ZW50IDogSU9FcnJvckV2ZW50ICkgPT4gdGhpcy5pb0Vycm9yKGV2ZW50KSApO1xuXHRcdHRoaXMucG5nTG9hZGVyLmxvYWQoIHBuZ1VSTHJxICk7XG5cblx0XHQvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdFx0Ly8gTG9hZCBhIGpwZ1xuXHRcdC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuXHRcdHZhciBqcGdVUkxycSAgICAgICAgICAgID0gbmV3IFVSTFJlcXVlc3QoICdhc3NldHMvMS5qcGcnKTtcblxuXHRcdHRoaXMuanBnTG9hZGVyICAgICAgICAgID0gbmV3IFVSTExvYWRlcigpO1xuXHRcdHRoaXMuanBnTG9hZGVyLmRhdGFGb3JtYXQgPSBVUkxMb2FkZXJEYXRhRm9ybWF0LkJMT0I7XG5cdFx0dGhpcy5qcGdMb2FkZXIuYWRkRXZlbnRMaXN0ZW5lciggRXZlbnQuQ09NUExFVEUgLCAoIGV2ZW50IDogRXZlbnQpID0+IHRoaXMuanBnTG9hZGVyQ29tcGxldGUoZXZlbnQpICk7XG5cdFx0dGhpcy5qcGdMb2FkZXIuYWRkRXZlbnRMaXN0ZW5lciggSU9FcnJvckV2ZW50LklPX0VSUk9SICwgKCBldmVudCA6IElPRXJyb3JFdmVudCApID0+IHRoaXMuaW9FcnJvcihldmVudCkgKTtcblx0XHR0aGlzLmpwZ0xvYWRlci5sb2FkKCBqcGdVUkxycSApO1xuXG5cdFx0Ly8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHRcdC8vIExvYWQgZmlsZSBvZiB3cm9uZyBmb3JtYXRcblx0XHQvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cblx0XHR2YXIgbm90VVJMcnEgICAgICAgICAgICA9IG5ldyBVUkxSZXF1ZXN0KCAnYXNzZXRzL2RhdGEudHh0Jyk7XG5cblx0XHR0aGlzLm5vQW5JbWFnZUxvYWRlciAgICA9IG5ldyBVUkxMb2FkZXIoKTtcblx0XHR0aGlzLm5vQW5JbWFnZUxvYWRlci5kYXRhRm9ybWF0ID0gVVJMTG9hZGVyRGF0YUZvcm1hdC5CTE9CO1xuXHRcdHRoaXMubm9BbkltYWdlTG9hZGVyLmFkZEV2ZW50TGlzdGVuZXIoIEV2ZW50LkNPTVBMRVRFICwgKCBldmVudCA6IEV2ZW50KSA9PiB0aGlzLm5vQW5JbWFnZUxvYWRlckNvbXBsZXRlKGV2ZW50KSApO1xuXHRcdHRoaXMubm9BbkltYWdlTG9hZGVyLmFkZEV2ZW50TGlzdGVuZXIoIElPRXJyb3JFdmVudC5JT19FUlJPUiAsICggZXZlbnQgOiBJT0Vycm9yRXZlbnQgKSA9PiB0aGlzLmlvRXJyb3IoZXZlbnQpICk7XG5cdFx0dGhpcy5ub0FuSW1hZ2VMb2FkZXIubG9hZCggbm90VVJMcnEgKVxuXG5cdFx0Ly8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHRcdC8vIExvYWQgaW1hZ2UgdGhhdCBkb2VzIG5vdCBleGlzdFxuXHRcdC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuXHRcdHZhciB3cm9uZ1VSTHJxICAgICAgICAgICAgPSBuZXcgVVJMUmVxdWVzdCggJ2Fzc2V0cy9pRG9udEV4aXN0LnBuZycpO1xuXG5cdFx0dGhpcy53cm9uZ1VSTExvYWRlciAgICAgPSBuZXcgVVJMTG9hZGVyKCk7XG5cdFx0dGhpcy53cm9uZ1VSTExvYWRlci5kYXRhRm9ybWF0ID0gVVJMTG9hZGVyRGF0YUZvcm1hdC5CTE9CO1xuXHRcdHRoaXMud3JvbmdVUkxMb2FkZXIuYWRkRXZlbnRMaXN0ZW5lciggRXZlbnQuQ09NUExFVEUgLCAoIGV2ZW50IDogRXZlbnQpID0+IHRoaXMud3JvbmdVUkxMb2FkZXJDb21wbGV0ZShldmVudCkgKTtcblx0XHR0aGlzLndyb25nVVJMTG9hZGVyLmFkZEV2ZW50TGlzdGVuZXIoIElPRXJyb3JFdmVudC5JT19FUlJPUiAsICggZXZlbnQgOiBJT0Vycm9yRXZlbnQgKSA9PiB0aGlzLmlvRXJyb3IoZXZlbnQpICk7XG5cdFx0dGhpcy53cm9uZ1VSTExvYWRlci5sb2FkKCB3cm9uZ1VSTHJxICk7XG5cdH1cblxuXHRwcml2YXRlIHBuZ0xvYWRlckNvbXBsZXRlICggZSA6IEV2ZW50ICkgOiB2b2lkXG5cdHtcblxuXHRcdHRoaXMubG9nU3VjY2Vzc2Z1bGxMb2FkKCBlICk7XG5cblxuXHRcdHZhciBpbWdMb2FkZXIgOiBVUkxMb2FkZXIgPSA8VVJMTG9hZGVyPiBlLnRhcmdldDtcblx0XHRkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKCBQYXJzZXJVdGlscy5ibG9iVG9JbWFnZShpbWdMb2FkZXIuZGF0YSkgKTtcblxuXHR9XG5cblx0cHJpdmF0ZSBqcGdMb2FkZXJDb21wbGV0ZSAoIGUgOiBFdmVudCApIDogdm9pZFxuXHR7XG5cblx0XHR0aGlzLmxvZ1N1Y2Nlc3NmdWxsTG9hZCggZSApO1xuXG5cdFx0dmFyIGltZ0xvYWRlciA6IFVSTExvYWRlciA9IDxVUkxMb2FkZXI+IGUudGFyZ2V0O1xuXHRcdGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoIFBhcnNlclV0aWxzLmJsb2JUb0ltYWdlKGltZ0xvYWRlci5kYXRhKSApO1xuXG5cdH1cblxuXHRwcml2YXRlIG5vQW5JbWFnZUxvYWRlckNvbXBsZXRlICggZSA6IEV2ZW50ICkgOiB2b2lkXG5cdHtcblxuXHRcdHRoaXMubG9nU3VjY2Vzc2Z1bGxMb2FkKCBlICk7XG5cblx0fVxuXG5cdHByaXZhdGUgd3JvbmdVUkxMb2FkZXJDb21wbGV0ZSAoIGUgOiBFdmVudCApIDogdm9pZFxuXHR7XG5cblx0XHR0aGlzLmxvZ1N1Y2Nlc3NmdWxsTG9hZCggZSApO1xuXG5cdH1cblxuXHRwcml2YXRlIGxvZ1N1Y2Nlc3NmdWxsTG9hZCggZXZlbnQgOiBFdmVudCkgOiB2b2lkXG5cdHtcblxuXHRcdHZhciBpbWdMb2FkZXIgOiBVUkxMb2FkZXIgPSA8VVJMTG9hZGVyPiBldmVudC50YXJnZXQ7XG5cdFx0Y29uc29sZS5sb2coICdJTUcuRXZlbnQuQ29tcGxldGUnICwgaW1nTG9hZGVyLnVybCApO1xuXG5cdH1cblxuXHRwcml2YXRlIGlvRXJyb3IgKCBldmVudCA6IElPRXJyb3JFdmVudCApIDogdm9pZFxuXHR7XG5cblx0XHR2YXIgaW1nTG9hZGVyIDogVVJMTG9hZGVyID0gPFVSTExvYWRlcj4gZXZlbnQudGFyZ2V0O1xuXHRcdGNvbnNvbGUubG9nKCAnaW9FcnJvcicgLCBpbWdMb2FkZXIudXJsICk7XG5cblx0fVxuXG5cdHByaXZhdGUgYWJvcnRFcnJvciAoIGV2ZW50IDogRXZlbnQgKSA6IHZvaWRcblx0e1xuXG5cdFx0dmFyIGltZ0xvYWRlciA6IFVSTExvYWRlciA9IDxVUkxMb2FkZXI+IGV2ZW50LnRhcmdldDtcblx0XHRjb25zb2xlLmxvZyggJ2Fib3J0RXJyb3InICwgaW1nTG9hZGVyLnVybCApO1xuXG5cdH1cblxufSJdfQ==