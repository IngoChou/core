var URLLoader = require("awayjs-core/lib/net/URLLoader");
var URLLoaderDataFormat = require("awayjs-core/lib/net/URLLoaderDataFormat");
var URLRequest = require("awayjs-core/lib/net/URLRequest");
var Event = require("awayjs-core/lib/events/Event");
var IOErrorEvent = require("awayjs-core/lib/events/IOErrorEvent");
var ParserUtils = require("awayjs-core/lib/parsers/ParserUtils");
var IMGLoaderTest = (function () {
    function IMGLoaderTest() {
        //-----------------------------------------------------------------------------------------------
        // load a png
        //-----------------------------------------------------------------------------------------------
        var _this = this;
        this.pngLoader = new URLLoader();
        this.pngLoader.dataFormat = URLLoaderDataFormat.BLOB;
        this.pngLoader.addEventListener(Event.COMPLETE, function (event) { return _this.pngLoaderComplete(event); });
        this.pngLoader.addEventListener(IOErrorEvent.IO_ERROR, function (event) { return _this.ioError(event); });
        this.pngLoader.load(new URLRequest('assets/2.png'));
        //-----------------------------------------------------------------------------------------------
        // Load a jpg
        //-----------------------------------------------------------------------------------------------
        this.jpgLoader = new URLLoader();
        this.jpgLoader.dataFormat = URLLoaderDataFormat.BLOB;
        this.jpgLoader.addEventListener(Event.COMPLETE, function (event) { return _this.jpgLoaderComplete(event); });
        this.jpgLoader.addEventListener(IOErrorEvent.IO_ERROR, function (event) { return _this.ioError(event); });
        this.jpgLoader.load(new URLRequest('assets/1.jpg'));
        //-----------------------------------------------------------------------------------------------
        // Load file of wrong format
        //-----------------------------------------------------------------------------------------------
        this.noAnImageLoader = new URLLoader();
        this.noAnImageLoader.dataFormat = URLLoaderDataFormat.BLOB;
        this.noAnImageLoader.addEventListener(Event.COMPLETE, function (event) { return _this.noAnImageLoaderComplete(event); });
        this.noAnImageLoader.addEventListener(IOErrorEvent.IO_ERROR, function (event) { return _this.ioError(event); });
        this.noAnImageLoader.load(new URLRequest('assets/data.txt'));
        //-----------------------------------------------------------------------------------------------
        // Load image that does not exist
        //-----------------------------------------------------------------------------------------------
        this.wrongURLLoader = new URLLoader();
        this.wrongURLLoader.dataFormat = URLLoaderDataFormat.BLOB;
        this.wrongURLLoader.addEventListener(Event.COMPLETE, function (event) { return _this.wrongURLLoaderComplete(event); });
        this.wrongURLLoader.addEventListener(IOErrorEvent.IO_ERROR, function (event) { return _this.ioError(event); });
        this.wrongURLLoader.load(new URLRequest('assets/iDontExist.png'));
    }
    IMGLoaderTest.prototype.pngLoaderComplete = function (e) {
        this.logSuccessfullLoad(e);
        var imgLoader = e.target;
        document.body.appendChild(ParserUtils.blobToImage(imgLoader.data));
    };
    IMGLoaderTest.prototype.jpgLoaderComplete = function (e) {
        this.logSuccessfullLoad(e);
        var imgLoader = e.target;
        document.body.appendChild(ParserUtils.blobToImage(imgLoader.data));
    };
    IMGLoaderTest.prototype.noAnImageLoaderComplete = function (e) {
        this.logSuccessfullLoad(e);
    };
    IMGLoaderTest.prototype.wrongURLLoaderComplete = function (e) {
        this.logSuccessfullLoad(e);
    };
    IMGLoaderTest.prototype.logSuccessfullLoad = function (event) {
        var imgLoader = event.target;
        console.log('IMG.Event.Complete', imgLoader.url);
    };
    IMGLoaderTest.prototype.ioError = function (event) {
        var imgLoader = event.target;
        console.log('ioError', imgLoader.url);
    };
    IMGLoaderTest.prototype.abortError = function (event) {
        var imgLoader = event.target;
        console.log('abortError', imgLoader.url);
    };
    return IMGLoaderTest;
})();

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5ldC9JTUdMb2FkZXJUZXN0LnRzIl0sIm5hbWVzIjpbIklNR0xvYWRlclRlc3QiLCJJTUdMb2FkZXJUZXN0LmNvbnN0cnVjdG9yIiwiSU1HTG9hZGVyVGVzdC5wbmdMb2FkZXJDb21wbGV0ZSIsIklNR0xvYWRlclRlc3QuanBnTG9hZGVyQ29tcGxldGUiLCJJTUdMb2FkZXJUZXN0Lm5vQW5JbWFnZUxvYWRlckNvbXBsZXRlIiwiSU1HTG9hZGVyVGVzdC53cm9uZ1VSTExvYWRlckNvbXBsZXRlIiwiSU1HTG9hZGVyVGVzdC5sb2dTdWNjZXNzZnVsbExvYWQiLCJJTUdMb2FkZXJUZXN0LmlvRXJyb3IiLCJJTUdMb2FkZXJUZXN0LmFib3J0RXJyb3IiXSwibWFwcGluZ3MiOiJBQUFBLElBQU8sU0FBUyxXQUFhLCtCQUErQixDQUFDLENBQUM7QUFDOUQsSUFBTyxtQkFBbUIsV0FBVyx5Q0FBeUMsQ0FBQyxDQUFDO0FBQ2hGLElBQU8sVUFBVSxXQUFhLGdDQUFnQyxDQUFDLENBQUM7QUFDaEUsSUFBTyxLQUFLLFdBQWMsOEJBQThCLENBQUMsQ0FBQztBQUMxRCxJQUFPLFlBQVksV0FBYSxxQ0FBcUMsQ0FBQyxDQUFDO0FBQ3ZFLElBQU8sV0FBVyxXQUFhLHFDQUFxQyxDQUFDLENBQUM7QUFFdEUsSUFBTSxhQUFhO0lBT2xCQSxTQVBLQSxhQUFhQTtRQVVqQkMsaUdBQWlHQTtRQUNqR0EsYUFBYUE7UUFDYkEsaUdBQWlHQTtRQVpuR0EsaUJBOEZDQTtRQWhGQ0EsSUFBSUEsQ0FBQ0EsU0FBU0EsR0FBR0EsSUFBSUEsU0FBU0EsRUFBRUEsQ0FBQ0E7UUFDakNBLElBQUlBLENBQUNBLFNBQVNBLENBQUNBLFVBQVVBLEdBQUdBLG1CQUFtQkEsQ0FBQ0EsSUFBSUEsQ0FBQ0E7UUFDckRBLElBQUlBLENBQUNBLFNBQVNBLENBQUNBLGdCQUFnQkEsQ0FBQ0EsS0FBS0EsQ0FBQ0EsUUFBUUEsRUFBR0EsVUFBQ0EsS0FBV0EsSUFBS0EsT0FBQUEsS0FBSUEsQ0FBQ0EsaUJB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QSxDQUFDQTtJQUM1QkEsQ0FBQ0E7SUFFT0wsMENBQWtCQSxHQUExQkEsVUFBMkJBLEtBQVdBO1FBRXJDTSxJQUFJQSxTQUFTQSxHQUF5QkEsS0FBS0EsQ0FBQ0EsTUFBTUEsQ0FBQ0E7UUFDbkRBLE9BQU9BLENBQUNBLEdBQUdBLENBQUNBLG9CQUFvQkEsRUFBRUEsU0FBU0EsQ0FBQ0EsR0FBR0EsQ0FBQ0EsQ0FBQ0E7SUFDbERBLENBQUNBO0lBRU9OLCtCQUFPQSxHQUFmQSxVQUFnQkEsS0FBa0JBO1FBRWpDTyxJQUFJQSxTQUFTQSxHQUF5QkEsS0FBS0EsQ0FBQ0EsTUFBTUEsQ0FBQ0E7UUFDbkRBLE9BQU9BLENBQUNBLEdBQUdBLENBQUNBLFNBQVNBLEVBQUVBLFNBQVNBLENBQUNBLEdBQUdBLENBQUNBLENBQUNBO0lBQ3ZDQSxDQUFDQTtJQUVPUCxrQ0FBVUEsR0FBbEJBLFVBQW1CQSxLQUFXQTtRQUU3QlEsSUFBSUEsU0FBU0EsR0FBeUJBLEtBQUtBLENBQUNBLE1BQU1BLENBQUNBO1FBQ25EQSxPQUFPQSxDQUFDQSxHQUFHQSxDQUFDQSxZQUFZQSxFQUFFQSxTQUFTQSxDQUFDQSxHQUFHQSxDQUFDQSxDQUFDQTtJQUMxQ0EsQ0FBQ0E7SUFDRlIsb0JBQUNBO0FBQURBLENBOUZBLEFBOEZDQSxJQUFBIiwiZmlsZSI6Im5ldC9JTUdMb2FkZXJUZXN0LmpzIiwic291cmNlUm9vdCI6Ii4vdGVzdHMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgVVJMTG9hZGVyXHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLWNvcmUvbGliL25ldC9VUkxMb2FkZXJcIik7XG5pbXBvcnQgVVJMTG9hZGVyRGF0YUZvcm1hdFx0PSByZXF1aXJlKFwiYXdheWpzLWNvcmUvbGliL25ldC9VUkxMb2FkZXJEYXRhRm9ybWF0XCIpO1xuaW1wb3J0IFVSTFJlcXVlc3RcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtY29yZS9saWIvbmV0L1VSTFJlcXVlc3RcIik7XG5pbXBvcnQgRXZlbnRcdFx0XHRcdD0gcmVxdWlyZShcImF3YXlqcy1jb3JlL2xpYi9ldmVudHMvRXZlbnRcIik7XG5pbXBvcnQgSU9FcnJvckV2ZW50XHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLWNvcmUvbGliL2V2ZW50cy9JT0Vycm9yRXZlbnRcIik7XG5pbXBvcnQgUGFyc2VyVXRpbHNcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtY29yZS9saWIvcGFyc2Vycy9QYXJzZXJVdGlsc1wiKTtcblxuY2xhc3MgSU1HTG9hZGVyVGVzdFxue1xuXHRwcml2YXRlIHBuZ0xvYWRlcjpVUkxMb2FkZXI7XG5cdHByaXZhdGUganBnTG9hZGVyOlVSTExvYWRlcjtcblx0cHJpdmF0ZSBub0FuSW1hZ2VMb2FkZXI6VVJMTG9hZGVyO1xuXHRwcml2YXRlIHdyb25nVVJMTG9hZGVyOlVSTExvYWRlcjtcblxuXHRjb25zdHJ1Y3RvcigpXG5cdHtcblxuXHRcdC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0XHQvLyBsb2FkIGEgcG5nXG5cdFx0Ly8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHRcdFxuXHRcdHRoaXMucG5nTG9hZGVyID0gbmV3IFVSTExvYWRlcigpO1xuXHRcdHRoaXMucG5nTG9hZGVyLmRhdGFGb3JtYXQgPSBVUkxMb2FkZXJEYXRhRm9ybWF0LkJMT0I7XG5cdFx0dGhpcy5wbmdMb2FkZXIuYWRkRXZlbnRMaXN0ZW5lcihFdmVudC5DT01QTEVURSAsIChldmVudDpFdmVudCkgPT4gdGhpcy5wbmdMb2FkZXJDb21wbGV0ZShldmVudCkpO1xuXHRcdHRoaXMucG5nTG9hZGVyLmFkZEV2ZW50TGlzdGVuZXIoSU9FcnJvckV2ZW50LklPX0VSUk9SICwgKGV2ZW50OklPRXJyb3JFdmVudCkgPT4gdGhpcy5pb0Vycm9yKGV2ZW50KSk7XG5cdFx0dGhpcy5wbmdMb2FkZXIubG9hZChuZXcgVVJMUmVxdWVzdCgnYXNzZXRzLzIucG5nJykpO1xuXG5cdFx0Ly8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHRcdC8vIExvYWQgYSBqcGdcblx0XHQvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdFx0XG5cdFx0dGhpcy5qcGdMb2FkZXIgPSBuZXcgVVJMTG9hZGVyKCk7XG5cdFx0dGhpcy5qcGdMb2FkZXIuZGF0YUZvcm1hdCA9IFVSTExvYWRlckRhdGFGb3JtYXQuQkxPQjtcblx0XHR0aGlzLmpwZ0xvYWRlci5hZGRFdmVudExpc3RlbmVyKEV2ZW50LkNPTVBMRVRFICwgKGV2ZW50OkV2ZW50KSA9PiB0aGlzLmpwZ0xvYWRlckNvbXBsZXRlKGV2ZW50KSk7XG5cdFx0dGhpcy5qcGdMb2FkZXIuYWRkRXZlbnRMaXN0ZW5lcihJT0Vycm9yRXZlbnQuSU9fRVJST1IgLCAoZXZlbnQ6SU9FcnJvckV2ZW50KSA9PiB0aGlzLmlvRXJyb3IoZXZlbnQpKTtcblx0XHR0aGlzLmpwZ0xvYWRlci5sb2FkKG5ldyBVUkxSZXF1ZXN0KCdhc3NldHMvMS5qcGcnKSk7XG5cblx0XHQvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdFx0Ly8gTG9hZCBmaWxlIG9mIHdyb25nIGZvcm1hdFxuXHRcdC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0XHRcblx0XHR0aGlzLm5vQW5JbWFnZUxvYWRlciA9IG5ldyBVUkxMb2FkZXIoKTtcblx0XHR0aGlzLm5vQW5JbWFnZUxvYWRlci5kYXRhRm9ybWF0ID0gVVJMTG9hZGVyRGF0YUZvcm1hdC5CTE9CO1xuXHRcdHRoaXMubm9BbkltYWdlTG9hZGVyLmFkZEV2ZW50TGlzdGVuZXIoRXZlbnQuQ09NUExFVEUgLCAoZXZlbnQ6RXZlbnQpID0+IHRoaXMubm9BbkltYWdlTG9hZGVyQ29tcGxldGUoZXZlbnQpKTtcblx0XHR0aGlzLm5vQW5JbWFnZUxvYWRlci5hZGRFdmVudExpc3RlbmVyKElPRXJyb3JFdmVudC5JT19FUlJPUiAsIChldmVudDpJT0Vycm9yRXZlbnQpID0+IHRoaXMuaW9FcnJvcihldmVudCkpO1xuXHRcdHRoaXMubm9BbkltYWdlTG9hZGVyLmxvYWQobmV3IFVSTFJlcXVlc3QoJ2Fzc2V0cy9kYXRhLnR4dCcpKTtcblxuXHRcdC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0XHQvLyBMb2FkIGltYWdlIHRoYXQgZG9lcyBub3QgZXhpc3Rcblx0XHQvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdFx0XG5cdFx0dGhpcy53cm9uZ1VSTExvYWRlciA9IG5ldyBVUkxMb2FkZXIoKTtcblx0XHR0aGlzLndyb25nVVJMTG9hZGVyLmRhdGFGb3JtYXQgPSBVUkxMb2FkZXJEYXRhRm9ybWF0LkJMT0I7XG5cdFx0dGhpcy53cm9uZ1VSTExvYWRlci5hZGRFdmVudExpc3RlbmVyKEV2ZW50LkNPTVBMRVRFICwgKGV2ZW50OkV2ZW50KSA9PiB0aGlzLndyb25nVVJMTG9hZGVyQ29tcGxldGUoZXZlbnQpKTtcblx0XHR0aGlzLndyb25nVVJMTG9hZGVyLmFkZEV2ZW50TGlzdGVuZXIoSU9FcnJvckV2ZW50LklPX0VSUk9SICwgKGV2ZW50OklPRXJyb3JFdmVudCkgPT4gdGhpcy5pb0Vycm9yKGV2ZW50KSk7XG5cdFx0dGhpcy53cm9uZ1VSTExvYWRlci5sb2FkKG5ldyBVUkxSZXF1ZXN0KCdhc3NldHMvaURvbnRFeGlzdC5wbmcnKSk7XG5cdH1cblxuXHRwcml2YXRlIHBuZ0xvYWRlckNvbXBsZXRlKGU6RXZlbnQpXG5cdHtcblx0XHR0aGlzLmxvZ1N1Y2Nlc3NmdWxsTG9hZChlKTtcblx0XHRcblx0XHR2YXIgaW1nTG9hZGVyOlVSTExvYWRlciA9IDxVUkxMb2FkZXI+IGUudGFyZ2V0O1xuXHRcdGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoUGFyc2VyVXRpbHMuYmxvYlRvSW1hZ2UoaW1nTG9hZGVyLmRhdGEpKTtcblx0fVxuXG5cdHByaXZhdGUganBnTG9hZGVyQ29tcGxldGUoZTpFdmVudClcblx0e1xuXHRcdHRoaXMubG9nU3VjY2Vzc2Z1bGxMb2FkKGUpO1xuXG5cdFx0dmFyIGltZ0xvYWRlcjpVUkxMb2FkZXIgPSA8VVJMTG9hZGVyPiBlLnRhcmdldDtcblx0XHRkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKFBhcnNlclV0aWxzLmJsb2JUb0ltYWdlKGltZ0xvYWRlci5kYXRhKSk7XG5cdH1cblxuXHRwcml2YXRlIG5vQW5JbWFnZUxvYWRlckNvbXBsZXRlKGU6RXZlbnQpXG5cdHtcblx0XHR0aGlzLmxvZ1N1Y2Nlc3NmdWxsTG9hZChlKTtcblx0fVxuXG5cdHByaXZhdGUgd3JvbmdVUkxMb2FkZXJDb21wbGV0ZShlOkV2ZW50KVxuXHR7XG5cdFx0dGhpcy5sb2dTdWNjZXNzZnVsbExvYWQoZSk7XG5cdH1cblxuXHRwcml2YXRlIGxvZ1N1Y2Nlc3NmdWxsTG9hZChldmVudDpFdmVudClcblx0e1xuXHRcdHZhciBpbWdMb2FkZXI6VVJMTG9hZGVyID0gPFVSTExvYWRlcj4gZXZlbnQudGFyZ2V0O1xuXHRcdGNvbnNvbGUubG9nKCdJTUcuRXZlbnQuQ29tcGxldGUnLCBpbWdMb2FkZXIudXJsKTtcblx0fVxuXG5cdHByaXZhdGUgaW9FcnJvcihldmVudDpJT0Vycm9yRXZlbnQpXG5cdHtcblx0XHR2YXIgaW1nTG9hZGVyOlVSTExvYWRlciA9IDxVUkxMb2FkZXI+IGV2ZW50LnRhcmdldDtcblx0XHRjb25zb2xlLmxvZygnaW9FcnJvcicsIGltZ0xvYWRlci51cmwpO1xuXHR9XG5cblx0cHJpdmF0ZSBhYm9ydEVycm9yKGV2ZW50OkV2ZW50KVxuXHR7XG5cdFx0dmFyIGltZ0xvYWRlcjpVUkxMb2FkZXIgPSA8VVJMTG9hZGVyPiBldmVudC50YXJnZXQ7XG5cdFx0Y29uc29sZS5sb2coJ2Fib3J0RXJyb3InLCBpbWdMb2FkZXIudXJsKTtcblx0fVxufSJdfQ==