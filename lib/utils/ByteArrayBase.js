var AbstractMethodError = require("awayjs-core/lib/errors/AbstractMethodError");
var ByteArrayBase = (function () {
    function ByteArrayBase() {
        this.position = 0;
        this.length = 0;
        this._mode = "";
    }
    ByteArrayBase.prototype.writeByte = function (b) {
        throw "Virtual method";
    };
    ByteArrayBase.prototype.readByte = function () {
        throw "Virtual method";
    };
    ByteArrayBase.prototype.writeUnsignedByte = function (b) {
        throw "Virtual method";
    };
    ByteArrayBase.prototype.readUnsignedByte = function () {
        throw "Virtual method";
    };
    ByteArrayBase.prototype.writeUnsignedShort = function (b) {
        throw "Virtual method";
    };
    ByteArrayBase.prototype.readUnsignedShort = function () {
        throw "Virtual method";
    };
    ByteArrayBase.prototype.writeUnsignedInt = function (b) {
        throw "Virtual method";
    };
    ByteArrayBase.prototype.readUnsignedInt = function () {
        throw "Virtual method";
    };
    ByteArrayBase.prototype.writeFloat = function (b) {
        throw "Virtual method";
    };
    ByteArrayBase.prototype.toFloatBits = function (x) {
        throw "Virtual method";
    };
    ByteArrayBase.prototype.readFloat = function (b) {
        throw "Virtual method";
    };
    ByteArrayBase.prototype.fromFloatBits = function (x) {
        throw "Virtual method";
    };
    ByteArrayBase.prototype.getBytesAvailable = function () {
        throw new AbstractMethodError('ByteArrayBase, getBytesAvailable() not implemented ');
    };
    ByteArrayBase.prototype.toString = function () {
        return "[ByteArray] ( " + this._mode + " ) position=" + this.position + " length=" + this.length;
    };
    ByteArrayBase.prototype.compareEqual = function (other, count) {
        if (count == undefined || count > this.length - this.position)
            count = this.length - this.position;
        if (count > other.length - other.position)
            count = other.length - other.position;
        var co0 = count;
        var r = true;
        while (r && count >= 4) {
            count -= 4;
            if (this.readUnsignedInt() != other.readUnsignedInt())
                r = false;
        }
        while (r && count >= 1) {
            count--;
            if (this.readUnsignedByte() != other.readUnsignedByte())
                r = false;
        }
        var c0;
        this.position -= (c0 - count);
        other.position -= (c0 - count);
        return r;
    };
    ByteArrayBase.prototype.writeBase64String = function (s) {
        for (var i = 0; i < s.length; i++) {
            var v = s.charAt(i);
        }
    };
    ByteArrayBase.prototype.dumpToConsole = function () {
        var oldpos = this.position;
        this.position = 0;
        var nstep = 8;
        function asHexString(x, digits) {
            var lut = ["0", "1", "2", "3", "4", "5", "6", "7", "8", "9", "a", "b", "c", "d", "e", "f"];
            var sh = "";
            for (var d = 0; d < digits; d++) {
                sh = lut[(x >> (d << 2)) & 0xf] + sh;
            }
            return sh;
        }
        for (var i = 0; i < this.length; i += nstep) {
            var s = asHexString(i, 4) + ":";
            for (var j = 0; j < nstep && i + j < this.length; j++) {
                s += " " + asHexString(this.readUnsignedByte(), 2);
            }
            console.log(s);
        }
        this.position = oldpos;
    };
    ByteArrayBase.prototype.readBase64String = function (count) {
        if (count == undefined || count > this.length - this.position)
            count = this.length - this.position;
        if (!(count > 0))
            return "";
        return ByteArrayBase.internalGetBase64String(count, this.readUnsignedByte, this);
    };
    ByteArrayBase.internalGetBase64String = function (count, getUnsignedByteFunc, self) {
        var r = "";
        var b0, b1, b2, enc1, enc2, enc3, enc4;
        var base64Key = ByteArrayBase.Base64Key;
        while (count >= 3) {
            b0 = getUnsignedByteFunc.apply(self);
            b1 = getUnsignedByteFunc.apply(self);
            b2 = getUnsignedByteFunc.apply(self);
            enc1 = b0 >> 2;
            enc2 = ((b0 & 3) << 4) | (b1 >> 4);
            enc3 = ((b1 & 15) << 2) | (b2 >> 6);
            enc4 = b2 & 63;
            r += base64Key.charAt(enc1) + base64Key.charAt(enc2) + base64Key.charAt(enc3) + base64Key.charAt(enc4);
            count -= 3;
        }
        // pad
        if (count == 2) {
            b0 = getUnsignedByteFunc.apply(self);
            b1 = getUnsignedByteFunc.apply(self);
            enc1 = b0 >> 2;
            enc2 = ((b0 & 3) << 4) | (b1 >> 4);
            enc3 = ((b1 & 15) << 2);
            r += base64Key.charAt(enc1) + base64Key.charAt(enc2) + base64Key.charAt(enc3) + "=";
        }
        else if (count == 1) {
            b0 = getUnsignedByteFunc.apply(self);
            enc1 = b0 >> 2;
            enc2 = ((b0 & 3) << 4);
            r += base64Key.charAt(enc1) + base64Key.charAt(enc2) + "==";
        }
        return r;
    };
    ByteArrayBase.Base64Key = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";
    return ByteArrayBase;
})();
module.exports = ByteArrayBase;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImF3YXlqcy1jb3JlL2xpYi91dGlscy9CeXRlQXJyYXlCYXNlLnRzIl0sIm5hbWVzIjpbIkJ5dGVBcnJheUJhc2UiLCJCeXRlQXJyYXlCYXNlLmNvbnN0cnVjdG9yIiwiQnl0ZUFycmF5QmFzZS53cml0ZUJ5dGUiLCJCeXRlQXJyYXlCYXNlLnJlYWRCeXRlIiwiQnl0ZUFycmF5QmFzZS53cml0ZVVuc2lnbmVkQnl0ZSIsIkJ5dGVBcnJheUJhc2UucmVhZFVuc2lnbmVkQnl0ZSIsIkJ5dGVBcnJheUJhc2Uud3JpdGVVbnNpZ25lZFNob3J0IiwiQnl0ZUFycmF5QmFzZS5yZWFkVW5zaWduZWRTaG9ydCIsIkJ5dGVBcnJheUJhc2Uud3JpdGVVbnNpZ25lZEludCIsIkJ5dGVBcnJheUJhc2UucmVhZFVuc2lnbmVkSW50IiwiQnl0ZUFycmF5QmFzZS53cml0ZUZsb2F0IiwiQnl0ZUFycmF5QmFzZS50b0Zsb2F0Qml0cyIsIkJ5dGVBcnJheUJhc2UucmVhZEZsb2F0IiwiQnl0ZUFycmF5QmFzZS5mcm9tRmxvYXRCaXRzIiwiQnl0ZUFycmF5QmFzZS5nZXRCeXRlc0F2YWlsYWJsZSIsIkJ5dGVBcnJheUJhc2UudG9TdHJpbmciLCJCeXRlQXJyYXlCYXNlLmNvbXBhcmVFcXVhbCIsIkJ5dGVBcnJheUJhc2Uud3JpdGVCYXNlNjRTdHJpbmciLCJCeXRlQXJyYXlCYXNlLmR1bXBUb0NvbnNvbGUiLCJCeXRlQXJyYXlCYXNlLmR1bXBUb0NvbnNvbGUuYXNIZXhTdHJpbmciLCJCeXRlQXJyYXlCYXNlLnJlYWRCYXNlNjRTdHJpbmciLCJCeXRlQXJyYXlCYXNlLmludGVybmFsR2V0QmFzZTY0U3RyaW5nIl0sIm1hcHBpbmdzIjoiQUFBQSxJQUFPLG1CQUFtQixXQUFZLDRDQUE0QyxDQUFDLENBQUM7QUFFcEYsSUFBTSxhQUFhO0lBUWxCQSxTQVJLQSxhQUFhQTtRQUVYQyxhQUFRQSxHQUFVQSxDQUFDQSxDQUFDQTtRQUNwQkEsV0FBTUEsR0FBVUEsQ0FBQ0EsQ0FBQ0E7UUFD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QUFFQSxHQUFHQSxFQUFFQSxHQUFHQSxFQUFFQSxHQUFHQSxFQUFFQSxHQUFHQSxFQUFFQSxHQUFHQSxFQUFFQSxHQUFHQSxFQUFFQSxHQUFHQSxFQUFFQSxHQUFHQSxFQUFFQSxHQUFHQSxFQUFFQSxHQUFHQSxFQUFFQSxHQUFHQSxFQUFFQSxHQUFHQSxDQUFFQSxDQUFDQTtZQUMzR0EsSUFBSUEsRUFBRUEsR0FBVUEsRUFBRUEsQ0FBQ0E7WUFDbkJBLEdBQUdBLENBQUNBLENBQUNBLEdBQUdBLENBQUNBLENBQUNBLEdBQVVBLENBQUNBLEVBQUVBLENBQUNBLEdBQUdBLE1BQU1BLEVBQUVBLENBQUNBLEVBQUVBLEVBQUVBLENBQUNBO2dCQUN4Q0EsRUFBRUEsR0FBR0EsR0FBR0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsR0FBR0EsR0FBR0EsQ0FBQ0EsR0FBR0EsRUFBRUEsQ0FBQ0E7WUFDdENBLENBQUNBO1lBQ0RBLE1BQU1BLENBQUNBLEVBQUVBLENBQUNBO1FBQ1hBLENBQUNBO1FBRURELEdBQUdBLENBQUNBLENBQUNBLEdBQUdBLENBQUNBLENBQUNBLEdBQUdBLENBQUNBLEVBQUVBLENBQUNBLEdBQUdBLElBQUlBLENBQUNBLE1BQU1BLEVBQUVBLENBQUNBLElBQUlBLEtBQUtBLEVBQUVBLENBQUNBO1lBQzdDQSxJQUFJQSxDQUFDQSxHQUFVQSxXQUFXQSxDQUFDQSxDQUFDQSxFQUFFQSxDQUFDQSxDQUFDQSxHQUFHQSxHQUFHQSxDQUFDQTtZQUN2Q0EsR0FBR0EsQ0FBQ0EsQ0FBQ0EsR0FBR0EsQ0FBQ0EsQ0FBQ0EsR0FBVUEsQ0FBQ0EsRUFBRUEsQ0FBQ0EsR0FBR0EsS0FBS0EsSUFBSUEsQ0FBQ0EsR0FBR0EsQ0FBQ0EsR0FBR0EsSUFBSUEsQ0FBQ0EsTUFBTUEsRUFBRUEsQ0FBQ0EsRUFBRUEsRUFBRUEsQ0FBQ0E7Z0JBQzlEQSxDQUFDQSxJQUFJQSxHQUFHQSxHQUFHQSxXQUFXQSxDQUFDQSxJQUFJQSxDQUFDQSxnQkFBZ0JBLEVBQUVBLEVBQUVBLENBQUNBLENBQUNBLENBQUNBO1lBQ3BEQSxDQUFDQTtZQUNEQSxPQUFPQSxDQUFDQSxHQUFHQSxDQUFDQSxDQUFDQSxDQUFDQSxDQUFDQTtRQUNoQkEsQ0FBQ0E7UUFDREEsSUFBSUEsQ0FBQ0EsUUFBUUEsR0FBR0EsTUFBTUEsQ0FBQ0E7SUFDeEJBLENBQUNBO0lBRU1sQix3Q0FBZ0JBLEdBQXZCQSxVQUF3QkEsS0FBWUE7UUFFbkNvQixFQUFFQSxDQUFDQSxDQUFDQSxLQUFLQSxJQUFJQSxTQUFTQSxJQUFJQSxLQUFLQSxHQUFHQSxJQUFJQSxDQUFDQSxNQUFNQSxHQUFHQSxJQUFJQSxDQUFDQSxRQUFRQSxDQUFDQTtZQUM3REEsS0FBS0EsR0FBR0EsSUFBSUEsQ0FBQ0EsTUFBTUEsR0FBR0EsSUFBSUEsQ0FBQ0EsUUFBUUEsQ0FBQ0E7UUFDckNBLEVBQUVBLENBQUNBLENBQUNBLENBQUNBLENBQUNBLEtBQUtBLEdBQUdBLENBQUNBLENBQUNBLENBQUNBO1lBQUNBLE1BQU1BLENBQUNBLEVBQUVBLENBQUNBO1FBRTVCQSxNQUFNQSxDQUFDQSxhQUFhQSxDQUFDQSx1QkFBdUJBLENBQUNBLEtBQUtBLEVBQUVBLElBQUlBLENBQUNBLGdCQUFnQkEsRUFBRUEsSUFBSUEsQ0FBQ0EsQ0FBQ0E7SUFDbEZBLENBQUNBO0lBRWFwQixxQ0FBdUJBLEdBQXJDQSxVQUFzQ0EsS0FBS0EsRUFBRUEsbUJBQW1CQSxFQUFFQSxJQUFJQTtRQUVyRXFCLElBQUlBLENBQUNBLEdBQUdBLEVBQUVBLENBQUNBO1FBQ1hBLElBQUlBLEVBQUVBLEVBQUVBLEVBQUVBLEVBQUVBLEVBQUVBLEVBQUVBLElBQUlBLEVBQUVBLElBQUlBLEVBQUVBLElBQUlBLEVBQUVBLElBQUlBLENBQUNBO1FBQ3ZDQSxJQUFJQSxTQUFTQSxHQUFHQSxhQUFhQSxDQUFDQSxTQUFTQSxDQUFDQTtRQUN4Q0EsT0FBT0EsS0FBS0EsSUFBSUEsQ0FBQ0EsRUFBRUEsQ0FBQ0E7WUFDbkJBLEVBQUVBLEdBQUdBLG1CQUFtQkEsQ0FBQ0EsS0FBS0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EsQ0FBQ0E7WUFDckNBLEVBQUVBLEdBQUdBLG1CQUFtQkEsQ0FBQ0EsS0FBS0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EsQ0FBQ0E7WUFDckNBLEVBQUVBLEdBQUdBLG1CQUFtQkEsQ0FBQ0EsS0FBS0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EsQ0FBQ0E7WUFDckNBLElBQUlBLEdBQUdBLEVBQUVBLElBQUlBLENBQUNBLENBQUNBO1lBQ2ZBLElBQUlBLEdBQUdBLENBQUNBLENBQUNBLEVBQUVBLEdBQUdBLENBQUNBLENBQUNBLElBQUlBLENBQUNBLENBQUNBLEdBQUdBLENBQUNBLEVBQUVBLElBQUlBLENBQUNBLENBQUNBLENBQUNBO1lBQ25DQSxJQUFJQSxHQUFHQSxDQUFDQSxDQUFDQSxFQUFFQSxHQUFHQSxFQUFFQSxDQUFDQSxJQUFJQSxDQUFDQSxDQUFDQSxHQUFHQSxDQUFDQSxFQUFFQSxJQUFJQSxDQUFDQSxDQUFDQSxDQUFDQTtZQUNwQ0EsSUFBSUEsR0FBR0EsRUFBRUEsR0FBR0EsRUFBRUEsQ0FBQ0E7WUFDZkEsQ0FBQ0EsSUFBSUEsU0FBU0EsQ0FBQ0EsTUFBTUEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsR0FBR0EsU0FBU0EsQ0FBQ0EsTUFBTUEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsR0FBR0EsU0FBU0EsQ0FBQ0EsTUFBTUEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsR0FBR0EsU0FBU0EsQ0FBQ0EsTUFBTUEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsQ0FBQ0E7WUFDdkdBLEtBQUtBLElBQUlBLENBQUNBLENBQUNBO1FBQ1pBLENBQUNBO1FBQ0RBLEFBQ0FBLE1BRE1BO1FBQ05BLEVBQUVBLENBQUNBLENBQUNBLEtBQUtBLElBQUlBLENBQUNBLENBQUNBLENBQUNBLENBQUNBO1lBQ2hCQSxFQUFFQSxHQUFHQSxtQkFBbUJBLENBQUNBLEtBQUtBLENBQUNBLElBQUlBLENBQUNBLENBQUNBO1lBQ3JDQSxFQUFFQSxHQUFHQSxtQkFBbUJBLENBQUNBLEtBQUtBLENBQUNBLElBQUlBLENBQUNBLENBQUNBO1lBQ3JDQSxJQUFJQSxHQUFHQSxFQUFFQSxJQUFJQSxDQUFDQSxDQUFDQTtZQUNmQSxJQUFJQSxHQUFHQSxDQUFDQSxDQUFDQSxFQUFFQSxHQUFHQSxDQUFDQSxDQUFDQSxJQUFJQSxDQUFDQSxDQUFDQSxHQUFHQSxDQUFDQSxFQUFFQSxJQUFJQSxDQUFDQSxDQUFDQSxDQUFDQTtZQUNuQ0EsSUFBSUEsR0FBR0EsQ0FBQ0EsQ0FBQ0EsRUFBRUEsR0FBR0EsRUFBRUEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7WUFDeEJBLENBQUNBLElBQUlBLFNBQVNBLENBQUNBLE1BQU1BLENBQUNBLElBQUlBLENBQUNBLEdBQUdBLFNBQVNBLENBQUNBLE1BQU1BLENBQUNBLElBQUlBLENBQUNBLEdBQUdBLFNBQVNBLENBQUNBLE1BQU1BLENBQUNBLElBQUlBLENBQUNBLEdBQUdBLEdBQUdBLENBQUNBO1FBQ3JGQSxDQUFDQTtRQUFDQSxJQUFJQSxDQUFDQSxFQUFFQSxDQUFDQSxDQUFDQSxLQUFLQSxJQUFJQSxDQUFDQSxDQUFDQSxDQUFDQSxDQUFDQTtZQUN2QkEsRUFBRUEsR0FBR0EsbUJBQW1CQSxDQUFDQSxLQUFLQSxDQUFDQSxJQUFJQSxDQUFDQSxDQUFDQTtZQUNyQ0EsSUFBSUEsR0FBR0EsRUFBRUEsSUFBSUEsQ0FBQ0EsQ0FBQ0E7WUFDZkEsSUFBSUEsR0FBR0EsQ0FBQ0EsQ0FBQ0EsRUFBRUEsR0FBR0EsQ0FBQ0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7WUFDdkJBLENBQUNBLElBQUlBLFNBQVNBLENBQUNBLE1BQU1BLENBQUNBLElBQUlBLENBQUNBLEdBQUdBLFNBQVNBLENBQUNBLE1BQU1BLENBQUNBLElBQUlBLENBQUNBLEdBQUdBLElBQUlBLENBQUNBO1FBQzdEQSxDQUFDQTtRQUNEQSxNQUFNQSxDQUFDQSxDQUFDQSxDQUFDQTtJQUNWQSxDQUFDQTtJQTNLYXJCLHVCQUFTQSxHQUFHQSxrRUFBa0VBLENBQUNBO0lBNEs5RkEsb0JBQUNBO0FBQURBLENBbExBLEFBa0xDQSxJQUFBO0FBRUQsQUFBdUIsaUJBQWQsYUFBYSxDQUFDIiwiZmlsZSI6InV0aWxzL0J5dGVBcnJheUJhc2UuanMiLCJzb3VyY2VSb290IjoiLi4vIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEFic3RyYWN0TWV0aG9kRXJyb3JcdFx0PSByZXF1aXJlKFwiYXdheWpzLWNvcmUvbGliL2Vycm9ycy9BYnN0cmFjdE1ldGhvZEVycm9yXCIpO1xyXG5cclxuY2xhc3MgQnl0ZUFycmF5QmFzZVxyXG57XHJcblx0cHVibGljIHBvc2l0aW9uOm51bWJlciA9IDA7XHJcblx0cHVibGljIGxlbmd0aDpudW1iZXIgPSAwO1xyXG5cdHB1YmxpYyBfbW9kZTpzdHJpbmcgPSBcIlwiO1xyXG5cclxuXHRwdWJsaWMgc3RhdGljIEJhc2U2NEtleSA9IFwiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrL1wiO1xyXG5cclxuXHRjb25zdHJ1Y3RvcigpXHJcblx0e1xyXG5cdH1cclxuXHJcblx0cHVibGljIHdyaXRlQnl0ZShiOm51bWJlcilcclxuXHR7XHJcblx0XHR0aHJvdyBcIlZpcnR1YWwgbWV0aG9kXCI7XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgcmVhZEJ5dGUoKTpudW1iZXJcclxuXHR7XHJcblx0XHR0aHJvdyBcIlZpcnR1YWwgbWV0aG9kXCI7XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgd3JpdGVVbnNpZ25lZEJ5dGUoYjpudW1iZXIpXHJcblx0e1xyXG5cdFx0dGhyb3cgXCJWaXJ0dWFsIG1ldGhvZFwiO1xyXG5cdH1cclxuXHJcblx0cHVibGljIHJlYWRVbnNpZ25lZEJ5dGUoKTpudW1iZXJcclxuXHR7XHJcblx0XHR0aHJvdyBcIlZpcnR1YWwgbWV0aG9kXCI7XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgd3JpdGVVbnNpZ25lZFNob3J0KGI6bnVtYmVyKVxyXG5cdHtcclxuXHRcdHRocm93IFwiVmlydHVhbCBtZXRob2RcIjtcclxuXHR9XHJcblxyXG5cdHB1YmxpYyByZWFkVW5zaWduZWRTaG9ydCgpOm51bWJlclxyXG5cdHtcclxuXHRcdHRocm93IFwiVmlydHVhbCBtZXRob2RcIjtcclxuXHR9XHJcblxyXG5cdHB1YmxpYyB3cml0ZVVuc2lnbmVkSW50KGI6bnVtYmVyKVxyXG5cdHtcclxuXHRcdHRocm93IFwiVmlydHVhbCBtZXRob2RcIjtcclxuXHR9XHJcblxyXG5cdHB1YmxpYyByZWFkVW5zaWduZWRJbnQoKTpudW1iZXJcclxuXHR7XHJcblx0XHR0aHJvdyBcIlZpcnR1YWwgbWV0aG9kXCI7XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgd3JpdGVGbG9hdChiOm51bWJlcilcclxuXHR7XHJcblx0XHR0aHJvdyBcIlZpcnR1YWwgbWV0aG9kXCI7XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgdG9GbG9hdEJpdHMoeDpudW1iZXIpXHJcblx0e1xyXG5cdFx0dGhyb3cgXCJWaXJ0dWFsIG1ldGhvZFwiO1xyXG5cdH1cclxuXHJcblx0cHVibGljIHJlYWRGbG9hdChiOm51bWJlcilcclxuXHR7XHJcblx0XHR0aHJvdyBcIlZpcnR1YWwgbWV0aG9kXCI7XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgZnJvbUZsb2F0Qml0cyh4Om51bWJlcilcclxuXHR7XHJcblx0XHR0aHJvdyBcIlZpcnR1YWwgbWV0aG9kXCI7XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgZ2V0Qnl0ZXNBdmFpbGFibGUoKTpudW1iZXJcclxuXHR7XHJcblx0XHR0aHJvdyBuZXcgQWJzdHJhY3RNZXRob2RFcnJvcignQnl0ZUFycmF5QmFzZSwgZ2V0Qnl0ZXNBdmFpbGFibGUoKSBub3QgaW1wbGVtZW50ZWQgJyk7XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgdG9TdHJpbmcoKTpzdHJpbmdcclxuXHR7XHJcblx0XHRyZXR1cm4gXCJbQnl0ZUFycmF5XSAoIFwiICsgdGhpcy5fbW9kZSArIFwiICkgcG9zaXRpb249XCIgKyB0aGlzLnBvc2l0aW9uICsgXCIgbGVuZ3RoPVwiICsgdGhpcy5sZW5ndGg7XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgY29tcGFyZUVxdWFsKG90aGVyLCBjb3VudClcclxuXHR7XHJcblx0XHRpZiAoY291bnQgPT0gdW5kZWZpbmVkIHx8IGNvdW50ID4gdGhpcy5sZW5ndGggLSB0aGlzLnBvc2l0aW9uKVxyXG5cdFx0XHRjb3VudCA9IHRoaXMubGVuZ3RoIC0gdGhpcy5wb3NpdGlvbjtcclxuXHRcdGlmIChjb3VudCA+IG90aGVyLmxlbmd0aCAtIG90aGVyLnBvc2l0aW9uKVxyXG5cdFx0XHRjb3VudCA9IG90aGVyLmxlbmd0aCAtIG90aGVyLnBvc2l0aW9uO1xyXG5cdFx0dmFyIGNvMCA9IGNvdW50O1xyXG5cdFx0dmFyIHIgPSB0cnVlO1xyXG5cdFx0d2hpbGUgKHIgJiYgY291bnQgPj0gNCkge1xyXG5cdFx0XHRjb3VudCAtPSA0O1xyXG5cdFx0XHRpZiAodGhpcy5yZWFkVW5zaWduZWRJbnQoKSAhPSBvdGhlci5yZWFkVW5zaWduZWRJbnQoKSkgciA9IGZhbHNlO1xyXG5cdFx0fVxyXG5cdFx0d2hpbGUgKHIgJiYgY291bnQgPj0gMSkge1xyXG5cdFx0XHRjb3VudC0tO1xyXG5cdFx0XHRpZiAodGhpcy5yZWFkVW5zaWduZWRCeXRlKCkgIT0gb3RoZXIucmVhZFVuc2lnbmVkQnl0ZSgpKSByID0gZmFsc2U7XHJcblx0XHR9XHJcblx0XHR2YXIgYzA7XHJcblx0XHR0aGlzLnBvc2l0aW9uIC09IChjMCAtIGNvdW50KTtcclxuXHRcdG90aGVyLnBvc2l0aW9uIC09IChjMCAtIGNvdW50KTtcclxuXHRcdHJldHVybiByO1xyXG5cdH1cclxuXHJcblx0cHVibGljIHdyaXRlQmFzZTY0U3RyaW5nKHM6c3RyaW5nKVxyXG5cdHtcclxuXHRcdGZvciAodmFyIGk6bnVtYmVyID0gMDsgaSA8IHMubGVuZ3RoOyBpKyspIHtcclxuXHRcdFx0dmFyIHYgPSBzLmNoYXJBdChpKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdHB1YmxpYyBkdW1wVG9Db25zb2xlKClcclxuXHR7XHJcblx0XHR2YXIgb2xkcG9zID0gdGhpcy5wb3NpdGlvbjtcclxuXHRcdHRoaXMucG9zaXRpb24gPSAwO1xyXG5cdFx0dmFyIG5zdGVwOm51bWJlciA9IDg7XHJcblxyXG5cdFx0ZnVuY3Rpb24gYXNIZXhTdHJpbmcoeCwgZGlnaXRzKVxyXG5cdFx0e1xyXG5cdFx0XHR2YXIgbHV0OkFycmF5PHN0cmluZz4gPSBbIFwiMFwiLCBcIjFcIiwgXCIyXCIsIFwiM1wiLCBcIjRcIiwgXCI1XCIsIFwiNlwiLCBcIjdcIiwgXCI4XCIsIFwiOVwiLCBcImFcIiwgXCJiXCIsIFwiY1wiLCBcImRcIiwgXCJlXCIsIFwiZlwiIF07XHJcblx0XHRcdHZhciBzaDpzdHJpbmcgPSBcIlwiO1xyXG5cdFx0XHRmb3IgKHZhciBkOm51bWJlciA9IDA7IGQgPCBkaWdpdHM7IGQrKykge1xyXG5cdFx0XHRcdHNoID0gbHV0Wyh4ID4+IChkIDw8IDIpKSAmIDB4Zl0gKyBzaDtcclxuXHRcdFx0fVxyXG5cdFx0XHRyZXR1cm4gc2g7XHJcblx0XHR9XHJcblxyXG5cdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmxlbmd0aDsgaSArPSBuc3RlcCkge1xyXG5cdFx0XHR2YXIgczpzdHJpbmcgPSBhc0hleFN0cmluZyhpLCA0KSArIFwiOlwiO1xyXG5cdFx0XHRmb3IgKHZhciBqOm51bWJlciA9IDA7IGogPCBuc3RlcCAmJiBpICsgaiA8IHRoaXMubGVuZ3RoOyBqKyspIHtcclxuXHRcdFx0XHRzICs9IFwiIFwiICsgYXNIZXhTdHJpbmcodGhpcy5yZWFkVW5zaWduZWRCeXRlKCksIDIpO1xyXG5cdFx0XHR9XHJcblx0XHRcdGNvbnNvbGUubG9nKHMpO1xyXG5cdFx0fVxyXG5cdFx0dGhpcy5wb3NpdGlvbiA9IG9sZHBvcztcclxuXHR9XHJcblxyXG5cdHB1YmxpYyByZWFkQmFzZTY0U3RyaW5nKGNvdW50Om51bWJlcilcclxuXHR7XHJcblx0XHRpZiAoY291bnQgPT0gdW5kZWZpbmVkIHx8IGNvdW50ID4gdGhpcy5sZW5ndGggLSB0aGlzLnBvc2l0aW9uKVxyXG5cdFx0XHRjb3VudCA9IHRoaXMubGVuZ3RoIC0gdGhpcy5wb3NpdGlvbjtcclxuXHRcdGlmICghKGNvdW50ID4gMCkpIHJldHVybiBcIlwiO1xyXG5cclxuXHRcdHJldHVybiBCeXRlQXJyYXlCYXNlLmludGVybmFsR2V0QmFzZTY0U3RyaW5nKGNvdW50LCB0aGlzLnJlYWRVbnNpZ25lZEJ5dGUsIHRoaXMpO1xyXG5cdH1cclxuXHJcblx0cHVibGljIHN0YXRpYyBpbnRlcm5hbEdldEJhc2U2NFN0cmluZyhjb3VudCwgZ2V0VW5zaWduZWRCeXRlRnVuYywgc2VsZilcclxuXHR7IC8vIHJldHVybiBiYXNlNjQgc3RyaW5nIG9mIHRoZSBuZXh0IGNvdW50IGJ5dGVzXHJcblx0XHR2YXIgciA9IFwiXCI7XHJcblx0XHR2YXIgYjAsIGIxLCBiMiwgZW5jMSwgZW5jMiwgZW5jMywgZW5jNDtcclxuXHRcdHZhciBiYXNlNjRLZXkgPSBCeXRlQXJyYXlCYXNlLkJhc2U2NEtleTtcclxuXHRcdHdoaWxlIChjb3VudCA+PSAzKSB7XHJcblx0XHRcdGIwID0gZ2V0VW5zaWduZWRCeXRlRnVuYy5hcHBseShzZWxmKTtcclxuXHRcdFx0YjEgPSBnZXRVbnNpZ25lZEJ5dGVGdW5jLmFwcGx5KHNlbGYpO1xyXG5cdFx0XHRiMiA9IGdldFVuc2lnbmVkQnl0ZUZ1bmMuYXBwbHkoc2VsZik7XHJcblx0XHRcdGVuYzEgPSBiMCA+PiAyO1xyXG5cdFx0XHRlbmMyID0gKChiMCAmIDMpIDw8IDQpIHwgKGIxID4+IDQpO1xyXG5cdFx0XHRlbmMzID0gKChiMSAmIDE1KSA8PCAyKSB8IChiMiA+PiA2KTtcclxuXHRcdFx0ZW5jNCA9IGIyICYgNjM7XHJcblx0XHRcdHIgKz0gYmFzZTY0S2V5LmNoYXJBdChlbmMxKSArIGJhc2U2NEtleS5jaGFyQXQoZW5jMikgKyBiYXNlNjRLZXkuY2hhckF0KGVuYzMpICsgYmFzZTY0S2V5LmNoYXJBdChlbmM0KTtcclxuXHRcdFx0Y291bnQgLT0gMztcclxuXHRcdH1cclxuXHRcdC8vIHBhZFxyXG5cdFx0aWYgKGNvdW50ID09IDIpIHtcclxuXHRcdFx0YjAgPSBnZXRVbnNpZ25lZEJ5dGVGdW5jLmFwcGx5KHNlbGYpO1xyXG5cdFx0XHRiMSA9IGdldFVuc2lnbmVkQnl0ZUZ1bmMuYXBwbHkoc2VsZik7XHJcblx0XHRcdGVuYzEgPSBiMCA+PiAyO1xyXG5cdFx0XHRlbmMyID0gKChiMCAmIDMpIDw8IDQpIHwgKGIxID4+IDQpO1xyXG5cdFx0XHRlbmMzID0gKChiMSAmIDE1KSA8PCAyKTtcclxuXHRcdFx0ciArPSBiYXNlNjRLZXkuY2hhckF0KGVuYzEpICsgYmFzZTY0S2V5LmNoYXJBdChlbmMyKSArIGJhc2U2NEtleS5jaGFyQXQoZW5jMykgKyBcIj1cIjtcclxuXHRcdH0gZWxzZSBpZiAoY291bnQgPT0gMSkge1xyXG5cdFx0XHRiMCA9IGdldFVuc2lnbmVkQnl0ZUZ1bmMuYXBwbHkoc2VsZik7XHJcblx0XHRcdGVuYzEgPSBiMCA+PiAyO1xyXG5cdFx0XHRlbmMyID0gKChiMCAmIDMpIDw8IDQpO1xyXG5cdFx0XHRyICs9IGJhc2U2NEtleS5jaGFyQXQoZW5jMSkgKyBiYXNlNjRLZXkuY2hhckF0KGVuYzIpICsgXCI9PVwiO1xyXG5cdFx0fVxyXG5cdFx0cmV0dXJuIHI7XHJcblx0fVxyXG59XHJcblxyXG5leHBvcnQgPSBCeXRlQXJyYXlCYXNlOyJdfQ==