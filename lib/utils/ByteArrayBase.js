var AbstractMethodError = require("awayjs-core/lib/errors/AbstractMethodError");
var ByteArrayBase = (function () {
    function ByteArrayBase() {
        this.position = 0;
        this.length = 0;
        this._mode = "";
    }
    ByteArrayBase.prototype.writeByte = function (b) {
        throw "Virtual method";
    };
    ByteArrayBase.prototype.readByte = function () {
        throw "Virtual method";
    };
    ByteArrayBase.prototype.writeUnsignedByte = function (b) {
        throw "Virtual method";
    };
    ByteArrayBase.prototype.readUnsignedByte = function () {
        throw "Virtual method";
    };
    ByteArrayBase.prototype.writeUnsignedShort = function (b) {
        throw "Virtual method";
    };
    ByteArrayBase.prototype.readUnsignedShort = function () {
        throw "Virtual method";
    };
    ByteArrayBase.prototype.writeUnsignedInt = function (b) {
        throw "Virtual method";
    };
    ByteArrayBase.prototype.readUnsignedInt = function () {
        throw "Virtual method";
    };
    ByteArrayBase.prototype.writeFloat = function (b) {
        throw "Virtual method";
    };
    ByteArrayBase.prototype.toFloatBits = function (x) {
        throw "Virtual method";
    };
    ByteArrayBase.prototype.readFloat = function (b) {
        throw "Virtual method";
    };
    ByteArrayBase.prototype.fromFloatBits = function (x) {
        throw "Virtual method";
    };
    ByteArrayBase.prototype.getBytesAvailable = function () {
        throw new AbstractMethodError('ByteArrayBase, getBytesAvailable() not implemented ');
    };
    ByteArrayBase.prototype.toString = function () {
        return "[ByteArray] ( " + this._mode + " ) position=" + this.position + " length=" + this.length;
    };
    ByteArrayBase.prototype.compareEqual = function (other, count) {
        if (count == undefined || count > this.length - this.position)
            count = this.length - this.position;
        if (count > other.length - other.position)
            count = other.length - other.position;
        var co0 = count;
        var r = true;
        while (r && count >= 4) {
            count -= 4;
            if (this.readUnsignedInt() != other.readUnsignedInt())
                r = false;
        }
        while (r && count >= 1) {
            count--;
            if (this.readUnsignedByte() != other.readUnsignedByte())
                r = false;
        }
        var c0;
        this.position -= (c0 - count);
        other.position -= (c0 - count);
        return r;
    };
    ByteArrayBase.prototype.writeBase64String = function (s) {
        for (var i = 0; i < s.length; i++) {
            var v = s.charAt(i);
        }
    };
    ByteArrayBase.prototype.dumpToConsole = function () {
        var oldpos = this.position;
        this.position = 0;
        var nstep = 8;
        function asHexString(x, digits) {
            var lut = ["0", "1", "2", "3", "4", "5", "6", "7", "8", "9", "a", "b", "c", "d", "e", "f"];
            var sh = "";
            for (var d = 0; d < digits; d++) {
                sh = lut[(x >> (d << 2)) & 0xf] + sh;
            }
            return sh;
        }
        for (var i = 0; i < this.length; i += nstep) {
            var s = asHexString(i, 4) + ":";
            for (var j = 0; j < nstep && i + j < this.length; j++) {
                s += " " + asHexString(this.readUnsignedByte(), 2);
            }
            console.log(s);
        }
        this.position = oldpos;
    };
    ByteArrayBase.prototype.readBase64String = function (count) {
        if (count == undefined || count > this.length - this.position)
            count = this.length - this.position;
        if (!(count > 0))
            return "";
        return ByteArrayBase.internalGetBase64String(count, this.readUnsignedByte, this);
    };
    ByteArrayBase.internalGetBase64String = function (count, getUnsignedByteFunc, self) {
        var r = "";
        var b0, b1, b2, enc1, enc2, enc3, enc4;
        var base64Key = ByteArrayBase.Base64Key;
        while (count >= 3) {
            b0 = getUnsignedByteFunc.apply(self);
            b1 = getUnsignedByteFunc.apply(self);
            b2 = getUnsignedByteFunc.apply(self);
            enc1 = b0 >> 2;
            enc2 = ((b0 & 3) << 4) | (b1 >> 4);
            enc3 = ((b1 & 15) << 2) | (b2 >> 6);
            enc4 = b2 & 63;
            r += base64Key.charAt(enc1) + base64Key.charAt(enc2) + base64Key.charAt(enc3) + base64Key.charAt(enc4);
            count -= 3;
        }
        // pad
        if (count == 2) {
            b0 = getUnsignedByteFunc.apply(self);
            b1 = getUnsignedByteFunc.apply(self);
            enc1 = b0 >> 2;
            enc2 = ((b0 & 3) << 4) | (b1 >> 4);
            enc3 = ((b1 & 15) << 2);
            r += base64Key.charAt(enc1) + base64Key.charAt(enc2) + base64Key.charAt(enc3) + "=";
        }
        else if (count == 1) {
            b0 = getUnsignedByteFunc.apply(self);
            enc1 = b0 >> 2;
            enc2 = ((b0 & 3) << 4);
            r += base64Key.charAt(enc1) + base64Key.charAt(enc2) + "==";
        }
        return r;
    };
    ByteArrayBase.Base64Key = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";
    return ByteArrayBase;
})();
module.exports = ByteArrayBase;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImF3YXlqcy1jb3JlL2xpYi91dGlscy9ieXRlYXJyYXliYXNlLnRzIl0sIm5hbWVzIjpbIkJ5dGVBcnJheUJhc2UiLCJCeXRlQXJyYXlCYXNlLmNvbnN0cnVjdG9yIiwiQnl0ZUFycmF5QmFzZS53cml0ZUJ5dGUiLCJCeXRlQXJyYXlCYXNlLnJlYWRCeXRlIiwiQnl0ZUFycmF5QmFzZS53cml0ZVVuc2lnbmVkQnl0ZSIsIkJ5dGVBcnJheUJhc2UucmVhZFVuc2lnbmVkQnl0ZSIsIkJ5dGVBcnJheUJhc2Uud3JpdGVVbnNpZ25lZFNob3J0IiwiQnl0ZUFycmF5QmFzZS5yZWFkVW5zaWduZWRTaG9ydCIsIkJ5dGVBcnJheUJhc2Uud3JpdGVVbnNpZ25lZEludCIsIkJ5dGVBcnJheUJhc2UucmVhZFVuc2lnbmVkSW50IiwiQnl0ZUFycmF5QmFzZS53cml0ZUZsb2F0IiwiQnl0ZUFycmF5QmFzZS50b0Zsb2F0Qml0cyIsIkJ5dGVBcnJheUJhc2UucmVhZEZsb2F0IiwiQnl0ZUFycmF5QmFzZS5mcm9tRmxvYXRCaXRzIiwiQnl0ZUFycmF5QmFzZS5nZXRCeXRlc0F2YWlsYWJsZSIsIkJ5dGVBcnJheUJhc2UudG9TdHJpbmciLCJCeXRlQXJyYXlCYXNlLmNvbXBhcmVFcXVhbCIsIkJ5dGVBcnJheUJhc2Uud3JpdGVCYXNlNjRTdHJpbmciLCJCeXRlQXJyYXlCYXNlLmR1bXBUb0NvbnNvbGUiLCJCeXRlQXJyYXlCYXNlLmR1bXBUb0NvbnNvbGUuYXNIZXhTdHJpbmciLCJCeXRlQXJyYXlCYXNlLnJlYWRCYXNlNjRTdHJpbmciLCJCeXRlQXJyYXlCYXNlLmludGVybmFsR2V0QmFzZTY0U3RyaW5nIl0sIm1hcHBpbmdzIjoiQUFBQSxJQUFPLG1CQUFtQixXQUFZLDRDQUE0QyxDQUFDLENBQUM7QUFFcEYsSUFBTSxhQUFhO0lBUWxCQSxTQVJLQSxhQUFhQTtRQUVYQyxhQUFRQSxHQUFVQSxDQUFDQSxDQUFDQTtRQUNwQkEsV0FBTUEsR0FBVUEsQ0FBQ0EsQ0FBQ0E7UUFD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QUFFQSxHQUFHQSxFQUFFQSxHQUFHQSxFQUFFQSxHQUFHQSxFQUFFQSxHQUFHQSxFQUFFQSxHQUFHQSxFQUFFQSxHQUFHQSxFQUFFQSxHQUFHQSxFQUFFQSxHQUFHQSxFQUFFQSxHQUFHQSxFQUFFQSxHQUFHQSxFQUFFQSxHQUFHQSxFQUFFQSxHQUFHQSxDQUFFQSxDQUFDQTtZQUMzR0EsSUFBSUEsRUFBRUEsR0FBVUEsRUFBRUEsQ0FBQ0E7WUFDbkJBLEdBQUdBLENBQUNBLENBQUNBLEdBQUdBLENBQUNBLENBQUNBLEdBQVVBLENBQUNBLEVBQUVBLENBQUNBLEdBQUdBLE1BQU1BLEVBQUVBLENBQUNBLEVBQUVBLEVBQUVBLENBQUNBO2dCQUN4Q0EsRUFBRUEsR0FBR0EsR0FBR0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsR0FBR0EsR0FBR0EsQ0FBQ0EsR0FBR0EsRUFBRUEsQ0FBQ0E7WUFDdENBLENBQUNBO1lBQ0RBLE1BQU1BLENBQUNBLEVBQUVBLENBQUNBO1FBQ1hBLENBQUNBO1FBRURELEdBQUdBLENBQUNBLENBQUNBLEdBQUdBLENBQUNBLENBQUNBLEdBQUdBLENBQUNBLEVBQUVBLENBQUNBLEdBQUdBLElBQUlBLENBQUNBLE1BQU1BLEVBQUVBLENBQUNBLElBQUlBLEtBQUtBLEVBQUVBLENBQUNBO1lBQzdDQSxJQUFJQSxDQUFDQSxHQUFVQSxXQUFXQSxDQUFDQSxDQUFDQSxFQUFFQSxDQUFDQSxDQUFDQSxHQUFHQSxHQUFHQSxDQUFDQTtZQUN2Q0EsR0FBR0EsQ0FBQ0EsQ0FBQ0EsR0FBR0EsQ0FBQ0EsQ0FBQ0EsR0FBVUEsQ0FBQ0EsRUFBRUEsQ0FBQ0EsR0FBR0EsS0FBS0EsSUFBSUEsQ0FBQ0EsR0FBR0EsQ0FBQ0EsR0FBR0EsSUFBSUEsQ0FBQ0EsTUFBTUEsRUFBRUEsQ0FBQ0EsRUFBRUEsRUFBRUEsQ0FBQ0E7Z0JBQzlEQSxDQUFDQSxJQUFJQSxHQUFHQSxHQUFHQSxXQUFXQSxDQUFDQSxJQUFJQSxDQUFDQSxnQkFBZ0JBLEVBQUVBLEVBQUVBLENBQUNBLENBQUNBLENBQUNBO1lBQ3BEQSxDQUFDQTtZQUNEQSxPQUFPQSxDQUFDQSxHQUFHQSxDQUFDQSxDQUFDQSxDQUFDQSxDQUFDQTtRQUNoQkEsQ0FBQ0E7UUFDREEsSUFBSUEsQ0FBQ0EsUUFBUUEsR0FBR0EsTUFBTUEsQ0FBQ0E7SUFDeEJBLENBQUNBO0lBRU1sQix3Q0FBZ0JBLEdBQXZCQSxVQUF3QkEsS0FBWUE7UUFFbkNvQixFQUFFQSxDQUFDQSxDQUFDQSxLQUFLQSxJQUFJQSxTQUFTQSxJQUFJQSxLQUFLQSxHQUFHQSxJQUFJQSxDQUFDQSxNQUFNQSxHQUFHQSxJQUFJQSxDQUFDQSxRQUFRQSxDQUFDQTtZQUM3REEsS0FBS0EsR0FBR0EsSUFBSUEsQ0FBQ0EsTUFBTUEsR0FBR0EsSUFBSUEsQ0FBQ0EsUUFBUUEsQ0FBQ0E7UUFDckNBLEVBQUVBLENBQUNBLENBQUNBLENBQUNBLENBQUNBLEtBQUtBLEdBQUdBLENBQUNBLENBQUNBLENBQUNBO1lBQUNBLE1BQU1BLENBQUNBLEVBQUVBLENBQUNBO1FBRTVCQSxNQUFNQSxDQUFDQSxhQUFhQSxDQUFDQSx1QkFBdUJBLENBQUNBLEtBQUtBLEVBQUVBLElBQUlBLENBQUNBLGdCQUFnQkEsRUFBRUEsSUFBSUEsQ0FBQ0EsQ0FBQ0E7SUFDbEZBLENBQUNBO0lBRWFwQixxQ0FBdUJBLEdBQXJDQSxVQUFzQ0EsS0FBS0EsRUFBRUEsbUJBQW1CQSxFQUFFQSxJQUFJQTtRQUVyRXFCLElBQUlBLENBQUNBLEdBQUdBLEVBQUVBLENBQUNBO1FBQ1hBLElBQUlBLEVBQUVBLEVBQUVBLEVBQUVBLEVBQUVBLEVBQUVBLEVBQUVBLElBQUlBLEVBQUVBLElBQUlBLEVBQUVBLElBQUlBLEVBQUVBLElBQUlBLENBQUNBO1FBQ3ZDQSxJQUFJQSxTQUFTQSxHQUFHQSxhQUFhQSxDQUFDQSxTQUFTQSxDQUFDQTtRQUN4Q0EsT0FBT0EsS0FBS0EsSUFBSUEsQ0FBQ0EsRUFBRUEsQ0FBQ0E7WUFDbkJBLEVBQUVBLEdBQUdBLG1CQUFtQkEsQ0FBQ0EsS0FBS0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EsQ0FBQ0E7WUFDckNBLEVBQUVBLEdBQUdBLG1CQUFtQkEsQ0FBQ0EsS0FBS0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EsQ0FBQ0E7WUFDckNBLEVBQUVBLEdBQUdBLG1CQUFtQkEsQ0FBQ0EsS0FBS0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EsQ0FBQ0E7WUFDckNBLElBQUlBLEdBQUdBLEVBQUVBLElBQUlBLENBQUNBLENBQUNBO1lBQ2ZBLElBQUlBLEdBQUdBLENBQUNBLENBQUNBLEVBQUVBLEdBQUdBLENBQUNBLENBQUNBLElBQUlBLENBQUNBLENBQUNBLEdBQUdBLENBQUNBLEVBQUVBLElBQUlBLENBQUNBLENBQUNBLENBQUNBO1lBQ25DQSxJQUFJQSxHQUFHQSxDQUFDQSxDQUFDQSxFQUFFQSxHQUFHQSxFQUFFQSxDQUFDQSxJQUFJQSxDQUFDQSxDQUFDQSxHQUFHQSxDQUFDQSxFQUFFQSxJQUFJQSxDQUFDQSxDQUFDQSxDQUFDQTtZQUNwQ0EsSUFBSUEsR0FBR0EsRUFBRUEsR0FBR0EsRUFBRUEsQ0FBQ0E7WUFDZkEsQ0FBQ0EsSUFBSUEsU0FBU0EsQ0FBQ0EsTUFBTUEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsR0FBR0EsU0FBU0EsQ0FBQ0EsTUFBTUEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsR0FBR0EsU0FBU0EsQ0FBQ0EsTUFBTUEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsR0FBR0EsU0FBU0EsQ0FBQ0EsTUFBTUEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsQ0FBQ0E7WUFDdkdBLEtBQUtBLElBQUlBLENBQUNBLENBQUNBO1FBQ1pBLENBQUNBO1FBQ0RBLEFBQ0FBLE1BRE1BO1FBQ05BLEVBQUVBLENBQUNBLENBQUNBLEtBQUtBLElBQUlBLENBQUNBLENBQUNBLENBQUNBLENBQUNBO1lBQ2hCQSxFQUFFQSxHQUFHQSxtQkFBbUJBLENBQUNBLEtBQUtBLENBQUNBLElBQUlBLENBQUNBLENBQUNBO1lBQ3JDQSxFQUFFQSxHQUFHQSxtQkFBbUJBLENBQUNBLEtBQUtBLENBQUNBLElBQUlBLENBQUNBLENBQUNBO1lBQ3JDQSxJQUFJQSxHQUFHQSxFQUFFQSxJQUFJQSxDQUFDQSxDQUFDQTtZQUNmQSxJQUFJQSxHQUFHQSxDQUFDQSxDQUFDQSxFQUFFQSxHQUFHQSxDQUFDQSxDQUFDQSxJQUFJQSxDQUFDQSxDQUFDQSxHQUFHQSxDQUFDQSxFQUFFQSxJQUFJQSxDQUFDQSxDQUFDQSxDQUFDQTtZQUNuQ0EsSUFBSUEsR0FBR0EsQ0FBQ0EsQ0FBQ0EsRUFBRUEsR0FBR0EsRUFBRUEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7WUFDeEJBLENBQUNBLElBQUlBLFNBQVNBLENBQUNBLE1BQU1BLENBQUNBLElBQUlBLENBQUNBLEdBQUdBLFNBQVNBLENBQUNBLE1BQU1BLENBQUNBLElBQUlBLENBQUNBLEdBQUdBLFNBQVNBLENBQUNBLE1BQU1BLENBQUNBLElBQUlBLENBQUNBLEdBQUdBLEdBQUdBLENBQUNBO1FBQ3JGQSxDQUFDQTtRQUFDQSxJQUFJQSxDQUFDQSxFQUFFQSxDQUFDQSxDQUFDQSxLQUFLQSxJQUFJQSxDQUFDQSxDQUFDQSxDQUFDQSxDQUFDQTtZQUN2QkEsRUFBRUEsR0FBR0EsbUJBQW1CQSxDQUFDQSxLQUFLQSxDQUFDQSxJQUFJQSxDQUFDQSxDQUFDQTtZQUNyQ0EsSUFBSUEsR0FBR0EsRUFBRUEsSUFBSUEsQ0FBQ0EsQ0FBQ0E7WUFDZkEsSUFBSUEsR0FBR0EsQ0FBQ0EsQ0FBQ0EsRUFBRUEsR0FBR0EsQ0FBQ0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7WUFDdkJBLENBQUNBLElBQUlBLFNBQVNBLENBQUNBLE1BQU1BLENBQUNBLElBQUlBLENBQUNBLEdBQUdBLFNBQVNBLENBQUNBLE1BQU1BLENBQUNBLElBQUlBLENBQUNBLEdBQUdBLElBQUlBLENBQUNBO1FBQzdEQSxDQUFDQTtRQUNEQSxNQUFNQSxDQUFDQSxDQUFDQSxDQUFDQTtJQUNWQSxDQUFDQTtJQTNLYXJCLHVCQUFTQSxHQUFHQSxrRUFBa0VBLENBQUNBO0lBNEs5RkEsb0JBQUNBO0FBQURBLENBbExBLEFBa0xDQSxJQUFBO0FBRUQsQUFBdUIsaUJBQWQsYUFBYSxDQUFDIiwiZmlsZSI6InV0aWxzL0J5dGVBcnJheUJhc2UuanMiLCJzb3VyY2VSb290IjoiLi4vIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEFic3RyYWN0TWV0aG9kRXJyb3JcdFx0PSByZXF1aXJlKFwiYXdheWpzLWNvcmUvbGliL2Vycm9ycy9BYnN0cmFjdE1ldGhvZEVycm9yXCIpO1xuXG5jbGFzcyBCeXRlQXJyYXlCYXNlXG57XG5cdHB1YmxpYyBwb3NpdGlvbjpudW1iZXIgPSAwO1xuXHRwdWJsaWMgbGVuZ3RoOm51bWJlciA9IDA7XG5cdHB1YmxpYyBfbW9kZTpzdHJpbmcgPSBcIlwiO1xuXG5cdHB1YmxpYyBzdGF0aWMgQmFzZTY0S2V5ID0gXCJBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OSsvXCI7XG5cblx0Y29uc3RydWN0b3IoKVxuXHR7XG5cdH1cblxuXHRwdWJsaWMgd3JpdGVCeXRlKGI6bnVtYmVyKVxuXHR7XG5cdFx0dGhyb3cgXCJWaXJ0dWFsIG1ldGhvZFwiO1xuXHR9XG5cblx0cHVibGljIHJlYWRCeXRlKCk6bnVtYmVyXG5cdHtcblx0XHR0aHJvdyBcIlZpcnR1YWwgbWV0aG9kXCI7XG5cdH1cblxuXHRwdWJsaWMgd3JpdGVVbnNpZ25lZEJ5dGUoYjpudW1iZXIpXG5cdHtcblx0XHR0aHJvdyBcIlZpcnR1YWwgbWV0aG9kXCI7XG5cdH1cblxuXHRwdWJsaWMgcmVhZFVuc2lnbmVkQnl0ZSgpOm51bWJlclxuXHR7XG5cdFx0dGhyb3cgXCJWaXJ0dWFsIG1ldGhvZFwiO1xuXHR9XG5cblx0cHVibGljIHdyaXRlVW5zaWduZWRTaG9ydChiOm51bWJlcilcblx0e1xuXHRcdHRocm93IFwiVmlydHVhbCBtZXRob2RcIjtcblx0fVxuXG5cdHB1YmxpYyByZWFkVW5zaWduZWRTaG9ydCgpOm51bWJlclxuXHR7XG5cdFx0dGhyb3cgXCJWaXJ0dWFsIG1ldGhvZFwiO1xuXHR9XG5cblx0cHVibGljIHdyaXRlVW5zaWduZWRJbnQoYjpudW1iZXIpXG5cdHtcblx0XHR0aHJvdyBcIlZpcnR1YWwgbWV0aG9kXCI7XG5cdH1cblxuXHRwdWJsaWMgcmVhZFVuc2lnbmVkSW50KCk6bnVtYmVyXG5cdHtcblx0XHR0aHJvdyBcIlZpcnR1YWwgbWV0aG9kXCI7XG5cdH1cblxuXHRwdWJsaWMgd3JpdGVGbG9hdChiOm51bWJlcilcblx0e1xuXHRcdHRocm93IFwiVmlydHVhbCBtZXRob2RcIjtcblx0fVxuXG5cdHB1YmxpYyB0b0Zsb2F0Qml0cyh4Om51bWJlcilcblx0e1xuXHRcdHRocm93IFwiVmlydHVhbCBtZXRob2RcIjtcblx0fVxuXG5cdHB1YmxpYyByZWFkRmxvYXQoYjpudW1iZXIpXG5cdHtcblx0XHR0aHJvdyBcIlZpcnR1YWwgbWV0aG9kXCI7XG5cdH1cblxuXHRwdWJsaWMgZnJvbUZsb2F0Qml0cyh4Om51bWJlcilcblx0e1xuXHRcdHRocm93IFwiVmlydHVhbCBtZXRob2RcIjtcblx0fVxuXG5cdHB1YmxpYyBnZXRCeXRlc0F2YWlsYWJsZSgpOm51bWJlclxuXHR7XG5cdFx0dGhyb3cgbmV3IEFic3RyYWN0TWV0aG9kRXJyb3IoJ0J5dGVBcnJheUJhc2UsIGdldEJ5dGVzQXZhaWxhYmxlKCkgbm90IGltcGxlbWVudGVkICcpO1xuXHR9XG5cblx0cHVibGljIHRvU3RyaW5nKCk6c3RyaW5nXG5cdHtcblx0XHRyZXR1cm4gXCJbQnl0ZUFycmF5XSAoIFwiICsgdGhpcy5fbW9kZSArIFwiICkgcG9zaXRpb249XCIgKyB0aGlzLnBvc2l0aW9uICsgXCIgbGVuZ3RoPVwiICsgdGhpcy5sZW5ndGg7XG5cdH1cblxuXHRwdWJsaWMgY29tcGFyZUVxdWFsKG90aGVyLCBjb3VudClcblx0e1xuXHRcdGlmIChjb3VudCA9PSB1bmRlZmluZWQgfHwgY291bnQgPiB0aGlzLmxlbmd0aCAtIHRoaXMucG9zaXRpb24pXG5cdFx0XHRjb3VudCA9IHRoaXMubGVuZ3RoIC0gdGhpcy5wb3NpdGlvbjtcblx0XHRpZiAoY291bnQgPiBvdGhlci5sZW5ndGggLSBvdGhlci5wb3NpdGlvbilcblx0XHRcdGNvdW50ID0gb3RoZXIubGVuZ3RoIC0gb3RoZXIucG9zaXRpb247XG5cdFx0dmFyIGNvMCA9IGNvdW50O1xuXHRcdHZhciByID0gdHJ1ZTtcblx0XHR3aGlsZSAociAmJiBjb3VudCA+PSA0KSB7XG5cdFx0XHRjb3VudCAtPSA0O1xuXHRcdFx0aWYgKHRoaXMucmVhZFVuc2lnbmVkSW50KCkgIT0gb3RoZXIucmVhZFVuc2lnbmVkSW50KCkpIHIgPSBmYWxzZTtcblx0XHR9XG5cdFx0d2hpbGUgKHIgJiYgY291bnQgPj0gMSkge1xuXHRcdFx0Y291bnQtLTtcblx0XHRcdGlmICh0aGlzLnJlYWRVbnNpZ25lZEJ5dGUoKSAhPSBvdGhlci5yZWFkVW5zaWduZWRCeXRlKCkpIHIgPSBmYWxzZTtcblx0XHR9XG5cdFx0dmFyIGMwO1xuXHRcdHRoaXMucG9zaXRpb24gLT0gKGMwIC0gY291bnQpO1xuXHRcdG90aGVyLnBvc2l0aW9uIC09IChjMCAtIGNvdW50KTtcblx0XHRyZXR1cm4gcjtcblx0fVxuXG5cdHB1YmxpYyB3cml0ZUJhc2U2NFN0cmluZyhzOnN0cmluZylcblx0e1xuXHRcdGZvciAodmFyIGk6bnVtYmVyID0gMDsgaSA8IHMubGVuZ3RoOyBpKyspIHtcblx0XHRcdHZhciB2ID0gcy5jaGFyQXQoaSk7XG5cdFx0fVxuXHR9XG5cblx0cHVibGljIGR1bXBUb0NvbnNvbGUoKVxuXHR7XG5cdFx0dmFyIG9sZHBvcyA9IHRoaXMucG9zaXRpb247XG5cdFx0dGhpcy5wb3NpdGlvbiA9IDA7XG5cdFx0dmFyIG5zdGVwOm51bWJlciA9IDg7XG5cblx0XHRmdW5jdGlvbiBhc0hleFN0cmluZyh4LCBkaWdpdHMpXG5cdFx0e1xuXHRcdFx0dmFyIGx1dDpBcnJheTxzdHJpbmc+ID0gWyBcIjBcIiwgXCIxXCIsIFwiMlwiLCBcIjNcIiwgXCI0XCIsIFwiNVwiLCBcIjZcIiwgXCI3XCIsIFwiOFwiLCBcIjlcIiwgXCJhXCIsIFwiYlwiLCBcImNcIiwgXCJkXCIsIFwiZVwiLCBcImZcIiBdO1xuXHRcdFx0dmFyIHNoOnN0cmluZyA9IFwiXCI7XG5cdFx0XHRmb3IgKHZhciBkOm51bWJlciA9IDA7IGQgPCBkaWdpdHM7IGQrKykge1xuXHRcdFx0XHRzaCA9IGx1dFsoeCA+PiAoZCA8PCAyKSkgJiAweGZdICsgc2g7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gc2g7XG5cdFx0fVxuXG5cdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmxlbmd0aDsgaSArPSBuc3RlcCkge1xuXHRcdFx0dmFyIHM6c3RyaW5nID0gYXNIZXhTdHJpbmcoaSwgNCkgKyBcIjpcIjtcblx0XHRcdGZvciAodmFyIGo6bnVtYmVyID0gMDsgaiA8IG5zdGVwICYmIGkgKyBqIDwgdGhpcy5sZW5ndGg7IGorKykge1xuXHRcdFx0XHRzICs9IFwiIFwiICsgYXNIZXhTdHJpbmcodGhpcy5yZWFkVW5zaWduZWRCeXRlKCksIDIpO1xuXHRcdFx0fVxuXHRcdFx0Y29uc29sZS5sb2cocyk7XG5cdFx0fVxuXHRcdHRoaXMucG9zaXRpb24gPSBvbGRwb3M7XG5cdH1cblxuXHRwdWJsaWMgcmVhZEJhc2U2NFN0cmluZyhjb3VudDpudW1iZXIpXG5cdHtcblx0XHRpZiAoY291bnQgPT0gdW5kZWZpbmVkIHx8IGNvdW50ID4gdGhpcy5sZW5ndGggLSB0aGlzLnBvc2l0aW9uKVxuXHRcdFx0Y291bnQgPSB0aGlzLmxlbmd0aCAtIHRoaXMucG9zaXRpb247XG5cdFx0aWYgKCEoY291bnQgPiAwKSkgcmV0dXJuIFwiXCI7XG5cblx0XHRyZXR1cm4gQnl0ZUFycmF5QmFzZS5pbnRlcm5hbEdldEJhc2U2NFN0cmluZyhjb3VudCwgdGhpcy5yZWFkVW5zaWduZWRCeXRlLCB0aGlzKTtcblx0fVxuXG5cdHB1YmxpYyBzdGF0aWMgaW50ZXJuYWxHZXRCYXNlNjRTdHJpbmcoY291bnQsIGdldFVuc2lnbmVkQnl0ZUZ1bmMsIHNlbGYpXG5cdHsgLy8gcmV0dXJuIGJhc2U2NCBzdHJpbmcgb2YgdGhlIG5leHQgY291bnQgYnl0ZXNcblx0XHR2YXIgciA9IFwiXCI7XG5cdFx0dmFyIGIwLCBiMSwgYjIsIGVuYzEsIGVuYzIsIGVuYzMsIGVuYzQ7XG5cdFx0dmFyIGJhc2U2NEtleSA9IEJ5dGVBcnJheUJhc2UuQmFzZTY0S2V5O1xuXHRcdHdoaWxlIChjb3VudCA+PSAzKSB7XG5cdFx0XHRiMCA9IGdldFVuc2lnbmVkQnl0ZUZ1bmMuYXBwbHkoc2VsZik7XG5cdFx0XHRiMSA9IGdldFVuc2lnbmVkQnl0ZUZ1bmMuYXBwbHkoc2VsZik7XG5cdFx0XHRiMiA9IGdldFVuc2lnbmVkQnl0ZUZ1bmMuYXBwbHkoc2VsZik7XG5cdFx0XHRlbmMxID0gYjAgPj4gMjtcblx0XHRcdGVuYzIgPSAoKGIwICYgMykgPDwgNCkgfCAoYjEgPj4gNCk7XG5cdFx0XHRlbmMzID0gKChiMSAmIDE1KSA8PCAyKSB8IChiMiA+PiA2KTtcblx0XHRcdGVuYzQgPSBiMiAmIDYzO1xuXHRcdFx0ciArPSBiYXNlNjRLZXkuY2hhckF0KGVuYzEpICsgYmFzZTY0S2V5LmNoYXJBdChlbmMyKSArIGJhc2U2NEtleS5jaGFyQXQoZW5jMykgKyBiYXNlNjRLZXkuY2hhckF0KGVuYzQpO1xuXHRcdFx0Y291bnQgLT0gMztcblx0XHR9XG5cdFx0Ly8gcGFkXG5cdFx0aWYgKGNvdW50ID09IDIpIHtcblx0XHRcdGIwID0gZ2V0VW5zaWduZWRCeXRlRnVuYy5hcHBseShzZWxmKTtcblx0XHRcdGIxID0gZ2V0VW5zaWduZWRCeXRlRnVuYy5hcHBseShzZWxmKTtcblx0XHRcdGVuYzEgPSBiMCA+PiAyO1xuXHRcdFx0ZW5jMiA9ICgoYjAgJiAzKSA8PCA0KSB8IChiMSA+PiA0KTtcblx0XHRcdGVuYzMgPSAoKGIxICYgMTUpIDw8IDIpO1xuXHRcdFx0ciArPSBiYXNlNjRLZXkuY2hhckF0KGVuYzEpICsgYmFzZTY0S2V5LmNoYXJBdChlbmMyKSArIGJhc2U2NEtleS5jaGFyQXQoZW5jMykgKyBcIj1cIjtcblx0XHR9IGVsc2UgaWYgKGNvdW50ID09IDEpIHtcblx0XHRcdGIwID0gZ2V0VW5zaWduZWRCeXRlRnVuYy5hcHBseShzZWxmKTtcblx0XHRcdGVuYzEgPSBiMCA+PiAyO1xuXHRcdFx0ZW5jMiA9ICgoYjAgJiAzKSA8PCA0KTtcblx0XHRcdHIgKz0gYmFzZTY0S2V5LmNoYXJBdChlbmMxKSArIGJhc2U2NEtleS5jaGFyQXQoZW5jMikgKyBcIj09XCI7XG5cdFx0fVxuXHRcdHJldHVybiByO1xuXHR9XG59XG5cbmV4cG9ydCA9IEJ5dGVBcnJheUJhc2U7Il19