var __extends = this.__extends || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    __.prototype = b.prototype;
    d.prototype = new __();
};
var ByteArrayBase = require("awayjs-core/lib/utils/ByteArrayBase");
var ByteArray = (function (_super) {
    __extends(ByteArray, _super);
    function ByteArray() {
        _super.call(this);
        this.maxlength = 0;
        this._mode = "Typed array";
        this.maxlength = 4;
        this.arraybytes = new ArrayBuffer(this.maxlength);
        this.unalignedarraybytestemp = new ArrayBuffer(16);
    }
    ByteArray.prototype.ensureWriteableSpace = function (n) {
        this.ensureSpace(n + this.position);
    };
    ByteArray.prototype.setArrayBuffer = function (aBuffer) {
        this.ensureSpace(aBuffer.byteLength);
        this.length = aBuffer.byteLength;
        var inInt8AView = new Int8Array(aBuffer);
        var localInt8View = new Int8Array(this.arraybytes, 0, this.length);
        localInt8View.set(inInt8AView);
        this.position = 0;
    };
    ByteArray.prototype.getBytesAvailable = function () {
        return (this.length) - (this.position);
    };
    ByteArray.prototype.ensureSpace = function (n) {
        if (n > this.maxlength) {
            var newmaxlength = (n + 255) & (~255);
            var newarraybuffer = new ArrayBuffer(newmaxlength);
            var view = new Uint8Array(this.arraybytes, 0, this.length);
            var newview = new Uint8Array(newarraybuffer, 0, this.length);
            newview.set(view); // memcpy
            this.arraybytes = newarraybuffer;
            this.maxlength = newmaxlength;
        }
    };
    ByteArray.prototype.writeByte = function (b) {
        this.ensureWriteableSpace(1);
        var view = new Int8Array(this.arraybytes);
        view[this.position++] = (~~b); // ~~ is cast to int in js...
        if (this.position > this.length) {
            this.length = this.position;
        }
    };
    ByteArray.prototype.readByte = function () {
        if (this.position >= this.length) {
            throw "ByteArray out of bounds read. Positon=" + this.position + ", Length=" + this.length;
        }
        var view = new Int8Array(this.arraybytes);
        return view[this.position++];
    };
    ByteArray.prototype.readBytes = function (bytes, offset, length) {
        if (offset === void 0) { offset = 0; }
        if (length === void 0) { length = 0; }
        if (length == null) {
            length = bytes.length;
        }
        bytes.ensureWriteableSpace(offset + length);
        var byteView = new Int8Array(bytes.arraybytes);
        var localByteView = new Int8Array(this.arraybytes);
        byteView.set(localByteView.subarray(this.position, this.position + length), offset);
        this.position += length;
        if (length + offset > bytes.length) {
            bytes.length += (length + offset) - bytes.length;
        }
    };
    ByteArray.prototype.writeUnsignedByte = function (b) {
        this.ensureWriteableSpace(1);
        var view = new Uint8Array(this.arraybytes);
        view[this.position++] = (~~b) & 0xff; // ~~ is cast to int in js...
        if (this.position > this.length) {
            this.length = this.position;
        }
    };
    ByteArray.prototype.readUnsignedByte = function () {
        if (this.position >= this.length) {
            throw "ByteArray out of bounds read. Positon=" + this.position + ", Length=" + this.length;
        }
        var view = new Uint8Array(this.arraybytes);
        return view[this.position++];
    };
    ByteArray.prototype.writeUnsignedShort = function (b) {
        this.ensureWriteableSpace(2);
        if ((this.position & 1) == 0) {
            var view = new Uint16Array(this.arraybytes);
            view[this.position >> 1] = (~~b) & 0xffff; // ~~ is cast to int in js...
        }
        else {
            var view = new Uint16Array(this.unalignedarraybytestemp, 0, 1);
            view[0] = (~~b) & 0xffff;
            var view2 = new Uint8Array(this.arraybytes, this.position, 2);
            var view3 = new Uint8Array(this.unalignedarraybytestemp, 0, 2);
            view2.set(view3);
        }
        this.position += 2;
        if (this.position > this.length) {
            this.length = this.position;
        }
    };
    ByteArray.prototype.readUTFBytes = function (len) {
        var value = "";
        var max = this.position + len;
        var data = new DataView(this.arraybytes);
        while (this.position < max) {
            var c = data.getUint8(this.position++);
            if (c < 0x80) {
                if (c == 0)
                    break;
                value += String.fromCharCode(c);
            }
            else if (c < 0xE0) {
                value += String.fromCharCode(((c & 0x3F) << 6) | (data.getUint8(this.position++) & 0x7F));
            }
            else if (c < 0xF0) {
                var c2 = data.getUint8(this.position++);
                value += String.fromCharCode(((c & 0x1F) << 12) | ((c2 & 0x7F) << 6) | (data.getUint8(this.position++) & 0x7F));
            }
            else {
                var c2 = data.getUint8(this.position++);
                var c3 = data.getUint8(this.position++);
                value += String.fromCharCode(((c & 0x0F) << 18) | ((c2 & 0x7F) << 12) | ((c3 << 6) & 0x7F) | (data.getUint8(this.position++) & 0x7F));
            }
        }
        return value;
    };
    ByteArray.prototype.readInt = function () {
        var data = new DataView(this.arraybytes);
        var int = data.getInt32(this.position, true);
        this.position += 4;
        return int;
    };
    ByteArray.prototype.readShort = function () {
        var data = new DataView(this.arraybytes);
        var short = data.getInt16(this.position, true);
        this.position += 2;
        return short;
    };
    ByteArray.prototype.readDouble = function () {
        var data = new DataView(this.arraybytes);
        var double = data.getFloat64(this.position, true);
        this.position += 8;
        return double;
    };
    ByteArray.prototype.readUnsignedShort = function () {
        if (this.position > this.length + 2) {
            throw "ByteArray out of bounds read. Position=" + this.position + ", Length=" + this.length;
        }
        if ((this.position & 1) == 0) {
            var view = new Uint16Array(this.arraybytes);
            var pa = this.position >> 1;
            this.position += 2;
            return view[pa];
        }
        else {
            var view = new Uint16Array(this.unalignedarraybytestemp, 0, 1);
            var view2 = new Uint8Array(this.arraybytes, this.position, 2);
            var view3 = new Uint8Array(this.unalignedarraybytestemp, 0, 2);
            view3.set(view2);
            this.position += 2;
            return view[0];
        }
    };
    ByteArray.prototype.writeUnsignedInt = function (b) {
        this.ensureWriteableSpace(4);
        if ((this.position & 3) == 0) {
            var view = new Uint32Array(this.arraybytes);
            view[this.position >> 2] = (~~b) & 0xffffffff; // ~~ is cast to int in js...
        }
        else {
            var view = new Uint32Array(this.unalignedarraybytestemp, 0, 1);
            view[0] = (~~b) & 0xffffffff;
            var view2 = new Uint8Array(this.arraybytes, this.position, 4);
            var view3 = new Uint8Array(this.unalignedarraybytestemp, 0, 4);
            view2.set(view3);
        }
        this.position += 4;
        if (this.position > this.length) {
            this.length = this.position;
        }
    };
    ByteArray.prototype.readUnsignedInt = function () {
        if (this.position > this.length + 4) {
            throw "ByteArray out of bounds read. Position=" + this.position + ", Length=" + this.length;
        }
        if ((this.position & 3) == 0) {
            var view = new Uint32Array(this.arraybytes);
            var pa = this.position >> 2;
            this.position += 4;
            return view[pa];
        }
        else {
            var view = new Uint32Array(this.unalignedarraybytestemp, 0, 1);
            var view2 = new Uint8Array(this.arraybytes, this.position, 4);
            var view3 = new Uint8Array(this.unalignedarraybytestemp, 0, 4);
            view3.set(view2);
            this.position += 4;
            return view[0];
        }
    };
    ByteArray.prototype.writeFloat = function (b) {
        this.ensureWriteableSpace(4);
        if ((this.position & 3) == 0) {
            var view = new Float32Array(this.arraybytes);
            view[this.position >> 2] = b;
        }
        else {
            var view = new Float32Array(this.unalignedarraybytestemp, 0, 1);
            view[0] = b;
            var view2 = new Uint8Array(this.arraybytes, this.position, 4);
            var view3 = new Uint8Array(this.unalignedarraybytestemp, 0, 4);
            view2.set(view3);
        }
        this.position += 4;
        if (this.position > this.length) {
            this.length = this.position;
        }
    };
    ByteArray.prototype.readFloat = function () {
        if (this.position > this.length + 4) {
            throw "ByteArray out of bounds read. Positon=" + this.position + ", Length=" + this.length;
        }
        if ((this.position & 3) == 0) {
            var view = new Float32Array(this.arraybytes);
            var pa = this.position >> 2;
            this.position += 4;
            return view[pa];
        }
        else {
            var view = new Float32Array(this.unalignedarraybytestemp, 0, 1);
            var view2 = new Uint8Array(this.arraybytes, this.position, 4);
            var view3 = new Uint8Array(this.unalignedarraybytestemp, 0, 4);
            view3.set(view2);
            this.position += 4;
            return view[0];
        }
    };
    return ByteArray;
})(ByteArrayBase);
module.exports = ByteArray;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImF3YXlqcy1jb3JlL2xpYi91dGlscy9CeXRlQXJyYXkudHMiXSwibmFtZXMiOlsiQnl0ZUFycmF5IiwiQnl0ZUFycmF5LmNvbnN0cnVjdG9yIiwiQnl0ZUFycmF5LmVuc3VyZVdyaXRlYWJsZVNwYWNlIiwiQnl0ZUFycmF5LnNldEFycmF5QnVmZmVyIiwiQnl0ZUFycmF5LmdldEJ5dGVzQXZhaWxhYmxlIiwiQnl0ZUFycmF5LmVuc3VyZVNwYWNlIiwiQnl0ZUFycmF5LndyaXRlQnl0ZSIsIkJ5dGVBcnJheS5yZWFkQnl0ZSIsIkJ5dGVBcnJheS5yZWFkQnl0ZXMiLCJCeXRlQXJyYXkud3JpdGVVbnNpZ25lZEJ5dGUiLCJCeXRlQXJyYXkucmVhZFVuc2lnbmVkQnl0ZSIsIkJ5dGVBcnJheS53cml0ZVVuc2lnbmVkU2hvcnQiLCJCeXRlQXJyYXkucmVhZFVURkJ5dGVzIiwiQnl0ZUFycmF5LnJlYWRJbnQiLCJCeXRlQXJyYXkucmVhZFNob3J0IiwiQnl0ZUFycmF5LnJlYWREb3VibGUiLCJCeXRlQXJyYXkucmVhZFVuc2lnbmVkU2hvcnQiLCJCeXRlQXJyYXkud3JpdGVVbnNpZ25lZEludCIsIkJ5dGVBcnJheS5yZWFkVW5zaWduZWRJbnQiLCJCeXRlQXJyYXkud3JpdGVGbG9hdCIsIkJ5dGVBcnJheS5yZWFkRmxvYXQiXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLElBQU8sYUFBYSxXQUFhLHFDQUFxQyxDQUFDLENBQUM7QUFFeEUsSUFBTSxTQUFTO0lBQVNBLFVBQWxCQSxTQUFTQSxVQUFzQkE7SUFNcENBLFNBTktBLFNBQVNBO1FBUWJDLGlCQUFPQSxDQUFDQTtRQU5GQSxjQUFTQSxHQUFVQSxDQUFDQSxDQUFDQTtRQU8zQkEsSUFBSUEsQ0FBQ0EsS0FBS0EsR0FBR0EsYUFBYUEsQ0FBQ0E7UUFDM0JBLElBQUlBLENBQUNBLFNBQVNBLEdBQUdBLENBQUNBLENBQUNBO1FBQ25CQSxJQUFJQSxDQUFDQSxVQUFVQSxHQUFHQSxJQUFJQSxXQUFXQSxDQUFDQSxJ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RUFBRUEsSUFBSUEsQ0FBQ0EsUUFBUUEsR0FBR0EsTUFBTUEsQ0FBQ0EsRUFBRUEsTUFBTUEsQ0FBQ0EsQ0FBQ0E7UUFFcEZBLElBQUlBLENBQUNBLFFBQVFBLElBQUlBLE1BQU1BLENBQUNBO1FBRXhCQSxFQUFFQSxDQUFDQSxDQUFDQSxNQUFNQSxHQUFHQSxNQUFNQSxHQUFHQSxLQUFLQSxDQUFDQSxNQUFNQSxDQUFDQSxDQUFDQSxDQUFDQTtZQUNwQ0EsS0FBS0EsQ0FBQ0EsTUFBTUEsSUFBSUEsQ0FBRUEsTUFBTUEsR0FBR0EsTUFBTUEsQ0FBRUEsR0FBR0EsS0FBS0EsQ0FBQ0EsTUFBTUEsQ0FBQ0E7UUFDcERBLENBQUNBO0lBRUZBLENBQUNBO0lBRU1SLHFDQUFpQkEsR0FBeEJBLFVBQXlCQSxDQUFRQTtRQUVoQ1MsSUFBSUEsQ0FBQ0Esb0JBQW9CQSxDQUFDQSxDQUFDQSxDQUFDQSxDQUFDQTtRQUM3QkEsSUFBSUEsSUFBSUEsR0FBR0EsSUFBSUEsVUFBVUEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsVUFBVUEsQ0FBQ0EsQ0FBQ0E7UUFDM0NBLElBQUlBLENBQUNBLElBQUlBLENBQUNBLFFBQVFBLEVBQUVBLENBQUNBLEdBQUdBLENBQUNBLENBQUNBLENBQUNBLENBQUNBLENBQUNBLEdBQUdBLElBQUlBLEVBQUVBLDZCQUE2QkE7UUFDbkVBLEVBQUVBLENBQUNBLENBQUNBLElBQUlBLENBQUNBLFFBQVFBLEdBQUdBLElBQUlBLENBQUNBLE1BQU1BLENBQUNBLENBQUNBLENBQUNBO1lBQ2pDQSxJQUFJQSxDQUFDQSxNQUFNQSxHQUFHQSxJQUFJQSxDQUFDQSxRQUFRQSxDQUFDQTtRQUM3QkEsQ0FBQ0E7SUFDRkEsQ0FBQ0E7SUFFTVQsb0NBQWdCQSxHQUF2QkE7UUFFQ1UsRUFBRUEsQ0FBQ0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EsUUFBUUEsSUFBSUEsSUFBSUEsQ0FBQ0EsTUFBTUEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7WUFDbENBLE1BQU1BLHdDQUF3Q0EsR0FBR0EsSUFBSUEsQ0FBQ0EsUUFBUUEsR0FBR0EsV0FBV0EsR0FBR0EsSUFBSUEsQ0FBQ0EsTUFBTUEsQ0FBQ0E7UUFDNUZBLENBQUNBO1FBQ0RBLElBQUlBLElBQUlBLEdBQUdBLElBQUlBLFVBQVVBLENBQUNBLElBQUlBLENBQUNBLFVBQVVBLENBQUNBLENBQUNBO1FBQzNDQSxNQUFNQSxDQUFDQSxJQUFJQSxDQUFDQSxJQUFJQSxDQUFDQSxRQUFRQSxFQUFFQSxDQUFDQSxDQUFDQTtJQUM5QkEsQ0FBQ0E7SUFFTVYsc0NBQWtCQSxHQUF6QkEsVUFBMEJBLENBQVFBO1FBRWpDVyxJQUFJQSxDQUFDQSxvQkFBb0JBLENBQUNBLENBQUNBLENBQUNBLENBQUNBO1FBQzdCQSxFQUFFQSxDQUFDQSxDQUFDQSxDQUFFQSxJQUFJQSxDQUFDQSxRQUFRQSxHQUFHQSxDQUFDQSxDQUFFQSxJQUFJQSxDQUFDQSxDQUFDQSxDQUFDQSxDQUFDQTtZQUNoQ0EsSUFBSUEsSUFBSUEsR0FBR0EsSUFBSUEsV0FBV0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EsVUFBVUEsQ0FBQ0EsQ0FBQ0E7WUFDNUNBLElBQUlBLENBQUVBLElBQUlBLENBQUNBLFFBQVFBLElBQUlBLENBQUNBLENBQUVBLEdBQUdBLENBQUNBLENBQUNBLENBQUNBLENBQUNBLENBQUNBLEdBQUdBLE1BQU1BLEVBQUVBLDZCQUE2QkE7UUFDM0VBLENBQUNBLEdBRDRDQTtRQUMzQ0EsSUFBSUEsQ0FBQ0EsQ0FBQ0E7WUFDUEEsSUFBSUEsSUFBSUEsR0FBR0EsSUFBSUEsV0FBV0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EsdUJBQXVCQSxFQUFFQSxDQUFDQSxFQUFFQSxDQUFDQSxDQUFDQSxDQUFDQTtZQUMvREEsSUFBSUEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsR0FBR0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsR0FBR0EsTUFBTUEsQ0FBQ0E7WUFDekJBLElBQUlBLEtBQUtBLEdBQUdBLElBQUlBLFVBQVVBLENBQUNBLElBQUlBLENBQUNBLFVBQVVBLEVBQUVBLElBQUlBLENBQUNBLFFBQVFBLEVBQUVBLENBQUNBLENBQUNBLENBQUNBO1lBQzlEQSxJQUFJQSxLQUFLQSxHQUFHQSxJQUFJQSxVQUFVQSxDQUFDQSxJQUFJQSxDQUFDQSx1QkFBdUJBLEVBQUVBLENBQUNBLEVBQUVBLENBQUNBLENBQUNBLENBQUNBO1lBQy9EQSxLQUFLQSxDQUFDQSxHQUFHQSxDQUFDQSxLQUFLQSxDQUFDQSxDQUFDQTtRQUNsQkEsQ0FBQ0E7UUFDREEsSUFBSUEsQ0FBQ0EsUUFBUUEsSUFBSUEsQ0FBQ0EsQ0FBQ0E7UUFDbkJBLEVBQUVBLENBQUNBLENBQUNBLElBQUlBLENBQUNBLFFBQVFBLEdBQUdBLElBQUlBLENBQUNBLE1BQU1BLENBQUNBLENBQUNBLENBQUNBO1lBQ2pDQSxJQUFJQSxDQUFDQSxNQUFNQSxHQUFHQSxJQUFJQSxDQUFDQSxRQUFRQSxDQUFDQTtRQUM3QkEsQ0FBQ0E7SUFDRkEsQ0FBQ0E7SUFFTVgsZ0NBQVlBLEdBQW5CQSxVQUFvQkEsR0FBVUE7UUFHN0JZLElBQUlBLEtBQUtBLEdBQVVBLEVBQUVBLENBQUNBO1FBQ3RCQSxJQUFJQSxHQUFHQSxHQUFVQSxJQUFJQSxDQUFDQSxRQUFRQSxHQUFHQSxHQUFHQSxDQUFDQTtRQUNyQ0EsSUFBSUEsSUFBSUEsR0FBWUEsSUFBSUEsUUFBUUEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsVUFBVUEsQ0FBQ0EsQ0FBQ0E7UUFHbERBLE9BQU9BLElBQUlBLENBQUNBLFFBQVFBLEdBQUdBLEdBQUdBLEVBQUVBLENBQUNBO1lBRTVCQSxJQUFJQSxDQUFDQSxHQUFVQSxJQUFJQSxDQUFDQSxRQUFRQSxDQUFDQSxJQUFJQSxDQUFDQSxRQUFRQSxFQUFFQSxDQUFDQSxDQUFDQTtZQUU5Q0EsRUFBRUEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsR0FBR0EsSUFBSUEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7Z0JBRWRBLEVBQUVBLENBQUNBLENBQUNBLENBQUNBLElBQUlBLENBQUNBLENBQUNBO29CQUFDQSxLQUFLQSxDQUFDQTtnQkFDbEJBLEtBQUtBLElBQUlBLE1BQU1BLENBQUNBLFlBQVlBLENBQUNBLENBQUNBLENBQUNBLENBQUNBO1lBRWpDQSxDQUFDQTtZQUFDQSxJQUFJQSxDQUFDQSxFQUFFQSxDQUFDQSxDQUFDQSxDQUFDQSxHQUFHQSxJQUFJQSxDQUFDQSxDQUFDQSxDQUFDQTtnQkFFckJBLEtBQUtBLElBQUlBLE1BQU1BLENBQUNBLFlBQVlBLENBQUNBLENBQUNBLENBQUNBLENBQUNBLEdBQUdBLElBQUlBLENBQUNBLElBQUlBLENBQUNBLENBQUNBLEdBQUdBLENBQUNBLElBQUlBLENBQUNBLFFBQVFBLENBQUNBLElBQUlBLENBQUNBLFFBQVFBLEVBQUVBLENBQUNBLEdBQUdBLElBQUlBLENBQUNBLENBQUNBLENBQUNBO1lBRTNGQSxDQUFDQTtZQUFDQSxJQUFJQSxDQUFDQSxFQUFFQSxDQUFDQSxDQUFDQSxDQUFDQSxHQUFHQSxJQUFJQSxDQUFDQSxDQUFDQSxDQUFDQTtnQkFFckJBLElBQUlBLEVBQUVBLEdBQUdBLElBQUlBLENBQUNBLFFBQVFBLENBQUNBLElBQUlBLENBQUNBLFFBQVFBLEVBQUVBLENBQUNBLENBQUNBO2dCQUN4Q0EsS0FBS0EsSUFBSUEsTUFBTUEsQ0FBQ0EsWUFBWUEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsR0FBR0EsSUFBSUEsQ0FBQ0EsSUFBSUEsRUFBRUEsQ0FBQ0EsR0FBR0EsQ0FBQ0EsQ0FBQ0EsRUFBRUEsR0FBR0EsSUFBSUEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsQ0FBQ0EsR0FBR0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EsUUFBUUEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsUUFBUUEsRUFBRUEsQ0FBQ0EsR0FBR0EsSUFBSUEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7WUFFakhBLENBQUNBO1lBQUNBLElBQUlBLENBQUNBLENBQUNBO2dCQUVQQSxJQUFJQSxFQUFFQSxHQUFHQSxJQUFJQSxDQUFDQSxRQUFRQSxDQUFDQSxJQUFJQSxDQUFDQSxRQUFRQSxFQUFFQSxDQUFDQSxDQUFDQTtnQkFDeENBLElBQUlBLEVBQUVBLEdBQUdBLElBQUlBLENBQUNBLFFBQVFBLENBQUNBLElBQUlBLENBQUNBLFFBQVFBLEVBQUVBLENBQUNBLENBQUNBO2dCQUV4Q0EsS0FBS0EsSUFBSUEsTUFBTUEsQ0FBQ0EsWUFBWUEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsR0FBR0EsSUFBSUEsQ0FBQ0EsSUFBSUEsRUFBRUEsQ0FBQ0EsR0FBR0EsQ0FBQ0EsQ0FBQ0EsRUFBRUEsR0FBR0EsSUFBSUEsQ0FBQ0EsSUFBSUEsRUFBRUEsQ0FBQ0EsR0FBR0EsQ0FBQ0EsQ0FBQ0EsRUFBRUEsSUFBSUEsQ0FBQ0EsQ0FBQ0EsR0FBR0EsSUFBSUEsQ0FBQ0EsR0FBR0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EsUUFBUUEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsUUFBUUEsRUFBRUEsQ0FBQ0EsR0FBR0EsSUFBSUEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7WUFFdklBLENBQUNBO1FBRUZBLENBQUNBO1FBRURBLE1BQU1BLENBQUNBLEtBQUtBLENBQUNBO0lBRWRBLENBQUNBO0lBRU1aLDJCQUFPQSxHQUFkQTtRQUdDYSxJQUFJQSxJQUFJQSxHQUFZQSxJQUFJQSxRQUFRQSxDQUFDQSxJQUFJQSxDQUFDQSxVQUFVQSxDQUFDQSxDQUFDQTtRQUNsREEsSUFBSUEsR0FBR0EsR0FBVUEsSUFBSUEsQ0FBQ0EsUUFBUUEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsUUFBUUEsRUFBRUEsSUFBSUEsQ0FBQ0EsQ0FBQ0E7UUFFcERBLElBQUlBLENBQUNBLFFBQVFBLElBQUlBLENBQUNBLENBQUNBO1FBRW5CQSxNQUFNQSxDQUFDQSxHQUFHQSxDQUFDQTtJQUVaQSxDQUFDQTtJQUVNYiw2QkFBU0EsR0FBaEJBO1FBR0NjLElBQUlBLElBQUlBLEdBQVlBLElBQUlBLFFBQVFBLENBQUNBLElBQUlBLENBQUNBLFVBQVVBLENBQUNBLENBQUNBO1FBQ2xEQSxJQUFJQSxLQUFLQSxHQUFVQSxJQUFJQSxDQUFDQSxRQUFRQSxDQUFDQSxJQUFJQSxDQUFDQSxRQUFRQSxFQUFFQSxJQUFJQSxDQUFDQSxDQUFDQTtRQUV0REEsSUFBSUEsQ0FBQ0EsUUFBUUEsSUFBSUEsQ0FBQ0EsQ0FBQ0E7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Q0FBRUEsSUFBSUEsQ0FBQ0EsUUFBUUEsR0FBR0EsQ0FBQ0EsQ0FBRUEsSUFBSUEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7WUFDaENBLElBQUlBLElBQUlBLEdBQUdBLElBQUlBLFlBQVlBLENBQUNBLElBQUlBLENBQUNBLFVBQVVBLENBQUNBLENBQUNBO1lBQzdDQSxJQUFJQSxDQUFFQSxJQUFJQSxDQUFDQSxRQUFRQSxJQUFJQSxDQUFDQSxDQUFFQSxHQUFHQSxDQUFDQSxDQUFDQTtRQUNoQ0EsQ0FBQ0E7UUFBQ0EsSUFBSUEsQ0FBQ0EsQ0FBQ0E7WUFDUEEsSUFBSUEsSUFBSUEsR0FBR0EsSUFBSUEsWUFBWUEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsdUJBQXVCQSxFQUFFQSxDQUFDQSxFQUFFQSxDQUFDQSxDQUFDQSxDQUFDQTtZQUNoRUEsSUFBSUEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsR0FBR0EsQ0FBQ0EsQ0FBQ0E7WUFDWkEsSUFBSUEsS0FBS0EsR0FBR0EsSUFBSUEsVUFBVUEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsVUFBVUEsRUFBRUEsSUFBSUEsQ0FBQ0EsUUFBUUEsRUFBRUEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7WUFDOURBLElBQUlBLEtBQUtBLEdBQUdBLElBQUlBLFVBQVVBLENBQUNBLElBQUlBLENBQUNBLHVCQUF1QkEsRUFBRUEsQ0FBQ0EsRUFBRUEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7WUFDL0RBLEtBQUtBLENBQUNBLEdBQUdBLENBQUNBLEtBQUtBLENBQUNBLENBQUNBO1FBQ2xCQSxDQUFDQTtRQUNEQSxJQUFJQSxDQUFDQSxRQUFRQSxJQUFJQSxDQUFDQSxDQUFDQTtRQUNuQkEsRUFBRUEsQ0FBQ0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EsUUFBUUEsR0FBR0EsSUFBSUEsQ0FBQ0EsTUFBTUEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7WUFDakNBLElBQUlBLENBQUNBLE1BQU1BLEdBQUdBLElBQUlBLENBQUNBLFFBQVFBLENBQUNBO1FBQzdCQSxDQUFDQTtJQUNGQSxDQUFDQTtJQUVNbkIsNkJBQVNBLEdBQWhCQTtRQUVDb0IsRUFBRUEsQ0FBQ0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EsUUFBUUEsR0FBR0EsSUFBSUEsQ0FBQ0EsTUFBTUEsR0FBR0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7WUFDckNBLE1BQU1BLHdDQUF3Q0EsR0FBR0EsSUFBSUEsQ0FBQ0EsUUFBUUEsR0FBR0EsV0FBV0EsR0FBR0EsSUFBSUEsQ0FBQ0EsTUFBTUEsQ0FBQ0E7UUFDNUZBLENBQUNBO1FBQ0RBLEVBQUVBLENBQUNBLENBQUNBLENBQUNBLElBQUlBLENBQUNBLFFBQVFBLEdBQUdBLENBQUNBLENBQUNBLElBQUlBLENBQUNBLENBQUNBLENBQUNBLENBQUNBO1lBQzlCQSxJQUFJQSxJQUFJQSxHQUFHQSxJQUFJQSxZQUFZQSxDQUFDQSxJQUFJQSxDQUFDQSxVQUFVQSxDQUFDQSxDQUFDQTtZQUM3Q0EsSUFBSUEsRUFBRUEsR0FBR0EsSUFBSUEsQ0FBQ0EsUUFBUUEsSUFBSUEsQ0FBQ0EsQ0FBQ0E7WUFDNUJBLElBQUlBLENBQUNBLFFBQVFBLElBQUlBLENBQUNBLENBQUNBO1lBQ25CQSxNQUFNQSxDQUFDQSxJQUFJQSxDQUFDQSxFQUFFQSxDQUFDQSxDQUFDQTtRQUNqQkEsQ0FBQ0E7UUFBQ0EsSUFBSUEsQ0FBQ0EsQ0FBQ0E7WUFDUEEsSUFBSUEsSUFBSUEsR0FBR0EsSUFBSUEsWUFBWUEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsdUJBQXVCQSxFQUFFQSxDQUFDQSxFQUFFQSxDQUFDQSxDQUFDQSxDQUFDQTtZQUNoRUEsSUFBSUEsS0FBS0EsR0FBR0EsSUFBSUEsVUFBVUEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsVUFBVUEsRUFBRUEsSUFBSUEsQ0FBQ0EsUUFBUUEsRUFBRUEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7WUFDOURBLElBQUlBLEtBQUtBLEdBQUdBLElBQUlBLFVBQVVBLENBQUNBLElBQUlBLENBQUNBLHVCQUF1QkEsRUFBRUEsQ0FBQ0EsRUFBRUEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7WUFDL0RBLEtBQUtBLENBQUNBLEdBQUdBLENBQUNBLEtBQUtBLENBQUNBLENBQUNBO1lBQ2pCQSxJQUFJQSxDQUFDQSxRQUFRQSxJQUFJQSxDQUFDQSxDQUFDQTtZQUNuQkEsTUFBTUEsQ0FBQ0EsSUFBSUEsQ0FBRUEsQ0FBQ0EsQ0FBRUEsQ0FBQ0E7UUFDbEJBLENBQUNBO0lBQ0ZBLENBQUNBO0lBQ0ZwQixnQkFBQ0E7QUFBREEsQ0FsVEEsQUFrVENBLEVBbFR1QixhQUFhLEVBa1RwQztBQUVELEFBQW1CLGlCQUFWLFNBQVMsQ0FBQyIsImZpbGUiOiJ1dGlscy9CeXRlQXJyYXkuanMiLCJzb3VyY2VSb290IjoiLi4vIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEJ5dGVBcnJheUJhc2VcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtY29yZS9saWIvdXRpbHMvQnl0ZUFycmF5QmFzZVwiKTtcclxuXHJcbmNsYXNzIEJ5dGVBcnJheSBleHRlbmRzIEJ5dGVBcnJheUJhc2Vcclxue1xyXG5cdHB1YmxpYyBtYXhsZW5ndGg6bnVtYmVyID0gMDtcclxuXHRwdWJsaWMgYXJyYXlieXRlczsgLy9BcnJheUJ1ZmZlclxyXG5cdHB1YmxpYyB1bmFsaWduZWRhcnJheWJ5dGVzdGVtcDsgLy9BcnJheUJ1ZmZlclxyXG5cclxuXHRjb25zdHJ1Y3RvcigpXHJcblx0e1xyXG5cdFx0c3VwZXIoKTtcclxuXHRcdHRoaXMuX21vZGUgPSBcIlR5cGVkIGFycmF5XCI7XHJcblx0XHR0aGlzLm1heGxlbmd0aCA9IDQ7XHJcblx0XHR0aGlzLmFycmF5Ynl0ZXMgPSBuZXcgQXJyYXlCdWZmZXIodGhpcy5tYXhsZW5ndGgpO1xyXG5cdFx0dGhpcy51bmFsaWduZWRhcnJheWJ5dGVzdGVtcCA9IG5ldyBBcnJheUJ1ZmZlcigxNik7XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgZW5zdXJlV3JpdGVhYmxlU3BhY2UobjpudW1iZXIpXHJcblx0e1xyXG5cdFx0dGhpcy5lbnN1cmVTcGFjZShuICsgdGhpcy5wb3NpdGlvbik7XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgc2V0QXJyYXlCdWZmZXIoYUJ1ZmZlcjpBcnJheUJ1ZmZlcik6dm9pZFxyXG5cdHtcclxuXHJcblx0XHR0aGlzLmVuc3VyZVNwYWNlKGFCdWZmZXIuYnl0ZUxlbmd0aCk7XHJcblxyXG5cdFx0dGhpcy5sZW5ndGggPSBhQnVmZmVyLmJ5dGVMZW5ndGg7XHJcblxyXG5cdFx0dmFyIGluSW50OEFWaWV3OkludDhBcnJheSA9IG5ldyBJbnQ4QXJyYXkoYUJ1ZmZlcik7XHJcblx0XHR2YXIgbG9jYWxJbnQ4VmlldzpJbnQ4QXJyYXkgPSBuZXcgSW50OEFycmF5KHRoaXMuYXJyYXlieXRlcywgMCwgdGhpcy5sZW5ndGgpO1xyXG5cclxuXHRcdGxvY2FsSW50OFZpZXcuc2V0KGluSW50OEFWaWV3KTtcclxuXHJcblx0XHR0aGlzLnBvc2l0aW9uID0gMDtcclxuXHJcblx0fVxyXG5cclxuXHRwdWJsaWMgZ2V0Qnl0ZXNBdmFpbGFibGUoKTpudW1iZXJcclxuXHR7XHJcblx0XHRyZXR1cm4gKCB0aGlzLmxlbmd0aCApIC0gKCB0aGlzLnBvc2l0aW9uICk7XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgZW5zdXJlU3BhY2UobjpudW1iZXIpXHJcblx0e1xyXG5cdFx0aWYgKG4gPiB0aGlzLm1heGxlbmd0aCkge1xyXG5cdFx0XHR2YXIgbmV3bWF4bGVuZ3RoOm51bWJlciA9IChuICsgMjU1KSAmICh+MjU1KTtcclxuXHRcdFx0dmFyIG5ld2FycmF5YnVmZmVyID0gbmV3IEFycmF5QnVmZmVyKG5ld21heGxlbmd0aCk7XHJcblx0XHRcdHZhciB2aWV3ID0gbmV3IFVpbnQ4QXJyYXkodGhpcy5hcnJheWJ5dGVzLCAwLCB0aGlzLmxlbmd0aCk7XHJcblx0XHRcdHZhciBuZXd2aWV3ID0gbmV3IFVpbnQ4QXJyYXkobmV3YXJyYXlidWZmZXIsIDAsIHRoaXMubGVuZ3RoKTtcclxuXHRcdFx0bmV3dmlldy5zZXQodmlldyk7ICAgICAgLy8gbWVtY3B5XHJcblx0XHRcdHRoaXMuYXJyYXlieXRlcyA9IG5ld2FycmF5YnVmZmVyO1xyXG5cdFx0XHR0aGlzLm1heGxlbmd0aCA9IG5ld21heGxlbmd0aDtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdHB1YmxpYyB3cml0ZUJ5dGUoYjpudW1iZXIpXHJcblx0e1xyXG5cdFx0dGhpcy5lbnN1cmVXcml0ZWFibGVTcGFjZSgxKTtcclxuXHRcdHZhciB2aWV3ID0gbmV3IEludDhBcnJheSh0aGlzLmFycmF5Ynl0ZXMpO1xyXG5cdFx0dmlld1sgdGhpcy5wb3NpdGlvbisrIF0gPSAofn5iKTsgLy8gfn4gaXMgY2FzdCB0byBpbnQgaW4ganMuLi5cclxuXHRcdGlmICh0aGlzLnBvc2l0aW9uID4gdGhpcy5sZW5ndGgpIHtcclxuXHRcdFx0dGhpcy5sZW5ndGggPSB0aGlzLnBvc2l0aW9uO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0cHVibGljIHJlYWRCeXRlKClcclxuXHR7XHJcblx0XHRpZiAodGhpcy5wb3NpdGlvbiA+PSB0aGlzLmxlbmd0aCkge1xyXG5cdFx0XHR0aHJvdyBcIkJ5dGVBcnJheSBvdXQgb2YgYm91bmRzIHJlYWQuIFBvc2l0b249XCIgKyB0aGlzLnBvc2l0aW9uICsgXCIsIExlbmd0aD1cIiArIHRoaXMubGVuZ3RoO1xyXG5cdFx0fVxyXG5cdFx0dmFyIHZpZXcgPSBuZXcgSW50OEFycmF5KHRoaXMuYXJyYXlieXRlcyk7XHJcblxyXG5cdFx0cmV0dXJuIHZpZXdbIHRoaXMucG9zaXRpb24rKyBdO1xyXG5cdH1cclxuXHJcblx0cHVibGljIHJlYWRCeXRlcyhieXRlczpCeXRlQXJyYXksIG9mZnNldDpudW1iZXIgPSAwLCBsZW5ndGg6bnVtYmVyID0gMClcclxuXHR7XHJcblxyXG5cdFx0aWYgKGxlbmd0aCA9PSBudWxsKSB7XHJcblx0XHRcdGxlbmd0aCA9IGJ5dGVzLmxlbmd0aDtcclxuXHRcdH1cclxuXHJcblx0XHRieXRlcy5lbnN1cmVXcml0ZWFibGVTcGFjZShvZmZzZXQgKyBsZW5ndGgpO1xyXG5cclxuXHRcdHZhciBieXRlVmlldzpJbnQ4QXJyYXkgPSBuZXcgSW50OEFycmF5KGJ5dGVzLmFycmF5Ynl0ZXMpO1xyXG5cdFx0dmFyIGxvY2FsQnl0ZVZpZXc6SW50OEFycmF5ID0gbmV3IEludDhBcnJheSh0aGlzLmFycmF5Ynl0ZXMpO1xyXG5cclxuXHRcdGJ5dGVWaWV3LnNldChsb2NhbEJ5dGVWaWV3LnN1YmFycmF5KHRoaXMucG9zaXRpb24sIHRoaXMucG9zaXRpb24gKyBsZW5ndGgpLCBvZmZzZXQpO1xyXG5cclxuXHRcdHRoaXMucG9zaXRpb24gKz0gbGVuZ3RoO1xyXG5cclxuXHRcdGlmIChsZW5ndGggKyBvZmZzZXQgPiBieXRlcy5sZW5ndGgpIHtcclxuXHRcdFx0Ynl0ZXMubGVuZ3RoICs9ICggbGVuZ3RoICsgb2Zmc2V0ICkgLSBieXRlcy5sZW5ndGg7XHJcblx0XHR9XHJcblxyXG5cdH1cclxuXHJcblx0cHVibGljIHdyaXRlVW5zaWduZWRCeXRlKGI6bnVtYmVyKVxyXG5cdHtcclxuXHRcdHRoaXMuZW5zdXJlV3JpdGVhYmxlU3BhY2UoMSk7XHJcblx0XHR2YXIgdmlldyA9IG5ldyBVaW50OEFycmF5KHRoaXMuYXJyYXlieXRlcyk7XHJcblx0XHR2aWV3W3RoaXMucG9zaXRpb24rK10gPSAofn5iKSAmIDB4ZmY7IC8vIH5+IGlzIGNhc3QgdG8gaW50IGluIGpzLi4uXHJcblx0XHRpZiAodGhpcy5wb3NpdGlvbiA+IHRoaXMubGVuZ3RoKSB7XHJcblx0XHRcdHRoaXMubGVuZ3RoID0gdGhpcy5wb3NpdGlvbjtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdHB1YmxpYyByZWFkVW5zaWduZWRCeXRlKClcclxuXHR7XHJcblx0XHRpZiAodGhpcy5wb3NpdGlvbiA+PSB0aGlzLmxlbmd0aCkge1xyXG5cdFx0XHR0aHJvdyBcIkJ5dGVBcnJheSBvdXQgb2YgYm91bmRzIHJlYWQuIFBvc2l0b249XCIgKyB0aGlzLnBvc2l0aW9uICsgXCIsIExlbmd0aD1cIiArIHRoaXMubGVuZ3RoO1xyXG5cdFx0fVxyXG5cdFx0dmFyIHZpZXcgPSBuZXcgVWludDhBcnJheSh0aGlzLmFycmF5Ynl0ZXMpO1xyXG5cdFx0cmV0dXJuIHZpZXdbdGhpcy5wb3NpdGlvbisrXTtcclxuXHR9XHJcblxyXG5cdHB1YmxpYyB3cml0ZVVuc2lnbmVkU2hvcnQoYjpudW1iZXIpXHJcblx0e1xyXG5cdFx0dGhpcy5lbnN1cmVXcml0ZWFibGVTcGFjZSgyKTtcclxuXHRcdGlmICgoIHRoaXMucG9zaXRpb24gJiAxICkgPT0gMCkge1xyXG5cdFx0XHR2YXIgdmlldyA9IG5ldyBVaW50MTZBcnJheSh0aGlzLmFycmF5Ynl0ZXMpO1xyXG5cdFx0XHR2aWV3WyB0aGlzLnBvc2l0aW9uID4+IDEgXSA9ICh+fmIpICYgMHhmZmZmOyAvLyB+fiBpcyBjYXN0IHRvIGludCBpbiBqcy4uLlxyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0dmFyIHZpZXcgPSBuZXcgVWludDE2QXJyYXkodGhpcy51bmFsaWduZWRhcnJheWJ5dGVzdGVtcCwgMCwgMSk7XHJcblx0XHRcdHZpZXdbMF0gPSAofn5iKSAmIDB4ZmZmZjtcclxuXHRcdFx0dmFyIHZpZXcyID0gbmV3IFVpbnQ4QXJyYXkodGhpcy5hcnJheWJ5dGVzLCB0aGlzLnBvc2l0aW9uLCAyKTtcclxuXHRcdFx0dmFyIHZpZXczID0gbmV3IFVpbnQ4QXJyYXkodGhpcy51bmFsaWduZWRhcnJheWJ5dGVzdGVtcCwgMCwgMik7XHJcblx0XHRcdHZpZXcyLnNldCh2aWV3Myk7XHJcblx0XHR9XHJcblx0XHR0aGlzLnBvc2l0aW9uICs9IDI7XHJcblx0XHRpZiAodGhpcy5wb3NpdGlvbiA+IHRoaXMubGVuZ3RoKSB7XHJcblx0XHRcdHRoaXMubGVuZ3RoID0gdGhpcy5wb3NpdGlvbjtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdHB1YmxpYyByZWFkVVRGQnl0ZXMobGVuOm51bWJlcik6c3RyaW5nXHJcblx0e1xyXG5cclxuXHRcdHZhciB2YWx1ZTpzdHJpbmcgPSBcIlwiO1xyXG5cdFx0dmFyIG1heDpudW1iZXIgPSB0aGlzLnBvc2l0aW9uICsgbGVuO1xyXG5cdFx0dmFyIGRhdGE6RGF0YVZpZXcgPSBuZXcgRGF0YVZpZXcodGhpcy5hcnJheWJ5dGVzKTtcclxuXHJcblx0XHQvLyB1dGY4LWVuY29kZVxyXG5cdFx0d2hpbGUgKHRoaXMucG9zaXRpb24gPCBtYXgpIHtcclxuXHJcblx0XHRcdHZhciBjOm51bWJlciA9IGRhdGEuZ2V0VWludDgodGhpcy5wb3NpdGlvbisrKTtcclxuXHJcblx0XHRcdGlmIChjIDwgMHg4MCkge1xyXG5cclxuXHRcdFx0XHRpZiAoYyA9PSAwKSBicmVhaztcclxuXHRcdFx0XHR2YWx1ZSArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGMpO1xyXG5cclxuXHRcdFx0fSBlbHNlIGlmIChjIDwgMHhFMCkge1xyXG5cclxuXHRcdFx0XHR2YWx1ZSArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKCgoYyAmIDB4M0YpIDw8IDYpIHwgKGRhdGEuZ2V0VWludDgodGhpcy5wb3NpdGlvbisrKSAmIDB4N0YpKTtcclxuXHJcblx0XHRcdH0gZWxzZSBpZiAoYyA8IDB4RjApIHtcclxuXHJcblx0XHRcdFx0dmFyIGMyID0gZGF0YS5nZXRVaW50OCh0aGlzLnBvc2l0aW9uKyspO1xyXG5cdFx0XHRcdHZhbHVlICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoKChjICYgMHgxRikgPDwgMTIpIHwgKChjMiAmIDB4N0YpIDw8IDYpIHwgKGRhdGEuZ2V0VWludDgodGhpcy5wb3NpdGlvbisrKSAmIDB4N0YpKTtcclxuXHJcblx0XHRcdH0gZWxzZSB7XHJcblxyXG5cdFx0XHRcdHZhciBjMiA9IGRhdGEuZ2V0VWludDgodGhpcy5wb3NpdGlvbisrKTtcclxuXHRcdFx0XHR2YXIgYzMgPSBkYXRhLmdldFVpbnQ4KHRoaXMucG9zaXRpb24rKyk7XHJcblxyXG5cdFx0XHRcdHZhbHVlICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoKChjICYgMHgwRikgPDwgMTgpIHwgKChjMiAmIDB4N0YpIDw8IDEyKSB8ICgoYzMgPDwgNikgJiAweDdGKSB8IChkYXRhLmdldFVpbnQ4KHRoaXMucG9zaXRpb24rKykgJiAweDdGKSk7XHJcblxyXG5cdFx0XHR9XHJcblxyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiB2YWx1ZTtcclxuXHJcblx0fVxyXG5cclxuXHRwdWJsaWMgcmVhZEludCgpOm51bWJlclxyXG5cdHtcclxuXHJcblx0XHR2YXIgZGF0YTpEYXRhVmlldyA9IG5ldyBEYXRhVmlldyh0aGlzLmFycmF5Ynl0ZXMpO1xyXG5cdFx0dmFyIGludDpudW1iZXIgPSBkYXRhLmdldEludDMyKHRoaXMucG9zaXRpb24sIHRydWUpO1xyXG5cclxuXHRcdHRoaXMucG9zaXRpb24gKz0gNDtcclxuXHJcblx0XHRyZXR1cm4gaW50O1xyXG5cclxuXHR9XHJcblxyXG5cdHB1YmxpYyByZWFkU2hvcnQoKTpudW1iZXJcclxuXHR7XHJcblxyXG5cdFx0dmFyIGRhdGE6RGF0YVZpZXcgPSBuZXcgRGF0YVZpZXcodGhpcy5hcnJheWJ5dGVzKTtcclxuXHRcdHZhciBzaG9ydDpudW1iZXIgPSBkYXRhLmdldEludDE2KHRoaXMucG9zaXRpb24sIHRydWUpO1xyXG5cclxuXHRcdHRoaXMucG9zaXRpb24gKz0gMjtcclxuXHRcdHJldHVybiBzaG9ydDtcclxuXHJcblx0fVxyXG5cclxuXHRwdWJsaWMgcmVhZERvdWJsZSgpOm51bWJlclxyXG5cdHtcclxuXHRcdHZhciBkYXRhOkRhdGFWaWV3ID0gbmV3IERhdGFWaWV3KHRoaXMuYXJyYXlieXRlcyk7XHJcblx0XHR2YXIgZG91YmxlOm51bWJlciA9IGRhdGEuZ2V0RmxvYXQ2NCh0aGlzLnBvc2l0aW9uLCB0cnVlKTtcclxuXHJcblx0XHR0aGlzLnBvc2l0aW9uICs9IDg7XHJcblx0XHRyZXR1cm4gZG91YmxlO1xyXG5cclxuXHR9XHJcblxyXG5cdHB1YmxpYyByZWFkVW5zaWduZWRTaG9ydCgpXHJcblx0e1xyXG5cdFx0aWYgKHRoaXMucG9zaXRpb24gPiB0aGlzLmxlbmd0aCArIDIpIHtcclxuXHRcdFx0dGhyb3cgXCJCeXRlQXJyYXkgb3V0IG9mIGJvdW5kcyByZWFkLiBQb3NpdGlvbj1cIiArIHRoaXMucG9zaXRpb24gKyBcIiwgTGVuZ3RoPVwiICsgdGhpcy5sZW5ndGg7XHJcblx0XHR9XHJcblx0XHRpZiAoKCB0aGlzLnBvc2l0aW9uICYgMSApID09IDApIHtcclxuXHRcdFx0dmFyIHZpZXcgPSBuZXcgVWludDE2QXJyYXkodGhpcy5hcnJheWJ5dGVzKTtcclxuXHRcdFx0dmFyIHBhOm51bWJlciA9IHRoaXMucG9zaXRpb24gPj4gMTtcclxuXHRcdFx0dGhpcy5wb3NpdGlvbiArPSAyO1xyXG5cdFx0XHRyZXR1cm4gdmlld1sgcGEgXTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHZhciB2aWV3ID0gbmV3IFVpbnQxNkFycmF5KHRoaXMudW5hbGlnbmVkYXJyYXlieXRlc3RlbXAsIDAsIDEpO1xyXG5cdFx0XHR2YXIgdmlldzIgPSBuZXcgVWludDhBcnJheSh0aGlzLmFycmF5Ynl0ZXMsIHRoaXMucG9zaXRpb24sIDIpO1xyXG5cdFx0XHR2YXIgdmlldzMgPSBuZXcgVWludDhBcnJheSh0aGlzLnVuYWxpZ25lZGFycmF5Ynl0ZXN0ZW1wLCAwLCAyKTtcclxuXHRcdFx0dmlldzMuc2V0KHZpZXcyKTtcclxuXHRcdFx0dGhpcy5wb3NpdGlvbiArPSAyO1xyXG5cdFx0XHRyZXR1cm4gdmlld1swXTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdHB1YmxpYyB3cml0ZVVuc2lnbmVkSW50KGI6bnVtYmVyKVxyXG5cdHtcclxuXHRcdHRoaXMuZW5zdXJlV3JpdGVhYmxlU3BhY2UoNCk7XHJcblx0XHRpZiAoKCB0aGlzLnBvc2l0aW9uICYgMyApID09IDApIHtcclxuXHRcdFx0dmFyIHZpZXcgPSBuZXcgVWludDMyQXJyYXkodGhpcy5hcnJheWJ5dGVzKTtcclxuXHRcdFx0dmlld1sgdGhpcy5wb3NpdGlvbiA+PiAyIF0gPSAofn5iKSAmIDB4ZmZmZmZmZmY7IC8vIH5+IGlzIGNhc3QgdG8gaW50IGluIGpzLi4uXHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHR2YXIgdmlldyA9IG5ldyBVaW50MzJBcnJheSh0aGlzLnVuYWxpZ25lZGFycmF5Ynl0ZXN0ZW1wLCAwLCAxKTtcclxuXHRcdFx0dmlld1swXSA9ICh+fmIpICYgMHhmZmZmZmZmZjtcclxuXHRcdFx0dmFyIHZpZXcyID0gbmV3IFVpbnQ4QXJyYXkodGhpcy5hcnJheWJ5dGVzLCB0aGlzLnBvc2l0aW9uLCA0KTtcclxuXHRcdFx0dmFyIHZpZXczID0gbmV3IFVpbnQ4QXJyYXkodGhpcy51bmFsaWduZWRhcnJheWJ5dGVzdGVtcCwgMCwgNCk7XHJcblx0XHRcdHZpZXcyLnNldCh2aWV3Myk7XHJcblx0XHR9XHJcblx0XHR0aGlzLnBvc2l0aW9uICs9IDQ7XHJcblx0XHRpZiAodGhpcy5wb3NpdGlvbiA+IHRoaXMubGVuZ3RoKSB7XHJcblx0XHRcdHRoaXMubGVuZ3RoID0gdGhpcy5wb3NpdGlvbjtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdHB1YmxpYyByZWFkVW5zaWduZWRJbnQoKVxyXG5cdHtcclxuXHJcblx0XHRpZiAodGhpcy5wb3NpdGlvbiA+IHRoaXMubGVuZ3RoICsgNCkge1xyXG5cdFx0XHR0aHJvdyBcIkJ5dGVBcnJheSBvdXQgb2YgYm91bmRzIHJlYWQuIFBvc2l0aW9uPVwiICsgdGhpcy5wb3NpdGlvbiArIFwiLCBMZW5ndGg9XCIgKyB0aGlzLmxlbmd0aDtcclxuXHRcdH1cclxuXHRcdGlmICgoIHRoaXMucG9zaXRpb24gJiAzICkgPT0gMCkge1xyXG5cdFx0XHR2YXIgdmlldyA9IG5ldyBVaW50MzJBcnJheSh0aGlzLmFycmF5Ynl0ZXMpO1xyXG5cdFx0XHR2YXIgcGE6bnVtYmVyID0gdGhpcy5wb3NpdGlvbiA+PiAyO1xyXG5cdFx0XHR0aGlzLnBvc2l0aW9uICs9IDQ7XHJcblx0XHRcdHJldHVybiB2aWV3WyBwYSBdO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0dmFyIHZpZXcgPSBuZXcgVWludDMyQXJyYXkodGhpcy51bmFsaWduZWRhcnJheWJ5dGVzdGVtcCwgMCwgMSk7XHJcblx0XHRcdHZhciB2aWV3MiA9IG5ldyBVaW50OEFycmF5KHRoaXMuYXJyYXlieXRlcywgdGhpcy5wb3NpdGlvbiwgNCk7XHJcblx0XHRcdHZhciB2aWV3MyA9IG5ldyBVaW50OEFycmF5KHRoaXMudW5hbGlnbmVkYXJyYXlieXRlc3RlbXAsIDAsIDQpO1xyXG5cdFx0XHR2aWV3My5zZXQodmlldzIpO1xyXG5cdFx0XHR0aGlzLnBvc2l0aW9uICs9IDQ7XHJcblx0XHRcdHJldHVybiB2aWV3WzBdO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0cHVibGljIHdyaXRlRmxvYXQoYjpudW1iZXIpXHJcblx0e1xyXG5cdFx0dGhpcy5lbnN1cmVXcml0ZWFibGVTcGFjZSg0KTtcclxuXHRcdGlmICgoIHRoaXMucG9zaXRpb24gJiAzICkgPT0gMCkge1xyXG5cdFx0XHR2YXIgdmlldyA9IG5ldyBGbG9hdDMyQXJyYXkodGhpcy5hcnJheWJ5dGVzKTtcclxuXHRcdFx0dmlld1sgdGhpcy5wb3NpdGlvbiA+PiAyIF0gPSBiO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0dmFyIHZpZXcgPSBuZXcgRmxvYXQzMkFycmF5KHRoaXMudW5hbGlnbmVkYXJyYXlieXRlc3RlbXAsIDAsIDEpO1xyXG5cdFx0XHR2aWV3WzBdID0gYjtcclxuXHRcdFx0dmFyIHZpZXcyID0gbmV3IFVpbnQ4QXJyYXkodGhpcy5hcnJheWJ5dGVzLCB0aGlzLnBvc2l0aW9uLCA0KTtcclxuXHRcdFx0dmFyIHZpZXczID0gbmV3IFVpbnQ4QXJyYXkodGhpcy51bmFsaWduZWRhcnJheWJ5dGVzdGVtcCwgMCwgNCk7XHJcblx0XHRcdHZpZXcyLnNldCh2aWV3Myk7XHJcblx0XHR9XHJcblx0XHR0aGlzLnBvc2l0aW9uICs9IDQ7XHJcblx0XHRpZiAodGhpcy5wb3NpdGlvbiA+IHRoaXMubGVuZ3RoKSB7XHJcblx0XHRcdHRoaXMubGVuZ3RoID0gdGhpcy5wb3NpdGlvbjtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdHB1YmxpYyByZWFkRmxvYXQoKVxyXG5cdHtcclxuXHRcdGlmICh0aGlzLnBvc2l0aW9uID4gdGhpcy5sZW5ndGggKyA0KSB7XHJcblx0XHRcdHRocm93IFwiQnl0ZUFycmF5IG91dCBvZiBib3VuZHMgcmVhZC4gUG9zaXRvbj1cIiArIHRoaXMucG9zaXRpb24gKyBcIiwgTGVuZ3RoPVwiICsgdGhpcy5sZW5ndGg7XHJcblx0XHR9XHJcblx0XHRpZiAoKHRoaXMucG9zaXRpb24gJiAzKSA9PSAwKSB7XHJcblx0XHRcdHZhciB2aWV3ID0gbmV3IEZsb2F0MzJBcnJheSh0aGlzLmFycmF5Ynl0ZXMpO1xyXG5cdFx0XHR2YXIgcGEgPSB0aGlzLnBvc2l0aW9uID4+IDI7XHJcblx0XHRcdHRoaXMucG9zaXRpb24gKz0gNDtcclxuXHRcdFx0cmV0dXJuIHZpZXdbcGFdO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0dmFyIHZpZXcgPSBuZXcgRmxvYXQzMkFycmF5KHRoaXMudW5hbGlnbmVkYXJyYXlieXRlc3RlbXAsIDAsIDEpO1xyXG5cdFx0XHR2YXIgdmlldzIgPSBuZXcgVWludDhBcnJheSh0aGlzLmFycmF5Ynl0ZXMsIHRoaXMucG9zaXRpb24sIDQpO1xyXG5cdFx0XHR2YXIgdmlldzMgPSBuZXcgVWludDhBcnJheSh0aGlzLnVuYWxpZ25lZGFycmF5Ynl0ZXN0ZW1wLCAwLCA0KTtcclxuXHRcdFx0dmlldzMuc2V0KHZpZXcyKTtcclxuXHRcdFx0dGhpcy5wb3NpdGlvbiArPSA0O1xyXG5cdFx0XHRyZXR1cm4gdmlld1sgMCBdO1xyXG5cdFx0fVxyXG5cdH1cclxufVxyXG5cclxuZXhwb3J0ID0gQnl0ZUFycmF5OyJdfQ==