var __extends = this.__extends || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    __.prototype = b.prototype;
    d.prototype = new __();
};
var Vector3D = require("awayjs-core/lib/geom/Vector3D");
var ProjectionBase = require("awayjs-core/lib/projections/ProjectionBase");
var OrthographicOffCenterProjection = (function (_super) {
    __extends(OrthographicOffCenterProjection, _super);
    function OrthographicOffCenterProjection(minX, maxX, minY, maxY) {
        _super.call(this);
        this._minX = minX;
        this._maxX = maxX;
        this._minY = minY;
        this._maxY = maxY;
    }
    Object.defineProperty(OrthographicOffCenterProjection.prototype, "minX", {
        get: function () {
            return this._minX;
        },
        set: function (value) {
            this._minX = value;
            this.pInvalidateMatrix();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(OrthographicOffCenterProjection.prototype, "maxX", {
        get: function () {
            return this._maxX;
        },
        set: function (value) {
            this._maxX = value;
            this.pInvalidateMatrix();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(OrthographicOffCenterProjection.prototype, "minY", {
        get: function () {
            return this._minY;
        },
        set: function (value) {
            this._minY = value;
            this.pInvalidateMatrix();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(OrthographicOffCenterProjection.prototype, "maxY", {
        get: function () {
            return this._maxY;
        },
        set: function (value) {
            this._maxY = value;
            this.pInvalidateMatrix();
        },
        enumerable: true,
        configurable: true
    });
    //@override
    OrthographicOffCenterProjection.prototype.unproject = function (nX, nY, sZ) {
        var v = new Vector3D(nX, -nY, sZ, 1.0);
        v = this.unprojectionMatrix.transformVector(v);
        //z is unaffected by transform
        v.z = sZ;
        return v;
    };
    //@override
    OrthographicOffCenterProjection.prototype.clone = function () {
        var clone = new OrthographicOffCenterProjection(this._minX, this._maxX, this._minY, this._maxY);
        clone._pNear = this._pNear;
        clone._pFar = this._pFar;
        clone._pAspectRatio = this._pAspectRatio;
        return clone;
    };
    //@override
    OrthographicOffCenterProjection.prototype.pUpdateMatrix = function () {
        var raw = [];
        var w = 1 / (this._maxX - this._minX);
        var h = 1 / (this._maxY - this._minY);
        var d = 1 / (this._pFar - this._pNear);
        raw[0] = 2 * w;
        raw[5] = 2 * h;
        raw[10] = d;
        raw[12] = -(this._maxX + this._minX) * w;
        raw[13] = -(this._maxY + this._minY) * h;
        raw[14] = -this._pNear * d;
        raw[15] = 1;
        raw[1] = raw[2] = raw[3] = raw[4] = raw[6] = raw[7] = raw[8] = raw[9] = raw[11] = 0;
        this._pMatrix.copyRawDataFrom(raw);
        this._pFrustumCorners[0] = this._pFrustumCorners[9] = this._pFrustumCorners[12] = this._pFrustumCorners[21] = this._minX;
        this._pFrustumCorners[3] = this._pFrustumCorners[6] = this._pFrustumCorners[15] = this._pFrustumCorners[18] = this._maxX;
        this._pFrustumCorners[1] = this._pFrustumCorners[4] = this._pFrustumCorners[13] = this._pFrustumCorners[16] = this._minY;
        this._pFrustumCorners[7] = this._pFrustumCorners[10] = this._pFrustumCorners[19] = this._pFrustumCorners[22] = this._maxY;
        this._pFrustumCorners[2] = this._pFrustumCorners[5] = this._pFrustumCorners[8] = this._pFrustumCorners[11] = this._pNear;
        this._pFrustumCorners[14] = this._pFrustumCorners[17] = this._pFrustumCorners[20] = this._pFrustumCorners[23] = this._pFar;
        this._pMatrixInvalid = false;
    };
    return OrthographicOffCenterProjection;
})(ProjectionBase);
module.exports = OrthographicOffCenterProjection;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImF3YXlqcy1jb3JlL2xpYi9wcm9qZWN0aW9ucy9PcnRob2dyYXBoaWNPZmZDZW50ZXJQcm9qZWN0aW9uLnRzIl0sIm5hbWVzIjpbIk9ydGhvZ3JhcGhpY09mZkNlbnRlclByb2plY3Rpb24iLCJPcnRob2dyYXBoaWNPZmZDZW50ZXJQcm9qZWN0aW9uLmNvbnN0cnVjdG9yIiwiT3J0aG9ncmFwaGljT2ZmQ2VudGVyUHJvamVjdGlvbi5taW5YIiwiT3J0aG9ncmFwaGljT2ZmQ2VudGVyUHJvamVjdGlvbi5tYXhYIiwiT3J0aG9ncmFwaGljT2ZmQ2VudGVyUHJvamVjdGlvbi5taW5ZIiwiT3J0aG9ncmFwaGljT2ZmQ2VudGVyUHJvamVjdGlvbi5tYXhZIiwiT3J0aG9ncmFwaGljT2ZmQ2VudGVyUHJvamVjdGlvbi51bnByb2plY3QiLCJPcnRob2dyYXBoaWNPZmZDZW50ZXJQcm9qZWN0aW9uLmNsb25lIiwiT3J0aG9ncmFwaGljT2ZmQ2VudGVyUHJvamVjdGlvbi5wVXBkYXRlTWF0cml4Il0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSxJQUFPLFFBQVEsV0FBZSwrQkFBK0IsQ0FBQyxDQUFDO0FBQy9ELElBQU8sY0FBYyxXQUFhLDRDQUE0QyxDQUFDLENBQUM7QUFFaEYsSUFBTSwrQkFBK0I7SUFBU0EsVUFBeENBLCtCQUErQkEsVUFBdUJBO0lBUTNEQSxTQVJLQSwrQkFBK0JBLENBUXhCQSxJQUFXQSxFQUFFQSxJQUFXQSxFQUFFQSxJQUFXQSxFQUFFQSxJQUFXQTtRQUU3REMsaUJBQU9BLENBQUNBO1FBQ1JBLElBQUlBLENBQUNBLEtBQUtBLEdBQUdBLElBQUlBLENBQUNBO1FBQ2xCQSxJQUFJQSxDQUFDQSxLQUFLQSxHQUFHQSxJQUFJQSxDQUFDQTtRQUNsQkEsSUFBSUEsQ0FBQ0EsS0FBS0EsR0FBR0EsSUFBSUEsQ0FBQ0E7UUFDbEJBLElBQUlBLENBQUNBLEtBQUtBLEdBQUdBLElBQUlBLENBQUNBO0lBQ25CQSxDQUFDQTtJQUVERCxzQkFBV0EsaURBQUlB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LElBQUlBLENBQUNBLEdBQVVBLENBQUNBLEdBQUNBLENBQUNBLElBQUlBLENBQUNBLEtBQUtBLEdBQUdBLElBQUlBLENBQUNBLE1BQU1BLENBQUNBLENBQUNBO1FBRTVDQSxHQUFHQSxDQUFDQSxDQUFDQSxDQUFDQSxHQUFHQSxDQUFDQSxHQUFDQSxDQUFDQSxDQUFDQTtRQUNiQSxHQUFHQSxDQUFDQSxDQUFDQSxDQUFDQSxHQUFHQSxDQUFDQSxHQUFDQSxDQUFDQSxDQUFDQTtRQUNiQSxHQUFHQSxDQUFDQSxFQUFFQSxDQUFDQSxHQUFHQSxDQUFDQSxDQUFDQTtRQUNaQSxHQUFHQSxDQUFDQSxFQUFFQSxDQUFDQSxHQUFHQSxDQUFDQSxDQUFDQSxJQUFJQSxDQUFDQSxLQUFLQSxHQUFHQSxJQUFJQSxDQUFDQSxLQUFLQSxDQUFDQSxHQUFDQSxDQUFDQSxDQUFDQTtRQUN2Q0EsR0FBR0EsQ0FBQ0EsRUFBRUEsQ0FBQ0EsR0FBR0EsQ0FBQ0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EsS0FBS0EsR0FBR0EsSUFBSUEsQ0FBQ0EsS0FBS0EsQ0FBQ0EsR0FBQ0EsQ0FBQ0EsQ0FBQ0E7UUFDdkNBLEdBQUdBLENBQUNBLEVBQUVBLENBQUNBLEdBQUdBLENBQUNBLElBQUlBLENBQUNBLE1BQU1BLEdBQUNBLENBQUNBLENBQUNBO1FBQ3pCQSxHQUFHQSxDQUFDQSxFQUFFQSxDQUFDQSxHQUFHQSxDQUFDQSxDQUFDQTtRQUNaQSxHQUFHQSxDQUFDQSxDQUFDQSxDQUFDQSxHQUFHQSxHQUFHQSxDQUFDQSxDQUFDQSxDQUFDQSxHQUFHQSxHQUFHQSxDQUFDQSxDQUFDQSxDQUFDQSxHQUFHQSxHQUFHQSxDQUFDQSxDQUFDQSxDQUFDQSxHQUFHQSxHQUFHQSxDQUFDQSxDQUFDQSxDQUFDQSxHQUFHQSxHQUFHQSxDQUFDQSxDQUFDQSxDQUFDQSxHQUFHQSxHQUFHQSxDQUFDQSxDQUFDQSxDQUFDQSxHQUFHQSxHQUFHQSxDQUFDQSxDQUFDQSxDQUFDQSxHQUFHQSxHQUFHQSxDQUFDQSxFQUFFQSxDQUFDQSxHQUFHQSxDQUFDQSxDQUFDQTtRQUNwRkEsSUFBSUEsQ0FBQ0EsUUFBUUEsQ0FBQ0EsZUFBZUEsQ0FBQ0EsR0FBR0EsQ0FBQ0EsQ0FBQ0E7UUFFbkNBLElBQUlBLENBQUNBLGdCQUFnQkEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsR0FBR0EsSUFBSUEsQ0FBQ0EsZ0JBQWdCQSxDQUFDQSxDQUFDQSxDQUFDQSxHQUFHQSxJQUFJQSxDQUFDQSxnQkFBZ0JBLENBQUNBLEVBQUVBLENBQUNBLEdBQUdBLElBQUlBLENBQUNBLGdCQUFnQkEsQ0FBQ0EsRUFBRUEsQ0FBQ0EsR0FBR0EsSUFBSUEsQ0FBQ0EsS0FBS0EsQ0FBQ0E7UUFDekhBLElBQUlBLENBQUNBLGdCQUFnQkEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsR0FBR0EsSUFBSUEsQ0FBQ0EsZ0JBQWdCQSxDQUFDQSxDQUFDQSxDQUFDQSxHQUFHQSxJQUFJQSxDQUFDQSxnQkFBZ0JBLENBQUNBLEVBQUVBLENBQUNBLEdBQUdBLElBQUlBLENBQUNBLGdCQUFnQkEsQ0FBQ0EsRUFBRUEsQ0FBQ0EsR0FBR0EsSUFBSUEsQ0FBQ0EsS0FBS0EsQ0FBQ0E7UUFDekhBLElBQUlBLENBQUNBLGdCQUFnQkEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsR0FBR0EsSUFBSUEsQ0FBQ0EsZ0JBQWdCQSxDQUFDQSxDQUFDQSxDQUFDQSxHQUFHQSxJQUFJQSxDQUFDQSxnQkFBZ0JBLENBQUNBLEVBQUVBLENBQUNBLEdBQUdBLElBQUlBLENBQUNBLGdCQUFnQkEsQ0FBQ0EsRUFBRUEsQ0FBQ0EsR0FBR0EsSUFBSUEsQ0FBQ0EsS0FBS0EsQ0FBQ0E7UUFDekhBLElBQUlBLENBQUNBLGdCQUFnQkEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsR0FBR0EsSUFBSUEsQ0FBQ0EsZ0JBQWdCQSxDQUFDQSxFQUFFQSxDQUFDQSxHQUFHQSxJQUFJQSxDQUFDQSxnQkFBZ0JBLENBQUNBLEVBQUVBLENBQUNBLEdBQUdBLElBQUlBLENBQUNBLGdCQUFnQkEsQ0FBQ0EsRUFBRUEsQ0FBQ0EsR0FBR0EsSUFBSUEsQ0FBQ0EsS0FBS0EsQ0FBQ0E7UUFDMUhBLElBQUlBLENBQUNBLGdCQUFnQkEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsR0FBR0EsSUFBSUEsQ0FBQ0EsZ0JBQWdCQSxDQUFDQSxDQUFDQSxDQUFDQSxHQUFHQSxJQUFJQSxDQUFDQSxnQkFBZ0JBLENBQUNBLENBQUNBLENBQUNBLEdBQUdBLElBQUlBLENBQUNBLGdCQUFnQkEsQ0FBQ0EsRUFBRUEsQ0FBQ0EsR0FBR0EsSUFBSUEsQ0FBQ0EsTUFBTUEsQ0FBQ0E7UUFDekhBLElBQUlBLENBQUNBLGdCQUFnQkEsQ0FBQ0EsRUFBRUEsQ0FBQ0EsR0FBR0EsSUFBSUEsQ0FBQ0EsZ0JBQWdCQSxDQUFDQSxFQUFFQSxDQUFDQSxHQUFHQSxJQUFJQSxDQUFDQSxnQkFBZ0JBLENBQUNBLEVBQUVBLENBQUNBLEdBQUdBLElBQUlBLENBQUNBLGdCQUFnQkEsQ0FBQ0EsRUFBRUEsQ0FBQ0EsR0FBR0EsSUFBSUEsQ0FBQ0EsS0FBS0EsQ0FBQ0E7UUFFM0hBLElBQUlBLENBQUNBLGVBQWVBLEdBQUdBLEtBQUtBLENBQUNBO0lBQzlCQSxDQUFDQTtJQUNGUixzQ0FBQ0E7QUFBREEsQ0E3R0EsQUE2R0NBLEVBN0c2QyxjQUFjLEVBNkczRDtBQUVELEFBQXlDLGlCQUFoQywrQkFBK0IsQ0FBQyIsImZpbGUiOiJwcm9qZWN0aW9ucy9PcnRob2dyYXBoaWNPZmZDZW50ZXJQcm9qZWN0aW9uLmpzIiwic291cmNlUm9vdCI6Ii4uLyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBWZWN0b3IzRFx0XHRcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtY29yZS9saWIvZ2VvbS9WZWN0b3IzRFwiKTtcclxuaW1wb3J0IFByb2plY3Rpb25CYXNlXHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLWNvcmUvbGliL3Byb2plY3Rpb25zL1Byb2plY3Rpb25CYXNlXCIpO1xyXG5cclxuY2xhc3MgT3J0aG9ncmFwaGljT2ZmQ2VudGVyUHJvamVjdGlvbiBleHRlbmRzIFByb2plY3Rpb25CYXNlXHJcbntcclxuXHJcblx0cHJpdmF0ZSBfbWluWDpudW1iZXI7XHJcblx0cHJpdmF0ZSBfbWF4WDpudW1iZXI7XHJcblx0cHJpdmF0ZSBfbWluWTpudW1iZXI7XHJcblx0cHJpdmF0ZSBfbWF4WTpudW1iZXI7XHJcblxyXG5cdGNvbnN0cnVjdG9yKG1pblg6bnVtYmVyLCBtYXhYOm51bWJlciwgbWluWTpudW1iZXIsIG1heFk6bnVtYmVyKVxyXG5cdHtcclxuXHRcdHN1cGVyKCk7XHJcblx0XHR0aGlzLl9taW5YID0gbWluWDtcclxuXHRcdHRoaXMuX21heFggPSBtYXhYO1xyXG5cdFx0dGhpcy5fbWluWSA9IG1pblk7XHJcblx0XHR0aGlzLl9tYXhZID0gbWF4WTtcclxuXHR9XHJcblxyXG5cdHB1YmxpYyBnZXQgbWluWCgpOm51bWJlclxyXG5cdHtcclxuXHRcdHJldHVybiB0aGlzLl9taW5YO1xyXG5cdH1cclxuXHJcblx0cHVibGljIHNldCBtaW5YKHZhbHVlOm51bWJlcilcclxuXHR7XHJcblx0XHR0aGlzLl9taW5YID0gdmFsdWU7XHJcblx0XHR0aGlzLnBJbnZhbGlkYXRlTWF0cml4KCk7XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgZ2V0IG1heFgoKTpudW1iZXJcclxuXHR7XHJcblx0XHRyZXR1cm4gdGhpcy5fbWF4WDtcclxuXHR9XHJcblxyXG5cdHB1YmxpYyBzZXQgbWF4WCh2YWx1ZTpudW1iZXIpXHJcblx0e1xyXG5cdFx0dGhpcy5fbWF4WCA9IHZhbHVlO1xyXG5cdFx0dGhpcy5wSW52YWxpZGF0ZU1hdHJpeCgpO1xyXG5cdH1cclxuXHJcblx0cHVibGljIGdldCBtaW5ZKCk6bnVtYmVyXHJcblx0e1xyXG5cdFx0cmV0dXJuIHRoaXMuX21pblk7XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgc2V0IG1pblkodmFsdWU6bnVtYmVyKVxyXG5cdHtcclxuXHRcdHRoaXMuX21pblkgPSB2YWx1ZTtcclxuXHRcdHRoaXMucEludmFsaWRhdGVNYXRyaXgoKTtcclxuXHR9XHJcblxyXG5cdHB1YmxpYyBnZXQgbWF4WSgpOm51bWJlclxyXG5cdHtcclxuXHRcdHJldHVybiB0aGlzLl9tYXhZO1xyXG5cdH1cclxuXHJcblx0cHVibGljIHNldCBtYXhZKHZhbHVlOm51bWJlcilcclxuXHR7XHJcblx0XHR0aGlzLl9tYXhZID0gdmFsdWU7XHJcblx0XHR0aGlzLnBJbnZhbGlkYXRlTWF0cml4KCk7XHJcblx0fVxyXG5cclxuXHQvL0BvdmVycmlkZVxyXG5cdHB1YmxpYyB1bnByb2plY3Qoblg6bnVtYmVyLCBuWTpudW1iZXIsIHNaOm51bWJlcik6VmVjdG9yM0RcclxuXHR7XHJcblx0XHR2YXIgdjpWZWN0b3IzRCA9IG5ldyBWZWN0b3IzRChuWCwgLW5ZLCBzWiwgMS4wKTtcclxuXHRcdHYgPSB0aGlzLnVucHJvamVjdGlvbk1hdHJpeC50cmFuc2Zvcm1WZWN0b3Iodik7XHJcblx0XHQvL3ogaXMgdW5hZmZlY3RlZCBieSB0cmFuc2Zvcm1cclxuXHRcdHYueiA9IHNaO1xyXG5cclxuXHRcdHJldHVybiB2O1xyXG5cdH1cclxuXHJcblx0Ly9Ab3ZlcnJpZGVcclxuXHRwdWJsaWMgY2xvbmUoKTpQcm9qZWN0aW9uQmFzZVxyXG5cdHtcclxuXHRcdHZhciBjbG9uZTpPcnRob2dyYXBoaWNPZmZDZW50ZXJQcm9qZWN0aW9uID0gbmV3IE9ydGhvZ3JhcGhpY09mZkNlbnRlclByb2plY3Rpb24odGhpcy5fbWluWCwgdGhpcy5fbWF4WCwgdGhpcy5fbWluWSwgdGhpcy5fbWF4WSk7XHJcblx0XHRjbG9uZS5fcE5lYXIgPSB0aGlzLl9wTmVhcjtcclxuXHRcdGNsb25lLl9wRmFyID0gdGhpcy5fcEZhcjtcclxuXHRcdGNsb25lLl9wQXNwZWN0UmF0aW8gPSB0aGlzLl9wQXNwZWN0UmF0aW87XHJcblx0XHRyZXR1cm4gY2xvbmU7XHJcblx0fVxyXG5cclxuXHQvL0BvdmVycmlkZVxyXG5cdHB1YmxpYyBwVXBkYXRlTWF0cml4KClcclxuXHR7XHJcblx0XHR2YXIgcmF3Om51bWJlcltdID0gW107XHJcblx0XHR2YXIgdzpudW1iZXIgPSAxLyh0aGlzLl9tYXhYIC0gdGhpcy5fbWluWCk7XHJcblx0XHR2YXIgaDpudW1iZXIgPSAxLyh0aGlzLl9tYXhZIC0gdGhpcy5fbWluWSk7XHJcblx0XHR2YXIgZDpudW1iZXIgPSAxLyh0aGlzLl9wRmFyIC0gdGhpcy5fcE5lYXIpO1xyXG5cclxuXHRcdHJhd1swXSA9IDIqdztcclxuXHRcdHJhd1s1XSA9IDIqaDtcclxuXHRcdHJhd1sxMF0gPSBkO1xyXG5cdFx0cmF3WzEyXSA9IC0odGhpcy5fbWF4WCArIHRoaXMuX21pblgpKnc7XHJcblx0XHRyYXdbMTNdID0gLSh0aGlzLl9tYXhZICsgdGhpcy5fbWluWSkqaDtcclxuXHRcdHJhd1sxNF0gPSAtdGhpcy5fcE5lYXIqZDtcclxuXHRcdHJhd1sxNV0gPSAxO1xyXG5cdFx0cmF3WzFdID0gcmF3WzJdID0gcmF3WzNdID0gcmF3WzRdID0gcmF3WzZdID0gcmF3WzddID0gcmF3WzhdID0gcmF3WzldID0gcmF3WzExXSA9IDA7XHJcblx0XHR0aGlzLl9wTWF0cml4LmNvcHlSYXdEYXRhRnJvbShyYXcpO1xyXG5cclxuXHRcdHRoaXMuX3BGcnVzdHVtQ29ybmVyc1swXSA9IHRoaXMuX3BGcnVzdHVtQ29ybmVyc1s5XSA9IHRoaXMuX3BGcnVzdHVtQ29ybmVyc1sxMl0gPSB0aGlzLl9wRnJ1c3R1bUNvcm5lcnNbMjFdID0gdGhpcy5fbWluWDtcclxuXHRcdHRoaXMuX3BGcnVzdHVtQ29ybmVyc1szXSA9IHRoaXMuX3BGcnVzdHVtQ29ybmVyc1s2XSA9IHRoaXMuX3BGcnVzdHVtQ29ybmVyc1sxNV0gPSB0aGlzLl9wRnJ1c3R1bUNvcm5lcnNbMThdID0gdGhpcy5fbWF4WDtcclxuXHRcdHRoaXMuX3BGcnVzdHVtQ29ybmVyc1sxXSA9IHRoaXMuX3BGcnVzdHVtQ29ybmVyc1s0XSA9IHRoaXMuX3BGcnVzdHVtQ29ybmVyc1sxM10gPSB0aGlzLl9wRnJ1c3R1bUNvcm5lcnNbMTZdID0gdGhpcy5fbWluWTtcclxuXHRcdHRoaXMuX3BGcnVzdHVtQ29ybmVyc1s3XSA9IHRoaXMuX3BGcnVzdHVtQ29ybmVyc1sxMF0gPSB0aGlzLl9wRnJ1c3R1bUNvcm5lcnNbMTldID0gdGhpcy5fcEZydXN0dW1Db3JuZXJzWzIyXSA9IHRoaXMuX21heFk7XHJcblx0XHR0aGlzLl9wRnJ1c3R1bUNvcm5lcnNbMl0gPSB0aGlzLl9wRnJ1c3R1bUNvcm5lcnNbNV0gPSB0aGlzLl9wRnJ1c3R1bUNvcm5lcnNbOF0gPSB0aGlzLl9wRnJ1c3R1bUNvcm5lcnNbMTFdID0gdGhpcy5fcE5lYXI7XHJcblx0XHR0aGlzLl9wRnJ1c3R1bUNvcm5lcnNbMTRdID0gdGhpcy5fcEZydXN0dW1Db3JuZXJzWzE3XSA9IHRoaXMuX3BGcnVzdHVtQ29ybmVyc1syMF0gPSB0aGlzLl9wRnJ1c3R1bUNvcm5lcnNbMjNdID0gdGhpcy5fcEZhcjtcclxuXHJcblx0XHR0aGlzLl9wTWF0cml4SW52YWxpZCA9IGZhbHNlO1xyXG5cdH1cclxufVxyXG5cclxuZXhwb3J0ID0gT3J0aG9ncmFwaGljT2ZmQ2VudGVyUHJvamVjdGlvbjsiXX0=