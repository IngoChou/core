var __extends = this.__extends || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    __.prototype = b.prototype;
    d.prototype = new __();
};
var Vector3D = require("awayjs-core/lib/core/geom/Vector3D");
var CoordinateSystem = require("awayjs-core/lib/projections/CoordinateSystem");
var ProjectionBase = require("awayjs-core/lib/projections/ProjectionBase");

var PerspectiveProjection = (function (_super) {
    __extends(PerspectiveProjection, _super);
    function PerspectiveProjection(fieldOfView, coordinateSystem) {
        if (typeof fieldOfView === "undefined") { fieldOfView = 60; }
        if (typeof coordinateSystem === "undefined") { coordinateSystem = "leftHanded"; }
        _super.call(this, coordinateSystem);
        this._fieldOfView = 60;
        this._focalLength = 1000;
        this._hFieldOfView = 60;
        this._hFocalLength = 1000;
        this._preserveAspectRatio = true;
        this._preserveFocalLength = false;
        this.fieldOfView = fieldOfView;
    }
    Object.defineProperty(PerspectiveProjection.prototype, "preserveAspectRatio", {
        /**
        *
        */
        get: function () {
            return this._preserveAspectRatio;
        },
        set: function (value) {
            if (this._preserveAspectRatio == value)
                return;

            this._preserveAspectRatio = value;

            if (this._preserveAspectRatio)
                this.pInvalidateMatrix();
        },
        enumerable: true,
        configurable: true
    });


    Object.defineProperty(PerspectiveProjection.prototype, "preserveFocalLength", {
        /**
        *
        */
        get: function () {
            return this._preserveFocalLength;
        },
        set: function (value) {
            if (this._preserveFocalLength == value)
                return;

            this._preserveFocalLength = value;

            this.pInvalidateMatrix();
        },
        enumerable: true,
        configurable: true
    });


    Object.defineProperty(PerspectiveProjection.prototype, "fieldOfView", {
        /**
        *
        */
        get: function () {
            return this._fieldOfView;
        },
        set: function (value) {
            if (this._fieldOfView == value)
                return;

            this._fieldOfView = value;

            this.pInvalidateMatrix();
        },
        enumerable: true,
        configurable: true
    });


    Object.defineProperty(PerspectiveProjection.prototype, "focalLength", {
        /**
        *
        */
        get: function () {
            return this._focalLength;
        },
        set: function (value) {
            if (this._focalLength == value)
                return;

            this._focalLength = value;

            this.pInvalidateMatrix();
        },
        enumerable: true,
        configurable: true
    });


    Object.defineProperty(PerspectiveProjection.prototype, "hFieldOfView", {
        /**
        *
        */
        get: function () {
            return this._hFieldOfView;
        },
        set: function (value) {
            if (this._hFieldOfView == value)
                return;

            this._hFieldOfView = value;

            this._hFocalLength = 1 / Math.tan(this._hFieldOfView * Math.PI / 360);

            this.pInvalidateMatrix();
        },
        enumerable: true,
        configurable: true
    });


    Object.defineProperty(PerspectiveProjection.prototype, "hFocalLength", {
        /**
        *
        */
        get: function () {
            return this._hFocalLength;
        },
        set: function (value) {
            if (this._hFocalLength == value)
                return;

            this._hFocalLength = value;

            this.pInvalidateMatrix();
        },
        enumerable: true,
        configurable: true
    });


    //@override
    PerspectiveProjection.prototype.unproject = function (nX, nY, sZ) {
        var v = new Vector3D(nX, -nY, sZ, 1.0);

        v.x *= sZ;
        v.y *= sZ;

        v = this.unprojectionMatrix.transformVector(v);

        //z is unaffected by transform
        v.z = sZ;

        return v;
    };

    //@override
    PerspectiveProjection.prototype.clone = function () {
        var clone = new PerspectiveProjection(this._fieldOfView);
        clone._pNear = this._pNear;
        clone._pFar = this._pFar;
        clone._pAspectRatio = this._pAspectRatio;
        clone._pCoordinateSystem = this._pCoordinateSystem;
        return clone;
    };

    //@override
    PerspectiveProjection.prototype.pUpdateMatrix = function () {
        var raw = [];

        if (this._preserveFocalLength) {
            if (this._preserveAspectRatio)
                this._hFocalLength = this._focalLength;

            this._fieldOfView = Math.atan(0.5 * this._pScissorRect.height / this._focalLength) * 360 / Math.PI;
            this._hFieldOfView = Math.atan(0.5 * this._pScissorRect.width / this._hFocalLength) * 360 / Math.PI;
        } else {
            this._focalLength = 0.5 * this._pScissorRect.height / Math.tan(this._fieldOfView * Math.PI / 360);

            if (this._preserveAspectRatio)
                this._hFocalLength = this._focalLength;
            else
                this._hFocalLength = 0.5 * this._pScissorRect.width / Math.tan(this._hFieldOfView * Math.PI / 360);
        }

        var tanMinX = -this._pOriginX / this._hFocalLength;
        var tanMaxX = (1 - this._pOriginX) / this._hFocalLength;
        var tanMinY = -this._pOriginY / this._focalLength;
        var tanMaxY = (1 - this._pOriginY) / this._focalLength;

        var left;
        var right;
        var top;
        var bottom;

        // assume scissored frustum
        var center = -((tanMinX - tanMaxX) * this._pScissorRect.x + tanMinX * this._pScissorRect.width);
        var middle = ((tanMinY - tanMaxY) * this._pScissorRect.y + tanMinY * this._pScissorRect.height);

        left = center - (tanMaxX - tanMinX) * this._pViewPort.width;
        right = center;
        top = middle;
        bottom = middle + (tanMaxY - tanMinY) * this._pViewPort.height;

        raw[0] = 2 / (right - left);
        raw[5] = 2 / (bottom - top);
        raw[8] = (right + left) / (right - left);
        raw[9] = (bottom + top) / (bottom - top);
        raw[10] = (this._pFar + this._pNear) / (this._pFar - this._pNear);
        raw[11] = 1;
        raw[1] = raw[2] = raw[3] = raw[4] = raw[6] = raw[7] = raw[12] = raw[13] = raw[15] = 0;
        raw[14] = -2 * this._pFar * this._pNear / (this._pFar - this._pNear);

        if (this._pCoordinateSystem == CoordinateSystem.RIGHT_HANDED)
            raw[5] = -raw[5];

        this._pMatrix.copyRawDataFrom(raw);

        this._pFrustumCorners[0] = this._pFrustumCorners[9] = this._pNear * left;
        this._pFrustumCorners[3] = this._pFrustumCorners[6] = this._pNear * right;
        this._pFrustumCorners[1] = this._pFrustumCorners[4] = this._pNear * top;
        this._pFrustumCorners[7] = this._pFrustumCorners[10] = this._pNear * bottom;

        this._pFrustumCorners[12] = this._pFrustumCorners[21] = this._pFar * left;
        this._pFrustumCorners[15] = this._pFrustumCorners[18] = this._pFar * right;
        this._pFrustumCorners[13] = this._pFrustumCorners[16] = this._pFar * top;
        this._pFrustumCorners[19] = this._pFrustumCorners[22] = this._pFar * bottom;

        this._pFrustumCorners[2] = this._pFrustumCorners[5] = this._pFrustumCorners[8] = this._pFrustumCorners[11] = this._pNear;
        this._pFrustumCorners[14] = this._pFrustumCorners[17] = this._pFrustumCorners[20] = this._pFrustumCorners[23] = this._pFar;

        this._pMatrixInvalid = false;
    };
    return PerspectiveProjection;
})(ProjectionBase);

module.exports = PerspectiveProjection;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInByb2plY3Rpb25zL1BlcnNwZWN0aXZlUHJvamVjdGlvbi50cyJdLCJuYW1lcyI6WyJQZXJzcGVjdGl2ZVByb2plY3Rpb24iLCJQZXJzcGVjdGl2ZVByb2plY3Rpb24uY29uc3RydWN0b3IiLCJQZXJzcGVjdGl2ZVByb2plY3Rpb24udW5wcm9qZWN0IiwiUGVyc3BlY3RpdmVQcm9qZWN0aW9uLmNsb25lIiwiUGVyc3BlY3RpdmVQcm9qZWN0aW9uLnBVcGRhdGVNYXRyaXgiXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLDREQUFvRTtBQUNwRSw4RUFBb0Y7QUFDcEYsMEVBQWdGOztBQUVoRjtJQUFvQ0Esd0NBQWNBO0lBU2pEQSwrQkFBWUEsV0FBdUJBLEVBQUVBLGdCQUFzQ0E7UUFBL0RDLDBDQUFBQSxXQUFXQSxHQUFVQSxFQUFFQTtBQUFBQSxRQUFFQSwrQ0FBQUEsZ0JBQWdCQSxHQUFVQSxZQUFZQTtBQUFBQSxRQUUxRUEsV0FBTUEsT0FBQUEsZ0JBQWdCQSxDQUFDQTtRQVR4QkEsS0FBUUEsWUFBWUEsR0FBVUEsRUFBRUEsQ0FBQ0E7UUFDakNBLEtBQVFBLFlBQVlBLEdBQVVBLElBQUlBLENBQUNBO1FBQ25DQSxLQUFRQSxhQUFhQSxHQUFVQSxFQUFFQSxDQUFDQTtRQUNsQ0EsS0FBUUEsYUFBYUEsR0FBVUEsSUFBSUEsQ0FBQ0E7UUFDcENBLEtBQVFBLG9CQUFvQkEsR0FBV0EsSUFBSUEsQ0FBQ0E7UUFDNUNBLEtBQVFBLG9CQUFvQkEsR0FBV0EsS0FBS0EsQ0FBQ0E7UUFLNUNBLElBQUlBLENBQUNBLFdBQVdBLEdBQUdBLFdBQVdBO0lBQy9CQSxDQUFDQTtJQUtERDtRQUFBQTs7VUFER0E7YUFDSEE7WUFFQ0EsT0FBT0EsSUFBSUEsQ0FBQ0Esb0JBQW9CQTtRQUNqQ0EsQ0FBQ0E7UUFFREEsS0FBQUEsVUFBK0JBLEtBQWFBO1lBRTNDQSxJQUFJQSxJQUFJQSxDQUFDQSxvQkFBb0JBLElBQUlBLEtBQUtBO2dCQUNyQ0EsTUFBT0EsQ0FBQUE7O1lBRVJB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QUlBLENBQUNBLGFBQWFBLENBQUNBLEdBQUNBLEdBQUdBLEdBQUNBLElBQUlBLENBQUNBLEVBQUVBO1NBQzNGQSxLQUFNQTtZQUNOQSxJQUFJQSxDQUFDQSxZQUFZQSxHQUFHQSxHQUFHQSxHQUFDQSxJQUFJQSxDQUFDQSxhQUFhQSxDQUFDQSxNQUFNQSxHQUFDQSxJQUFJQSxDQUFDQSxHQUFHQSxDQUFDQSxJQUFJQSxDQUFDQSxZQUFZQSxHQUFDQSxJQUFJQSxDQUFDQSxFQUFFQSxHQUFDQSxHQUFHQSxDQUFDQTs7WUFFekZBLElBQUlBLElBQUlBLENBQUNBLG9CQUFvQkE7Z0JBQzVCQSxJQUFJQSxDQUFDQSxhQUFhQSxHQUFHQSxJQUFJQSxDQUFDQSxZQUFZQTs7Z0JBRXRDQSxJQUFJQSxDQUFDQSxhQUFhQSxHQUFHQSxHQUFHQSxHQUFDQSxJQUFJQSxDQUFDQSxhQUFhQSxDQUFDQSxLQUFLQSxHQUFDQSxJQUFJQSxDQUFDQSxHQUFHQSxDQUFDQSxJQUFJQSxDQUFDQSxhQUFhQSxHQUFDQSxJQUFJQSxDQUFDQSxFQUFFQSxHQUFDQSxHQUFHQSxDQUFDQSxDQUFDQTtTQUM1RkE7O1FBRURBLElBQUlBLE9BQU9BLEdBQUdBLENBQUNBLElBQUlBLENBQUNBLFNBQVNBLEdBQUNBLElBQUlBLENBQUNBLGFBQWFBO1FBQ2hEQSxJQUFJQSxPQUFPQSxHQUFHQSxDQUFDQSxDQUFDQSxHQUFHQSxJQUFJQSxDQUFDQSxTQUFTQSxDQUFDQSxHQUFDQSxJQUFJQSxDQUFDQSxhQUFhQTtRQUNyREEsSUFBSUEsT0FBT0EsR0FBR0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EsU0FBU0EsR0FBQ0EsSUFBSUEsQ0FBQ0EsWUFBWUE7UUFDL0NBLElBQUlBLE9BQU9BLEdBQUdBLENBQUNBLENBQUNBLEdBQUdBLElBQUlBLENBQUNBLFNBQVNBLENBQUNBLEdBQUNBLElBQUlBLENBQUNBLFlBQVlBOztRQUVwREEsSUFBSUEsSUFBSUE7UUFDUkEsSUFBSUEsS0FBS0E7UUFDVEEsSUFBSUEsR0FBR0E7UUFDUEEsSUFBSUEsTUFBTUE7O1FBRVZBLDJCQUEyQkE7UUFDM0JBLElBQUlBLE1BQU1BLEdBQVVBLENBQUNBLENBQUNBLENBQUNBLE9BQU9BLEdBQUdBLE9BQU9BLENBQUNBLEdBQUNBLElBQUlBLENBQUNBLGFBQWFBLENBQUNBLENBQUNBLEdBQUdBLE9BQU9BLEdBQUNBLElBQUlBLENBQUNBLGFBQWFBLENBQUNBLEtBQUtBLENBQUNBO1FBQ2xHQSxJQUFJQSxNQUFNQSxHQUFVQSxDQUFDQSxDQUFDQSxPQUFPQSxHQUFHQSxPQUFPQSxDQUFDQSxHQUFDQSxJQUFJQSxDQUFDQSxhQUFhQSxDQUFDQSxDQUFDQSxHQUFHQSxPQUFPQSxHQUFDQSxJQUFJQSxDQUFDQSxhQUFhQSxDQUFDQSxNQUFNQSxDQUFDQTs7UUFFbEdBLElBQUlBLEdBQUdBLE1BQU1BLEdBQUdBLENBQUNBLE9BQU9BLEdBQUdBLE9BQU9BLENBQUNBLEdBQUNBLElBQUlBLENBQUNBLFVBQVVBLENBQUNBLEtBQUtBO1FBQ3pEQSxLQUFLQSxHQUFHQSxNQUFNQTtRQUNkQSxHQUFHQSxHQUFHQSxNQUFNQTtRQUNaQSxNQUFNQSxHQUFHQSxNQUFNQSxHQUFHQSxDQUFDQSxPQUFPQSxHQUFHQSxPQUFPQSxDQUFDQSxHQUFDQSxJQUFJQSxDQUFDQSxVQUFVQSxDQUFDQSxNQUFNQTs7UUFFNURBLEdBQUdBLENBQUNBLENBQUNBLENBQUNBLEdBQUdBLENBQUNBLEdBQUNBLENBQUNBLEtBQUtBLEdBQUdBLElBQUlBLENBQUNBO1FBQ3pCQSxHQUFHQSxDQUFDQSxDQUFDQSxDQUFDQSxHQUFHQSxDQUFDQSxHQUFDQSxDQUFDQSxNQUFNQSxHQUFHQSxHQUFHQSxDQUFDQTtRQUN6QkEsR0FBR0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsR0FBR0EsQ0FBQ0EsS0FBS0EsR0FBR0EsSUFBSUEsQ0FBQ0EsR0FBQ0EsQ0FBQ0EsS0FBS0EsR0FBR0EsSUFBSUEsQ0FBQ0E7UUFDdENBLEdBQUdBLENBQUNBLENBQUNBLENBQUNBLEdBQUdBLENBQUNBLE1BQU1BLEdBQUdBLEdBQUdBLENBQUNBLEdBQUNBLENBQUNBLE1BQU1BLEdBQUdBLEdBQUdBLENBQUNBO1FBQ3RDQSxHQUFHQSxDQUFDQSxFQUFFQSxDQUFDQSxHQUFHQSxDQUFDQSxJQUFJQSxDQUFDQSxLQUFLQSxHQUFHQSxJQUFJQSxDQUFDQSxNQUFNQSxDQUFDQSxHQUFDQSxDQUFDQSxJQUFJQSxDQUFDQSxLQUFLQSxHQUFHQSxJQUFJQSxDQUFDQSxNQUFNQSxDQUFDQTtRQUMvREEsR0FBR0EsQ0FBQ0EsRUFBRUEsQ0FBQ0EsR0FBR0EsQ0FBQ0E7UUFDWEEsR0FBR0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsR0FBR0EsR0FBR0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsR0FBR0EsR0FBR0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsR0FBR0EsR0FBR0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsR0FBR0EsR0FBR0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsR0FBR0EsR0FBR0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsR0FBR0EsR0FBR0EsQ0FBQ0EsRUFBRUEsQ0FBQ0EsR0FBR0EsR0FBR0EsQ0FBQ0EsRUFBRUEsQ0FBQ0EsR0FBR0EsR0FBR0EsQ0FBQ0EsRUFBRUEsQ0FBQ0EsR0FBR0EsQ0FBQ0E7UUFDckZBLEdBQUdBLENBQUNBLEVBQUVBLENBQUNBLEdBQUdBLENBQUNBLENBQUNBLEdBQUNBLElBQUlBLENBQUNBLEtBQUtBLEdBQUNBLElBQUlBLENBQUNBLE1BQU1BLEdBQUNBLENBQUNBLElBQUlBLENBQUNBLEtBQUtBLEdBQUdBLElBQUlBLENBQUNBLE1BQU1BLENBQUNBOztRQUU5REEsSUFBSUEsSUFBSUEsQ0FBQ0Esa0JBQWtCQSxJQUFJQSxnQkFBZ0JBLENBQUNBLFlBQVlBO1lBQzNEQSxHQUFHQSxDQUFDQSxDQUFDQSxDQUFDQSxHQUFHQSxDQUFDQSxHQUFHQSxDQUFDQSxDQUFDQSxDQUFDQSxDQUFDQTs7UUFFbEJBLElBQUlBLENBQUNBLFFBQVFBLENBQUNBLGVBQWVBLENBQUNBLEdBQUdBLENBQUNBOztRQUVsQ0EsSUFBSUEsQ0FBQ0EsZ0JBQWdCQSxDQUFDQSxDQUFDQSxDQUFDQSxHQUFHQSxJQUFJQSxDQUFDQSxnQkFBZ0JBLENBQUNBLENBQUNBLENBQUNBLEdBQUdBLElBQUlBLENBQUNBLE1BQU1BLEdBQUNBLElBQUlBO1FBQ3RFQSxJQUFJQSxDQUFDQSxnQkFBZ0JBLENBQUNBLENBQUNBLENBQUNBLEdBQUdBLElBQUlBLENBQUNBLGdCQUFnQkEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsR0FBR0EsSUFBSUEsQ0FBQ0EsTUFBTUEsR0FBQ0EsS0FBS0E7UUFDdkVBLElBQUlBLENBQUNBLGdCQUFnQkEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsR0FBR0EsSUFBSUEsQ0FBQ0EsZ0JBQWdCQSxDQUFDQSxDQUFDQSxDQUFDQSxHQUFHQSxJQUFJQSxDQUFDQSxNQUFNQSxHQUFDQSxHQUFHQTtRQUNyRUEsSUFBSUEsQ0FBQ0EsZ0JBQWdCQSxDQUFDQSxDQUFDQSxDQUFDQSxHQUFHQSxJQUFJQSxDQUFDQSxnQkFBZ0JBLENBQUNBLEVBQUVBLENBQUNBLEdBQUdBLElBQUlBLENBQUNBLE1BQU1BLEdBQUNBLE1BQU1BOztRQUV6RUEsSUFBSUEsQ0FBQ0EsZ0JBQWdCQSxDQUFDQSxFQUFFQSxDQUFDQSxHQUFHQSxJQUFJQSxDQUFDQSxnQkFBZ0JBLENBQUNBLEVBQUVBLENBQUNBLEdBQUdBLElBQUlBLENBQUNBLEtBQUtBLEdBQUNBLElBQUlBO1FBQ3ZFQSxJQUFJQSxDQUFDQSxnQkFBZ0JBLENBQUNBLEVBQUVBLENBQUNBLEdBQUdBLElBQUlBLENBQUNBLGdCQUFnQkEsQ0FBQ0EsRUFBRUEsQ0FBQ0EsR0FBR0EsSUFBSUEsQ0FBQ0EsS0FBS0EsR0FBQ0EsS0FBS0E7UUFDeEVBLElBQUlBLENBQUNBLGdCQUFnQkEsQ0FBQ0EsRUFBRUEsQ0FBQ0EsR0FBR0EsSUFBSUEsQ0FBQ0EsZ0JBQWdCQSxDQUFDQSxFQUFFQSxDQUFDQSxHQUFHQSxJQUFJQSxDQUFDQSxLQUFLQSxHQUFDQSxHQUFHQTtRQUN0RUEsSUFBSUEsQ0FBQ0EsZ0JBQWdCQSxDQUFDQSxFQUFFQSxDQUFDQSxHQUFHQSxJQUFJQSxDQUFDQSxnQkFBZ0JBLENBQUNBLEVBQUVBLENBQUNBLEdBQUdBLElBQUlBLENBQUNBLEtBQUtBLEdBQUNBLE1BQU1BOztRQUV6RUEsSUFBSUEsQ0FBQ0EsZ0JBQWdCQSxDQUFDQSxDQUFDQSxDQUFDQSxHQUFHQSxJQUFJQSxDQUFDQSxnQkFBZ0JBLENBQUNBLENBQUNBLENBQUNBLEdBQUdBLElBQUlBLENBQUNBLGdCQUFnQkEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsR0FBR0EsSUFBSUEsQ0FBQ0EsZ0JBQWdCQSxDQUFDQSxFQUFFQSxDQUFDQSxHQUFHQSxJQUFJQSxDQUFDQSxNQUFNQTtRQUN4SEEsSUFBSUEsQ0FBQ0EsZ0JBQWdCQSxDQUFDQSxFQUFFQSxDQUFDQSxHQUFHQSxJQUFJQSxDQUFDQSxnQkFBZ0JBLENBQUNBLEVBQUVBLENBQUNBLEdBQUdBLElBQUlBLENBQUNBLGdCQUFnQkEsQ0FBQ0EsRUFBRUEsQ0FBQ0EsR0FBR0EsSUFBSUEsQ0FBQ0EsZ0JBQWdCQSxDQUFDQSxFQUFFQSxDQUFDQSxHQUFHQSxJQUFJQSxDQUFDQSxLQUFLQTs7UUFFMUhBLElBQUlBLENBQUNBLGVBQWVBLEdBQUdBLEtBQUtBO0lBRzdCQSxDQUFDQTtJQUNGSiw2QkFBQ0E7QUFBREEsQ0FBQ0EsRUFoT21DLGNBQWMsRUFnT2pEOztBQUVELHNDQUErQixDQUFBIiwiZmlsZSI6InByb2plY3Rpb25zL1BlcnNwZWN0aXZlUHJvamVjdGlvbi5qcyIsInNvdXJjZVJvb3QiOiIvVXNlcnMvcm9iYmF0ZW1hbi9XZWJzdG9ybVByb2plY3RzL2F3YXlqcy1jb3JlLyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBWZWN0b3IzRFx0XHRcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtY29yZS9saWIvY29yZS9nZW9tL1ZlY3RvcjNEXCIpO1xuaW1wb3J0IENvb3JkaW5hdGVTeXN0ZW1cdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtY29yZS9saWIvcHJvamVjdGlvbnMvQ29vcmRpbmF0ZVN5c3RlbVwiKTtcbmltcG9ydCBQcm9qZWN0aW9uQmFzZVx0XHRcdD0gcmVxdWlyZShcImF3YXlqcy1jb3JlL2xpYi9wcm9qZWN0aW9ucy9Qcm9qZWN0aW9uQmFzZVwiKTtcblxuY2xhc3MgUGVyc3BlY3RpdmVQcm9qZWN0aW9uIGV4dGVuZHMgUHJvamVjdGlvbkJhc2Vcbntcblx0cHJpdmF0ZSBfZmllbGRPZlZpZXc6bnVtYmVyID0gNjA7XG5cdHByaXZhdGUgX2ZvY2FsTGVuZ3RoOm51bWJlciA9IDEwMDA7XG5cdHByaXZhdGUgX2hGaWVsZE9mVmlldzpudW1iZXIgPSA2MDtcblx0cHJpdmF0ZSBfaEZvY2FsTGVuZ3RoOm51bWJlciA9IDEwMDA7XG5cdHByaXZhdGUgX3ByZXNlcnZlQXNwZWN0UmF0aW86Ym9vbGVhbiA9IHRydWU7XG5cdHByaXZhdGUgX3ByZXNlcnZlRm9jYWxMZW5ndGg6Ym9vbGVhbiA9IGZhbHNlO1xuXG5cdGNvbnN0cnVjdG9yKGZpZWxkT2ZWaWV3Om51bWJlciA9IDYwLCBjb29yZGluYXRlU3lzdGVtOnN0cmluZyA9IFwibGVmdEhhbmRlZFwiKVxuXHR7XG5cdFx0c3VwZXIoY29vcmRpbmF0ZVN5c3RlbSk7XG5cdFx0dGhpcy5maWVsZE9mVmlldyA9IGZpZWxkT2ZWaWV3O1xuXHR9XG5cblx0LyoqXG5cdCAqXG5cdCAqL1xuXHRwdWJsaWMgZ2V0IHByZXNlcnZlQXNwZWN0UmF0aW8oKTpib29sZWFuXG5cdHtcblx0XHRyZXR1cm4gdGhpcy5fcHJlc2VydmVBc3BlY3RSYXRpbztcblx0fVxuXG5cdHB1YmxpYyBzZXQgcHJlc2VydmVBc3BlY3RSYXRpbyh2YWx1ZTpib29sZWFuKVxuXHR7XG5cdFx0aWYgKHRoaXMuX3ByZXNlcnZlQXNwZWN0UmF0aW8gPT0gdmFsdWUpXG5cdFx0XHRyZXR1cm47XG5cblx0XHR0aGlzLl9wcmVzZXJ2ZUFzcGVjdFJhdGlvID0gdmFsdWU7XG5cblx0XHRpZiAodGhpcy5fcHJlc2VydmVBc3BlY3RSYXRpbylcblx0XHRcdHRoaXMucEludmFsaWRhdGVNYXRyaXgoKTtcblx0fVxuXG5cdC8qKlxuXHQgKlxuXHQgKi9cblx0cHVibGljIGdldCBwcmVzZXJ2ZUZvY2FsTGVuZ3RoKCk6Ym9vbGVhblxuXHR7XG5cdFx0cmV0dXJuIHRoaXMuX3ByZXNlcnZlRm9jYWxMZW5ndGg7XG5cdH1cblxuXHRwdWJsaWMgc2V0IHByZXNlcnZlRm9jYWxMZW5ndGgodmFsdWU6Ym9vbGVhbilcblx0e1xuXHRcdGlmICh0aGlzLl9wcmVzZXJ2ZUZvY2FsTGVuZ3RoID09IHZhbHVlKVxuXHRcdFx0cmV0dXJuO1xuXG5cdFx0dGhpcy5fcHJlc2VydmVGb2NhbExlbmd0aCA9IHZhbHVlO1xuXG5cdFx0dGhpcy5wSW52YWxpZGF0ZU1hdHJpeCgpO1xuXHR9XG5cblx0LyoqXG5cdCAqXG5cdCAqL1xuXHRwdWJsaWMgZ2V0IGZpZWxkT2ZWaWV3KCk6bnVtYmVyXG5cdHtcblx0XHRyZXR1cm4gdGhpcy5fZmllbGRPZlZpZXc7XG5cdH1cblxuXHRwdWJsaWMgc2V0IGZpZWxkT2ZWaWV3KHZhbHVlOm51bWJlcilcblx0e1xuXHRcdGlmICh0aGlzLl9maWVsZE9mVmlldyA9PSB2YWx1ZSlcblx0XHRcdHJldHVybjtcblxuXHRcdHRoaXMuX2ZpZWxkT2ZWaWV3ID0gdmFsdWU7XG5cblx0XHR0aGlzLnBJbnZhbGlkYXRlTWF0cml4KCk7XG5cdH1cblxuXHQvKipcblx0ICpcblx0ICovXG5cdHB1YmxpYyBnZXQgZm9jYWxMZW5ndGgoKTpudW1iZXJcblx0e1xuXHRcdHJldHVybiB0aGlzLl9mb2NhbExlbmd0aDtcblx0fVxuXG5cdHB1YmxpYyBzZXQgZm9jYWxMZW5ndGgodmFsdWU6bnVtYmVyKVxuXHR7XG5cdFx0aWYgKHRoaXMuX2ZvY2FsTGVuZ3RoID09IHZhbHVlKVxuXHRcdFx0cmV0dXJuO1xuXG5cdFx0dGhpcy5fZm9jYWxMZW5ndGggPSB2YWx1ZTtcblxuXHRcdHRoaXMucEludmFsaWRhdGVNYXRyaXgoKTtcblx0fVxuXG5cdC8qKlxuXHQgKlxuXHQgKi9cblx0cHVibGljIGdldCBoRmllbGRPZlZpZXcoKTpudW1iZXJcblx0e1xuXHRcdHJldHVybiB0aGlzLl9oRmllbGRPZlZpZXc7XG5cdH1cblxuXHRwdWJsaWMgc2V0IGhGaWVsZE9mVmlldyh2YWx1ZTpudW1iZXIpXG5cdHtcblx0XHRpZiAodGhpcy5faEZpZWxkT2ZWaWV3ID09IHZhbHVlKVxuXHRcdFx0cmV0dXJuO1xuXG5cdFx0dGhpcy5faEZpZWxkT2ZWaWV3ID0gdmFsdWU7XG5cblx0XHR0aGlzLl9oRm9jYWxMZW5ndGggPSAxL01hdGgudGFuKHRoaXMuX2hGaWVsZE9mVmlldypNYXRoLlBJLzM2MCk7XG5cblx0XHR0aGlzLnBJbnZhbGlkYXRlTWF0cml4KCk7XG5cdH1cblxuXHQvKipcblx0ICpcblx0ICovXG5cdHB1YmxpYyBnZXQgaEZvY2FsTGVuZ3RoKCk6bnVtYmVyXG5cdHtcblx0XHRyZXR1cm4gdGhpcy5faEZvY2FsTGVuZ3RoO1xuXHR9XG5cblx0cHVibGljIHNldCBoRm9jYWxMZW5ndGgodmFsdWU6bnVtYmVyKVxuXHR7XG5cdFx0aWYgKHRoaXMuX2hGb2NhbExlbmd0aCA9PSB2YWx1ZSlcblx0XHRcdHJldHVybjtcblxuXHRcdHRoaXMuX2hGb2NhbExlbmd0aCA9IHZhbHVlO1xuXG5cdFx0dGhpcy5wSW52YWxpZGF0ZU1hdHJpeCgpO1xuXHR9XG5cblxuXHQvL0BvdmVycmlkZVxuXHRwdWJsaWMgdW5wcm9qZWN0KG5YOm51bWJlciwgblk6bnVtYmVyLCBzWjpudW1iZXIpOlZlY3RvcjNEXG5cdHtcblx0XHR2YXIgdjpWZWN0b3IzRCA9IG5ldyBWZWN0b3IzRChuWCwgLW5ZLCBzWiwgMS4wKTtcblxuXHRcdHYueCAqPSBzWjtcblx0XHR2LnkgKj0gc1o7XG5cblx0XHR2ID0gdGhpcy51bnByb2plY3Rpb25NYXRyaXgudHJhbnNmb3JtVmVjdG9yKHYpO1xuXG5cdFx0Ly96IGlzIHVuYWZmZWN0ZWQgYnkgdHJhbnNmb3JtXG5cdFx0di56ID0gc1o7XG5cblx0XHRyZXR1cm4gdjtcblx0fVxuXG5cdC8vQG92ZXJyaWRlXG5cdHB1YmxpYyBjbG9uZSgpOlByb2plY3Rpb25CYXNlXG5cdHtcblx0XHR2YXIgY2xvbmU6UGVyc3BlY3RpdmVQcm9qZWN0aW9uID0gbmV3IFBlcnNwZWN0aXZlUHJvamVjdGlvbih0aGlzLl9maWVsZE9mVmlldyk7XG5cdFx0Y2xvbmUuX3BOZWFyID0gdGhpcy5fcE5lYXI7XG5cdFx0Y2xvbmUuX3BGYXIgPSB0aGlzLl9wRmFyO1xuXHRcdGNsb25lLl9wQXNwZWN0UmF0aW8gPSB0aGlzLl9wQXNwZWN0UmF0aW87XG5cdFx0Y2xvbmUuX3BDb29yZGluYXRlU3lzdGVtID0gdGhpcy5fcENvb3JkaW5hdGVTeXN0ZW07XG5cdFx0cmV0dXJuIGNsb25lO1xuXHR9XG5cblx0Ly9Ab3ZlcnJpZGVcblx0cHVibGljIHBVcGRhdGVNYXRyaXgoKVxuXHR7XG5cdFx0dmFyIHJhdzpudW1iZXJbXSA9IFtdO1xuXG5cdFx0aWYgKHRoaXMuX3ByZXNlcnZlRm9jYWxMZW5ndGgpIHtcblx0XHRcdGlmICh0aGlzLl9wcmVzZXJ2ZUFzcGVjdFJhdGlvKVxuXHRcdFx0XHR0aGlzLl9oRm9jYWxMZW5ndGggPSB0aGlzLl9mb2NhbExlbmd0aDtcblxuXHRcdFx0dGhpcy5fZmllbGRPZlZpZXcgPSBNYXRoLmF0YW4oMC41KnRoaXMuX3BTY2lzc29yUmVjdC5oZWlnaHQvdGhpcy5fZm9jYWxMZW5ndGgpKjM2MC9NYXRoLlBJO1xuXHRcdFx0dGhpcy5faEZpZWxkT2ZWaWV3ID0gTWF0aC5hdGFuKDAuNSp0aGlzLl9wU2Npc3NvclJlY3Qud2lkdGgvdGhpcy5faEZvY2FsTGVuZ3RoKSozNjAvTWF0aC5QSTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dGhpcy5fZm9jYWxMZW5ndGggPSAwLjUqdGhpcy5fcFNjaXNzb3JSZWN0LmhlaWdodC9NYXRoLnRhbih0aGlzLl9maWVsZE9mVmlldypNYXRoLlBJLzM2MCk7XG5cblx0XHRcdGlmICh0aGlzLl9wcmVzZXJ2ZUFzcGVjdFJhdGlvKVxuXHRcdFx0XHR0aGlzLl9oRm9jYWxMZW5ndGggPSB0aGlzLl9mb2NhbExlbmd0aDtcblx0XHRcdGVsc2Vcblx0XHRcdFx0dGhpcy5faEZvY2FsTGVuZ3RoID0gMC41KnRoaXMuX3BTY2lzc29yUmVjdC53aWR0aC9NYXRoLnRhbih0aGlzLl9oRmllbGRPZlZpZXcqTWF0aC5QSS8zNjApO1xuXHRcdH1cblxuXHRcdHZhciB0YW5NaW5YID0gLXRoaXMuX3BPcmlnaW5YL3RoaXMuX2hGb2NhbExlbmd0aDtcblx0XHR2YXIgdGFuTWF4WCA9ICgxIC0gdGhpcy5fcE9yaWdpblgpL3RoaXMuX2hGb2NhbExlbmd0aDtcblx0XHR2YXIgdGFuTWluWSA9IC10aGlzLl9wT3JpZ2luWS90aGlzLl9mb2NhbExlbmd0aDtcblx0XHR2YXIgdGFuTWF4WSA9ICgxIC0gdGhpcy5fcE9yaWdpblkpL3RoaXMuX2ZvY2FsTGVuZ3RoO1xuXG5cdFx0dmFyIGxlZnQ6bnVtYmVyO1xuXHRcdHZhciByaWdodDpudW1iZXI7XG5cdFx0dmFyIHRvcDpudW1iZXI7XG5cdFx0dmFyIGJvdHRvbTpudW1iZXI7XG5cblx0XHQvLyBhc3N1bWUgc2Npc3NvcmVkIGZydXN0dW1cblx0XHR2YXIgY2VudGVyOm51bWJlciA9IC0oKHRhbk1pblggLSB0YW5NYXhYKSp0aGlzLl9wU2Npc3NvclJlY3QueCArIHRhbk1pblgqdGhpcy5fcFNjaXNzb3JSZWN0LndpZHRoKTtcblx0XHR2YXIgbWlkZGxlOm51bWJlciA9ICgodGFuTWluWSAtIHRhbk1heFkpKnRoaXMuX3BTY2lzc29yUmVjdC55ICsgdGFuTWluWSp0aGlzLl9wU2Npc3NvclJlY3QuaGVpZ2h0KTtcblxuXHRcdGxlZnQgPSBjZW50ZXIgLSAodGFuTWF4WCAtIHRhbk1pblgpKnRoaXMuX3BWaWV3UG9ydC53aWR0aDtcblx0XHRyaWdodCA9IGNlbnRlcjtcblx0XHR0b3AgPSBtaWRkbGU7XG5cdFx0Ym90dG9tID0gbWlkZGxlICsgKHRhbk1heFkgLSB0YW5NaW5ZKSp0aGlzLl9wVmlld1BvcnQuaGVpZ2h0O1xuXG5cdFx0cmF3WzBdID0gMi8ocmlnaHQgLSBsZWZ0KTtcblx0XHRyYXdbNV0gPSAyLyhib3R0b20gLSB0b3ApO1xuXHRcdHJhd1s4XSA9IChyaWdodCArIGxlZnQpLyhyaWdodCAtIGxlZnQpO1xuXHRcdHJhd1s5XSA9IChib3R0b20gKyB0b3ApLyhib3R0b20gLSB0b3ApO1xuXHRcdHJhd1sxMF0gPSAodGhpcy5fcEZhciArIHRoaXMuX3BOZWFyKS8odGhpcy5fcEZhciAtIHRoaXMuX3BOZWFyKTtcblx0XHRyYXdbMTFdID0gMTtcblx0XHRyYXdbMV0gPSByYXdbMl0gPSByYXdbM10gPSByYXdbNF0gPSByYXdbNl0gPSByYXdbN10gPSByYXdbMTJdID0gcmF3WzEzXSA9IHJhd1sxNV0gPSAwO1xuXHRcdHJhd1sxNF0gPSAtMip0aGlzLl9wRmFyKnRoaXMuX3BOZWFyLyh0aGlzLl9wRmFyIC0gdGhpcy5fcE5lYXIpO1xuXG5cdFx0aWYgKHRoaXMuX3BDb29yZGluYXRlU3lzdGVtID09IENvb3JkaW5hdGVTeXN0ZW0uUklHSFRfSEFOREVEKVxuXHRcdFx0cmF3WzVdID0gLXJhd1s1XTtcblxuXHRcdHRoaXMuX3BNYXRyaXguY29weVJhd0RhdGFGcm9tKHJhdyk7XG5cblx0XHR0aGlzLl9wRnJ1c3R1bUNvcm5lcnNbMF0gPSB0aGlzLl9wRnJ1c3R1bUNvcm5lcnNbOV0gPSB0aGlzLl9wTmVhcipsZWZ0O1xuXHRcdHRoaXMuX3BGcnVzdHVtQ29ybmVyc1szXSA9IHRoaXMuX3BGcnVzdHVtQ29ybmVyc1s2XSA9IHRoaXMuX3BOZWFyKnJpZ2h0O1xuXHRcdHRoaXMuX3BGcnVzdHVtQ29ybmVyc1sxXSA9IHRoaXMuX3BGcnVzdHVtQ29ybmVyc1s0XSA9IHRoaXMuX3BOZWFyKnRvcDtcblx0XHR0aGlzLl9wRnJ1c3R1bUNvcm5lcnNbN10gPSB0aGlzLl9wRnJ1c3R1bUNvcm5lcnNbMTBdID0gdGhpcy5fcE5lYXIqYm90dG9tO1xuXG5cdFx0dGhpcy5fcEZydXN0dW1Db3JuZXJzWzEyXSA9IHRoaXMuX3BGcnVzdHVtQ29ybmVyc1syMV0gPSB0aGlzLl9wRmFyKmxlZnQ7XG5cdFx0dGhpcy5fcEZydXN0dW1Db3JuZXJzWzE1XSA9IHRoaXMuX3BGcnVzdHVtQ29ybmVyc1sxOF0gPSB0aGlzLl9wRmFyKnJpZ2h0O1xuXHRcdHRoaXMuX3BGcnVzdHVtQ29ybmVyc1sxM10gPSB0aGlzLl9wRnJ1c3R1bUNvcm5lcnNbMTZdID0gdGhpcy5fcEZhcip0b3A7XG5cdFx0dGhpcy5fcEZydXN0dW1Db3JuZXJzWzE5XSA9IHRoaXMuX3BGcnVzdHVtQ29ybmVyc1syMl0gPSB0aGlzLl9wRmFyKmJvdHRvbTtcblxuXHRcdHRoaXMuX3BGcnVzdHVtQ29ybmVyc1syXSA9IHRoaXMuX3BGcnVzdHVtQ29ybmVyc1s1XSA9IHRoaXMuX3BGcnVzdHVtQ29ybmVyc1s4XSA9IHRoaXMuX3BGcnVzdHVtQ29ybmVyc1sxMV0gPSB0aGlzLl9wTmVhcjtcblx0XHR0aGlzLl9wRnJ1c3R1bUNvcm5lcnNbMTRdID0gdGhpcy5fcEZydXN0dW1Db3JuZXJzWzE3XSA9IHRoaXMuX3BGcnVzdHVtQ29ybmVyc1syMF0gPSB0aGlzLl9wRnJ1c3R1bUNvcm5lcnNbMjNdID0gdGhpcy5fcEZhcjtcblxuXHRcdHRoaXMuX3BNYXRyaXhJbnZhbGlkID0gZmFsc2U7XG5cblxuXHR9XG59XG5cbmV4cG9ydCA9IFBlcnNwZWN0aXZlUHJvamVjdGlvbjsiXX0=