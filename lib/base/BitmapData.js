var Rectangle = require("awayjs-core/lib/geom/Rectangle");
var ColorUtils = require("awayjs-core/lib/utils/ColorUtils");
/**
 *
 */
var BitmapData = (function () {
    /**
     *
     * @param width
     * @param height
     * @param transparent
     * @param fillColor
     */
    function BitmapData(width, height, transparent, fillColor) {
        if (transparent === void 0) { transparent = true; }
        if (fillColor === void 0) { fillColor = null; }
        this._alpha = 0;
        this._locked = false;
        this._transparent = transparent;
        this._imageCanvas = document.createElement("canvas");
        this._imageCanvas.width = width;
        this._imageCanvas.height = height;
        this._context = this._imageCanvas.getContext("2d");
        this._rect = new Rectangle(0, 0, width, height);
        if (fillColor != null) {
            if (this._transparent) {
                this._alpha = ColorUtils.float32ColorToARGB(fillColor)[0] / 255;
            }
            else {
                this._alpha = 1;
            }
            this.fillRect(this._rect, fillColor);
        }
    }
    /**
     *
     */
    BitmapData.prototype.dispose = function () {
        this._context = null;
        this._imageCanvas = null;
        this._imageData = null;
        this._rect = null;
        this._transparent = null;
        this._locked = null;
    };
    /**
     *
     */
    BitmapData.prototype.lock = function () {
        this._locked = true;
        this._imageData = this._context.getImageData(0, 0, this._rect.width, this._rect.height);
    };
    /**
     *
     */
    BitmapData.prototype.unlock = function () {
        this._locked = false;
        if (this._imageData) {
            this._context.putImageData(this._imageData, 0, 0); // at coords 0,0
            this._imageData = null;
        }
    };
    /**
     *
     * @param x
     * @param y
     * @param color
     */
    BitmapData.prototype.getPixel = function (x, y) {
        var r;
        var g;
        var b;
        var a;
        if (!this._locked) {
            var pixelData = this._context.getImageData(x, y, 1, 1);
            r = pixelData.data[0];
            g = pixelData.data[1];
            b = pixelData.data[2];
            a = pixelData.data[3];
        }
        else {
            var index = (x + y * this._imageCanvas.width) * 4;
            if (!this._imageData)
                this._imageData = this._context.getImageData(0, 0, this._rect.width, this._rect.height);
            r = this._imageData.data[index + 0];
            g = this._imageData.data[index + 1];
            b = this._imageData.data[index + 2];
            a = this._imageData.data[index + 3];
        }
        if (!this._locked) {
            this._imageData = null;
        }
        return (a << 24) | (r << 16) | (g << 8) | b;
    };
    /**
     *
     * @param x
     * @param y
     * @param color
     */
    BitmapData.prototype.setPixel = function (x, y, color) {
        var argb = ColorUtils.float32ColorToARGB(color);
        if (!this._locked)
            this._imageData = this._context.getImageData(0, 0, this._rect.width, this._rect.height);
        if (this._imageData) {
            var index = (x + y * this._imageCanvas.width) * 4;
            this._imageData.data[index + 0] = argb[1];
            this._imageData.data[index + 1] = argb[2];
            this._imageData.data[index + 2] = argb[3];
            this._imageData.data[index + 3] = 255;
        }
        if (!this._locked) {
            this._context.putImageData(this._imageData, 0, 0);
            this._imageData = null;
        }
    };
    /**
     *
     * @param rect
     * @param inputByteArray
     */
    BitmapData.prototype.setPixels = function (rect, inputByteArray) {
        if (!this._locked)
            this._imageData = this._context.getImageData(0, 0, this._rect.width, this._rect.height);
        if (this._imageData) {
            inputByteArray.position = 0;
            var i /*uint*/, j /*uint*/, index /*uint*/;
            for (i = 0; i < rect.width; ++i) {
                for (j = 0; j < rect.height; ++j) {
                    index = (i + rect.x + (j + rect.y) * this._imageCanvas.width) * 4;
                    this._imageData.data[index + 0] = inputByteArray.readUnsignedInt();
                    this._imageData.data[index + 1] = inputByteArray.readUnsignedInt();
                    this._imageData.data[index + 2] = inputByteArray.readUnsignedInt();
                    this._imageData.data[index + 3] = inputByteArray.readUnsignedInt();
                }
            }
        }
        if (!this._locked) {
            this._context.putImageData(this._imageData, 0, 0);
            this._imageData = null;
        }
    };
    /**
     *
     * @param x
     * @param y
     * @param color
     */
    BitmapData.prototype.setPixel32 = function (x, y, color) {
        var argb = ColorUtils.float32ColorToARGB(color);
        if (!this._locked)
            this._imageData = this._context.getImageData(0, 0, this._rect.width, this._rect.height);
        if (this._imageData) {
            var index = (x + y * this._imageCanvas.width) * 4;
            this._imageData.data[index + 0] = argb[1];
            this._imageData.data[index + 1] = argb[2];
            this._imageData.data[index + 2] = argb[3];
            this._imageData.data[index + 3] = argb[0];
        }
        if (!this._locked) {
            this._context.putImageData(this._imageData, 0, 0);
            this._imageData = null;
        }
    };
    BitmapData.prototype.setVector = function (rect, inputVector) {
        if (!this._locked)
            this._imageData = this._context.getImageData(0, 0, this._rect.width, this._rect.height);
        if (this._imageData) {
            var i /*uint*/, j /*uint*/, index /*uint*/, argb /*uint*/;
            for (i = 0; i < rect.width; ++i) {
                for (j = 0; j < rect.height; ++j) {
                    argb = ColorUtils.float32ColorToARGB(inputVector[i + j * rect.width]);
                    index = (i + rect.x + (j + rect.y) * this._imageCanvas.width) * 4;
                    this._imageData.data[index + 0] = argb[1];
                    this._imageData.data[index + 1] = argb[2];
                    this._imageData.data[index + 2] = argb[3];
                    this._imageData.data[index + 3] = argb[0];
                }
            }
        }
        if (!this._locked) {
            this._context.putImageData(this._imageData, 0, 0);
            this._imageData = null;
        }
    };
    BitmapData.prototype.drawImage = function (img, sourceRect, destRect) {
        if (this._locked) {
            // If canvas is locked:
            //
            //      1) copy image data back to canvas
            //      2) draw object
            //      3) read _imageData back out
            if (this._imageData) {
                this._context.putImageData(this._imageData, 0, 0); // at coords 0,0
            }
            this._drawImage(img, sourceRect, destRect);
            if (this._imageData) {
                this._imageData = this._context.getImageData(0, 0, this._rect.width, this._rect.height);
            }
        }
        else {
            this._drawImage(img, sourceRect, destRect);
        }
    };
    BitmapData.prototype._drawImage = function (img, sourceRect, destRect) {
        if (img instanceof BitmapData)
            this._context.drawImage(img.canvas, sourceRect.x, sourceRect.y, sourceRect.width, sourceRect.height, destRect.x, destRect.y, destRect.width, destRect.height);
        else if (img instanceof HTMLImageElement)
            this._context.drawImage(img, sourceRect.x, sourceRect.y, sourceRect.width, sourceRect.height, destRect.x, destRect.y, destRect.width, destRect.height);
    };
    BitmapData.prototype.copyPixels = function (bmpd, sourceRect, destRect) {
        if (this._locked) {
            // If canvas is locked:
            //
            //      1) copy image data back to canvas
            //      2) draw object
            //      3) read _imageData back out
            if (this._imageData) {
                this._context.putImageData(this._imageData, 0, 0); // at coords 0,0
            }
            this._copyPixels(bmpd, sourceRect, destRect);
            if (this._imageData) {
                this._imageData = this._context.getImageData(0, 0, this._rect.width, this._rect.height);
            }
        }
        else {
            this._copyPixels(bmpd, sourceRect, destRect);
        }
    };
    BitmapData.prototype._copyPixels = function (bmpd, sourceRect, destRect) {
        if (bmpd instanceof BitmapData) {
            this._context.drawImage(bmpd.canvas, sourceRect.x, sourceRect.y, sourceRect.width, sourceRect.height, destRect.x, destRect.y, destRect.width, destRect.height);
        }
        else if (bmpd instanceof HTMLImageElement) {
            this._context.drawImage(bmpd, sourceRect.x, sourceRect.y, sourceRect.width, sourceRect.height, destRect.x, destRect.y, destRect.width, destRect.height);
        }
    };
    /**
     *
     * @param rect
     * @param color
     */
    BitmapData.prototype.fillRect = function (rect, color) {
        if (this._locked) {
            // If canvas is locked:
            //
            //      1) copy image data back to canvas
            //      2) apply fill
            //      3) read _imageData back out
            if (this._imageData)
                this._context.putImageData(this._imageData, 0, 0); // at coords 0,0
            this._context.fillStyle = this.hexToRGBACSS(color);
            this._context.fillRect(rect.x, rect.y, rect.width, rect.height);
            if (this._imageData)
                this._imageData = this._context.getImageData(0, 0, this._rect.width, this._rect.height);
        }
        else {
            this._context.fillStyle = this.hexToRGBACSS(color);
            this._context.fillRect(rect.x, rect.y, rect.width, rect.height);
        }
    };
    BitmapData.prototype.draw = function (source, matrix) {
        if (this._locked) {
            // If canvas is locked:
            //
            //      1) copy image data back to canvas
            //      2) draw object
            //      3) read _imageData back out
            if (this._imageData)
                this._context.putImageData(this._imageData, 0, 0); // at coords 0,0
            this._draw(source, matrix);
            if (this._imageData)
                this._imageData = this._context.getImageData(0, 0, this._rect.width, this._rect.height);
        }
        else {
            this._draw(source, matrix);
        }
    };
    BitmapData.prototype._draw = function (source, matrix) {
        if (source instanceof BitmapData) {
            this._context.save();
            if (matrix != null)
                this._context.setTransform(matrix.a, matrix.b, matrix.c, matrix.d, matrix.tx, matrix.ty);
            this._context.drawImage(source.canvas, 0, 0);
            this._context.restore();
        }
        else if (source instanceof HTMLImageElement) {
            this._context.save();
            if (matrix != null)
                this._context.setTransform(matrix.a, matrix.b, matrix.c, matrix.d, matrix.tx, matrix.ty);
            this._context.drawImage(source, 0, 0);
            this._context.restore();
        }
    };
    BitmapData.prototype.copyChannel = function (sourceBitmap, sourceRect, destPoint, sourceChannel, destChannel) {
        var imageData = sourceBitmap.imageData;
        if (!this._locked)
            this._imageData = this._context.getImageData(0, 0, this._rect.width, this._rect.height);
        if (this._imageData) {
            var sourceData = sourceBitmap.imageData.data;
            var destData = this._imageData.data;
            var sourceOffset = Math.round(Math.log(sourceChannel) / Math.log(2));
            var destOffset = Math.round(Math.log(destChannel) / Math.log(2));
            var i /*uint*/, j /*uint*/, sourceIndex /*uint*/, destIndex /*uint*/;
            for (i = 0; i < sourceRect.width; ++i) {
                for (j = 0; j < sourceRect.height; ++j) {
                    sourceIndex = (i + sourceRect.x + (j + sourceRect.y) * sourceBitmap.width) * 4;
                    destIndex = (i + destPoint.x + (j + destPoint.y) * this.width) * 4;
                    destData[destIndex + destOffset] = sourceData[sourceIndex + sourceOffset];
                }
            }
        }
        if (!this._locked) {
            this._context.putImageData(this._imageData, 0, 0);
            this._imageData = null;
        }
    };
    BitmapData.prototype.colorTransform = function (rect, colorTransform) {
        if (!this._locked)
            this._imageData = this._context.getImageData(0, 0, this._rect.width, this._rect.height);
        if (this._imageData) {
            var data = this._imageData.data;
            var i /*uint*/, j /*uint*/, index /*uint*/;
            for (i = 0; i < rect.width; ++i) {
                for (j = 0; j < rect.height; ++j) {
                    index = (i + rect.x + (j + rect.y) * this.width) * 4;
                    data[index] = data[index] * colorTransform.redMultiplier + colorTransform.redOffset;
                    data[index + 1] = data[index + 1] * colorTransform.greenMultiplier + colorTransform.greenOffset;
                    data[index + 2] = data[index + 2] * colorTransform.blueMultiplier + colorTransform.blueOffset;
                    data[index + 3] = data[index + 3] * colorTransform.alphaMultiplier + colorTransform.alphaOffset;
                }
            }
        }
        if (!this._locked) {
            this._context.putImageData(this._imageData, 0, 0);
            this._imageData = null;
        }
    };
    Object.defineProperty(BitmapData.prototype, "imageData", {
        /**
         *
         * @returns {ImageData}
         */
        get: function () {
            return this._context.getImageData(0, 0, this._rect.width, this._rect.height);
        },
        /**
         *
         * @param {ImageData}
         */
        set: function (value) {
            this._context.putImageData(value, 0, 0);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(BitmapData.prototype, "width", {
        /**
         *
         * @returns {number}
         */
        get: function () {
            return this._imageCanvas.width;
        },
        /**
         *
         * @param {number}
         */
        set: function (value) {
            this._rect.width = value;
            this._imageCanvas.width = value;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(BitmapData.prototype, "height", {
        /**
         *
         * @returns {number}
         */
        get: function () {
            return this._imageCanvas.height;
        },
        /**
         *
         * @param {number}
         */
        set: function (value) {
            this._rect.height = value;
            this._imageCanvas.height = value;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(BitmapData.prototype, "rect", {
        /**
         *
         * @param {Rectangle}
         */
        get: function () {
            return this._rect;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(BitmapData.prototype, "canvas", {
        /**
         *
         * @returns {HTMLCanvasElement}
         */
        get: function () {
            return this._imageCanvas;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(BitmapData.prototype, "context", {
        /**
         *
         * @returns {HTMLCanvasElement}
         */
        get: function () {
            return this._context;
        },
        enumerable: true,
        configurable: true
    });
    // Private
    /**
     * convert decimal value to Hex
     */
    BitmapData.prototype.hexToRGBACSS = function (d) {
        var argb = ColorUtils.float32ColorToARGB(d);
        if (this._transparent == false) {
            argb[0] = 1;
            return 'rgba(' + argb[1] + ',' + argb[2] + ',' + argb[3] + ',' + argb[0] + ')';
        }
        return 'rgba(' + argb[1] + ',' + argb[2] + ',' + argb[3] + ',' + argb[0] / 255 + ')';
    };
    return BitmapData;
})();
module.exports = BitmapData;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImF3YXlqcy1jb3JlL2xpYi9iYXNlL2JpdG1hcGRhdGEudHMiXSwibmFtZXMiOlsiQml0bWFwRGF0YSIsIkJpdG1hcERhdGEuY29uc3RydWN0b3IiLCJCaXRtYXBEYXRhLmRpc3Bvc2UiLCJCaXRtYXBEYXRhLmxvY2siLCJCaXRtYXBEYXRhLnVubG9jayIsIkJpdG1hcERhdGEuZ2V0UGl4ZWwiLCJCaXRtYXBEYXRhLnNldFBpeGVsIiwiQml0bWFwRGF0YS5zZXRQaXhlbHMiLCJCaXRtYXBEYXRhLnNldFBpeGVsMzIiLCJCaXRtYXBEYXRhLnNldFZlY3RvciIsIkJpdG1hcERhdGEuZHJhd0ltYWdlIiwiQml0bWFwRGF0YS5fZHJhd0ltYWdlIiwiQml0bWFwRGF0YS5jb3B5UGl4ZWxzIiwiQml0bWFwRGF0YS5fY29weVBpeGVscyIsIkJpdG1hcERhdGEuZmlsbFJlY3QiLCJCaXRtYXBEYXRhLmRyYXciLCJCaXRtYXBEYXRhLl9kcmF3IiwiQml0bWFwRGF0YS5jb3B5Q2hhbm5lbCIsIkJpdG1hcERhdGEuY29sb3JUcmFuc2Zvcm0iLCJCaXRtYXBEYXRhLmltYWdlRGF0YSIsIkJpdG1hcERhdGEud2lkdGgiLCJCaXRtYXBEYXRhLmhlaWdodCIsIkJpdG1hcERhdGEucmVjdCIsIkJpdG1hcERhdGEuY2FudmFzIiwiQml0bWFwRGF0YS5jb250ZXh0IiwiQml0bWFwRGF0YS5oZXhUb1JHQkFDU1MiXSwibWFwcGluZ3MiOiJBQUVBLElBQU8sU0FBUyxXQUFjLGdDQUFnQyxDQUFDLENBQUM7QUFHaEUsSUFBTyxVQUFVLFdBQWMsa0NBQWtDLENBQUMsQ0FBQztBQUVuRSxBQUdBOztHQURHO0lBQ0csVUFBVTtJQVdmQTs7Ozs7O09BTUdBO0lBQ0hBLFNBbEJLQSxVQUFVQSxDQWtCSEEsS0FBWUEsRUFBRUEsTUFBYUEsRUFBRUEsV0FBMEJBLEVBQUVBLFNBQXVCQTtRQUFuREMsMkJBQTBCQSxHQUExQkEsa0JBQTBCQTtRQUFFQSx5QkFBdUJBLEdBQXZCQSxnQkFBdUJBO1FB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LENBQUNBLEVBQUVBLENBQUNBO1FBRW5CSyxJQUFJQSxDQUFRQSxDQUFDQTtRQUNiQSxJQUFJQSxDQUFRQSxDQUFDQTtRQUNiQSxJQUFJQSxDQUFRQSxDQUFDQTtRQUNiQSxJQUFJQSxDQUFRQSxDQUFDQTtRQUViQSxFQUFFQSxDQUFDQSxDQUFDQSxDQUFDQSxJQUFJQSxDQUFDQSxPQUFPQSxDQUFDQSxDQUFDQSxDQUFDQTtZQUNuQkEsSUFBSUEsU0FBU0EsR0FBYUEsSUFBSUEsQ0FBQ0EsUUFBUUEsQ0FBQ0EsWUFBWUEsQ0FBQ0EsQ0FBQ0EsRUFBRUEsQ0FBQ0EsRUFBRUEsQ0FBQ0EsRUFBRUEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7WUFFakVBLENBQUNBLEdBQUdBLFNBQVNBLENBQUNBLElBQUlBLENBQUNBLENBQUNBLENBQUNBLENBQUNBO1lBQ3RCQSxDQUFDQSxHQUFHQSxTQUFTQSxDQUFDQSxJQUFJQSxDQUFDQSxDQUFDQSxDQUFDQSxDQUFDQTtZQUN0QkEsQ0FBQ0EsR0FBR0EsU0FBU0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7WUFDdEJBLENBQUNBLEdBQUdBLFNBQVNBLENBQUNBLElBQUlBLENBQUNBLENBQUNBLENBQUNBLENBQUNBO1FBRXZCQSxDQUFDQTtRQUFDQSxJQUFJQSxDQUFDQSxDQUFDQTtZQUNQQSxJQUFJQSxLQUFLQSxHQUFVQSxDQUFDQSxDQUFDQSxHQUFHQSxDQUFDQSxHQUFDQSxJQUFJQSxDQUFDQSxZQUFZQSxDQUFDQSxLQUFLQSxDQUFDQSxHQUFDQSxDQUFDQSxDQUFDQTtZQUVyREEsRUFBRUEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EsVUFBVUEsQ0FBQ0E7Z0JBQ3BCQSxJQUFJQSxDQUFDQSxVQUFVQSxHQUFHQSxJQUFJQSxDQUFDQSxRQUFRQSxDQUFDQSxZQUFZQSxDQUFDQSxDQUFDQSxFQUFFQSxDQUFDQSxFQUFFQSxJQUFJQSxDQUFDQSxLQUFLQSxDQUFDQSxLQUFLQSxFQUFFQSxJQUFJQSxDQUFDQSxLQUFLQSxDQUFDQSxNQUFNQSxDQUFDQSxDQUFDQTtZQUV6RkEsQ0FBQ0EsR0FBR0EsSUFBSUEsQ0FBQ0EsVUFBVUEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsS0FBS0EsR0FBR0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7WUFDcENBLENBQUNBLEdBQUdBLElBQUlBLENBQUNBLFVBQVVBLENBQUNBLElBQUlBLENBQUNBLEtBQUtBLEdBQUdBLENBQUNBLENBQUNBLENBQUNBO1lBQ3BDQSxDQUFDQSxHQUFHQSxJQUFJQSxDQUFDQSxVQUFVQSxDQUFDQSxJQUFJQSxDQUFDQSxLQUFLQSxHQUFHQSxDQUFDQSxDQUFDQSxDQUFDQTtZQUNwQ0EsQ0FBQ0EsR0FBR0EsSUFBSUEsQ0FBQ0EsVUFBVUEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsS0FBS0EsR0FBR0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7UUFFckNBLENBQUNBO1FBRURBLEVBQUVBLENBQUNBLENBQUNBLENBQUNBLElBQUlBLENBQUNBLE9BQU9BLENBQUNBLENBQUNBLENBQUNBO1lBQ25CQSxJQUFJQSxDQUFDQSxVQUFVQSxHQUFHQSxJQUFJQSxDQUFDQTtRQUN4QkEsQ0FBQ0E7UUFFREEsTUFBTUEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsSUFBSUEsRUFBRUEsQ0FBQ0EsR0FBR0EsQ0FBQ0EsQ0FBQ0EsSUFBSUEsRUFBRUEsQ0FBQ0EsR0FBR0EsQ0FBQ0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EsQ0FBQ0EsR0FBR0EsQ0FBQ0EsQ0FBQ0E7SUFDN0NBLENBQUNBO0lBRURMOzs7OztPQUtHQTtJQUNJQSw2QkFBUUEsR0FBZkEsVUFBZ0JBLENBQUNBLEVBQUVBLENBQUNBLEVBQUVBLEtBQVlBO1FBRWpDTSxJQUFJQSxJQUFJQSxHQUFZQSxVQUFVQSxDQUFDQSxrQkFBa0JBLENBQUNBLEtBQUtBLENBQUNBLENBQUNBO1FBRXpEQSxFQUFFQSxDQUFDQSxDQUFDQSxDQUFDQSxJQUFJQSxDQUFDQSxPQUFPQSxDQUFDQTtZQUNqQkEsSUFBSUEsQ0FBQ0EsVUFBVUEsR0FBR0EsSUFBSUEsQ0FBQ0EsUUFBUUEsQ0FBQ0EsWUFBWUEsQ0FBQ0EsQ0FBQ0EsRUFBRUEsQ0FBQ0EsRUFBRUEsSUFBSUEsQ0FBQ0EsS0FBS0EsQ0FBQ0EsS0FBS0EsRUFBRUEsSUFBSUEsQ0FBQ0EsS0FBS0EsQ0FBQ0EsTUFBTUEsQ0FBQ0EsQ0FBQ0E7UUFFekZBLEVBQUVBLENBQUNBLENBQUNBLElBQUlBLENBQUNBLFVBQVVBLENBQUNBLENBQUNBLENBQUNBO1lBQ3JCQSxJQUFJQSxLQUFLQSxHQUFVQSxDQUFDQSxDQUFDQSxHQUFHQSxDQUFDQSxHQUFDQSxJQUFJQSxDQUFDQSxZQUFZQSxDQUFDQSxLQUFLQSxDQUFDQSxHQUFDQSxDQUFDQSxDQUFDQTtZQUVyREEsSUFBSUEsQ0FBQ0EsVUFBVUEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsS0FBS0EsR0FBR0EsQ0FBQ0EsQ0FBQ0EsR0FBR0EsSUFBSUEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7WUFDMUNBLElBQUlBLENBQUNBLFVBQVVBLENBQUNBLElBQUlBLENBQUNBLEtBQUtBLEdBQUdBLENBQUNBLENBQUNBLEdBQUdBLElBQUlBLENBQUNBLENBQUNBLENBQUNBLENBQUNBO1lBQzFDQSxJQUFJQSxDQUFDQSxVQUFVQSxDQUFDQSxJQUFJQSxDQUFDQSxLQUFLQSxHQUFHQSxDQUFDQSxDQUFDQSxHQUFHQSxJQUFJQSxDQUFDQSxDQUFDQSxDQUFDQSxDQUFDQTtZQUMxQ0EsSUFBSUEsQ0FBQ0EsVUFBVUEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsS0FBS0EsR0FBR0EsQ0FBQ0EsQ0FBQ0EsR0FBR0EsR0FBR0EsQ0FBQ0E7UUFDdkNBLENBQUNBO1FBRURBLEVBQUVBLENBQUNBLENBQUNBLENBQUNBLElBQUlBLENBQUNBLE9BQU9BLENBQUNBLENBQUNBLENBQUNBO1lBQ25CQSxJQUFJQSxDQUFDQSxRQUFRQSxDQUFDQSxZQUFZQSxDQUFDQSxJQUFJQSxDQUFDQSxVQUFVQSxFQUFFQSxDQUFDQSxFQUFFQSxDQUFDQSxDQUFDQSxDQUFDQTtZQUNsREEsSUFBSUEsQ0FBQ0EsVUFBVUEsR0FBR0EsSUFBSUEsQ0FBQ0E7UUFDeEJBLENBQUNBO0lB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QUlBLENBQUNBLFFBQVFBLENBQUNBLFlBQVlBLENBQUNBLENBQUNBLEVBQUVBLENBQUNBLEVBQUVBLElBQUlBLENBQUNBLEtBQUtBLENBQUNBLEtBQUtBLEVBQUVBLElBQUlBLENBQUNBLEtBQUtBLENBQUNBLE1BQU1BLENBQUNBLENBQUNBO1FBRXpGQSxFQUFFQSxDQUFDQSxDQUFDQSxJQUFJQSxDQUFDQSxVQUFVQSxDQUFDQSxDQUFDQSxDQUFDQTtZQUNyQkEsSUFBSUEsS0FBS0EsR0FBVUEsQ0FBQ0EsQ0FBQ0EsR0FBR0EsQ0FBQ0EsR0FBQ0EsSUFBSUEsQ0FBQ0EsWUFBWUEsQ0FBQ0EsS0FBS0EsQ0FBQ0EsR0FBQ0EsQ0FBQ0EsQ0FBQ0E7WUFFckRBLElBQUlBLENBQUNBLFVBQVVBLENBQUNBLElBQUlBLENBQUNBLEtBQUtBLEdBQUdBLENBQUNBLENBQUNBLEdBQUdBLElBQUlBLENBQUNBLENBQUNBLENBQUNBLENBQUNBO1lBQzFDQSxJQUFJQSxDQUFDQSxVQUFVQSxDQUFDQSxJQUFJQSxDQUFDQSxLQUFLQSxHQUFHQSxDQUFDQSxDQUFDQSxHQUFHQSxJQUFJQSxDQUFDQSxDQUFDQSxDQUFDQSxDQUFDQTtZQUMxQ0EsSUFBSUEsQ0FBQ0EsVUFBVUEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsS0FBS0EsR0FBR0EsQ0FBQ0EsQ0FBQ0EsR0FBR0EsSUFBSUEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7WUFDMUNBLElBQUlBLENBQUNBLFVBQVVBLENBQUNBLElBQUlBLENBQUNBLEtBQUtBLEdBQUdBLENBQUNBLENBQUNBLEdBQUdBLElBQUlBLENBQUNBLENBQUNBLENBQUNBLENBQUNBO1FBQzNDQSxDQUFDQTtRQUVEQSxFQUFFQSxDQUFDQSxDQUFDQSxDQUFDQSxJQUFJQSxDQUFDQSxPQUFPQSxDQUFDQSxDQUFDQSxDQUFDQTtZQUNuQkEsSUFBSUEsQ0FBQ0EsUUFBUUEsQ0FBQ0EsWUFBWUEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsVUFBVUEsRUFBRUEsQ0FBQ0EsRUFBRUEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7WUFDbERB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LENBQUNBLE1BQU1BLEVBQUVBLE1BQU1BLENBQUNBLENBQUNBO1lBRTNCQSxFQUFFQSxDQUFDQSxDQUFDQSxJQUFJQSxDQUFDQSxVQUFVQSxDQUFDQTtnQkFDbkJBLElBQUlBLENBQUNBLFVBQVVBLEdBQUdBLElBQUlBLENBQUNBLFFBQVFBLENBQUNBLFlBQVlBLENBQUNBLENBQUNBLEVBQUVBLENBQUNBLEVBQUVBLElBQUlBLENBQUNBLEtBQUtBLENBQUNBLEtBQUtBLEVBQUVBLElBQUlBLENBQUNBLEtBQUtBLENBQUNBLE1BQU1BLENBQUNBLENBQUNBO1FBQzFGQSxDQUFDQTtRQUFDQSxJQUFJQSxDQUFDQSxDQUFDQTtZQUNQQSxJQUFJQSxDQUFDQSxLQUFLQSxDQUFDQSxNQUFNQSxFQUFFQSxNQUFNQSxDQUFDQSxDQUFDQTtRQUM1QkEsQ0FBQ0E7SUFDRkEsQ0FBQ0E7SUFJT2YsMEJBQUtBLEdBQWJBLFVBQWNBLE1BQVVBLEVBQUVBLE1BQWFBO1FBRXRDZ0IsRUFBRUEsQ0FBQ0EsQ0FBQ0EsTUFBTUEsWUFBWUEsVUFBVUEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7WUFDbENBLElBQUlBLENBQUNBLFFBQVFBLENBQUNBLElBQUlBLEVBQUVBLENBQUNBO1lBRXJCQSxFQUFFQSxDQUFDQSxDQUFDQSxNQUFNQSxJQUFJQSxJQUFJQSxDQUFDQTtnQkFDbEJBLElBQUlBLENBQUNBLFFBQVFBLENBQUNBLFlBQVlBLENBQUNBLE1BQU1BLENBQUNBLENBQUNBLEVBQUVBLE1BQU1BLENBQUNBLENBQUNBLEVBQUVBLE1BQU1BLENBQUNBLENBQUNBLEVBQUVBLE1BQU1BLENBQUNBLENBQUNBLEVBQUVBLE1BQU1BLENBQUNBLEVBQUVBLEVBQUVBLE1BQU1BLENBQUNBLEVBQUVBLENBQUNBLENBQUNBO1lBRTFGQSxJQUFJQSxDQUFDQSxRQUFRQSxDQUFDQSxTQUFTQSxDQUFDQSxNQUFNQSxDQUFDQSxNQUFNQSxFQUFFQSxDQUFDQSxFQUFFQSxDQUFDQSxDQUFDQSxDQUFBQTtZQUM1Q0EsSUFBSUEsQ0FBQ0EsUUFBUUEsQ0FBQ0EsT0FBT0EsRUFBRUEsQ0FBQ0E7UUFFekJBLENBQUNBO1FBQUNBLElBQUlBLENBQUNBLEVBQUVBLENBQUNBLENBQUNBLE1BQU1BLFlBQVlBLGdCQUFnQkEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7WUFDL0NBLElBQUlBLENBQUNBLFFBQVFBLENBQUNBLElBQUlBLEVBQUVBLENBQUNBO1lBRXJCQSxFQUFFQSxDQUFDQSxDQUFDQSxNQUFNQSxJQUFJQSxJQUFJQSxDQUFDQTtnQkFDbEJBLElBQUlBLENBQUNBLFFBQVFBLENBQUNBLFlBQVlBLENBQUNBLE1BQU1BLENBQUNBLENBQUNBLEVBQUVBLE1BQU1BLENBQUNBLENBQUNBLEVBQUVBLE1BQU1BLENBQUNBLENBQUNBLEVBQUVBLE1BQU1BLENBQUNBLENBQUNBLEVBQUVBLE1BQU1BLENBQUNBLEVBQUVBLEVBQUVBLE1BQU1BLENBQUNBLEVBQUVBLENBQUNBLENBQUNBO1lBRTFGQSxJQUFJQSxDQUFDQSxRQUFRQSxDQUFDQSxTQUFTQSxDQUFDQSxNQUFNQSxFQUFFQSxDQUFDQSxFQUFFQSxDQUFDQSxDQUFDQSxDQUFBQTtZQUNyQ0EsSUFBSUEsQ0FBQ0EsUUFBUUEsQ0FBQ0EsT0FBT0EsRUFBRUEsQ0FBQ0E7UUFDekJBLENBQUNBO0lBRUZBLENBQUNBO0lBRU1oQixnQ0FBV0EsR0FBbEJBLFVBQW1CQSxZQUF1QkEsRUFBRUEsVUFBb0JBLEVBQUVBLFNBQWVBLEVBQUVBLGFBQW9CQSxFQUFFQSxXQUFrQkE7UUFFMUhpQixJQUFJQSxTQUFTQSxHQUFhQSxZQUFZQSxDQUFDQSxTQUFTQSxDQUFDQTtRQUVqREEsRUFBRUEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EsT0FBT0EsQ0FBQ0E7WUFDakJBLElBQUlBLENBQUNBLFVBQVVBLEdBQUdBLElBQUlBLENBQUNBLFFBQVFBLENBQUNBLFlBQVlBLENBQUNBLENBQUNBLEVBQUVBLENBQUNBLEVBQUVBLElBQUlBLENBQUNBLEtBQUtBLENBQUNBLEtBQUtBLEVBQUVBLElBQUlBLENBQUNBLEtBQUtBLENBQUNBLE1BQU1BLENBQUNBLENBQUNBO1FBRXpGQSxFQUFFQSxDQUFDQSxDQUFDQSxJQUFJQSxDQUFDQSxVQUFVQSxDQUFDQSxDQUFDQSxDQUFDQTtZQUNyQkEsSUFBSUEsVUFBVUEsR0FBaUJBLFlBQVlBLENBQUNBLFNBQVNBLENBQUNBLElBQUlBLENBQUNBO1lBQzNEQSxJQUFJQSxRQUFRQSxHQUFpQkEsSUFBSUEsQ0FBQ0EsVUFBVUEsQ0FBQ0EsSUFBSUEsQ0FBQ0E7WUFFbERBLElBQUlBLFlBQVlBLEdBQVVBLElBQUlBLENBQUNBLEtBQUtBLENBQUNBLElBQUlBLENBQUNBLEdBQUdBLENBQUNBLGFBQWFBLENBQUNBLEdBQUNBLElBQUlBLENBQUNBLEdBQUdBLENBQUNBLENBQUNBLENBQUNBLENBQUNBLENBQUNBO1lBQzFFQSxJQUFJQSxVQUFVQSxHQUFVQSxJQUFJQSxDQUFDQSxLQUFLQSxDQUFDQSxJQUFJQSxDQUFDQSxHQUFHQSxDQUFDQSxXQUFXQSxDQUFDQSxHQUFDQSxJQUFJQSxDQUFDQSxHQUFHQSxDQUFDQSxDQUFDQSxDQUFDQSxDQUFDQSxDQUFDQTtZQUV0RUEsSUFBSUEsQ0FBQ0EsQ0FBUUEsUUFBREEsQUFBU0EsRUFBRUEsQ0FBQ0EsQ0FBUUEsUUFBREEsQUFBU0EsRUFBRUEsV0FBV0EsQ0FBUUEsUUFBREEsQUFBU0EsRUFBRUEsU0FBU0EsQ0FBUUEsUUFBREEsQUFBU0EsQ0FBQ0E7WUFDakdBLEdBQUdBLENBQUNBLENBQUNBLENBQUNBLEdBQUdBLENBQUNBLEVBQUVBLENBQUNBLEdBQUdBLFVBQVVBLENBQUNBLEtBQUtBLEVBQUVBLEVBQUVBLENBQUNBLEVBQUVBLENBQUNBO2dCQUN2Q0EsR0FBR0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsR0FBR0EsQ0FBQ0EsRUFBRUEsQ0FBQ0EsR0FBR0EsVUFBVUEsQ0FBQ0EsTUFBTUEsRUFBRUEsRUFBRUEsQ0FBQ0EsRUFBRUEsQ0FBQ0E7b0JBQ3hDQSxXQUFXQSxHQUFHQSxDQUFDQSxDQUFDQSxHQUFHQSxVQUFVQSxDQUFDQSxDQUFDQSxHQUFHQSxDQUFDQSxDQUFDQSxHQUFHQSxVQUFVQSxDQUFDQSxDQUFDQSxDQUFDQSxHQUFDQSxZQUFZQSxDQUFDQSxLQUFLQSxDQUFDQSxHQUFDQSxDQUFDQSxDQUFDQTtvQkFDM0VBLFNBQVNBLEdBQUdBLENBQUNBLENBQUNBLEdBQUdBLFNBQVNBLENBQUNBLENBQUNBLEdBQUdBLENBQUNBLENBQUNBLEdBQUdBLFNBQVNBLENBQUNBLENBQUNBLENBQUNBLEdBQUNBLElBQUlBLENBQUNBLEtBQUtBLENBQUNBLEdBQUNBLENBQUNBLENBQUNBO29CQUUvREEsUUFBUUEsQ0FBQ0EsU0FBU0EsR0FBR0EsVUFBVUEsQ0FBQ0EsR0FBR0EsVUFBVUEsQ0FBQ0EsV0FBV0EsR0FBR0EsWUFBWUEsQ0FBQ0EsQ0FBQ0E7Z0JBQzNFQSxDQUFDQTtZQUNGQSxDQUFDQTtRQUNGQSxDQUFDQTtRQUVEQSxFQUFFQSxDQUFDQSxDQUFDQSxDQUFDQSxJQUFJQSxDQUFDQSxPQUFPQSxDQUFDQSxDQUFDQSxDQUFDQTtZQUNuQkEsSUFBSUEsQ0FBQ0EsUUFBUUEsQ0FBQ0EsWUFBWUEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsVUFBVUEsRUFBRUEsQ0FBQ0EsRUFBRUEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7WUFDbERBLElBQUlBLENBQUNBLFVBQVVBLEdBQUdBLElBQUlBLENBQUNBO1FBQ3hCQSxDQUFDQTtJQUNGQSxDQUFDQTtJQUVNakIsbUNBQWNBLEdBQXJCQSxVQUFzQkEsSUFBY0EsRUFBRUEsY0FBNkJBO1FBRWxFa0IsRUFBRUEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EsT0FBT0EsQ0FBQ0E7WUFDakJBLElBQUlBLENBQUNBLFVBQVVBLEdBQUdBLElBQUlBLENBQUNBLFFBQVFBLENBQUNBLFlBQVlBLENBQUNBLENBQUNBLEVBQUVBLENBQUNBLEVBQUVBLElBQUlBLENBQUNBLEtBQUtBLENBQUNBLEtBQUtBLEVBQUVBLElBQUlBLENBQUNBLEtBQUtBLENBQUNBLE1BQU1BLENBQUNBLENBQUNBO1FBRXpGQSxFQUFFQSxDQUFDQSxDQUFDQSxJQUFJQSxDQUFDQSxVQUFVQSxDQUFDQSxDQUFDQSxDQUFDQTtZQUNyQkEsSUFBSUEsSUFBSUEsR0FBaUJBLElBQUlBLENBQUNBLFVBQVVBLENBQUNBLElBQUlBLENBQUNBO1lBRTlDQSxJQUFJQSxDQUFDQSxDQUFRQSxRQUFEQSxBQUFTQSxFQUFFQSxDQUFDQSxDQUFRQSxRQUFEQSxBQUFTQSxFQUFFQSxLQUFLQSxDQUFRQSxRQUFEQSxBQUFTQSxDQUFDQTtZQUNoRUEsR0FBR0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsR0FBR0EsQ0FBQ0EsRUFBRUEsQ0FBQ0EsR0FBR0EsSUFBSUEsQ0FBQ0EsS0FBS0EsRUFBRUEsRUFBRUEsQ0FBQ0EsRUFBRUEsQ0FBQ0E7Z0JBQ2pDQSxHQUFHQSxDQUFDQSxDQUFDQSxDQUFDQSxHQUFHQSxDQUFDQSxFQUFFQSxDQUFDQSxHQUFHQSxJQUFJQSxDQUFDQSxNQUFNQSxFQUFFQSxFQUFFQSxDQUFDQSxFQUFFQSxDQUFDQTtvQkFDbENBLEtBQUtBLEdBQUdBLENBQUNBLENBQUNBLEdBQUdBLElBQUlBLENBQUNBLENBQUNBLEdBQUdBLENBQUNBLENBQUNBLEdBQUdBLElBQUlBLENBQUNBLENBQUNBLENBQUNBLEdBQUNBLElBQUlBLENBQUNBLEtBQUtBLENBQUNBLEdBQUNBLENBQUNBLENBQUNBO29CQUVqREEsSUFBSUEsQ0FBQ0EsS0FBS0EsQ0FBQ0EsR0FBR0EsSUFBSUEsQ0FBQ0EsS0FBS0EsQ0FBQ0EsR0FBQ0EsY0FBY0EsQ0FBQ0EsYUFBYUEsR0FBR0EsY0FBY0EsQ0FBQ0EsU0FBU0EsQ0FBQ0E7b0JBQ2xGQSxJQUFJQSxDQUFDQSxLQUFLQSxHQUFHQSxDQUFDQSxDQUFDQSxHQUFHQSxJQUFJQSxDQUFDQSxLQUFLQSxHQUFHQSxDQUFDQSxDQUFDQSxHQUFDQSxjQUFjQSxDQUFDQSxlQUFlQSxHQUFHQSxjQUFjQSxDQUFDQSxXQUFXQSxDQUFDQTtvQkFDOUZBLElBQUlBLENBQUNBLEtBQUtBLEdBQUdBLENBQUNBLENBQUNBLEdBQUdBLElBQUlBLENBQUNBLEtBQUtBLEdBQUdBLENB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QkEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7UUFFckRBLEVBQUVBLENBQUNBLENBQUNBLElBQUlBLENBQUNBLFlBQVlBLElBQUlBLEtBQUtBLENBQUNBLENBQUNBLENBQUNBO1lBQ2hDQSxJQUFJQSxDQUFDQSxDQUFDQSxDQUFDQSxHQUFHQSxDQUFDQSxDQUFDQTtZQUVaQSxNQUFNQSxDQUFDQSxPQUFPQSxHQUFHQSxJQUFJQSxDQUFDQSxDQUFDQSxDQUFDQSxHQUFHQSxHQUFHQSxHQUFHQSxJQUFJQSxDQUFDQSxDQUFDQSxDQUFDQSxHQUFHQSxHQUFHQSxHQUFHQSxJQUFJQSxDQUFDQSxDQUFDQSxDQUFDQSxHQUFHQSxHQUFHQSxHQUFHQSxJQUFJQSxDQUFDQSxDQUFDQSxDQUFDQSxHQUFHQSxHQUFHQSxDQUFDQTtRQUNoRkEsQ0FBQ0E7UUFFREEsTUFBTUEsQ0FBQ0EsT0FBT0EsR0FBR0EsSUFBSUEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsR0FBR0EsR0FBR0EsR0FBR0EsSUFBSUEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsR0FBR0EsR0FBR0EsR0FBR0EsSUFBSUEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsR0FBR0EsR0FBR0EsR0FBR0EsSUFBSUEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsR0FBQ0EsR0FBR0EsR0FBR0EsR0FBR0EsQ0FBQ0E7SUFDcEZBLENBQUNBO0lBQ0Z6QixpQkFBQ0E7QUFBREEsQ0FsakJBLEFBa2pCQ0EsSUFBQTtBQUVELEFBQW9CLGlCQUFYLFVBQVUsQ0FBQyIsImZpbGUiOiJiYXNlL0JpdG1hcERhdGEuanMiLCJzb3VyY2VSb290IjoiLi4vIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IENvbG9yVHJhbnNmb3JtXHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLWNvcmUvbGliL2dlb20vQ29sb3JUcmFuc2Zvcm1cIik7XG5pbXBvcnQgTWF0cml4XHRcdFx0XHRcdD0gcmVxdWlyZShcImF3YXlqcy1jb3JlL2xpYi9nZW9tL01hdHJpeFwiKTtcbmltcG9ydCBSZWN0YW5nbGVcdFx0XHRcdD0gcmVxdWlyZShcImF3YXlqcy1jb3JlL2xpYi9nZW9tL1JlY3RhbmdsZVwiKTtcbmltcG9ydCBQb2ludFx0XHRcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtY29yZS9saWIvZ2VvbS9Qb2ludFwiKTtcbmltcG9ydCBCeXRlQXJyYXlcdFx0XHRcdD0gcmVxdWlyZShcImF3YXlqcy1jb3JlL2xpYi91dGlscy9CeXRlQXJyYXlcIik7XG5pbXBvcnQgQ29sb3JVdGlsc1x0XHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLWNvcmUvbGliL3V0aWxzL0NvbG9yVXRpbHNcIik7XG5cbi8qKlxuICpcbiAqL1xuY2xhc3MgQml0bWFwRGF0YVxue1xuXHRwcml2YXRlIF9pbWFnZUNhbnZhczpIVE1MQ2FudmFzRWxlbWVudDtcblx0cHJpdmF0ZSBfY29udGV4dDpDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQ7XG5cdHByaXZhdGUgX2ltYWdlRGF0YTpJbWFnZURhdGE7XG5cdHByaXZhdGUgX3JlY3Q6UmVjdGFuZ2xlO1xuXHRwcml2YXRlIF90cmFuc3BhcmVudDpib29sZWFuO1xuXHRwcml2YXRlIF9hbHBoYTpudW1iZXIgPSAwO1xuXHRwcml2YXRlIF9sb2NrZWQ6Ym9vbGVhbiA9IGZhbHNlO1xuXG5cblx0LyoqXG5cdCAqXG5cdCAqIEBwYXJhbSB3aWR0aFxuXHQgKiBAcGFyYW0gaGVpZ2h0XG5cdCAqIEBwYXJhbSB0cmFuc3BhcmVudFxuXHQgKiBAcGFyYW0gZmlsbENvbG9yXG5cdCAqL1xuXHRjb25zdHJ1Y3Rvcih3aWR0aDpudW1iZXIsIGhlaWdodDpudW1iZXIsIHRyYW5zcGFyZW50OmJvb2xlYW4gPSB0cnVlLCBmaWxsQ29sb3I6bnVtYmVyID0gbnVsbClcblx0e1xuXG5cdFx0dGhpcy5fdHJhbnNwYXJlbnQgPSB0cmFuc3BhcmVudDtcblx0XHR0aGlzLl9pbWFnZUNhbnZhcyA9IDxIVE1MQ2FudmFzRWxlbWVudD4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKTtcblx0XHR0aGlzLl9pbWFnZUNhbnZhcy53aWR0aCA9IHdpZHRoO1xuXHRcdHRoaXMuX2ltYWdlQ2FudmFzLmhlaWdodCA9IGhlaWdodDtcblx0XHR0aGlzLl9jb250ZXh0ID0gdGhpcy5faW1hZ2VDYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpO1xuXHRcdHRoaXMuX3JlY3QgPSBuZXcgUmVjdGFuZ2xlKDAsIDAsIHdpZHRoLCBoZWlnaHQpO1xuXG5cdFx0aWYgKGZpbGxDb2xvciAhPSBudWxsKSB7XG5cblx0XHRcdGlmICh0aGlzLl90cmFuc3BhcmVudCkge1xuXHRcdFx0XHR0aGlzLl9hbHBoYSA9IENvbG9yVXRpbHMuZmxvYXQzMkNvbG9yVG9BUkdCKGZpbGxDb2xvcilbMF0vMjU1O1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dGhpcy5fYWxwaGEgPSAxO1xuXHRcdFx0fVxuXG5cdFx0XHR0aGlzLmZpbGxSZWN0KHRoaXMuX3JlY3QsIGZpbGxDb2xvcik7XG5cblx0XHR9XG5cblx0fVxuXG5cdC8qKlxuXHQgKlxuXHQgKi9cblx0cHVibGljIGRpc3Bvc2UoKVxuXHR7XG5cdFx0dGhpcy5fY29udGV4dCA9IG51bGw7XG5cdFx0dGhpcy5faW1hZ2VDYW52YXMgPSBudWxsO1xuXHRcdHRoaXMuX2ltYWdlRGF0YSA9IG51bGw7XG5cdFx0dGhpcy5fcmVjdCA9IG51bGw7XG5cdFx0dGhpcy5fdHJhbnNwYXJlbnQgPSBudWxsO1xuXHRcdHRoaXMuX2xvY2tlZCA9IG51bGw7XG5cdH1cblxuXHQvKipcblx0ICpcblx0ICovXG5cdHB1YmxpYyBsb2NrKClcblx0e1xuXHRcdHRoaXMuX2xvY2tlZCA9IHRydWU7XG5cdFx0dGhpcy5faW1hZ2VEYXRhID0gdGhpcy5fY29udGV4dC5nZXRJbWFnZURhdGEoMCwgMCwgdGhpcy5fcmVjdC53aWR0aCwgdGhpcy5fcmVjdC5oZWlnaHQpO1xuXHR9XG5cblx0LyoqXG5cdCAqXG5cdCAqL1xuXHRwdWJsaWMgdW5sb2NrKClcblx0e1xuXHRcdHRoaXMuX2xvY2tlZCA9IGZhbHNlO1xuXG5cdFx0aWYgKHRoaXMuX2ltYWdlRGF0YSkge1xuXHRcdFx0dGhpcy5fY29udGV4dC5wdXRJbWFnZURhdGEodGhpcy5faW1hZ2VEYXRhLCAwLCAwKTsgLy8gYXQgY29vcmRzIDAsMFxuXHRcdFx0dGhpcy5faW1hZ2VEYXRhID0gbnVsbDtcblx0XHR9XG5cdH1cblxuXHQvKipcblx0ICpcblx0ICogQHBhcmFtIHhcblx0ICogQHBhcmFtIHlcblx0ICogQHBhcmFtIGNvbG9yXG5cdCAqL1xuXHRwdWJsaWMgZ2V0UGl4ZWwoeCwgeSk6bnVtYmVyXG5cdHtcblx0XHR2YXIgcjpudW1iZXI7XG5cdFx0dmFyIGc6bnVtYmVyO1xuXHRcdHZhciBiOm51bWJlcjtcblx0XHR2YXIgYTpudW1iZXI7XG5cblx0XHRpZiAoIXRoaXMuX2xvY2tlZCkge1xuXHRcdFx0dmFyIHBpeGVsRGF0YTpJbWFnZURhdGEgPSB0aGlzLl9jb250ZXh0LmdldEltYWdlRGF0YSh4LCB5LCAxLCAxKTtcblxuXHRcdFx0ciA9IHBpeGVsRGF0YS5kYXRhWzBdO1xuXHRcdFx0ZyA9IHBpeGVsRGF0YS5kYXRhWzFdO1xuXHRcdFx0YiA9IHBpeGVsRGF0YS5kYXRhWzJdO1xuXHRcdFx0YSA9IHBpeGVsRGF0YS5kYXRhWzNdO1xuXG5cdFx0fSBlbHNlIHtcblx0XHRcdHZhciBpbmRleDpudW1iZXIgPSAoeCArIHkqdGhpcy5faW1hZ2VDYW52YXMud2lkdGgpKjQ7XG5cblx0XHRcdGlmICghdGhpcy5faW1hZ2VEYXRhKVxuXHRcdFx0XHR0aGlzLl9pbWFnZURhdGEgPSB0aGlzLl9jb250ZXh0LmdldEltYWdlRGF0YSgwLCAwLCB0aGlzLl9yZWN0LndpZHRoLCB0aGlzLl9yZWN0LmhlaWdodCk7XG5cblx0XHRcdHIgPSB0aGlzLl9pbWFnZURhdGEuZGF0YVtpbmRleCArIDBdO1xuXHRcdFx0ZyA9IHRoaXMuX2ltYWdlRGF0YS5kYXRhW2luZGV4ICsgMV07XG5cdFx0XHRiID0gdGhpcy5faW1hZ2VEYXRhLmRhdGFbaW5kZXggKyAyXTtcblx0XHRcdGEgPSB0aGlzLl9pbWFnZURhdGEuZGF0YVtpbmRleCArIDNdO1xuXG5cdFx0fVxuXG5cdFx0aWYgKCF0aGlzLl9sb2NrZWQpIHtcblx0XHRcdHRoaXMuX2ltYWdlRGF0YSA9IG51bGw7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIChhIDw8IDI0KSB8IChyIDw8IDE2KSB8IChnIDw8IDgpIHwgYjtcblx0fVxuXG5cdC8qKlxuXHQgKlxuXHQgKiBAcGFyYW0geFxuXHQgKiBAcGFyYW0geVxuXHQgKiBAcGFyYW0gY29sb3Jcblx0ICovXG5cdHB1YmxpYyBzZXRQaXhlbCh4LCB5LCBjb2xvcjpudW1iZXIpXG5cdHtcblx0XHR2YXIgYXJnYjpudW1iZXJbXSA9IENvbG9yVXRpbHMuZmxvYXQzMkNvbG9yVG9BUkdCKGNvbG9yKTtcblxuXHRcdGlmICghdGhpcy5fbG9ja2VkKVxuXHRcdFx0dGhpcy5faW1hZ2VEYXRhID0gdGhpcy5fY29udGV4dC5nZXRJbWFnZURhdGEoMCwgMCwgdGhpcy5fcmVjdC53aWR0aCwgdGhpcy5fcmVjdC5oZWlnaHQpO1xuXG5cdFx0aWYgKHRoaXMuX2ltYWdlRGF0YSkge1xuXHRcdFx0dmFyIGluZGV4Om51bWJlciA9ICh4ICsgeSp0aGlzLl9pbWFnZUNhbnZhcy53aWR0aCkqNDtcblxuXHRcdFx0dGhpcy5faW1hZ2VEYXRhLmRhdGFbaW5kZXggKyAwXSA9IGFyZ2JbMV07XG5cdFx0XHR0aGlzLl9pbWFnZURhdGEuZGF0YVtpbmRleCArIDFdID0gYXJnYlsyXTtcblx0XHRcdHRoaXMuX2ltYWdlRGF0YS5kYXRhW2luZGV4ICsgMl0gPSBhcmdiWzNdO1xuXHRcdFx0dGhpcy5faW1hZ2VEYXRhLmRhdGFbaW5kZXggKyAzXSA9IDI1NTtcblx0XHR9XG5cblx0XHRpZiAoIXRoaXMuX2xvY2tlZCkge1xuXHRcdFx0dGhpcy5fY29udGV4dC5wdXRJbWFnZURhdGEodGhpcy5faW1hZ2VEYXRhLCAwLCAwKTtcblx0XHRcdHRoaXMuX2ltYWdlRGF0YSA9IG51bGw7XG5cdFx0fVxuXHR9XG5cblx0LyoqXG5cdCAqXG5cdCAqIEBwYXJhbSByZWN0XG5cdCAqIEBwYXJhbSBpbnB1dEJ5dGVBcnJheVxuXHQgKi9cblx0cHVibGljIHNldFBpeGVscyhyZWN0OlJlY3RhbmdsZSwgaW5wdXRCeXRlQXJyYXk6Qnl0ZUFycmF5KVxuXHR7XG5cdFx0aWYgKCF0aGlzLl9sb2NrZWQpXG5cdFx0XHR0aGlzLl9pbWFnZURhdGEgPSB0aGlzLl9jb250ZXh0LmdldEltYWdlRGF0YSgwLCAwLCB0aGlzLl9yZWN0LndpZHRoLCB0aGlzLl9yZWN0LmhlaWdodCk7XG5cblx0XHRpZiAodGhpcy5faW1hZ2VEYXRhKSB7XG5cdFx0XHRpbnB1dEJ5dGVBcnJheS5wb3NpdGlvbiA9IDA7XG5cdFx0XHR2YXIgaTpudW1iZXIgLyp1aW50Ki8sIGo6bnVtYmVyIC8qdWludCovLCBpbmRleDpudW1iZXIgLyp1aW50Ki87XG5cdFx0XHRmb3IgKGkgPSAwOyBpIDwgcmVjdC53aWR0aDsgKytpKSB7XG5cdFx0XHRcdGZvciAoaiA9IDA7IGogPCByZWN0LmhlaWdodDsgKytqKSB7XG5cdFx0XHRcdFx0aW5kZXggPSAoaSArIHJlY3QueCArIChqICsgcmVjdC55KSp0aGlzLl9pbWFnZUNhbnZhcy53aWR0aCkqNDtcblxuXHRcdFx0XHRcdHRoaXMuX2ltYWdlRGF0YS5kYXRhW2luZGV4ICsgMF0gPSBpbnB1dEJ5dGVBcnJheS5yZWFkVW5zaWduZWRJbnQoKTtcblx0XHRcdFx0XHR0aGlzLl9pbWFnZURhdGEuZGF0YVtpbmRleCArIDFdID0gaW5wdXRCeXRlQXJyYXkucmVhZFVuc2lnbmVkSW50KCk7XG5cdFx0XHRcdFx0dGhpcy5faW1hZ2VEYXRhLmRhdGFbaW5kZXggKyAyXSA9IGlucHV0Qnl0ZUFycmF5LnJlYWRVbnNpZ25lZEludCgpO1xuXHRcdFx0XHRcdHRoaXMuX2ltYWdlRGF0YS5kYXRhW2luZGV4ICsgM10gPSBpbnB1dEJ5dGVBcnJheS5yZWFkVW5zaWduZWRJbnQoKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGlmICghdGhpcy5fbG9ja2VkKSB7XG5cdFx0XHR0aGlzLl9jb250ZXh0LnB1dEltYWdlRGF0YSh0aGlzLl9pbWFnZURhdGEsIDAsIDApO1xuXHRcdFx0dGhpcy5faW1hZ2VEYXRhID0gbnVsbDtcblx0XHR9XG5cdH1cblxuXHQvKipcblx0ICpcblx0ICogQHBhcmFtIHhcblx0ICogQHBhcmFtIHlcblx0ICogQHBhcmFtIGNvbG9yXG5cdCAqL1xuXHRwdWJsaWMgc2V0UGl4ZWwzMih4LCB5LCBjb2xvcjpudW1iZXIpXG5cdHtcblx0XHR2YXIgYXJnYjpudW1iZXJbXSA9IENvbG9yVXRpbHMuZmxvYXQzMkNvbG9yVG9BUkdCKGNvbG9yKTtcblxuXHRcdGlmICghdGhpcy5fbG9ja2VkKVxuXHRcdFx0dGhpcy5faW1hZ2VEYXRhID0gdGhpcy5fY29udGV4dC5nZXRJbWFnZURhdGEoMCwgMCwgdGhpcy5fcmVjdC53aWR0aCwgdGhpcy5fcmVjdC5oZWlnaHQpO1xuXG5cdFx0aWYgKHRoaXMuX2ltYWdlRGF0YSkge1xuXHRcdFx0dmFyIGluZGV4Om51bWJlciA9ICh4ICsgeSp0aGlzLl9pbWFnZUNhbnZhcy53aWR0aCkqNDtcblxuXHRcdFx0dGhpcy5faW1hZ2VEYXRhLmRhdGFbaW5kZXggKyAwXSA9IGFyZ2JbMV07XG5cdFx0XHR0aGlzLl9pbWFnZURhdGEuZGF0YVtpbmRleCArIDFdID0gYXJnYlsyXTtcblx0XHRcdHRoaXMuX2ltYWdlRGF0YS5kYXRhW2luZGV4ICsgMl0gPSBhcmdiWzNdO1xuXHRcdFx0dGhpcy5faW1hZ2VEYXRhLmRhdGFbaW5kZXggKyAzXSA9IGFyZ2JbMF07XG5cdFx0fVxuXG5cdFx0aWYgKCF0aGlzLl9sb2NrZWQpIHtcblx0XHRcdHRoaXMuX2NvbnRleHQucHV0SW1hZ2VEYXRhKHRoaXMuX2ltYWdlRGF0YSwgMCwgMCk7XG5cdFx0XHR0aGlzLl9pbWFnZURhdGEgPSBudWxsO1xuXHRcdH1cblx0fVxuXG5cdHB1YmxpYyBzZXRWZWN0b3IocmVjdDpSZWN0YW5nbGUsIGlucHV0VmVjdG9yOkFycmF5PG51bWJlcj4pXG5cdHtcblx0XHRpZiAoIXRoaXMuX2xvY2tlZClcblx0XHRcdHRoaXMuX2ltYWdlRGF0YSA9IHRoaXMuX2NvbnRleHQuZ2V0SW1hZ2VEYXRhKDAsIDAsIHRoaXMuX3JlY3Qud2lkdGgsIHRoaXMuX3JlY3QuaGVpZ2h0KTtcblxuXHRcdGlmICh0aGlzLl9pbWFnZURhdGEpIHtcblx0XHRcdHZhciBpOm51bWJlciAvKnVpbnQqLywgajpudW1iZXIgLyp1aW50Ki8sIGluZGV4Om51bWJlciAvKnVpbnQqLywgYXJnYjpudW1iZXJbXSAvKnVpbnQqLztcblx0XHRcdGZvciAoaSA9IDA7IGkgPCByZWN0LndpZHRoOyArK2kpIHtcblx0XHRcdFx0Zm9yIChqID0gMDsgaiA8IHJlY3QuaGVpZ2h0OyArK2opIHtcblx0XHRcdFx0XHRhcmdiID0gQ29sb3JVdGlscy5mbG9hdDMyQ29sb3JUb0FSR0IoaW5wdXRWZWN0b3JbaSArIGoqcmVjdC53aWR0aF0pO1xuXHRcdFx0XHRcdGluZGV4ID0gKGkgKyByZWN0LnggKyAoaiArIHJlY3QueSkqdGhpcy5faW1hZ2VDYW52YXMud2lkdGgpKjQ7XG5cblx0XHRcdFx0XHR0aGlzLl9pbWFnZURhdGEuZGF0YVtpbmRleCArIDBdID0gYXJnYlsxXTtcblx0XHRcdFx0XHR0aGlzLl9pbWFnZURhdGEuZGF0YVtpbmRleCArIDFdID0gYXJnYlsyXTtcblx0XHRcdFx0XHR0aGlzLl9pbWFnZURhdGEuZGF0YVtpbmRleCArIDJdID0gYXJnYlszXTtcblx0XHRcdFx0XHR0aGlzLl9pbWFnZURhdGEuZGF0YVtpbmRleCArIDNdID0gYXJnYlswXTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGlmICghdGhpcy5fbG9ja2VkKSB7XG5cdFx0XHR0aGlzLl9jb250ZXh0LnB1dEltYWdlRGF0YSh0aGlzLl9pbWFnZURhdGEsIDAsIDApO1xuXHRcdFx0dGhpcy5faW1hZ2VEYXRhID0gbnVsbDtcblx0XHR9XG5cdH1cblxuXHQvKipcblx0ICogQ29weSBhbiBIVE1MSW1hZ2VFbGVtZW50IG9yIEJpdG1hcERhdGEgb2JqZWN0XG5cdCAqXG5cdCAqIEBwYXJhbSBpbWcge0JpdG1hcERhdGF9IC8ge0hUTUxJbWFnZUVsZW1lbnR9XG5cdCAqIEBwYXJhbSBzb3VyY2VSZWN0IC0gc291cmNlIHJlY3RhbmdlIHRvIGNvcHkgZnJvbVxuXHQgKiBAcGFyYW0gZGVzdFJlY3QgLSBkZXN0aW5hdG9pbiByZWN0YW5nZSB0byBjb3B5IHRvXG5cdCAqL1xuXHRwdWJsaWMgZHJhd0ltYWdlKGltZzpCaXRtYXBEYXRhLCBzb3VyY2VSZWN0OlJlY3RhbmdsZSwgZGVzdFJlY3Q6UmVjdGFuZ2xlKTtcblx0cHVibGljIGRyYXdJbWFnZShpbWc6SFRNTEltYWdlRWxlbWVudCwgc291cmNlUmVjdDpSZWN0YW5nbGUsIGRlc3RSZWN0OlJlY3RhbmdsZSk7XG5cdHB1YmxpYyBkcmF3SW1hZ2UoaW1nOmFueSwgc291cmNlUmVjdDpSZWN0YW5nbGUsIGRlc3RSZWN0OlJlY3RhbmdsZSlcblx0e1xuXHRcdGlmICh0aGlzLl9sb2NrZWQpIHtcblx0XHRcdC8vIElmIGNhbnZhcyBpcyBsb2NrZWQ6XG5cdFx0XHQvL1xuXHRcdFx0Ly8gICAgICAxKSBjb3B5IGltYWdlIGRhdGEgYmFjayB0byBjYW52YXNcblx0XHRcdC8vICAgICAgMikgZHJhdyBvYmplY3Rcblx0XHRcdC8vICAgICAgMykgcmVhZCBfaW1hZ2VEYXRhIGJhY2sgb3V0XG5cblx0XHRcdGlmICh0aGlzLl9pbWFnZURhdGEpIHtcblx0XHRcdFx0dGhpcy5fY29udGV4dC5wdXRJbWFnZURhdGEodGhpcy5faW1hZ2VEYXRhLCAwLCAwKTsgLy8gYXQgY29vcmRzIDAsMFxuXHRcdFx0fVxuXG5cdFx0XHR0aGlzLl9kcmF3SW1hZ2UoaW1nLCBzb3VyY2VSZWN0LCBkZXN0UmVjdCk7XG5cblx0XHRcdGlmICh0aGlzLl9pbWFnZURhdGEpIHtcblx0XHRcdFx0dGhpcy5faW1hZ2VEYXRhID0gdGhpcy5fY29udGV4dC5nZXRJbWFnZURhdGEoMCwgMCwgdGhpcy5fcmVjdC53aWR0aCwgdGhpcy5fcmVjdC5oZWlnaHQpO1xuXHRcdFx0fVxuXG5cdFx0fSBlbHNlIHtcblx0XHRcdHRoaXMuX2RyYXdJbWFnZShpbWcsIHNvdXJjZVJlY3QsIGRlc3RSZWN0KVxuXHRcdH1cblx0fVxuXG5cdHByaXZhdGUgX2RyYXdJbWFnZShpbWc6Qml0bWFwRGF0YSwgc291cmNlUmVjdDpSZWN0YW5nbGUsIGRlc3RSZWN0OlJlY3RhbmdsZSk7XG5cdHByaXZhdGUgX2RyYXdJbWFnZShpbWc6SFRNTEltYWdlRWxlbWVudCwgc291cmNlUmVjdDpSZWN0YW5nbGUsIGRlc3RSZWN0OlJlY3RhbmdsZSk7XG5cdHByaXZhdGUgX2RyYXdJbWFnZShpbWc6YW55LCBzb3VyY2VSZWN0OlJlY3RhbmdsZSwgZGVzdFJlY3Q6UmVjdGFuZ2xlKVxuXHR7XG5cdFx0aWYgKGltZyBpbnN0YW5jZW9mIEJpdG1hcERhdGEpXG5cdFx0XHR0aGlzLl9jb250ZXh0LmRyYXdJbWFnZShpbWcuY2FudmFzLCBzb3VyY2VSZWN0LngsIHNvdXJjZVJlY3QueSwgc291cmNlUmVjdC53aWR0aCwgc291cmNlUmVjdC5oZWlnaHQsIGRlc3RSZWN0LngsIGRlc3RSZWN0LnksIGRlc3RSZWN0LndpZHRoLCBkZXN0UmVjdC5oZWlnaHQpO1xuXHRcdGVsc2UgaWYgKGltZyBpbnN0YW5jZW9mIEhUTUxJbWFnZUVsZW1lbnQpXG5cdFx0XHR0aGlzLl9jb250ZXh0LmRyYXdJbWFnZShpbWcsIHNvdXJjZVJlY3QueCwgc291cmNlUmVjdC55LCBzb3VyY2VSZWN0LndpZHRoLCBzb3VyY2VSZWN0LmhlaWdodCwgZGVzdFJlY3QueCwgZGVzdFJlY3QueSwgZGVzdFJlY3Qud2lkdGgsIGRlc3RSZWN0LmhlaWdodCk7XG5cdH1cblxuXHQvKipcblx0ICpcblx0ICogQHBhcmFtIGJtcGRcblx0ICogQHBhcmFtIHNvdXJjZVJlY3Rcblx0ICogQHBhcmFtIGRlc3RSZWN0XG5cdCAqL1xuXHRwdWJsaWMgY29weVBpeGVscyhibXBkOkJpdG1hcERhdGEsIHNvdXJjZVJlY3Q6UmVjdGFuZ2xlLCBkZXN0UmVjdDpSZWN0YW5nbGUpO1xuXHRwdWJsaWMgY29weVBpeGVscyhibXBkOkhUTUxJbWFnZUVsZW1lbnQsIHNvdXJjZVJlY3Q6UmVjdGFuZ2xlLCBkZXN0UmVjdDpSZWN0YW5nbGUpO1xuXHRwdWJsaWMgY29weVBpeGVscyhibXBkOmFueSwgc291cmNlUmVjdDpSZWN0YW5nbGUsIGRlc3RSZWN0OlJlY3RhbmdsZSlcblx0e1xuXG5cdFx0aWYgKHRoaXMuX2xvY2tlZCkge1xuXG5cdFx0XHQvLyBJZiBjYW52YXMgaXMgbG9ja2VkOlxuXHRcdFx0Ly9cblx0XHRcdC8vICAgICAgMSkgY29weSBpbWFnZSBkYXRhIGJhY2sgdG8gY2FudmFzXG5cdFx0XHQvLyAgICAgIDIpIGRyYXcgb2JqZWN0XG5cdFx0XHQvLyAgICAgIDMpIHJlYWQgX2ltYWdlRGF0YSBiYWNrIG91dFxuXG5cdFx0XHRpZiAodGhpcy5faW1hZ2VEYXRhKSB7XG5cdFx0XHRcdHRoaXMuX2NvbnRleHQucHV0SW1hZ2VEYXRhKHRoaXMuX2ltYWdlRGF0YSwgMCwgMCk7IC8vIGF0IGNvb3JkcyAwLDBcblx0XHRcdH1cblxuXHRcdFx0dGhpcy5fY29weVBpeGVscyhibXBkLCBzb3VyY2VSZWN0LCBkZXN0UmVjdCk7XG5cblx0XHRcdGlmICh0aGlzLl9pbWFnZURhdGEpIHtcblx0XHRcdFx0dGhpcy5faW1hZ2VEYXRhID0gdGhpcy5fY29udGV4dC5nZXRJbWFnZURhdGEoMCwgMCwgdGhpcy5fcmVjdC53aWR0aCwgdGhpcy5fcmVjdC5oZWlnaHQpO1xuXHRcdFx0fVxuXHRcdH0gZWxzZSB7XG5cdFx0XHR0aGlzLl9jb3B5UGl4ZWxzKGJtcGQsIHNvdXJjZVJlY3QsIGRlc3RSZWN0KTtcblx0XHR9XG5cblx0fVxuXG5cdHByaXZhdGUgX2NvcHlQaXhlbHMoYm1wZDpCaXRtYXBEYXRhLCBzb3VyY2VSZWN0OlJlY3RhbmdsZSwgZGVzdFJlY3Q6UmVjdGFuZ2xlKTtcblx0cHJpdmF0ZSBfY29weVBpeGVscyhibXBkOkhUTUxJbWFnZUVsZW1lbnQsIHNvdXJjZVJlY3Q6UmVjdGFuZ2xlLCBkZXN0UmVjdDpSZWN0YW5nbGUpO1xuXHRwcml2YXRlIF9jb3B5UGl4ZWxzKGJtcGQ6YW55LCBzb3VyY2VSZWN0OlJlY3RhbmdsZSwgZGVzdFJlY3Q6UmVjdGFuZ2xlKVxuXHR7XG5cblx0XHRpZiAoYm1wZCBpbnN0YW5jZW9mIEJpdG1hcERhdGEpIHtcblx0XHRcdHRoaXMuX2NvbnRleHQuZHJhd0ltYWdlKGJtcGQuY2FudmFzLCBzb3VyY2VSZWN0LngsIHNvdXJjZVJlY3QueSwgc291cmNlUmVjdC53aWR0aCwgc291cmNlUmVjdC5oZWlnaHQsIGRlc3RSZWN0LngsIGRlc3RSZWN0LnksIGRlc3RSZWN0LndpZHRoLCBkZXN0UmVjdC5oZWlnaHQpO1xuXHRcdH0gZWxzZSBpZiAoYm1wZCBpbnN0YW5jZW9mIEhUTUxJbWFnZUVsZW1lbnQpIHtcblx0XHRcdHRoaXMuX2NvbnRleHQuZHJhd0ltYWdlKGJtcGQsIHNvdXJjZVJlY3QueCwgc291cmNlUmVjdC55LCBzb3VyY2VSZWN0LndpZHRoLCBzb3VyY2VSZWN0LmhlaWdodCwgZGVzdFJlY3QueCwgZGVzdFJlY3QueSwgZGVzdFJlY3Qud2lkdGgsIGRlc3RSZWN0LmhlaWdodCk7XG5cdFx0fVxuXG5cdH1cblxuXHQvKipcblx0ICpcblx0ICogQHBhcmFtIHJlY3Rcblx0ICogQHBhcmFtIGNvbG9yXG5cdCAqL1xuXHRwdWJsaWMgZmlsbFJlY3QocmVjdDpSZWN0YW5nbGUsIGNvbG9yOm51bWJlcilcblx0e1xuXHRcdGlmICh0aGlzLl9sb2NrZWQpIHtcblxuXHRcdFx0Ly8gSWYgY2FudmFzIGlzIGxvY2tlZDpcblx0XHRcdC8vXG5cdFx0XHQvLyAgICAgIDEpIGNvcHkgaW1hZ2UgZGF0YSBiYWNrIHRvIGNhbnZhc1xuXHRcdFx0Ly8gICAgICAyKSBhcHBseSBmaWxsXG5cdFx0XHQvLyAgICAgIDMpIHJlYWQgX2ltYWdlRGF0YSBiYWNrIG91dFxuXG5cdFx0XHRpZiAodGhpcy5faW1hZ2VEYXRhKVxuXHRcdFx0XHR0aGlzLl9jb250ZXh0LnB1dEltYWdlRGF0YSh0aGlzLl9pbWFnZURhdGEsIDAsIDApOyAvLyBhdCBjb29yZHMgMCwwXG5cblx0XHRcdHRoaXMuX2NvbnRleHQuZmlsbFN0eWxlID0gdGhpcy5oZXhUb1JHQkFDU1MoY29sb3IpO1xuXHRcdFx0dGhpcy5fY29udGV4dC5maWxsUmVjdChyZWN0LngsIHJlY3QueSwgcmVjdC53aWR0aCwgcmVjdC5oZWlnaHQpO1xuXG5cdFx0XHRpZiAodGhpcy5faW1hZ2VEYXRhKVxuXHRcdFx0XHR0aGlzLl9pbWFnZURhdGEgPSB0aGlzLl9jb250ZXh0LmdldEltYWdlRGF0YSgwLCAwLCB0aGlzLl9yZWN0LndpZHRoLCB0aGlzLl9yZWN0LmhlaWdodCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHRoaXMuX2NvbnRleHQuZmlsbFN0eWxlID0gdGhpcy5oZXhUb1JHQkFDU1MoY29sb3IpO1xuXHRcdFx0dGhpcy5fY29udGV4dC5maWxsUmVjdChyZWN0LngsIHJlY3QueSwgcmVjdC53aWR0aCwgcmVjdC5oZWlnaHQpO1xuXHRcdH1cblx0fVxuXG5cdC8qKlxuXHQgKlxuXHQgKiBAcGFyYW0gc291cmNlXG5cdCAqIEBwYXJhbSBtYXRyaXhcblx0ICovXG5cdHB1YmxpYyBkcmF3KHNvdXJjZTpCaXRtYXBEYXRhLCBtYXRyaXg/Ok1hdHJpeCk7XG5cdHB1YmxpYyBkcmF3KHNvdXJjZTpIVE1MSW1hZ2VFbGVtZW50LCBtYXRyaXg/Ok1hdHJpeCk7XG5cdHB1YmxpYyBkcmF3KHNvdXJjZTphbnksIG1hdHJpeD86TWF0cml4KVxuXHR7XG5cdFx0aWYgKHRoaXMuX2xvY2tlZCkge1xuXG5cdFx0XHQvLyBJZiBjYW52YXMgaXMgbG9ja2VkOlxuXHRcdFx0Ly9cblx0XHRcdC8vICAgICAgMSkgY29weSBpbWFnZSBkYXRhIGJhY2sgdG8gY2FudmFzXG5cdFx0XHQvLyAgICAgIDIpIGRyYXcgb2JqZWN0XG5cdFx0XHQvLyAgICAgIDMpIHJlYWQgX2ltYWdlRGF0YSBiYWNrIG91dFxuXG5cdFx0XHRpZiAodGhpcy5faW1hZ2VEYXRhKVxuXHRcdFx0XHR0aGlzLl9jb250ZXh0LnB1dEltYWdlRGF0YSh0aGlzLl9pbWFnZURhdGEsIDAsIDApOyAvLyBhdCBjb29yZHMgMCwwXG5cblx0XHRcdHRoaXMuX2RyYXcoc291cmNlLCBtYXRyaXgpO1xuXG5cdFx0XHRpZiAodGhpcy5faW1hZ2VEYXRhKVxuXHRcdFx0XHR0aGlzLl9pbWFnZURhdGEgPSB0aGlzLl9jb250ZXh0LmdldEltYWdlRGF0YSgwLCAwLCB0aGlzLl9yZWN0LndpZHRoLCB0aGlzLl9yZWN0LmhlaWdodCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHRoaXMuX2RyYXcoc291cmNlLCBtYXRyaXgpO1xuXHRcdH1cblx0fVxuXG5cdHByaXZhdGUgX2RyYXcoc291cmNlOkJpdG1hcERhdGEsIG1hdHJpeDpNYXRyaXgpO1xuXHRwcml2YXRlIF9kcmF3KHNvdXJjZTpIVE1MSW1hZ2VFbGVtZW50LCBtYXRyaXg6TWF0cml4KTtcblx0cHJpdmF0ZSBfZHJhdyhzb3VyY2U6YW55LCBtYXRyaXg6TWF0cml4KVxuXHR7XG5cdFx0aWYgKHNvdXJjZSBpbnN0YW5jZW9mIEJpdG1hcERhdGEpIHtcblx0XHRcdHRoaXMuX2NvbnRleHQuc2F2ZSgpO1xuXG5cdFx0XHRpZiAobWF0cml4ICE9IG51bGwpXG5cdFx0XHRcdHRoaXMuX2NvbnRleHQuc2V0VHJhbnNmb3JtKG1hdHJpeC5hLCBtYXRyaXguYiwgbWF0cml4LmMsIG1hdHJpeC5kLCBtYXRyaXgudHgsIG1hdHJpeC50eSk7XG5cblx0XHRcdHRoaXMuX2NvbnRleHQuZHJhd0ltYWdlKHNvdXJjZS5jYW52YXMsIDAsIDApXG5cdFx0XHR0aGlzLl9jb250ZXh0LnJlc3RvcmUoKTtcblxuXHRcdH0gZWxzZSBpZiAoc291cmNlIGluc3RhbmNlb2YgSFRNTEltYWdlRWxlbWVudCkge1xuXHRcdFx0dGhpcy5fY29udGV4dC5zYXZlKCk7XG5cblx0XHRcdGlmIChtYXRyaXggIT0gbnVsbClcblx0XHRcdFx0dGhpcy5fY29udGV4dC5zZXRUcmFuc2Zvcm0obWF0cml4LmEsIG1hdHJpeC5iLCBtYXRyaXguYywgbWF0cml4LmQsIG1hdHJpeC50eCwgbWF0cml4LnR5KTtcblxuXHRcdFx0dGhpcy5fY29udGV4dC5kcmF3SW1hZ2Uoc291cmNlLCAwLCAwKVxuXHRcdFx0dGhpcy5fY29udGV4dC5yZXN0b3JlKCk7XG5cdFx0fVxuXG5cdH1cblxuXHRwdWJsaWMgY29weUNoYW5uZWwoc291cmNlQml0bWFwOkJpdG1hcERhdGEsIHNvdXJjZVJlY3Q6UmVjdGFuZ2xlLCBkZXN0UG9pbnQ6UG9pbnQsIHNvdXJjZUNoYW5uZWw6bnVtYmVyLCBkZXN0Q2hhbm5lbDpudW1iZXIpXG5cdHtcblx0XHR2YXIgaW1hZ2VEYXRhOkltYWdlRGF0YSA9IHNvdXJjZUJpdG1hcC5pbWFnZURhdGE7XG5cblx0XHRpZiAoIXRoaXMuX2xvY2tlZClcblx0XHRcdHRoaXMuX2ltYWdlRGF0YSA9IHRoaXMuX2NvbnRleHQuZ2V0SW1hZ2VEYXRhKDAsIDAsIHRoaXMuX3JlY3Qud2lkdGgsIHRoaXMuX3JlY3QuaGVpZ2h0KTtcblxuXHRcdGlmICh0aGlzLl9pbWFnZURhdGEpIHtcblx0XHRcdHZhciBzb3VyY2VEYXRhOkFycmF5PG51bWJlcj4gPSBzb3VyY2VCaXRtYXAuaW1hZ2VEYXRhLmRhdGE7XG5cdFx0XHR2YXIgZGVzdERhdGE6QXJyYXk8bnVtYmVyPiA9IHRoaXMuX2ltYWdlRGF0YS5kYXRhO1xuXG5cdFx0XHR2YXIgc291cmNlT2Zmc2V0Om51bWJlciA9IE1hdGgucm91bmQoTWF0aC5sb2coc291cmNlQ2hhbm5lbCkvTWF0aC5sb2coMikpO1xuXHRcdFx0dmFyIGRlc3RPZmZzZXQ6bnVtYmVyID0gTWF0aC5yb3VuZChNYXRoLmxvZyhkZXN0Q2hhbm5lbCkvTWF0aC5sb2coMikpO1xuXG5cdFx0XHR2YXIgaTpudW1iZXIgLyp1aW50Ki8sIGo6bnVtYmVyIC8qdWludCovLCBzb3VyY2VJbmRleDpudW1iZXIgLyp1aW50Ki8sIGRlc3RJbmRleDpudW1iZXIgLyp1aW50Ki87XG5cdFx0XHRmb3IgKGkgPSAwOyBpIDwgc291cmNlUmVjdC53aWR0aDsgKytpKSB7XG5cdFx0XHRcdGZvciAoaiA9IDA7IGogPCBzb3VyY2VSZWN0LmhlaWdodDsgKytqKSB7XG5cdFx0XHRcdFx0c291cmNlSW5kZXggPSAoaSArIHNvdXJjZVJlY3QueCArIChqICsgc291cmNlUmVjdC55KSpzb3VyY2VCaXRtYXAud2lkdGgpKjQ7XG5cdFx0XHRcdFx0ZGVzdEluZGV4ID0gKGkgKyBkZXN0UG9pbnQueCArIChqICsgZGVzdFBvaW50LnkpKnRoaXMud2lkdGgpKjQ7XG5cblx0XHRcdFx0XHRkZXN0RGF0YVtkZXN0SW5kZXggKyBkZXN0T2Zmc2V0XSA9IHNvdXJjZURhdGFbc291cmNlSW5kZXggKyBzb3VyY2VPZmZzZXRdO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0aWYgKCF0aGlzLl9sb2NrZWQpIHtcblx0XHRcdHRoaXMuX2NvbnRleHQucHV0SW1hZ2VEYXRhKHRoaXMuX2ltYWdlRGF0YSwgMCwgMCk7XG5cdFx0XHR0aGlzLl9pbWFnZURhdGEgPSBudWxsO1xuXHRcdH1cblx0fVxuXG5cdHB1YmxpYyBjb2xvclRyYW5zZm9ybShyZWN0OlJlY3RhbmdsZSwgY29sb3JUcmFuc2Zvcm06Q29sb3JUcmFuc2Zvcm0pXG5cdHtcblx0XHRpZiAoIXRoaXMuX2xvY2tlZClcblx0XHRcdHRoaXMuX2ltYWdlRGF0YSA9IHRoaXMuX2NvbnRleHQuZ2V0SW1hZ2VEYXRhKDAsIDAsIHRoaXMuX3JlY3Qud2lkdGgsIHRoaXMuX3JlY3QuaGVpZ2h0KTtcblxuXHRcdGlmICh0aGlzLl9pbWFnZURhdGEpIHtcblx0XHRcdHZhciBkYXRhOkFycmF5PG51bWJlcj4gPSB0aGlzLl9pbWFnZURhdGEuZGF0YTtcblxuXHRcdFx0dmFyIGk6bnVtYmVyIC8qdWludCovLCBqOm51bWJlciAvKnVpbnQqLywgaW5kZXg6bnVtYmVyIC8qdWludCovO1xuXHRcdFx0Zm9yIChpID0gMDsgaSA8IHJlY3Qud2lkdGg7ICsraSkge1xuXHRcdFx0XHRmb3IgKGogPSAwOyBqIDwgcmVjdC5oZWlnaHQ7ICsraikge1xuXHRcdFx0XHRcdGluZGV4ID0gKGkgKyByZWN0LnggKyAoaiArIHJlY3QueSkqdGhpcy53aWR0aCkqNDtcblxuXHRcdFx0XHRcdGRhdGFbaW5kZXhdID0gZGF0YVtpbmRleF0qY29sb3JUcmFuc2Zvcm0ucmVkTXVsdGlwbGllciArIGNvbG9yVHJhbnNmb3JtLnJlZE9mZnNldDtcblx0XHRcdFx0XHRkYXRhW2luZGV4ICsgMV0gPSBkYXRhW2luZGV4ICsgMV0qY29sb3JUcmFuc2Zvcm0uZ3JlZW5NdWx0aXBsaWVyICsgY29sb3JUcmFuc2Zvcm0uZ3JlZW5PZmZzZXQ7XG5cdFx0XHRcdFx0ZGF0YVtpbmRleCArIDJdID0gZGF0YVtpbmRleCArIDJdKmNvbG9yVHJhbnNmb3JtLmJsdWVNdWx0aXBsaWVyICsgY29sb3JUcmFuc2Zvcm0uYmx1ZU9mZnNldDtcblx0XHRcdFx0XHRkYXRhW2luZGV4ICsgM10gPSBkYXRhW2luZGV4ICsgM10qY29sb3JUcmFuc2Zvcm0uYWxwaGFNdWx0aXBsaWVyICsgY29sb3JUcmFuc2Zvcm0uYWxwaGFPZmZzZXQ7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHRpZiAoIXRoaXMuX2xvY2tlZCkge1xuXHRcdFx0dGhpcy5fY29udGV4dC5wdXRJbWFnZURhdGEodGhpcy5faW1hZ2VEYXRhLCAwLCAwKTtcblx0XHRcdHRoaXMuX2ltYWdlRGF0YSA9IG51bGw7XG5cdFx0fVxuXHR9XG5cblx0LyoqXG5cdCAqXG5cdCAqIEBwYXJhbSB7SW1hZ2VEYXRhfVxuXHQgKi9cblx0cHVibGljIHNldCBpbWFnZURhdGEodmFsdWU6SW1hZ2VEYXRhKVxuXHR7XG5cdFx0dGhpcy5fY29udGV4dC5wdXRJbWFnZURhdGEodmFsdWUsIDAsIDApO1xuXHR9XG5cblx0LyoqXG5cdCAqXG5cdCAqIEByZXR1cm5zIHtJbWFnZURhdGF9XG5cdCAqL1xuXHRwdWJsaWMgZ2V0IGltYWdlRGF0YSgpOkltYWdlRGF0YVxuXHR7XG5cdFx0cmV0dXJuIHRoaXMuX2NvbnRleHQuZ2V0SW1hZ2VEYXRhKDAsIDAsIHRoaXMuX3JlY3Qud2lkdGgsIHRoaXMuX3JlY3QuaGVpZ2h0KVxuXHR9XG5cblx0LyoqXG5cdCAqXG5cdCAqIEByZXR1cm5zIHtudW1iZXJ9XG5cdCAqL1xuXHRwdWJsaWMgZ2V0IHdpZHRoKCk6bnVtYmVyXG5cdHtcblx0XHRyZXR1cm4gPG51bWJlcj4gdGhpcy5faW1hZ2VDYW52YXMud2lkdGg7XG5cdH1cblxuXHQvKipcblx0ICpcblx0ICogQHBhcmFtIHtudW1iZXJ9XG5cdCAqL1xuXHRwdWJsaWMgc2V0IHdpZHRoKHZhbHVlOm51bWJlcilcblx0e1xuXHRcdHRoaXMuX3JlY3Qud2lkdGggPSB2YWx1ZTtcblx0XHR0aGlzLl9pbWFnZUNhbnZhcy53aWR0aCA9IHZhbHVlO1xuXHR9XG5cblx0LyoqXG5cdCAqXG5cdCAqIEByZXR1cm5zIHtudW1iZXJ9XG5cdCAqL1xuXHRwdWJsaWMgZ2V0IGhlaWdodCgpOm51bWJlclxuXHR7XG5cdFx0cmV0dXJuIDxudW1iZXI+IHRoaXMuX2ltYWdlQ2FudmFzLmhlaWdodDtcblx0fVxuXG5cdC8qKlxuXHQgKlxuXHQgKiBAcGFyYW0ge251bWJlcn1cblx0ICovXG5cdHB1YmxpYyBzZXQgaGVpZ2h0KHZhbHVlOm51bWJlcilcblx0e1xuXHRcdHRoaXMuX3JlY3QuaGVpZ2h0ID0gdmFsdWU7XG5cdFx0dGhpcy5faW1hZ2VDYW52YXMuaGVpZ2h0ID0gdmFsdWU7XG5cdH1cblxuXHQvKipcblx0ICpcblx0ICogQHBhcmFtIHtSZWN0YW5nbGV9XG5cdCAqL1xuXHRwdWJsaWMgZ2V0IHJlY3QoKTpSZWN0YW5nbGVcblx0e1xuXHRcdHJldHVybiB0aGlzLl9yZWN0O1xuXHR9XG5cblx0LyoqXG5cdCAqXG5cdCAqIEByZXR1cm5zIHtIVE1MQ2FudmFzRWxlbWVudH1cblx0ICovXG5cdHB1YmxpYyBnZXQgY2FudmFzKClcblx0e1xuXHRcdHJldHVybiB0aGlzLl9pbWFnZUNhbnZhcztcblx0fVxuXG5cdC8qKlxuXHQgKlxuXHQgKiBAcmV0dXJucyB7SFRNTENhbnZhc0VsZW1lbnR9XG5cdCAqL1xuXHRwdWJsaWMgZ2V0IGNvbnRleHQoKTpDYW52YXNSZW5kZXJpbmdDb250ZXh0MkRcblx0e1xuXHRcdHJldHVybiB0aGlzLl9jb250ZXh0O1xuXHR9XG5cblx0Ly8gUHJpdmF0ZVxuXG5cdC8qKlxuXHQgKiBjb252ZXJ0IGRlY2ltYWwgdmFsdWUgdG8gSGV4XG5cdCAqL1xuXHRwcml2YXRlIGhleFRvUkdCQUNTUyhkOm51bWJlcik6c3RyaW5nXG5cdHtcblx0XHR2YXIgYXJnYjpudW1iZXJbXSA9IENvbG9yVXRpbHMuZmxvYXQzMkNvbG9yVG9BUkdCKGQpO1xuXG5cdFx0aWYgKHRoaXMuX3RyYW5zcGFyZW50ID09IGZhbHNlKSB7XG5cdFx0XHRhcmdiWzBdID0gMTtcblxuXHRcdFx0cmV0dXJuICdyZ2JhKCcgKyBhcmdiWzFdICsgJywnICsgYXJnYlsyXSArICcsJyArIGFyZ2JbM10gKyAnLCcgKyBhcmdiWzBdICsgJyknO1xuXHRcdH1cblxuXHRcdHJldHVybiAncmdiYSgnICsgYXJnYlsxXSArICcsJyArIGFyZ2JbMl0gKyAnLCcgKyBhcmdiWzNdICsgJywnICsgYXJnYlswXS8yNTUgKyAnKSc7XG5cdH1cbn1cblxuZXhwb3J0ID0gQml0bWFwRGF0YTsiXX0=