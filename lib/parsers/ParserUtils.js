var ByteArray = require("awayjs-core/lib/utils/ByteArray");
var ParserUtils = (function () {
    function ParserUtils() {
    }
    /**
     * Converts an ArrayBuffer to a base64 string
     *
     * @param image data as a ByteArray
     *
     * @return HTMLImageElement
     *
     */
    ParserUtils.arrayBufferToImage = function (data) {
        var byteStr = '';
        var bytes = new Uint8Array(data);
        var len = bytes.byteLength;
        for (var i = 0; i < len; i++)
            byteStr += String.fromCharCode(bytes[i]);
        var base64Image = window.btoa(byteStr);
        var str = 'data:image/png;base64,' + base64Image;
        var img = new Image();
        img.src = str;
        return img;
    };
    /**
     * Converts an ByteArray to an Image - returns an HTMLImageElement
     *
     * @param image data as a ByteArray
     *
     * @return HTMLImageElement
     *
     */
    ParserUtils.byteArrayToImage = function (data) {
        var byteStr = '';
        var bytes = new Uint8Array(data.arraybytes);
        var len = bytes.byteLength;
        for (var i = 0; i < len; i++)
            byteStr += String.fromCharCode(bytes[i]);
        var base64Image = window.btoa(byteStr);
        var str = 'data:image/png;base64,' + base64Image;
        var img = new Image();
        img.src = str;
        return img;
    };
    /**
     * Converts an Blob to an Image - returns an HTMLImageElement
     *
     * @param image data as a Blob
     *
     * @return HTMLImageElement
     *
     */
    ParserUtils.blobToImage = function (data) {
        var URLObj = window['URL'] || window['webkitURL'];
        var src = URLObj.createObjectURL(data);
        var img = new Image();
        img.src = src;
        return img;
    };
    /**
     * Returns a object as ByteArray, if possible.
     *
     * @param data The object to return as ByteArray
     *
     * @return The ByteArray or null
     *
     */
    ParserUtils.toByteArray = function (data) {
        var b = new ByteArray();
        b.setArrayBuffer(data);
        return b;
    };
    /**
     * Returns a object as String, if possible.
     *
     * @param data The object to return as String
     * @param length The length of the returned String
     *
     * @return The String or null
     *
     */
    ParserUtils.toString = function (data, length) {
        if (length === void 0) { length = 0; }
        if (typeof data === 'string') {
            var s = data;
            if (s['substr'] != null)
                return s.substr(0, s.length);
        }
        if (data instanceof ByteArray) {
            var ba = data;
            ba.position = 0;
            return ba.readUTFBytes(Math.min(ba.getBytesAvailable(), length));
        }
        return null;
        /*
         var ba:ByteArray;

         length ||= uint.MAX_VALUE;

         if (data is String)
         return String(data).substr(0, length);

         ba = toByteArray(data);
         if (ba) {
         ba.position = 0;
         return ba.readUTFBytes(Math.min(ba.bytesAvailable, length));
         }

         return null;

         */
    };
    return ParserUtils;
})();
module.exports = ParserUtils;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImF3YXlqcy1jb3JlL2xpYi9wYXJzZXJzL1BhcnNlclV0aWxzLnRzIl0sIm5hbWVzIjpbIlBhcnNlclV0aWxzIiwiUGFyc2VyVXRpbHMuY29uc3RydWN0b3IiLCJQYXJzZXJVdGlscy5hcnJheUJ1ZmZlclRvSW1hZ2UiLCJQYXJzZXJVdGlscy5ieXRlQXJyYXlUb0ltYWdlIiwiUGFyc2VyVXRpbHMuYmxvYlRvSW1hZ2UiLCJQYXJzZXJVdGlscy50b0J5dGVBcnJheSIsIlBhcnNlclV0aWxzLnRvU3RyaW5nIl0sIm1hcHBpbmdzIjoiQUFBQSxJQUFPLFNBQVMsV0FBYyxpQ0FBaUMsQ0FBQyxDQUFDO0FBRWpFLElBQU0sV0FBVztJQUFqQkEsU0FBTUEsV0FBV0E7SUFvSWpCQyxDQUFDQTtJQWpJQUQ7Ozs7Ozs7T0FPR0E7SUFDV0EsOEJBQWtCQSxHQUFoQ0EsVUFBaUNBLElBQWdCQTtRQUVoREUsSUFBSUEsT0FBT0EsR0FBVUEsRUFBRUEsQ0FBQ0E7UUFDeEJBLElBQUlBLEtBQUtBLEdBQWNBLElBQUlBLFVBQVVBLENBQUNBLElBQUlBLENBQUNBLENBQUNBO1FBQzVDQSxJQUFJQSxHQUFHQSxHQUFVQSxLQUFLQSxDQUFDQSxVQUFVQSxDQUFDQTtRQUVsQ0EsR0FBR0EsQ0FBQ0EsQ0FBQ0EsR0FBR0EsQ0FBQ0EsQ0FBQ0EsR0FBR0EsQ0FBQ0EsRUFBRUEsQ0FBQ0EsR0FBR0EsR0FBR0EsRUFBRUEsQ0FBQ0EsRUFBRUE7WUFDM0JBLE9BQU9BLElBQUlBLE1BQU1BLENBQUNBLFlBQVlBLENBQUNBLEtBQUtBLENBQUVBLENBQUNBLENBQUVBLENBQUNBLENBQUFBO1FBRTNDQSxJQUFJQSxXQUFXQSxHQUFVQSxNQUFNQSxDQUFDQSxJQUFJQSxDQUFDQSxPQUFPQSxDQUFDQSxDQUFDQTtRQUM5Q0EsSUFBSUEsR0FBR0EsR0FBVUEsd0JBQXdCQSxHQUFHQSxXQUFXQSxDQUFDQTtRQUN4REEsSUFBSUEsR0FBR0EsR0FBdUNBLElBQUlBLEtBQUtBLEVBQUVBLENBQUNBO1FB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QSxJQUFJQSxDQUFDQSxHQUFHQSxDQUFDQSxFQUFFQSxDQUFDQSxpQkFBaUJBLEVBQUVBLEVBQUVBLE1BQU1BLENBQUNBLENBQUNBLENBQUNBO1FBQ2xFQSxDQUFDQTtRQUVEQSxNQUFNQSxDQUFDQSxJQUFJQSxDQUFDQTtRQUVaQTs7Ozs7Ozs7Ozs7Ozs7OztXQWdCR0E7SUFFSkEsQ0FBQ0E7SUFDRk4sa0JBQUNBO0FBQURBLENBcElBLEFBb0lDQSxJQUFBO0FBRUQsQUFBcUIsaUJBQVosV0FBVyxDQUFDIiwiZmlsZSI6InBhcnNlcnMvUGFyc2VyVXRpbHMuanMiLCJzb3VyY2VSb290IjoiLi4vIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEJ5dGVBcnJheVx0XHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLWNvcmUvbGliL3V0aWxzL0J5dGVBcnJheVwiKTtcclxuXHJcbmNsYXNzIFBhcnNlclV0aWxzXHJcbntcclxuXHJcblx0LyoqXHJcblx0ICogQ29udmVydHMgYW4gQXJyYXlCdWZmZXIgdG8gYSBiYXNlNjQgc3RyaW5nXHJcblx0ICpcclxuXHQgKiBAcGFyYW0gaW1hZ2UgZGF0YSBhcyBhIEJ5dGVBcnJheVxyXG5cdCAqXHJcblx0ICogQHJldHVybiBIVE1MSW1hZ2VFbGVtZW50XHJcblx0ICpcclxuXHQgKi9cclxuXHRwdWJsaWMgc3RhdGljIGFycmF5QnVmZmVyVG9JbWFnZShkYXRhOkFycmF5QnVmZmVyKTpIVE1MSW1hZ2VFbGVtZW50XHJcblx0e1xyXG5cdFx0dmFyIGJ5dGVTdHI6c3RyaW5nID0gJyc7XHJcblx0XHR2YXIgYnl0ZXM6VWludDhBcnJheSA9IG5ldyBVaW50OEFycmF5KGRhdGEpO1xyXG5cdFx0dmFyIGxlbjpudW1iZXIgPSBieXRlcy5ieXRlTGVuZ3RoO1xyXG5cclxuXHRcdGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspXHJcblx0XHRcdGJ5dGVTdHIgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShieXRlc1sgaSBdKVxyXG5cclxuXHRcdHZhciBiYXNlNjRJbWFnZTpzdHJpbmcgPSB3aW5kb3cuYnRvYShieXRlU3RyKTtcclxuXHRcdHZhciBzdHI6c3RyaW5nID0gJ2RhdGE6aW1hZ2UvcG5nO2Jhc2U2NCwnICsgYmFzZTY0SW1hZ2U7XHJcblx0XHR2YXIgaW1nOkhUTUxJbWFnZUVsZW1lbnQgPSA8SFRNTEltYWdlRWxlbWVudD4gbmV3IEltYWdlKCk7XHJcblx0XHRpbWcuc3JjID0gc3RyO1xyXG5cclxuXHRcdHJldHVybiBpbWc7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBDb252ZXJ0cyBhbiBCeXRlQXJyYXkgdG8gYW4gSW1hZ2UgLSByZXR1cm5zIGFuIEhUTUxJbWFnZUVsZW1lbnRcclxuXHQgKlxyXG5cdCAqIEBwYXJhbSBpbWFnZSBkYXRhIGFzIGEgQnl0ZUFycmF5XHJcblx0ICpcclxuXHQgKiBAcmV0dXJuIEhUTUxJbWFnZUVsZW1lbnRcclxuXHQgKlxyXG5cdCAqL1xyXG5cdHB1YmxpYyBzdGF0aWMgYnl0ZUFycmF5VG9JbWFnZShkYXRhOkJ5dGVBcnJheSk6SFRNTEltYWdlRWxlbWVudFxyXG5cdHtcclxuXHRcdHZhciBieXRlU3RyOnN0cmluZyA9ICcnO1xyXG5cdFx0dmFyIGJ5dGVzOlVpbnQ4QXJyYXkgPSBuZXcgVWludDhBcnJheShkYXRhLmFycmF5Ynl0ZXMpO1xyXG5cdFx0dmFyIGxlbjpudW1iZXIgPSBieXRlcy5ieXRlTGVuZ3RoO1xyXG5cclxuXHRcdGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspXHJcblx0XHRcdGJ5dGVTdHIgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShieXRlc1sgaSBdKVxyXG5cclxuXHRcdHZhciBiYXNlNjRJbWFnZTpzdHJpbmcgPSB3aW5kb3cuYnRvYShieXRlU3RyKTtcclxuXHRcdHZhciBzdHI6c3RyaW5nID0gJ2RhdGE6aW1hZ2UvcG5nO2Jhc2U2NCwnICsgYmFzZTY0SW1hZ2U7XHJcblx0XHR2YXIgaW1nOkhUTUxJbWFnZUVsZW1lbnQgPSA8SFRNTEltYWdlRWxlbWVudD4gbmV3IEltYWdlKCk7XHJcblx0XHRpbWcuc3JjID0gc3RyO1xyXG5cclxuXHRcdHJldHVybiBpbWc7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBDb252ZXJ0cyBhbiBCbG9iIHRvIGFuIEltYWdlIC0gcmV0dXJucyBhbiBIVE1MSW1hZ2VFbGVtZW50XHJcblx0ICpcclxuXHQgKiBAcGFyYW0gaW1hZ2UgZGF0YSBhcyBhIEJsb2JcclxuXHQgKlxyXG5cdCAqIEByZXR1cm4gSFRNTEltYWdlRWxlbWVudFxyXG5cdCAqXHJcblx0ICovXHJcblx0cHVibGljIHN0YXRpYyBibG9iVG9JbWFnZShkYXRhOkJsb2IpOkhUTUxJbWFnZUVsZW1lbnRcclxuXHR7XHJcblx0XHR2YXIgVVJMT2JqOlVSTCA9IHdpbmRvd1snVVJMJ10gfHwgd2luZG93Wyd3ZWJraXRVUkwnXTtcclxuXHRcdHZhciBzcmMgPSBVUkxPYmouY3JlYXRlT2JqZWN0VVJMKGRhdGEpO1xyXG5cdFx0dmFyIGltZzpIVE1MSW1hZ2VFbGVtZW50ID0gPEhUTUxJbWFnZUVsZW1lbnQ+IG5ldyBJbWFnZSgpO1xyXG5cdFx0aW1nLnNyYyA9IHNyYztcclxuXHJcblx0XHRyZXR1cm4gaW1nO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogUmV0dXJucyBhIG9iamVjdCBhcyBCeXRlQXJyYXksIGlmIHBvc3NpYmxlLlxyXG5cdCAqXHJcblx0ICogQHBhcmFtIGRhdGEgVGhlIG9iamVjdCB0byByZXR1cm4gYXMgQnl0ZUFycmF5XHJcblx0ICpcclxuXHQgKiBAcmV0dXJuIFRoZSBCeXRlQXJyYXkgb3IgbnVsbFxyXG5cdCAqXHJcblx0ICovXHJcblx0cHVibGljIHN0YXRpYyB0b0J5dGVBcnJheShkYXRhOmFueSk6Qnl0ZUFycmF5XHJcblx0e1xyXG5cdFx0dmFyIGI6Qnl0ZUFycmF5ID0gbmV3IEJ5dGVBcnJheSgpO1xyXG5cdFx0Yi5zZXRBcnJheUJ1ZmZlcihkYXRhKTtcclxuXHRcdHJldHVybiBiO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogUmV0dXJucyBhIG9iamVjdCBhcyBTdHJpbmcsIGlmIHBvc3NpYmxlLlxyXG5cdCAqXHJcblx0ICogQHBhcmFtIGRhdGEgVGhlIG9iamVjdCB0byByZXR1cm4gYXMgU3RyaW5nXHJcblx0ICogQHBhcmFtIGxlbmd0aCBUaGUgbGVuZ3RoIG9mIHRoZSByZXR1cm5lZCBTdHJpbmdcclxuXHQgKlxyXG5cdCAqIEByZXR1cm4gVGhlIFN0cmluZyBvciBudWxsXHJcblx0ICpcclxuXHQgKi9cclxuXHRwdWJsaWMgc3RhdGljIHRvU3RyaW5nKGRhdGE6YW55LCBsZW5ndGg6bnVtYmVyID0gMCk6c3RyaW5nXHJcblx0e1xyXG5cclxuXHRcdGlmICh0eXBlb2YgZGF0YSA9PT0gJ3N0cmluZycpIHtcclxuXHRcdFx0dmFyIHM6c3RyaW5nID0gPHN0cmluZz4gZGF0YTtcclxuXHJcblx0XHRcdGlmIChzWydzdWJzdHInXSAhPSBudWxsKVxyXG5cdFx0XHRcdHJldHVybiBzLnN1YnN0cigwLCBzLmxlbmd0aCk7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKGRhdGEgaW5zdGFuY2VvZiBCeXRlQXJyYXkpIHtcclxuXHRcdFx0dmFyIGJhOkJ5dGVBcnJheSA9IDxCeXRlQXJyYXk+IGRhdGE7XHJcblx0XHRcdGJhLnBvc2l0aW9uID0gMDtcclxuXHRcdFx0cmV0dXJuIGJhLnJlYWRVVEZCeXRlcyhNYXRoLm1pbihiYS5nZXRCeXRlc0F2YWlsYWJsZSgpLCBsZW5ndGgpKTtcclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gbnVsbDtcclxuXHJcblx0XHQvKlxyXG5cdFx0IHZhciBiYTpCeXRlQXJyYXk7XHJcblxyXG5cdFx0IGxlbmd0aCB8fD0gdWludC5NQVhfVkFMVUU7XHJcblxyXG5cdFx0IGlmIChkYXRhIGlzIFN0cmluZylcclxuXHRcdCByZXR1cm4gU3RyaW5nKGRhdGEpLnN1YnN0cigwLCBsZW5ndGgpO1xyXG5cclxuXHRcdCBiYSA9IHRvQnl0ZUFycmF5KGRhdGEpO1xyXG5cdFx0IGlmIChiYSkge1xyXG5cdFx0IGJhLnBvc2l0aW9uID0gMDtcclxuXHRcdCByZXR1cm4gYmEucmVhZFVURkJ5dGVzKE1hdGgubWluKGJhLmJ5dGVzQXZhaWxhYmxlLCBsZW5ndGgpKTtcclxuXHRcdCB9XHJcblxyXG5cdFx0IHJldHVybiBudWxsO1xyXG5cclxuXHRcdCAqL1xyXG5cclxuXHR9XHJcbn1cclxuXHJcbmV4cG9ydCA9IFBhcnNlclV0aWxzOyJdfQ==