var __extends = this.__extends || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    __.prototype = b.prototype;
    d.prototype = new __();
};
var BoundingVolumeBase = require("awayjs-core/lib/bounds/BoundingVolumeBase");
var Matrix3DUtils = require("awayjs-core/lib/geom/Matrix3DUtils");
var PlaneClassification = require("awayjs-core/lib/geom/PlaneClassification");
var Vector3D = require("awayjs-core/lib/geom/Vector3D");
/**
 * AxisAlignedBoundingBox represents a bounding box volume that has its planes aligned to the local coordinate axes of the bounded object.
 * This is useful for most meshes.
 */
var AxisAlignedBoundingBox = (function (_super) {
    __extends(AxisAlignedBoundingBox, _super);
    /**
     * Creates a new <code>AxisAlignedBoundingBox</code> object.
     */
    function AxisAlignedBoundingBox() {
        _super.call(this);
        this._centerX = 0;
        this._centerY = 0;
        this._centerZ = 0;
        this._halfExtentsX = 0;
        this._halfExtentsY = 0;
        this._halfExtentsZ = 0;
    }
    Object.defineProperty(AxisAlignedBoundingBox.prototype, "centerX", {
        get: function () {
            return this._centerX;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(AxisAlignedBoundingBox.prototype, "centerY", {
        get: function () {
            return this._centerY;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(AxisAlignedBoundingBox.prototype, "centerZ", {
        get: function () {
            return this._centerZ;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @inheritDoc
     */
    AxisAlignedBoundingBox.prototype.nullify = function () {
        _super.prototype.nullify.call(this);
        this._centerX = this._centerY = this._centerZ = 0;
        this._halfExtentsX = this._halfExtentsY = this._halfExtentsZ = 0;
    };
    /**
     * @inheritDoc
     */
    AxisAlignedBoundingBox.prototype.isInFrustum = function (planes, numPlanes) {
        for (var i = 0; i < numPlanes; ++i) {
            var plane = planes[i];
            var a = plane.a;
            var b = plane.b;
            var c = plane.c;
            var flippedExtentX = a < 0 ? -this._halfExtentsX : this._halfExtentsX;
            var flippedExtentY = b < 0 ? -this._halfExtentsY : this._halfExtentsY;
            var flippedExtentZ = c < 0 ? -this._halfExtentsZ : this._halfExtentsZ;
            var projDist = a * (this._centerX + flippedExtentX) + b * (this._centerY + flippedExtentY) + c * (this._centerZ + flippedExtentZ) - plane.d;
            if (projDist < 0)
                return false;
        }
        return true;
    };
    AxisAlignedBoundingBox.prototype.rayIntersection = function (position, direction, targetNormal) {
        if (this.containsPoint(position))
            return 0;
        var px = position.x - this._centerX;
        var py = position.y - this._centerY;
        var pz = position.z - this._centerZ;
        var vx = direction.x;
        var vy = direction.y;
        var vz = direction.z;
        var ix;
        var iy;
        var iz;
        var rayEntryDistance;
        // ray-plane tests
        var intersects;
        if (vx < 0) {
            rayEntryDistance = (this._halfExtentsX - px) / vx;
            if (rayEntryDistance > 0) {
                iy = py + rayEntryDistance * vy;
                iz = pz + rayEntryDistance * vz;
                if (iy > -this._halfExtentsY && iy < this._halfExtentsY && iz > -this._halfExtentsZ && iz < this._halfExtentsZ) {
                    targetNormal.x = 1;
                    targetNormal.y = 0;
                    targetNormal.z = 0;
                    intersects = true;
                }
            }
        }
        if (!intersects && vx > 0) {
            rayEntryDistance = (-this._halfExtentsX - px) / vx;
            if (rayEntryDistance > 0) {
                iy = py + rayEntryDistance * vy;
                iz = pz + rayEntryDistance * vz;
                if (iy > -this._halfExtentsY && iy < this._halfExtentsY && iz > -this._halfExtentsZ && iz < this._halfExtentsZ) {
                    targetNormal.x = -1;
                    targetNormal.y = 0;
                    targetNormal.z = 0;
                    intersects = true;
                }
            }
        }
        if (!intersects && vy < 0) {
            rayEntryDistance = (this._halfExtentsY - py) / vy;
            if (rayEntryDistance > 0) {
                ix = px + rayEntryDistance * vx;
                iz = pz + rayEntryDistance * vz;
                if (ix > -this._halfExtentsX && ix < this._halfExtentsX && iz > -this._halfExtentsZ && iz < this._halfExtentsZ) {
                    targetNormal.x = 0;
                    targetNormal.y = 1;
                    targetNormal.z = 0;
                    intersects = true;
                }
            }
        }
        if (!intersects && vy > 0) {
            rayEntryDistance = (-this._halfExtentsY - py) / vy;
            if (rayEntryDistance > 0) {
                ix = px + rayEntryDistance * vx;
                iz = pz + rayEntryDistance * vz;
                if (ix > -this._halfExtentsX && ix < this._halfExtentsX && iz > -this._halfExtentsZ && iz < this._halfExtentsZ) {
                    targetNormal.x = 0;
                    targetNormal.y = -1;
                    targetNormal.z = 0;
                    intersects = true;
                }
            }
        }
        if (!intersects && vz < 0) {
            rayEntryDistance = (this._halfExtentsZ - pz) / vz;
            if (rayEntryDistance > 0) {
                ix = px + rayEntryDistance * vx;
                iy = py + rayEntryDistance * vy;
                if (iy > -this._halfExtentsY && iy < this._halfExtentsY && ix > -this._halfExtentsX && ix < this._halfExtentsX) {
                    targetNormal.x = 0;
                    targetNormal.y = 0;
                    targetNormal.z = 1;
                    intersects = true;
                }
            }
        }
        if (!intersects && vz > 0) {
            rayEntryDistance = (-this._halfExtentsZ - pz) / vz;
            if (rayEntryDistance > 0) {
                ix = px + rayEntryDistance * vx;
                iy = py + rayEntryDistance * vy;
                if (iy > -this._halfExtentsY && iy < this._halfExtentsY && ix > -this._halfExtentsX && ix < this._halfExtentsX) {
                    targetNormal.x = 0;
                    targetNormal.y = 0;
                    targetNormal.z = -1;
                    intersects = true;
                }
            }
        }
        return intersects ? rayEntryDistance : -1;
    };
    /**
     * @inheritDoc
     */
    AxisAlignedBoundingBox.prototype.containsPoint = function (position) {
        var px = position.x - this._centerX, py = position.y - this._centerY, pz = position.z - this._centerZ;
        return px <= this._halfExtentsX && px >= -this._halfExtentsX && py <= this._halfExtentsY && py >= -this._halfExtentsY && pz <= this._halfExtentsZ && pz >= -this._halfExtentsZ;
    };
    /**
     * @inheritDoc
     */
    AxisAlignedBoundingBox.prototype.fromExtremes = function (minX, minY, minZ, maxX, maxY, maxZ) {
        this._centerX = (maxX + minX) * .5;
        this._centerY = (maxY + minY) * .5;
        this._centerZ = (maxZ + minZ) * .5;
        this._halfExtentsX = (maxX - minX) * .5;
        this._halfExtentsY = (maxY - minY) * .5;
        this._halfExtentsZ = (maxZ - minZ) * .5;
        _super.prototype.fromExtremes.call(this, minX, minY, minZ, maxX, maxY, maxZ);
    };
    /**
     * @inheritDoc
     */
    AxisAlignedBoundingBox.prototype.clone = function () {
        var clone = new AxisAlignedBoundingBox();
        clone.fromExtremes(this._aabb.x, this._aabb.y + this._aabb.height, this._aabb.z, this._aabb.x + this._aabb.width, this._aabb.y, this._aabb.z + this._aabb.depth);
        return clone;
    };
    Object.defineProperty(AxisAlignedBoundingBox.prototype, "halfExtentsX", {
        get: function () {
            return this._halfExtentsX;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(AxisAlignedBoundingBox.prototype, "halfExtentsY", {
        get: function () {
            return this._halfExtentsY;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(AxisAlignedBoundingBox.prototype, "halfExtentsZ", {
        get: function () {
            return this._halfExtentsZ;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * Finds the closest point on the bounding volume to another given point. This can be used for maximum error calculations for content within a given bound.
     * @param point The point for which to find the closest point on the bounding volume
     * @param target An optional Vector3D to store the result to prevent creating a new object.
     * @return
     */
    AxisAlignedBoundingBox.prototype.closestPointToPoint = function (point, target) {
        if (target === void 0) { target = null; }
        var p;
        if (target == null)
            target = new Vector3D();
        p = point.x;
        if (p < this._aabb.x)
            p = this._aabb.x;
        if (p > this._aabb.x + this._aabb.width)
            p = this._aabb.x + this._aabb.width;
        target.x = p;
        p = point.y;
        if (p < this._aabb.y + this._aabb.height)
            p = this._aabb.y + this._aabb.height;
        if (p > this._aabb.y)
            p = this._aabb.y;
        target.y = p;
        p = point.z;
        if (p < this._aabb.z)
            p = this._aabb.z;
        if (p > this._aabb.z + this._aabb.depth)
            p = this._aabb.z + this._aabb.depth;
        target.z = p;
        return target;
    };
    AxisAlignedBoundingBox.prototype.classifyToPlane = function (plane) {
        var a = plane.a;
        var b = plane.b;
        var c = plane.c;
        var centerDistance = a * this._centerX + b * this._centerY + c * this._centerZ - plane.d;
        if (a < 0)
            a = -a;
        if (b < 0)
            b = -b;
        if (c < 0)
            c = -c;
        var boundOffset = a * this._halfExtentsX + b * this._halfExtentsY + c * this._halfExtentsZ;
        return centerDistance > boundOffset ? PlaneClassification.FRONT : centerDistance < -boundOffset ? PlaneClassification.BACK : PlaneClassification.INTERSECT;
    };
    AxisAlignedBoundingBox.prototype.transformFrom = function (bounds, matrix) {
        var aabb = bounds;
        var cx = aabb._centerX;
        var cy = aabb._centerY;
        var cz = aabb._centerZ;
        var raw = Matrix3DUtils.RAW_DATA_CONTAINER;
        matrix.copyRawDataTo(raw);
        var m11 = raw[0], m12 = raw[4], m13 = raw[8], m14 = raw[12];
        var m21 = raw[1], m22 = raw[5], m23 = raw[9], m24 = raw[13];
        var m31 = raw[2], m32 = raw[6], m33 = raw[10], m34 = raw[14];
        this._centerX = cx * m11 + cy * m12 + cz * m13 + m14;
        this._centerY = cx * m21 + cy * m22 + cz * m23 + m24;
        this._centerZ = cx * m31 + cy * m32 + cz * m33 + m34;
        if (m11 < 0)
            m11 = -m11;
        if (m12 < 0)
            m12 = -m12;
        if (m13 < 0)
            m13 = -m13;
        if (m21 < 0)
            m21 = -m21;
        if (m22 < 0)
            m22 = -m22;
        if (m23 < 0)
            m23 = -m23;
        if (m31 < 0)
            m31 = -m31;
        if (m32 < 0)
            m32 = -m32;
        if (m33 < 0)
            m33 = -m33;
        var hx = aabb._halfExtentsX;
        var hy = aabb._halfExtentsY;
        var hz = aabb._halfExtentsZ;
        this._halfExtentsX = hx * m11 + hy * m12 + hz * m13;
        this._halfExtentsY = hx * m21 + hy * m22 + hz * m23;
        this._halfExtentsZ = hx * m31 + hy * m32 + hz * m33;
        this._aabb.width = this._aabb.height = this._aabb.depth = this._halfExtentsX * 2;
        this._aabb.x = this._centerX - this._halfExtentsX;
        this._aabb.y = this._centerY + this._halfExtentsY;
        this._aabb.z = this._centerZ - this._halfExtentsZ;
    };
    return AxisAlignedBoundingBox;
})(BoundingVolumeBase);
module.exports = AxisAlignedBoundingBox;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImF3YXlqcy1jb3JlL2xpYi9ib3VuZHMvYXhpc2FsaWduZWRib3VuZGluZ2JveC50cyJdLCJuYW1lcyI6WyJBeGlzQWxpZ25lZEJvdW5kaW5nQm94IiwiQXhpc0FsaWduZWRCb3VuZGluZ0JveC5jb25zdHJ1Y3RvciIsIkF4aXNBbGlnbmVkQm91bmRpbmdCb3guY2VudGVyWCIsIkF4aXNBbGlnbmVkQm91bmRpbmdCb3guY2VudGVyWSIsIkF4aXNBbGlnbmVkQm91bmRpbmdCb3guY2VudGVyWiIsIkF4aXNBbGlnbmVkQm91bmRpbmdCb3gubnVsbGlmeSIsIkF4aXNBbGlnbmVkQm91bmRpbmdCb3guaXNJbkZydXN0dW0iLCJBeGlzQWxpZ25lZEJvdW5kaW5nQm94LnJheUludGVyc2VjdGlvbiIsIkF4aXNBbGlnbmVkQm91bmRpbmdCb3guY29udGFpbnNQb2ludCIsIkF4aXNBbGlnbmVkQm91bmRpbmdCb3guZnJvbUV4dHJlbWVzIiwiQXhpc0FsaWduZWRCb3VuZGluZ0JveC5jbG9uZSIsIkF4aXNBbGlnbmVkQm91bmRpbmdCb3guaGFsZkV4dGVudHNYIiwiQXhpc0FsaWduZWRCb3VuZGluZ0JveC5oYWxmRXh0ZW50c1kiLCJBeGlzQWxpZ25lZEJvdW5kaW5nQm94LmhhbGZFeHRlbnRzWiIsIkF4aXNBbGlnbmVkQm91bmRpbmdCb3guY2xvc2VzdFBvaW50VG9Qb2ludCIsIkF4aXNBbGlnbmVkQm91bmRpbmdCb3guY2xhc3NpZnlUb1BsYW5lIiwiQXhpc0FsaWduZWRCb3VuZGluZ0JveC50cmFuc2Zvcm1Gcm9tIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSxJQUFPLGtCQUFrQixXQUFhLDJDQUEyQyxDQUFDLENBQUM7QUFFbkYsSUFBTyxhQUFhLFdBQWMsb0NBQW9DLENBQUMsQ0FBQztBQUN4RSxJQUFPLG1CQUFtQixXQUFhLDBDQUEwQyxDQUFDLENBQUM7QUFFbkYsSUFBTyxRQUFRLFdBQWdCLCtCQUErQixDQUFDLENBQUM7QUFFaEUsQUFJQTs7O0dBREc7SUFDRyxzQkFBc0I7SUFBU0EsVUFBL0JBLHNCQUFzQkEsVUFBMkJBO0lBcUJ0REE7O09BRUdBO0lBQ0hBLFNBeEJLQSxzQkFBc0JBO1FBMEIxQkMsaUJBQU9BLENBQUNBO1FBeEJEQSxhQUFRQSxHQUFVQSxDQUFDQSxDQUFDQTtRQUNwQkEsYUFBUUEsR0FBVUEsQ0FBQ0EsQ0FBQ0E7UUFDcEJBLGFBQVFBLEdBQVVBLENBQUNBLENBQUNBO1FBQ3BCQSxrQkFBYUEsR0FBVUEsQ0FBQ0EsQ0FBQ0E7UUFDekJBLGtCQUFhQSxHQUFVQSxDQUFDQSxDQUFDQTtRQUN6QkEsa0JBQWFBLEdBQVVBLENBQUNBLENBQUNBO0lBb0JqQ0EsQ0FBQ0E7SUFsQkRELHNCQUFXQSwyQ0FBT0E7YUFBbEJBO1lBQ0NFLE1BQU1BLENBQUNBLElBQUlBLENBQUNBLFFBQVFBLENBQUNBO1FBQ3RCQSxDQUFDQTs7O09BQUFGO0lBRURBLHNCQUFXQSwyQ0FBT0E7YUFBbEJBO1lBQ0NHLE1BQU1BLENBQUNBLElBQUlBLENBQUNBLFFBQVFBLENBQUNBO1FBQ3RCQSxDQUFDQTs7O09BQUFIO0lBRURBLHNCQUFXQSwyQ0FBT0E7YUFBbEJBO1lBQ0NJLE1BQU1BLENBQUNBLElBQUlBLENBQUNBLFFBQVFBLENBQUNBO1FBQ3RCQSxDQUFDQTs7O09BQUFKO0lBVURBOztPQUVHQTtJQUNJQSx3Q0FBT0EsR0FBZEE7UUFFQ0ssZ0JBQUtBLENBQUNBLE9BQU9BLFdBQUVBLENBQUNBO1FBRWhCQSxJQUFJQSxDQUFDQSxRQUFRQSxHQUFHQSxJQUFJQSxDQUFDQSxRQUFRQSxHQUFHQSxJQUFJQSxDQUFDQSxRQUFRQSxHQUFHQSxDQUFDQSxDQUFDQTtRQUNsREEsSUFBSUEsQ0FBQ0EsYUFBYUEsR0FBR0EsSUFBSUEsQ0FBQ0EsYUFBYUEsR0FBR0EsSUFBSUEsQ0FBQ0EsYUFBYUEsR0FBR0EsQ0FBQ0EsQ0FBQ0E7SUFDbEVBLENBQUNBO0lBRURMOztPQUVHQTtJQUNJQSw0Q0FBV0EsR0FBbEJBLFVBQW1CQSxNQUFxQkEsRUFBRUEsU0FBZ0JBO1FBRXpETSxHQUFHQSxDQUFDQSxDQUFDQSxHQUFHQSxDQUFDQSxDQUFDQSxHQUFVQSxDQUFDQSxFQUFFQSxDQUFDQSxHQUFHQSxTQUFTQSxFQUFFQSxFQUFFQSxDQUFDQSxFQUFFQSxDQUFDQTtZQUUzQ0EsSUFBSUEsS0FBS0EsR0FBV0EsTUFBTUEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7WUFDOUJBLElBQUlBLENBQUNBLEdBQVVBLEtBQUtBLENBQUNBLENBQUNBLENBQUNBO1lBQ3ZCQSxJQUFJQSxDQUFDQSxHQUFVQSxLQUFLQSxDQUFDQSxDQUFDQSxDQUFDQTtZQUN2QkEsSUFBSUEsQ0FBQ0EsR0FBVUEsS0FBS0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7WUFDdkJBLElBQUlBLGNBQWNBLEdBQVVBLENBQUNBLEdBQUdBLENBQUNBLEdBQUVBLENBQUNBLElBQUlBLENBQUNBLGFBQWFBLEdBQUdBLElBQUlBLENBQUNBLGFBQWFBLENBQUNBO1lBQzVFQSxJQUFJQSxjQUFjQSxHQUFVQSxDQUFDQSxHQUFHQSxDQUFDQSxHQUFFQSxDQUFDQSxJQUFJQSxDQUFDQSxhQUFhQSxHQUFHQSxJQUFJQSxDQUFDQSxhQUFhQSxDQUFDQTtZQUM1RUEsSUFBSUEsY0FBY0EsR0FBVUEsQ0FBQ0EsR0FBR0EsQ0FBQ0EsR0FBRUEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsYUFBYUEsR0FBR0EsSUFBSUEsQ0FBQ0EsYUFBYUEsQ0FBQ0E7WUFDNUVBLElBQUlBLFFBQVFBLEdBQVVBLENBQUNBLEdBQUNBLENBQUNBLElBQUlBLENBQUNBLFFBQVFBLEdBQUdBLGNBQWNBLENBQUNBLEdBQUdBLENBQUNBLEdBQUNBLENBQUNBLElBQUlBLENBQUNBLFFBQVFBLEdBQUdBLGNBQWNBLENBQUNBLEdBQUdBLENBQUNBLEdBQUNBLENBQUNBLElBQUlBLENBQUNBLFFBQVFBLEdBQUdBLGNBQWNBLENBQUNBLEdBQUdBLEtBQUtBLENBQUNBLENBQUNBLENBQUNBO1lBRTdJQSxFQUFFQSxDQUFDQSxDQUFDQSxRQUFRQSxHQUFHQSxDQUFDQSxDQUFDQTtnQkFDaEJBLE1BQU1BLENBQUNBLEtBQUtBLENBQUNBO1FBQ2ZBLENBQUNBO1FBRURBLE1BQU1BLENBQUNBLElBQUlBLENBQUNBO0lBQ2JBLENBQUNBO0lBRU1OLGdEQUFlQSxHQUF0QkEsVUFBdUJBLFFBQWlCQSxFQUFFQSxTQUFrQkEsRUFBRUEsWUFBcUJBO1FBR2xGTyxFQUFFQSxDQUFDQSxDQUFDQSxJQUFJQSxDQUFDQSxhQUFhQSxDQUFDQSxRQUFRQSxDQUFDQSxDQUFDQTtZQUNoQ0EsTUFBTUEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7UUFFVkEsSUFBSUEsRUFBRUEsR0FBVUEsUUFBUUEsQ0FBQ0EsQ0FBQ0EsR0FBR0EsSUFBSUEsQ0FBQ0EsUUFBUUEsQ0FBQUE7UUFDMUNBLElBQUlBLEVBQUVBLEdBQVVBLFFBQVFBLENBQUNBLENBQUNBLEdBQUdBLElBQUlBLENBQUNBLFFBQVFBLENBQUFBO1FBQzFDQSxJQUFJQSxFQUFFQSxHQUFVQSxRQUFRQSxDQUFDQSxDQUFDQSxHQUFHQSxJQUFJQSxDQUFDQSxRQUFRQSxDQUFDQTtRQUUzQ0EsSUFBSUEsRUFBRUEsR0FBVUEsU0FBU0EsQ0FBQ0EsQ0FBQ0EsQ0FBQUE7UUFDM0JBLElBQUlBLEVBQUVBLEdBQVVBLFNBQVNBLENBQUNBLENBQUNBLENBQUFBO1FBQzNCQSxJQUFJQSxFQUFFQSxHQUFVQSxTQUFTQSxDQUFDQSxDQUFDQSxDQUFDQTtRQUU1QkEsSUFBSUEsRUFBU0EsQ0FBQ0E7UUFDZEEsSUFBSUEsRUFBU0EsQ0FBQ0E7UUFDZEEsSUFBSUEsRUFBU0EsQ0FBQ0E7UUFDZEEsSUFBSUEsZ0JBQXVCQSxDQUFDQTtRQUU1QkEsQUFDQUEsa0JBRGtCQTtZQUNkQSxVQUFrQkEsQ0FBQ0E7UUFDdkJBLEVBQUVBLENBQUNBLENBQUNBLEVBQUVBLEdBQUdBLENBQUNBLENBQUNBLENBQUNBLENBQUNBO1lBQ1pBLGdCQUFnQkEsR0FBR0EsQ0FBRUEsSUFBSUEsQ0FBQ0EsYUFBYUEsR0FBR0EsRUFBRUEsQ0FBRUEsR0FBQ0EsRUFBRUEsQ0FBQ0E7WUFDbERBLEVBQUVBLENBQUNBLENBQUNBLGdCQUFnQkEsR0FBR0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7Z0JBQzFCQSxFQUFFQSxHQUFHQSxFQUFFQSxHQUFHQSxnQkFBZ0JBLEdBQUNBLEVBQUVBLENBQUNBO2dCQUM5QkEsRUFBRUEsR0FBR0EsRUFBRUEsR0FBR0EsZ0JBQWdCQSxHQUFDQSxFQUFFQSxDQUFDQTtnQkFDOUJBLEVBQUVBLENBQUNBLENBQUNBLEVBQUVBLEdBQUdBLENBQUNBLElBQUlBLENBQUNBLGFBQWFBLElBQUlBLEVBQUVBLEdBQUdBLElBQUlBLENBQUNBLGFBQWFBLElBQUlBLEVBQUVBLEdBQUdBLENBQUNBLElBQUlBLENBQUNBLGFBQWFBLElBQUlBLEVBQUVBLEdBQUdBLElBQUlBLENBQUNBLGFBQWFBLENBQUNBLENBQUNBLENBQUNBO29CQUNoSEEsWUFBWUEsQ0FBQ0EsQ0FBQ0EsR0FBR0EsQ0FBQ0EsQ0FBQ0E7b0JBQ25CQSxZQUFZQSxDQUFDQSxDQUFDQSxHQUFHQSxDQUFDQSxDQUFDQTtvQkFDbkJBLFlBQVlBLENBQUNBLENBQUNBLEdBQUdBLENBQUNBLENBQUNBO29CQUVuQkEsVUFBVUEsR0FBR0EsSUFBSUEsQ0FBQ0E7Z0JBQ25CQSxDQUFDQTtZQUNGQSxDQUFDQTtRQUNGQSxDQUFDQTtRQUNEQSxFQUFFQSxDQUFDQSxDQUFDQSxDQUFDQSxVQUFVQSxJQUFJQSxFQUFFQSxHQUFHQSxDQUFDQSxDQUFDQSxDQUFDQSxDQUFDQTtZQUMzQkEsZ0JBQWdCQSxHQUFHQSxDQUFFQSxDQUFDQSxJQUFJQSxDQUFDQSxhQUFhQSxHQUFHQSxFQUFFQSxDQUFFQSxHQUFDQSxFQUFFQSxDQUFDQTtZQUNuREEsRUFBRUEsQ0FBQ0EsQ0FBQ0EsZ0JBQWdCQSxHQUFHQSxDQUFDQSxDQUFDQSxDQUFDQSxDQUFDQTtnQkFDMUJBLEVBQUVBLEdBQUdBLEVBQUVBLEdBQUdBLGdCQUFnQkEsR0FBQ0EsRUFBRUEsQ0FBQ0E7Z0JBQzlCQSxFQUFFQSxHQUFHQSxFQUFFQSxHQUFHQSxnQkFBZ0JBLEdBQUNBLEVBQUVBLENBQUNBO2dC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Q0EsUUFBUUEsRUFBRUEsRUFBRUEsR0FBVUEsUUFBUUEsQ0FBQ0EsQ0FBQ0EsR0FBR0EsSUFBSUEsQ0FBQ0EsUUFBUUEsQ0FBQ0E7UUFDM0hBLE1BQU1BLENBQUNBLEVBQUVBLElBQUlBLElBQUlBLENBQUNBLGFBQWFBLElBQUlBLEVBQUVBLElBQUlBLENBQUNBLElBQUlBLENBQUNBLGFBQWFBLElBQUlBLEVBQUVBLElBQUlBLElBQUlBLENBQUNBLGFBQWFBLElBQUlBLEVBQUVBLElBQUlBLENBQUNBLElBQUlBLENBQUNBLGFBQWFBLElBQUlBLEVBQUVBLElBQUlBLElBQUlBLENBQUNBLGFBQWFBLElBQUlBLEVBQUVBLElBQUlBLENBQUNBLElBQUlBLENBQUNBLGFBQWFBLENBQUNBO0lBQ2hMQSxDQUFDQTtJQUVEUjs7T0FFR0E7SUFDSUEsNkNBQVlBLEdBQW5CQSxVQUFvQkEsSUFBV0EsRUFBRUEsSUFBV0EsRUFBRUEsSUFBV0EsRUFBRUEsSUFBV0EsRUFBRUEsSUFBV0EsRUFBRUEsSUFBV0E7UUFHL0ZTLElBQUlBLENBQUNBLFFBQVFBLEdBQUdBLENBQUNBLElBQUlBLEdBQUdBLElBQUlBLENBQUNBLEdBQUNBLEVBQUVBLENBQUNBO1FBQ2pDQSxJQUFJQSxDQUFDQSxRQUFRQSxHQUFHQSxDQUFDQSxJQUFJQSxHQUFHQSxJQUFJQSxDQUFDQSxHQUFDQSxFQUFFQSxDQUFDQTtRQUNqQ0EsSUFBSUEsQ0FBQ0EsUUFBUUEsR0FBR0EsQ0FBQ0EsSUFBSUEsR0FBR0EsSUFBSUEsQ0FBQ0EsR0FBQ0EsRUFBRUEsQ0FBQ0E7UUFDakNBLElBQUlBLENBQUNBLGFBQWFBLEdBQUdBLENBQUNBLElBQUlBLEdBQUdBLElBQUlBLENBQUNBLEdBQUNBLEVBQUVBLENBQUNBO1FBQ3RDQSxJQUFJQSxDQUFDQSxhQUFhQSxHQUFHQSxDQUFDQSxJQUFJQSxHQUFHQSxJQUFJQSxDQUFDQSxHQUFDQSxFQUFFQSxDQUFDQTtRQUN0Q0EsSUFBSUEsQ0FBQ0EsYUFBYUEsR0FBR0EsQ0FBQ0EsSUFBSUEsR0FBR0EsSUFBSUEsQ0FB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SUFBSUEsQ0FBQ0EsS0FBS0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7WUFDcEJBLENBQUNBLEdBQUdBLElBQUlBLENBQUNBLEtBQUtBLENBQUNBLENBQUNBLENBQUNBO1FBQ2xCQSxNQUFNQSxDQUFDQSxDQUFDQSxHQUFHQSxDQUFDQSxDQUFDQTtRQUViQSxDQUFDQSxHQUFHQSxLQUFLQSxDQUFDQSxDQUFDQSxDQUFDQTtRQUNaQSxFQUFFQSxDQUFDQSxDQUFDQSxDQUFDQSxHQUFHQSxJQUFJQSxDQUFDQSxLQUFLQSxDQUFDQSxDQUFDQSxDQUFDQTtZQUNwQkEsQ0FBQ0EsR0FBR0EsSUFBSUEsQ0FBQ0EsS0FBS0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7UUFDbEJBLEVBQUVBLENBQUNBLENBQUNBLENBQUNBLEdBQUdBLElBQUlBLENBQUNBLEtBQUtBLENBQUNBLENBQUNBLEdBQUdBLElBQUlBLENBQUNBLEtBQUtBLENBQUNBLEtBQUtBLENBQUNBO1lBQ3ZDQSxDQUFDQSxHQUFHQSxJQUFJQSxDQUFDQSxLQUFLQSxDQUFDQSxDQUFDQSxHQUFHQSxJQUFJQSxDQUFDQSxLQUFLQSxDQUFDQSxLQUFLQSxDQUFDQTtRQUNyQ0EsTUFBTUEsQ0FBQ0EsQ0FBQ0EsR0FBR0EsQ0FBQ0EsQ0FBQ0E7UUFFYkEsTUFBTUEsQ0FBQ0EsTUFBTUEsQ0FBQ0E7SUFDZkEsQ0FBQ0E7SUFFTWQsZ0RBQWVBLEdBQXRCQSxVQUF1QkEsS0FBYUE7UUFFbkNlLElBQUlBLENBQUNBLEdBQVVBLEtBQUtBLENBQUNBLENBQUNBLENBQUNBO1FBQ3ZCQSxJQUFJQSxDQUFDQSxHQUFVQSxLQUFLQSxDQUFDQSxDQUFDQSxDQUFDQTtRQUN2QkEsSUFBSUEsQ0FBQ0EsR0FBVUEsS0FBS0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7UUFDdkJBLElBQUlBLGNBQWNBLEdBQVVBLENBQUNBLEdBQUNBLElBQUlBLENBQUNBLFFBQVFBLEdBQUdBLENBQUNBLEdBQUNBLElBQUlBLENBQUNBLFFBQVFBLEdBQUdBLENBQUNBLEdBQUNBLElBQUlBLENBQUNBLFFBQVFBLEdBQUdBLEtBQUtBLENBQUNBLENBQUNBLENBQUNBO1FBRTFGQSxFQUFFQSxDQUFDQSxDQUFDQSxDQUFDQSxHQUFHQSxDQUFDQSxDQUFDQTtZQUNUQSxDQUFDQSxHQUFHQSxDQUFDQSxDQUFDQSxDQUFDQTtRQUVSQSxFQUFFQSxDQUFDQSxDQUFDQSxDQUFDQSxHQUFHQSxDQUFDQSxDQUFDQTtZQUNUQSxDQUFDQSxHQUFHQSxDQUFDQSxDQUFDQSxDQUFDQTtRQUVSQSxFQUFFQSxDQUFDQSxDQUFDQSxDQUFDQSxHQUFHQSxDQUFDQSxDQUFDQTtZQUNUQSxDQUFDQSxHQUFHQSxDQUFDQSxDQUFDQSxDQUFDQTtRQUVSQSxJQUFJQSxXQUFXQSxHQUFVQSxDQUFDQSxHQUFDQSxJQUFJQSxDQUFDQSxhQUFhQSxHQUFHQSxDQUFDQSxHQUFDQSxJQUFJQSxDQUFDQSxhQUFhQSxHQUFHQSxDQUFDQSxHQUFDQSxJQUFJQSxDQUFDQSxhQUFhQSxDQUFDQTtRQUU1RkEsTUFBTUEsQ0FBQ0EsY0FBY0EsR0FBR0EsV0FBV0EsR0FBRUEsbUJBQW1CQSxDQUFDQSxLQUFLQSxHQUFHQSxjQUFjQSxHQUFHQSxDQUFDQSxXQUFXQSxHQUFFQSxtQkFBbUJBLENBQUNBLElBQUlBLEdBQUdBLG1CQUFtQkEsQ0FBQ0EsU0FBU0EsQ0FBQ0E7SUFDMUpBLENBQUNBO0lBRU1mLDhDQUFhQSxHQUFwQkEsVUFBcUJBLE1BQXlCQSxFQUFFQSxNQUFlQTtRQUU5RGdCLElBQUlBLElBQUlBLEdBQW1EQSxNQUFNQSxDQUFDQTtRQUNsRUEsSUFBSUEsRUFBRUEsR0FBVUEsSUFBSUEsQ0FBQ0EsUUFBUUEsQ0FBQ0E7UUFDOUJBLElBQUlBLEVBQUVBLEdBQVVBLElBQUlBLENBQUNBLFFBQVFBLENBQUNBO1FBQzlCQSxJQUFJQSxFQUFFQSxHQUFVQSxJQUFJQSxDQUFDQSxRQUFRQSxDQUFDQTtRQUM5QkEsSUFBSUEsR0FBR0EsR0FBWUEsYUFBYUEsQ0FBQ0Esa0JBQWtCQSxDQUFDQTtRQUVwREEsTUFBTUEsQ0FBQ0EsYUFBYUEsQ0FBQ0EsR0FBR0EsQ0FBQ0EsQ0FBQ0E7UUFFMUJBLElBQUlBLEdBQUdBLEdBQVVBLEdBQUdBLENBQUNBLENBQUNBLENBQUNBLEVBQUVBLEdBQUdBLEdBQVVBLEdBQUdBLENBQUNBLENBQUNBLENBQUNBLEVBQUVBLEdBQUdBLEdBQVVBLEdBQUdBLENBQUNBLENBQUNBLENBQUNBLEVBQUVBLEdBQUdBLEdBQVVBLEdBQUdBLENBQUNBLEVBQUVBLENBQUNBLENBQUNBO1FBQ3hGQSxJQUFJQSxHQUFHQSxHQUFVQSxHQUFHQSxDQUFDQSxDQUFDQSxDQUFDQSxFQUFFQSxHQUFHQSxHQUFVQSxHQUFHQSxDQUFDQSxDQUFDQSxDQUFDQSxFQUFFQSxHQUFHQSxHQUFVQSxHQUFHQSxDQUFDQSxDQUFDQSxDQUFDQSxFQUFFQSxHQUFHQSxHQUFVQSxHQUFHQSxDQUFDQSxFQUFFQSxDQUFDQSxDQUFDQTtRQUN4RkEsSUFBSUEsR0FBR0EsR0FBVUEsR0FBR0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsRUFBRUEsR0FBR0EsR0FBVUEsR0FBR0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsRUFBRUEsR0FBR0EsR0FBVUEsR0FBR0EsQ0FBQ0EsRUFBRUEsQ0FBQ0EsRUFBRUEsR0FBR0EsR0FBVUEsR0FBR0EsQ0FBQ0EsRUFBRUEsQ0FBQ0EsQ0FBQ0E7UUFFekZBLElBQUlBLENBQUNBLFFBQVFBLEdBQUdBLEVBQUVBLEdBQUNBLEdBQUdBLEdBQUdBLEVBQUVBLEdBQUNBLEdBQUdBLEdBQUdBLEVBQUVBLEdBQUNBLEdBQUdBLEdBQUdBLEdBQUdBLENBQUNBO1FBQy9DQSxJQUFJQSxDQUFDQSxRQUFRQSxHQUFHQSxFQUFFQSxHQUFDQSxHQUFHQSxHQUFHQSxFQUFFQSxHQUFDQSxHQUFHQSxHQUFHQSxFQUFFQSxHQUFDQSxHQUFHQSxHQUFHQSxHQUFHQSxDQUFDQTtRQUMvQ0EsSUFBSUEsQ0FBQ0EsUUFBUUEsR0FBR0EsRUFBRUEsR0FBQ0EsR0FBR0EsR0FBR0EsRUFBRUEsR0FBQ0EsR0FBR0EsR0FBR0EsRUFBRUEsR0FBQ0EsR0FBR0EsR0FBR0EsR0FBR0EsQ0FBQ0E7UUFFL0NBLEVBQUVBLENBQUNBLENBQUNBLEdBQUdBLEdBQUdBLENBQUNBLENBQUNBO1lBQ1hBLEdBQUdBLEdBQUdBLENBQUNBLEdBQUdBLENBQUNBO1FBQ1pBLEVBQUVBLENBQUNBLENBQUNBLEdBQUdBLEdBQUdBLENBQUNBLENBQUNBO1lBQ1hBLEdBQUdBLEdBQUdBLENBQUNBLEdBQUdBLENBQUNBO1FBQ1pBLEVBQUVBLENBQUNBLENBQUNBLEdBQUdBLEdBQUdBLENBQUNBLENBQUNBO1lBQ1hBLEdBQUdBLEdBQUdBLENBQUNBLEdBQUdBLENBQUNBO1FBQ1pBLEVBQUVBLENBQUNBLENBQUNBLEdBQUdBLEdBQUdBLENBQUNBLENBQUNBO1lBQ1hBLEdBQUdBLEdBQUdBLENBQUNBLEdBQUdBLENBQUNBO1FBQ1pBLEVBQUVBLENBQUNBLENBQUNBLEdBQUdBLEdBQUdBLENBQUNBLENBQUNBO1lBQ1hBLEdBQUdBLEdBQUdBLENBQUNBLEdBQUdBLENBQUNBO1FBQ1pBLEVBQUVBLENBQUNBLENBQUNBLEdBQUdBLEdBQUdBLENBQUNBLENBQUNBO1lBQ1hBLEdBQUdBLEdBQUdBLENBQUNBLEdBQUdBLENBQUNBO1FBQ1pBLEVBQUVBLENBQUNBLENBQUNBLEdBQUdBLEdBQUdBLENBQUNBLENBQUNBO1lBQ1hBLEdBQUdBLEdBQUdBLENBQUNBLEdBQUdBLENBQUNBO1FBQ1pBLEVBQUVBLENBQUNBLENBQUNBLEdBQUdBLEdBQUdBLENBQUNBLENBQUNBO1lBQ1hBLEdBQUdBLEdBQUdBLENBQUNBLEdBQUdBLENBQUNBO1FBQ1pBLEVBQUVBLENBQUNBLENBQUNBLEdBQUdBLEdBQUdBLENBQUNBLENBQUNBO1lBQ1hBLEdBQUdBLEdBQUdBLENBQUNBLEdBQUdBLENBQUNBO1FBQ1pBLElBQUlBLEVBQUVBLEdBQVVBLElBQUlBLENBQUNBLGFBQWFBLENBQUNBO1FBQ25DQSxJQUFJQSxFQUFFQSxHQUFVQSxJQUFJQSxDQUFDQSxhQUFhQSxDQUFDQTtRQUNuQ0EsSUFBSUEsRUFBRUEsR0FBVUEsSUFBSUEsQ0FBQ0EsYUFBYUEsQ0FBQ0E7UUFDbkNBLElBQUlBLENBQUNBLGFBQWFBLEdBQUdBLEVBQUVBLEdBQUNBLEdBQUdBLEdBQUdBLEVBQUVBLEdBQUNBLEdBQUdBLEdBQUdBLEVBQUVBLEdBQUNBLEdBQUdBLENBQUNBO1FBQzlDQSxJQUFJQSxDQUFDQSxhQUFhQSxHQUFHQSxFQUFFQSxHQUFDQSxHQUFHQSxHQUFHQSxFQUFFQSxHQUFDQSxHQUFHQSxHQUFHQSxFQUFFQSxHQUFDQSxHQUFHQSxDQUFDQTtRQUM5Q0EsSUFBSUEsQ0FBQ0EsYUFBYUEsR0FBR0EsRUFBRUEsR0FBQ0EsR0FBR0EsR0FBR0EsRUFBRUEsR0FBQ0EsR0FBR0EsR0FBR0EsRUFBRUEsR0FBQ0EsR0FBR0EsQ0FBQ0E7UUFFOUNBLElBQUlBLENBQUNBLEtBQUtBLENBQUNBLEtBQUtBLEdBQUdBLElBQUlBLENBQUNBLEtBQUtBLENBQUNBLE1BQU1BLEdBQUdBLElBQUlBLENBQUNBLEtBQUtBLENBQUNBLEtBQUtBLEdBQUdBLElBQUlBLENBQUNBLGFBQWFBLEdBQUNBLENBQUNBLENBQUNBO1FBQy9FQSxJQUFJQSxDQUFDQSxLQUFLQSxDQUFDQSxDQUFDQSxHQUFHQSxJQUFJQSxDQUFDQSxRQUFRQSxHQUFHQSxJQUFJQSxDQUFDQSxhQUFhQSxDQUFDQTtRQUNsREEsSUFBSUEsQ0FBQ0EsS0FBS0EsQ0FBQ0EsQ0FBQ0EsR0FBR0EsSUFBSUEsQ0FBQ0EsUUFBUUEsR0FBR0EsSUFBSUEsQ0FBQ0EsYUFBYUEsQ0FBQ0E7UUFDbERBLElBQUlBLENBQUNBLEtBQUtBLENBQUNBLENBQUNBLEdBQUdBLElBQUlBLENBQUNBLFFBQVFBLEdBQUdBLElBQUlBLENBQUNBLGFBQWFBLENBQUNBO0lBQ25EQSxDQUFDQTtJQUNGaEIsNkJBQUNBO0FBQURBLENBcFVBLEFBb1VDQSxFQXBVb0Msa0JBQWtCLEVBb1V0RDtBQUVELEFBQWdDLGlCQUF2QixzQkFBc0IsQ0FBQyIsImZpbGUiOiJib3VuZHMvQXhpc0FsaWduZWRCb3VuZGluZ0JveC5qcyIsInNvdXJjZVJvb3QiOiIuLi8iLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgQm91bmRpbmdWb2x1bWVCYXNlXHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLWNvcmUvbGliL2JvdW5kcy9Cb3VuZGluZ1ZvbHVtZUJhc2VcIik7XG5pbXBvcnQgTWF0cml4M0RcdFx0XHRcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtY29yZS9saWIvZ2VvbS9NYXRyaXgzRFwiKTtcbmltcG9ydCBNYXRyaXgzRFV0aWxzXHRcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtY29yZS9saWIvZ2VvbS9NYXRyaXgzRFV0aWxzXCIpO1xuaW1wb3J0IFBsYW5lQ2xhc3NpZmljYXRpb25cdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtY29yZS9saWIvZ2VvbS9QbGFuZUNsYXNzaWZpY2F0aW9uXCIpO1xuaW1wb3J0IFBsYW5lM0RcdFx0XHRcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtY29yZS9saWIvZ2VvbS9QbGFuZTNEXCIpO1xuaW1wb3J0IFZlY3RvcjNEXHRcdFx0XHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLWNvcmUvbGliL2dlb20vVmVjdG9yM0RcIik7XG5cbi8qKlxuICogQXhpc0FsaWduZWRCb3VuZGluZ0JveCByZXByZXNlbnRzIGEgYm91bmRpbmcgYm94IHZvbHVtZSB0aGF0IGhhcyBpdHMgcGxhbmVzIGFsaWduZWQgdG8gdGhlIGxvY2FsIGNvb3JkaW5hdGUgYXhlcyBvZiB0aGUgYm91bmRlZCBvYmplY3QuXG4gKiBUaGlzIGlzIHVzZWZ1bCBmb3IgbW9zdCBtZXNoZXMuXG4gKi9cbmNsYXNzIEF4aXNBbGlnbmVkQm91bmRpbmdCb3ggZXh0ZW5kcyBCb3VuZGluZ1ZvbHVtZUJhc2Vcbntcblx0cHJpdmF0ZSBfY2VudGVyWDpudW1iZXIgPSAwO1xuXHRwcml2YXRlIF9jZW50ZXJZOm51bWJlciA9IDA7XG5cdHByaXZhdGUgX2NlbnRlclo6bnVtYmVyID0gMDtcblx0cHJpdmF0ZSBfaGFsZkV4dGVudHNYOm51bWJlciA9IDA7XG5cdHByaXZhdGUgX2hhbGZFeHRlbnRzWTpudW1iZXIgPSAwO1xuXHRwcml2YXRlIF9oYWxmRXh0ZW50c1o6bnVtYmVyID0gMDtcblxuXHRwdWJsaWMgZ2V0IGNlbnRlclgoKTpudW1iZXIge1xuXHRcdHJldHVybiB0aGlzLl9jZW50ZXJYO1xuXHR9XG5cblx0cHVibGljIGdldCBjZW50ZXJZKCk6bnVtYmVyIHtcblx0XHRyZXR1cm4gdGhpcy5fY2VudGVyWTtcblx0fVxuXG5cdHB1YmxpYyBnZXQgY2VudGVyWigpOm51bWJlciB7XG5cdFx0cmV0dXJuIHRoaXMuX2NlbnRlclo7XG5cdH1cblxuXHQvKipcblx0ICogQ3JlYXRlcyBhIG5ldyA8Y29kZT5BeGlzQWxpZ25lZEJvdW5kaW5nQm94PC9jb2RlPiBvYmplY3QuXG5cdCAqL1xuXHRjb25zdHJ1Y3RvcigpXG5cdHtcblx0XHRzdXBlcigpO1xuXHR9XG5cblx0LyoqXG5cdCAqIEBpbmhlcml0RG9jXG5cdCAqL1xuXHRwdWJsaWMgbnVsbGlmeSgpXG5cdHtcblx0XHRzdXBlci5udWxsaWZ5KCk7XG5cblx0XHR0aGlzLl9jZW50ZXJYID0gdGhpcy5fY2VudGVyWSA9IHRoaXMuX2NlbnRlclogPSAwO1xuXHRcdHRoaXMuX2hhbGZFeHRlbnRzWCA9IHRoaXMuX2hhbGZFeHRlbnRzWSA9IHRoaXMuX2hhbGZFeHRlbnRzWiA9IDA7XG5cdH1cblxuXHQvKipcblx0ICogQGluaGVyaXREb2Ncblx0ICovXG5cdHB1YmxpYyBpc0luRnJ1c3R1bShwbGFuZXM6QXJyYXk8UGxhbmUzRD4sIG51bVBsYW5lczpudW1iZXIpOmJvb2xlYW5cblx0e1xuXHRcdGZvciAodmFyIGk6bnVtYmVyID0gMDsgaSA8IG51bVBsYW5lczsgKytpKSB7XG5cblx0XHRcdHZhciBwbGFuZTpQbGFuZTNEID0gcGxhbmVzW2ldO1xuXHRcdFx0dmFyIGE6bnVtYmVyID0gcGxhbmUuYTtcblx0XHRcdHZhciBiOm51bWJlciA9IHBsYW5lLmI7XG5cdFx0XHR2YXIgYzpudW1iZXIgPSBwbGFuZS5jO1xuXHRcdFx0dmFyIGZsaXBwZWRFeHRlbnRYOm51bWJlciA9IGEgPCAwPyAtdGhpcy5faGFsZkV4dGVudHNYIDogdGhpcy5faGFsZkV4dGVudHNYO1xuXHRcdFx0dmFyIGZsaXBwZWRFeHRlbnRZOm51bWJlciA9IGIgPCAwPyAtdGhpcy5faGFsZkV4dGVudHNZIDogdGhpcy5faGFsZkV4dGVudHNZO1xuXHRcdFx0dmFyIGZsaXBwZWRFeHRlbnRaOm51bWJlciA9IGMgPCAwPyAtdGhpcy5faGFsZkV4dGVudHNaIDogdGhpcy5faGFsZkV4dGVudHNaO1xuXHRcdFx0dmFyIHByb2pEaXN0Om51bWJlciA9IGEqKHRoaXMuX2NlbnRlclggKyBmbGlwcGVkRXh0ZW50WCkgKyBiKih0aGlzLl9jZW50ZXJZICsgZmxpcHBlZEV4dGVudFkpICsgYyoodGhpcy5fY2VudGVyWiArIGZsaXBwZWRFeHRlbnRaKSAtIHBsYW5lLmQ7XG5cblx0XHRcdGlmIChwcm9qRGlzdCA8IDApXG5cdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9XG5cblx0XHRyZXR1cm4gdHJ1ZTtcblx0fVxuXG5cdHB1YmxpYyByYXlJbnRlcnNlY3Rpb24ocG9zaXRpb246VmVjdG9yM0QsIGRpcmVjdGlvbjpWZWN0b3IzRCwgdGFyZ2V0Tm9ybWFsOlZlY3RvcjNEKTpudW1iZXJcblx0e1xuXG5cdFx0aWYgKHRoaXMuY29udGFpbnNQb2ludChwb3NpdGlvbikpXG5cdFx0XHRyZXR1cm4gMDtcblxuXHRcdHZhciBweDpudW1iZXIgPSBwb3NpdGlvbi54IC0gdGhpcy5fY2VudGVyWFxuXHRcdHZhciBweTpudW1iZXIgPSBwb3NpdGlvbi55IC0gdGhpcy5fY2VudGVyWVxuXHRcdHZhciBwejpudW1iZXIgPSBwb3NpdGlvbi56IC0gdGhpcy5fY2VudGVyWjtcblxuXHRcdHZhciB2eDpudW1iZXIgPSBkaXJlY3Rpb24ueFxuXHRcdHZhciB2eTpudW1iZXIgPSBkaXJlY3Rpb24ueVxuXHRcdHZhciB2ejpudW1iZXIgPSBkaXJlY3Rpb24uejtcblxuXHRcdHZhciBpeDpudW1iZXI7XG5cdFx0dmFyIGl5Om51bWJlcjtcblx0XHR2YXIgaXo6bnVtYmVyO1xuXHRcdHZhciByYXlFbnRyeURpc3RhbmNlOm51bWJlcjtcblxuXHRcdC8vIHJheS1wbGFuZSB0ZXN0c1xuXHRcdHZhciBpbnRlcnNlY3RzOmJvb2xlYW47XG5cdFx0aWYgKHZ4IDwgMCkge1xuXHRcdFx0cmF5RW50cnlEaXN0YW5jZSA9ICggdGhpcy5faGFsZkV4dGVudHNYIC0gcHggKS92eDtcblx0XHRcdGlmIChyYXlFbnRyeURpc3RhbmNlID4gMCkge1xuXHRcdFx0XHRpeSA9IHB5ICsgcmF5RW50cnlEaXN0YW5jZSp2eTtcblx0XHRcdFx0aXogPSBweiArIHJheUVudHJ5RGlzdGFuY2Uqdno7XG5cdFx0XHRcdGlmIChpeSA+IC10aGlzLl9oYWxmRXh0ZW50c1kgJiYgaXkgPCB0aGlzLl9oYWxmRXh0ZW50c1kgJiYgaXogPiAtdGhpcy5faGFsZkV4dGVudHNaICYmIGl6IDwgdGhpcy5faGFsZkV4dGVudHNaKSB7XG5cdFx0XHRcdFx0dGFyZ2V0Tm9ybWFsLnggPSAxO1xuXHRcdFx0XHRcdHRhcmdldE5vcm1hbC55ID0gMDtcblx0XHRcdFx0XHR0YXJnZXROb3JtYWwueiA9IDA7XG5cblx0XHRcdFx0XHRpbnRlcnNlY3RzID0gdHJ1ZTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0XHRpZiAoIWludGVyc2VjdHMgJiYgdnggPiAwKSB7XG5cdFx0XHRyYXlFbnRyeURpc3RhbmNlID0gKCAtdGhpcy5faGFsZkV4dGVudHNYIC0gcHggKS92eDtcblx0XHRcdGlmIChyYXlFbnRyeURpc3RhbmNlID4gMCkge1xuXHRcdFx0XHRpeSA9IHB5ICsgcmF5RW50cnlEaXN0YW5jZSp2eTtcblx0XHRcdFx0aXogPSBweiArIHJheUVudHJ5RGlzdGFuY2Uqdno7XG5cdFx0XHRcdGlmIChpeSA+IC10aGlzLl9oYWxmRXh0ZW50c1kgJiYgaXkgPCB0aGlzLl9oYWxmRXh0ZW50c1kgJiYgaXogPiAtdGhpcy5faGFsZkV4dGVudHNaICYmIGl6IDwgdGhpcy5faGFsZkV4dGVudHNaKSB7XG5cdFx0XHRcdFx0dGFyZ2V0Tm9ybWFsLnggPSAtMTtcblx0XHRcdFx0XHR0YXJnZXROb3JtYWwueSA9IDA7XG5cdFx0XHRcdFx0dGFyZ2V0Tm9ybWFsLnogPSAwO1xuXHRcdFx0XHRcdGludGVyc2VjdHMgPSB0cnVlO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGlmICghaW50ZXJzZWN0cyAmJiB2eSA8IDApIHtcblx0XHRcdHJheUVudHJ5RGlzdGFuY2UgPSAoIHRoaXMuX2hhbGZFeHRlbnRzWSAtIHB5ICkvdnk7XG5cdFx0XHRpZiAocmF5RW50cnlEaXN0YW5jZSA+IDApIHtcblx0XHRcdFx0aXggPSBweCArIHJheUVudHJ5RGlzdGFuY2Uqdng7XG5cdFx0XHRcdGl6ID0gcHogKyByYXlFbnRyeURpc3RhbmNlKnZ6O1xuXHRcdFx0XHRpZiAoaXggPiAtdGhpcy5faGFsZkV4dGVudHNYICYmIGl4IDwgdGhpcy5faGFsZkV4dGVudHNYICYmIGl6ID4gLXRoaXMuX2hhbGZFeHRlbnRzWiAmJiBpeiA8IHRoaXMuX2hhbGZFeHRlbnRzWikge1xuXHRcdFx0XHRcdHRhcmdldE5vcm1hbC54ID0gMDtcblx0XHRcdFx0XHR0YXJnZXROb3JtYWwueSA9IDE7XG5cdFx0XHRcdFx0dGFyZ2V0Tm9ybWFsLnogPSAwO1xuXHRcdFx0XHRcdGludGVyc2VjdHMgPSB0cnVlO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGlmICghaW50ZXJzZWN0cyAmJiB2eSA+IDApIHtcblx0XHRcdHJheUVudHJ5RGlzdGFuY2UgPSAoIC10aGlzLl9oYWxmRXh0ZW50c1kgLSBweSApL3Z5O1xuXHRcdFx0aWYgKHJheUVudHJ5RGlzdGFuY2UgPiAwKSB7XG5cdFx0XHRcdGl4ID0gcHggKyByYXlFbnRyeURpc3RhbmNlKnZ4O1xuXHRcdFx0XHRpeiA9IHB6ICsgcmF5RW50cnlEaXN0YW5jZSp2ejtcblx0XHRcdFx0aWYgKGl4ID4gLXRoaXMuX2hhbGZFeHRlbnRzWCAmJiBpeCA8IHRoaXMuX2hhbGZFeHRlbnRzWCAmJiBpeiA+IC10aGlzLl9oYWxmRXh0ZW50c1ogJiYgaXogPCB0aGlzLl9oYWxmRXh0ZW50c1opIHtcblx0XHRcdFx0XHR0YXJnZXROb3JtYWwueCA9IDA7XG5cdFx0XHRcdFx0dGFyZ2V0Tm9ybWFsLnkgPSAtMTtcblx0XHRcdFx0XHR0YXJnZXROb3JtYWwueiA9IDA7XG5cdFx0XHRcdFx0aW50ZXJzZWN0cyA9IHRydWU7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdFx0aWYgKCFpbnRlcnNlY3RzICYmIHZ6IDwgMCkge1xuXHRcdFx0cmF5RW50cnlEaXN0YW5jZSA9ICggdGhpcy5faGFsZkV4dGVudHNaIC0gcHogKS92ejtcblx0XHRcdGlmIChyYXlFbnRyeURpc3RhbmNlID4gMCkge1xuXHRcdFx0XHRpeCA9IHB4ICsgcmF5RW50cnlEaXN0YW5jZSp2eDtcblx0XHRcdFx0aXkgPSBweSArIHJheUVudHJ5RGlzdGFuY2Uqdnk7XG5cdFx0XHRcdGlmIChpeSA+IC10aGlzLl9oYWxmRXh0ZW50c1kgJiYgaXkgPCB0aGlzLl9oYWxmRXh0ZW50c1kgJiYgaXggPiAtdGhpcy5faGFsZkV4dGVudHNYICYmIGl4IDwgdGhpcy5faGFsZkV4dGVudHNYKSB7XG5cdFx0XHRcdFx0dGFyZ2V0Tm9ybWFsLnggPSAwO1xuXHRcdFx0XHRcdHRhcmdldE5vcm1hbC55ID0gMDtcblx0XHRcdFx0XHR0YXJnZXROb3JtYWwueiA9IDE7XG5cdFx0XHRcdFx0aW50ZXJzZWN0cyA9IHRydWU7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdFx0aWYgKCFpbnRlcnNlY3RzICYmIHZ6ID4gMCkge1xuXHRcdFx0cmF5RW50cnlEaXN0YW5jZSA9ICggLXRoaXMuX2hhbGZFeHRlbnRzWiAtIHB6ICkvdno7XG5cdFx0XHRpZiAocmF5RW50cnlEaXN0YW5jZSA+IDApIHtcblx0XHRcdFx0aXggPSBweCArIHJheUVudHJ5RGlzdGFuY2Uqdng7XG5cdFx0XHRcdGl5ID0gcHkgKyByYXlFbnRyeURpc3RhbmNlKnZ5O1xuXHRcdFx0XHRpZiAoaXkgPiAtdGhpcy5faGFsZkV4dGVudHNZICYmIGl5IDwgdGhpcy5faGFsZkV4dGVudHNZICYmIGl4ID4gLXRoaXMuX2hhbGZFeHRlbnRzWCAmJiBpeCA8IHRoaXMuX2hhbGZFeHRlbnRzWCkge1xuXHRcdFx0XHRcdHRhcmdldE5vcm1hbC54ID0gMDtcblx0XHRcdFx0XHR0YXJnZXROb3JtYWwueSA9IDA7XG5cdFx0XHRcdFx0dGFyZ2V0Tm9ybWFsLnogPSAtMTtcblx0XHRcdFx0XHRpbnRlcnNlY3RzID0gdHJ1ZTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiBpbnRlcnNlY3RzPyByYXlFbnRyeURpc3RhbmNlIDogLTE7XG5cdH1cblxuXHQvKipcblx0ICogQGluaGVyaXREb2Ncblx0ICovXG5cdHB1YmxpYyBjb250YWluc1BvaW50KHBvc2l0aW9uOlZlY3RvcjNEKTpib29sZWFuXG5cdHtcblx0XHR2YXIgcHg6bnVtYmVyID0gcG9zaXRpb24ueCAtIHRoaXMuX2NlbnRlclgsIHB5Om51bWJlciA9IHBvc2l0aW9uLnkgLSB0aGlzLl9jZW50ZXJZLCBwejpudW1iZXIgPSBwb3NpdGlvbi56IC0gdGhpcy5fY2VudGVyWjtcblx0XHRyZXR1cm4gcHggPD0gdGhpcy5faGFsZkV4dGVudHNYICYmIHB4ID49IC10aGlzLl9oYWxmRXh0ZW50c1ggJiYgcHkgPD0gdGhpcy5faGFsZkV4dGVudHNZICYmIHB5ID49IC10aGlzLl9oYWxmRXh0ZW50c1kgJiYgcHogPD0gdGhpcy5faGFsZkV4dGVudHNaICYmIHB6ID49IC10aGlzLl9oYWxmRXh0ZW50c1o7XG5cdH1cblxuXHQvKipcblx0ICogQGluaGVyaXREb2Ncblx0ICovXG5cdHB1YmxpYyBmcm9tRXh0cmVtZXMobWluWDpudW1iZXIsIG1pblk6bnVtYmVyLCBtaW5aOm51bWJlciwgbWF4WDpudW1iZXIsIG1heFk6bnVtYmVyLCBtYXhaOm51bWJlcilcblx0e1xuXG5cdFx0dGhpcy5fY2VudGVyWCA9IChtYXhYICsgbWluWCkqLjU7XG5cdFx0dGhpcy5fY2VudGVyWSA9IChtYXhZICsgbWluWSkqLjU7XG5cdFx0dGhpcy5fY2VudGVyWiA9IChtYXhaICsgbWluWikqLjU7XG5cdFx0dGhpcy5faGFsZkV4dGVudHNYID0gKG1heFggLSBtaW5YKSouNTtcblx0XHR0aGlzLl9oYWxmRXh0ZW50c1kgPSAobWF4WSAtIG1pblkpKi41O1xuXHRcdHRoaXMuX2hhbGZFeHRlbnRzWiA9IChtYXhaIC0gbWluWikqLjU7XG5cblx0XHRzdXBlci5mcm9tRXh0cmVtZXMobWluWCwgbWluWSwgbWluWiwgbWF4WCwgbWF4WSwgbWF4Wik7XG5cblx0fVxuXG5cdC8qKlxuXHQgKiBAaW5oZXJpdERvY1xuXHQgKi9cblx0cHVibGljIGNsb25lKCk6Qm91bmRpbmdWb2x1bWVCYXNlXG5cdHtcblx0XHR2YXIgY2xvbmU6QXhpc0FsaWduZWRCb3VuZGluZ0JveCA9IG5ldyBBeGlzQWxpZ25lZEJvdW5kaW5nQm94KCk7XG5cdFx0Y2xvbmUuZnJvbUV4dHJlbWVzKHRoaXMuX2FhYmIueCwgdGhpcy5fYWFiYi55ICsgdGhpcy5fYWFiYi5oZWlnaHQsIHRoaXMuX2FhYmIueiwgdGhpcy5fYWFiYi54ICsgdGhpcy5fYWFiYi53aWR0aCwgdGhpcy5fYWFiYi55LCB0aGlzLl9hYWJiLnogKyB0aGlzLl9hYWJiLmRlcHRoKTtcblx0XHRyZXR1cm4gY2xvbmU7XG5cdH1cblxuXHRwdWJsaWMgZ2V0IGhhbGZFeHRlbnRzWCgpOm51bWJlclxuXHR7XG5cdFx0cmV0dXJuIHRoaXMuX2hhbGZFeHRlbnRzWDtcblx0fVxuXG5cdHB1YmxpYyBnZXQgaGFsZkV4dGVudHNZKCk6bnVtYmVyXG5cdHtcblx0XHRyZXR1cm4gdGhpcy5faGFsZkV4dGVudHNZO1xuXHR9XG5cblx0cHVibGljIGdldCBoYWxmRXh0ZW50c1ooKTpudW1iZXJcblx0e1xuXHRcdHJldHVybiB0aGlzLl9oYWxmRXh0ZW50c1o7XG5cdH1cblxuXHQvKipcblx0ICogRmluZHMgdGhlIGNsb3Nlc3QgcG9pbnQgb24gdGhlIGJvdW5kaW5nIHZvbHVtZSB0byBhbm90aGVyIGdpdmVuIHBvaW50LiBUaGlzIGNhbiBiZSB1c2VkIGZvciBtYXhpbXVtIGVycm9yIGNhbGN1bGF0aW9ucyBmb3IgY29udGVudCB3aXRoaW4gYSBnaXZlbiBib3VuZC5cblx0ICogQHBhcmFtIHBvaW50IFRoZSBwb2ludCBmb3Igd2hpY2ggdG8gZmluZCB0aGUgY2xvc2VzdCBwb2ludCBvbiB0aGUgYm91bmRpbmcgdm9sdW1lXG5cdCAqIEBwYXJhbSB0YXJnZXQgQW4gb3B0aW9uYWwgVmVjdG9yM0QgdG8gc3RvcmUgdGhlIHJlc3VsdCB0byBwcmV2ZW50IGNyZWF0aW5nIGEgbmV3IG9iamVjdC5cblx0ICogQHJldHVyblxuXHQgKi9cblx0cHVibGljIGNsb3Nlc3RQb2ludFRvUG9pbnQocG9pbnQ6VmVjdG9yM0QsIHRhcmdldDpWZWN0b3IzRCA9IG51bGwpOlZlY3RvcjNEXG5cdHtcblx0XHR2YXIgcDpudW1iZXI7XG5cblx0XHRpZiAodGFyZ2V0ID09IG51bGwpXG5cdFx0XHR0YXJnZXQgPSBuZXcgVmVjdG9yM0QoKTtcblxuXHRcdHAgPSBwb2ludC54O1xuXHRcdGlmIChwIDwgdGhpcy5fYWFiYi54KVxuXHRcdFx0cCA9IHRoaXMuX2FhYmIueDtcblx0XHRpZiAocCA+IHRoaXMuX2FhYmIueCArIHRoaXMuX2FhYmIud2lkdGgpXG5cdFx0XHRwID0gdGhpcy5fYWFiYi54ICsgdGhpcy5fYWFiYi53aWR0aDtcblx0XHR0YXJnZXQueCA9IHA7XG5cblx0XHRwID0gcG9pbnQueTtcblx0XHRpZiAocCA8IHRoaXMuX2FhYmIueSArIHRoaXMuX2FhYmIuaGVpZ2h0KVxuXHRcdFx0cCA9IHRoaXMuX2FhYmIueSArIHRoaXMuX2FhYmIuaGVpZ2h0O1xuXHRcdGlmIChwID4gdGhpcy5fYWFiYi55KVxuXHRcdFx0cCA9IHRoaXMuX2FhYmIueTtcblx0XHR0YXJnZXQueSA9IHA7XG5cblx0XHRwID0gcG9pbnQuejtcblx0XHRpZiAocCA8IHRoaXMuX2FhYmIueilcblx0XHRcdHAgPSB0aGlzLl9hYWJiLno7XG5cdFx0aWYgKHAgPiB0aGlzLl9hYWJiLnogKyB0aGlzLl9hYWJiLmRlcHRoKVxuXHRcdFx0cCA9IHRoaXMuX2FhYmIueiArIHRoaXMuX2FhYmIuZGVwdGg7XG5cdFx0dGFyZ2V0LnogPSBwO1xuXG5cdFx0cmV0dXJuIHRhcmdldDtcblx0fVxuXG5cdHB1YmxpYyBjbGFzc2lmeVRvUGxhbmUocGxhbmU6UGxhbmUzRCk6bnVtYmVyXG5cdHtcblx0XHR2YXIgYTpudW1iZXIgPSBwbGFuZS5hO1xuXHRcdHZhciBiOm51bWJlciA9IHBsYW5lLmI7XG5cdFx0dmFyIGM6bnVtYmVyID0gcGxhbmUuYztcblx0XHR2YXIgY2VudGVyRGlzdGFuY2U6bnVtYmVyID0gYSp0aGlzLl9jZW50ZXJYICsgYip0aGlzLl9jZW50ZXJZICsgYyp0aGlzLl9jZW50ZXJaIC0gcGxhbmUuZDtcblxuXHRcdGlmIChhIDwgMClcblx0XHRcdGEgPSAtYTtcblxuXHRcdGlmIChiIDwgMClcblx0XHRcdGIgPSAtYjtcblxuXHRcdGlmIChjIDwgMClcblx0XHRcdGMgPSAtYztcblxuXHRcdHZhciBib3VuZE9mZnNldDpudW1iZXIgPSBhKnRoaXMuX2hhbGZFeHRlbnRzWCArIGIqdGhpcy5faGFsZkV4dGVudHNZICsgYyp0aGlzLl9oYWxmRXh0ZW50c1o7XG5cblx0XHRyZXR1cm4gY2VudGVyRGlzdGFuY2UgPiBib3VuZE9mZnNldD8gUGxhbmVDbGFzc2lmaWNhdGlvbi5GUk9OVCA6IGNlbnRlckRpc3RhbmNlIDwgLWJvdW5kT2Zmc2V0PyBQbGFuZUNsYXNzaWZpY2F0aW9uLkJBQ0sgOiBQbGFuZUNsYXNzaWZpY2F0aW9uLklOVEVSU0VDVDtcblx0fVxuXG5cdHB1YmxpYyB0cmFuc2Zvcm1Gcm9tKGJvdW5kczpCb3VuZGluZ1ZvbHVtZUJhc2UsIG1hdHJpeDpNYXRyaXgzRClcblx0e1xuXHRcdHZhciBhYWJiOkF4aXNBbGlnbmVkQm91bmRpbmdCb3ggPSA8QXhpc0FsaWduZWRCb3VuZGluZ0JveD4gYm91bmRzO1xuXHRcdHZhciBjeDpudW1iZXIgPSBhYWJiLl9jZW50ZXJYO1xuXHRcdHZhciBjeTpudW1iZXIgPSBhYWJiLl9jZW50ZXJZO1xuXHRcdHZhciBjejpudW1iZXIgPSBhYWJiLl9jZW50ZXJaO1xuXHRcdHZhciByYXc6bnVtYmVyW10gPSBNYXRyaXgzRFV0aWxzLlJBV19EQVRBX0NPTlRBSU5FUjtcblxuXHRcdG1hdHJpeC5jb3B5UmF3RGF0YVRvKHJhdyk7XG5cblx0XHR2YXIgbTExOm51bWJlciA9IHJhd1swXSwgbTEyOm51bWJlciA9IHJhd1s0XSwgbTEzOm51bWJlciA9IHJhd1s4XSwgbTE0Om51bWJlciA9IHJhd1sxMl07XG5cdFx0dmFyIG0yMTpudW1iZXIgPSByYXdbMV0sIG0yMjpudW1iZXIgPSByYXdbNV0sIG0yMzpudW1iZXIgPSByYXdbOV0sIG0yNDpudW1iZXIgPSByYXdbMTNdO1xuXHRcdHZhciBtMzE6bnVtYmVyID0gcmF3WzJdLCBtMzI6bnVtYmVyID0gcmF3WzZdLCBtMzM6bnVtYmVyID0gcmF3WzEwXSwgbTM0Om51bWJlciA9IHJhd1sxNF07XG5cblx0XHR0aGlzLl9jZW50ZXJYID0gY3gqbTExICsgY3kqbTEyICsgY3oqbTEzICsgbTE0O1xuXHRcdHRoaXMuX2NlbnRlclkgPSBjeCptMjEgKyBjeSptMjIgKyBjeiptMjMgKyBtMjQ7XG5cdFx0dGhpcy5fY2VudGVyWiA9IGN4Km0zMSArIGN5Km0zMiArIGN6Km0zMyArIG0zNDtcblxuXHRcdGlmIChtMTEgPCAwKVxuXHRcdFx0bTExID0gLW0xMTtcblx0XHRpZiAobTEyIDwgMClcblx0XHRcdG0xMiA9IC1tMTI7XG5cdFx0aWYgKG0xMyA8IDApXG5cdFx0XHRtMTMgPSAtbTEzO1xuXHRcdGlmIChtMjEgPCAwKVxuXHRcdFx0bTIxID0gLW0yMTtcblx0XHRpZiAobTIyIDwgMClcblx0XHRcdG0yMiA9IC1tMjI7XG5cdFx0aWYgKG0yMyA8IDApXG5cdFx0XHRtMjMgPSAtbTIzO1xuXHRcdGlmIChtMzEgPCAwKVxuXHRcdFx0bTMxID0gLW0zMTtcblx0XHRpZiAobTMyIDwgMClcblx0XHRcdG0zMiA9IC1tMzI7XG5cdFx0aWYgKG0zMyA8IDApXG5cdFx0XHRtMzMgPSAtbTMzO1xuXHRcdHZhciBoeDpudW1iZXIgPSBhYWJiLl9oYWxmRXh0ZW50c1g7XG5cdFx0dmFyIGh5Om51bWJlciA9IGFhYmIuX2hhbGZFeHRlbnRzWTtcblx0XHR2YXIgaHo6bnVtYmVyID0gYWFiYi5faGFsZkV4dGVudHNaO1xuXHRcdHRoaXMuX2hhbGZFeHRlbnRzWCA9IGh4Km0xMSArIGh5Km0xMiArIGh6Km0xMztcblx0XHR0aGlzLl9oYWxmRXh0ZW50c1kgPSBoeCptMjEgKyBoeSptMjIgKyBoeiptMjM7XG5cdFx0dGhpcy5faGFsZkV4dGVudHNaID0gaHgqbTMxICsgaHkqbTMyICsgaHoqbTMzO1xuXG5cdFx0dGhpcy5fYWFiYi53aWR0aCA9IHRoaXMuX2FhYmIuaGVpZ2h0ID0gdGhpcy5fYWFiYi5kZXB0aCA9IHRoaXMuX2hhbGZFeHRlbnRzWCoyO1xuXHRcdHRoaXMuX2FhYmIueCA9IHRoaXMuX2NlbnRlclggLSB0aGlzLl9oYWxmRXh0ZW50c1g7XG5cdFx0dGhpcy5fYWFiYi55ID0gdGhpcy5fY2VudGVyWSArIHRoaXMuX2hhbGZFeHRlbnRzWTtcblx0XHR0aGlzLl9hYWJiLnogPSB0aGlzLl9jZW50ZXJaIC0gdGhpcy5faGFsZkV4dGVudHNaO1xuXHR9XG59XG5cbmV4cG9ydCA9IEF4aXNBbGlnbmVkQm91bmRpbmdCb3g7Il19