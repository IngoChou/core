var __extends = this.__extends || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    __.prototype = b.prototype;
    d.prototype = new __();
};
var BoundingVolumeBase = require("awayjs-core/lib/bounds/BoundingVolumeBase");
var Matrix3DUtils = require("awayjs-core/lib/geom/Matrix3DUtils");
var PlaneClassification = require("awayjs-core/lib/geom/PlaneClassification");
var Vector3D = require("awayjs-core/lib/geom/Vector3D");
/**
 * AxisAlignedBoundingBox represents a bounding box volume that has its planes aligned to the local coordinate axes of the bounded object.
 * This is useful for most meshes.
 */
var AxisAlignedBoundingBox = (function (_super) {
    __extends(AxisAlignedBoundingBox, _super);
    /**
     * Creates a new <code>AxisAlignedBoundingBox</code> object.
     */
    function AxisAlignedBoundingBox() {
        _super.call(this);
        this._centerX = 0;
        this._centerY = 0;
        this._centerZ = 0;
        this._halfExtentsX = 0;
        this._halfExtentsY = 0;
        this._halfExtentsZ = 0;
    }
    /**
     * @inheritDoc
     */
    AxisAlignedBoundingBox.prototype.nullify = function () {
        _super.prototype.nullify.call(this);
        this._centerX = this._centerY = this._centerZ = 0;
        this._halfExtentsX = this._halfExtentsY = this._halfExtentsZ = 0;
    };
    /**
     * @inheritDoc
     */
    AxisAlignedBoundingBox.prototype.isInFrustum = function (planes, numPlanes) {
        for (var i = 0; i < numPlanes; ++i) {
            var plane = planes[i];
            var a = plane.a;
            var b = plane.b;
            var c = plane.c;
            var flippedExtentX = a < 0 ? -this._halfExtentsX : this._halfExtentsX;
            var flippedExtentY = b < 0 ? -this._halfExtentsY : this._halfExtentsY;
            var flippedExtentZ = c < 0 ? -this._halfExtentsZ : this._halfExtentsZ;
            var projDist = a * (this._centerX + flippedExtentX) + b * (this._centerY + flippedExtentY) + c * (this._centerZ + flippedExtentZ) - plane.d;
            if (projDist < 0)
                return false;
        }
        return true;
    };
    AxisAlignedBoundingBox.prototype.rayIntersection = function (position, direction, targetNormal) {
        if (this.containsPoint(position))
            return 0;
        var px = position.x - this._centerX;
        var py = position.y - this._centerY;
        var pz = position.z - this._centerZ;
        var vx = direction.x;
        var vy = direction.y;
        var vz = direction.z;
        var ix;
        var iy;
        var iz;
        var rayEntryDistance;
        // ray-plane tests
        var intersects;
        if (vx < 0) {
            rayEntryDistance = (this._halfExtentsX - px) / vx;
            if (rayEntryDistance > 0) {
                iy = py + rayEntryDistance * vy;
                iz = pz + rayEntryDistance * vz;
                if (iy > -this._halfExtentsY && iy < this._halfExtentsY && iz > -this._halfExtentsZ && iz < this._halfExtentsZ) {
                    targetNormal.x = 1;
                    targetNormal.y = 0;
                    targetNormal.z = 0;
                    intersects = true;
                }
            }
        }
        if (!intersects && vx > 0) {
            rayEntryDistance = (-this._halfExtentsX - px) / vx;
            if (rayEntryDistance > 0) {
                iy = py + rayEntryDistance * vy;
                iz = pz + rayEntryDistance * vz;
                if (iy > -this._halfExtentsY && iy < this._halfExtentsY && iz > -this._halfExtentsZ && iz < this._halfExtentsZ) {
                    targetNormal.x = -1;
                    targetNormal.y = 0;
                    targetNormal.z = 0;
                    intersects = true;
                }
            }
        }
        if (!intersects && vy < 0) {
            rayEntryDistance = (this._halfExtentsY - py) / vy;
            if (rayEntryDistance > 0) {
                ix = px + rayEntryDistance * vx;
                iz = pz + rayEntryDistance * vz;
                if (ix > -this._halfExtentsX && ix < this._halfExtentsX && iz > -this._halfExtentsZ && iz < this._halfExtentsZ) {
                    targetNormal.x = 0;
                    targetNormal.y = 1;
                    targetNormal.z = 0;
                    intersects = true;
                }
            }
        }
        if (!intersects && vy > 0) {
            rayEntryDistance = (-this._halfExtentsY - py) / vy;
            if (rayEntryDistance > 0) {
                ix = px + rayEntryDistance * vx;
                iz = pz + rayEntryDistance * vz;
                if (ix > -this._halfExtentsX && ix < this._halfExtentsX && iz > -this._halfExtentsZ && iz < this._halfExtentsZ) {
                    targetNormal.x = 0;
                    targetNormal.y = -1;
                    targetNormal.z = 0;
                    intersects = true;
                }
            }
        }
        if (!intersects && vz < 0) {
            rayEntryDistance = (this._halfExtentsZ - pz) / vz;
            if (rayEntryDistance > 0) {
                ix = px + rayEntryDistance * vx;
                iy = py + rayEntryDistance * vy;
                if (iy > -this._halfExtentsY && iy < this._halfExtentsY && ix > -this._halfExtentsX && ix < this._halfExtentsX) {
                    targetNormal.x = 0;
                    targetNormal.y = 0;
                    targetNormal.z = 1;
                    intersects = true;
                }
            }
        }
        if (!intersects && vz > 0) {
            rayEntryDistance = (-this._halfExtentsZ - pz) / vz;
            if (rayEntryDistance > 0) {
                ix = px + rayEntryDistance * vx;
                iy = py + rayEntryDistance * vy;
                if (iy > -this._halfExtentsY && iy < this._halfExtentsY && ix > -this._halfExtentsX && ix < this._halfExtentsX) {
                    targetNormal.x = 0;
                    targetNormal.y = 0;
                    targetNormal.z = -1;
                    intersects = true;
                }
            }
        }
        return intersects ? rayEntryDistance : -1;
    };
    /**
     * @inheritDoc
     */
    AxisAlignedBoundingBox.prototype.containsPoint = function (position) {
        var px = position.x - this._centerX, py = position.y - this._centerY, pz = position.z - this._centerZ;
        return px <= this._halfExtentsX && px >= -this._halfExtentsX && py <= this._halfExtentsY && py >= -this._halfExtentsY && pz <= this._halfExtentsZ && pz >= -this._halfExtentsZ;
    };
    /**
     * @inheritDoc
     */
    AxisAlignedBoundingBox.prototype.fromExtremes = function (minX, minY, minZ, maxX, maxY, maxZ) {
        this._centerX = (maxX + minX) * .5;
        this._centerY = (maxY + minY) * .5;
        this._centerZ = (maxZ + minZ) * .5;
        this._halfExtentsX = (maxX - minX) * .5;
        this._halfExtentsY = (maxY - minY) * .5;
        this._halfExtentsZ = (maxZ - minZ) * .5;
        _super.prototype.fromExtremes.call(this, minX, minY, minZ, maxX, maxY, maxZ);
    };
    /**
     * @inheritDoc
     */
    AxisAlignedBoundingBox.prototype.clone = function () {
        var clone = new AxisAlignedBoundingBox();
        clone.fromExtremes(this._aabb.x, this._aabb.y + this._aabb.height, this._aabb.z, this._aabb.x + this._aabb.width, this._aabb.y, this._aabb.z + this._aabb.depth);
        return clone;
    };
    Object.defineProperty(AxisAlignedBoundingBox.prototype, "halfExtentsX", {
        get: function () {
            return this._halfExtentsX;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(AxisAlignedBoundingBox.prototype, "halfExtentsY", {
        get: function () {
            return this._halfExtentsY;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(AxisAlignedBoundingBox.prototype, "halfExtentsZ", {
        get: function () {
            return this._halfExtentsZ;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * Finds the closest point on the bounding volume to another given point. This can be used for maximum error calculations for content within a given bound.
     * @param point The point for which to find the closest point on the bounding volume
     * @param target An optional Vector3D to store the result to prevent creating a new object.
     * @return
     */
    AxisAlignedBoundingBox.prototype.closestPointToPoint = function (point, target) {
        if (target === void 0) { target = null; }
        var p;
        if (target == null)
            target = new Vector3D();
        p = point.x;
        if (p < this._aabb.x)
            p = this._aabb.x;
        if (p > this._aabb.x + this._aabb.width)
            p = this._aabb.x + this._aabb.width;
        target.x = p;
        p = point.y;
        if (p < this._aabb.y + this._aabb.height)
            p = this._aabb.y + this._aabb.height;
        if (p > this._aabb.y)
            p = this._aabb.y;
        target.y = p;
        p = point.z;
        if (p < this._aabb.z)
            p = this._aabb.z;
        if (p > this._aabb.z + this._aabb.depth)
            p = this._aabb.z + this._aabb.depth;
        target.z = p;
        return target;
    };
    AxisAlignedBoundingBox.prototype.classifyToPlane = function (plane) {
        var a = plane.a;
        var b = plane.b;
        var c = plane.c;
        var centerDistance = a * this._centerX + b * this._centerY + c * this._centerZ - plane.d;
        if (a < 0)
            a = -a;
        if (b < 0)
            b = -b;
        if (c < 0)
            c = -c;
        var boundOffset = a * this._halfExtentsX + b * this._halfExtentsY + c * this._halfExtentsZ;
        return centerDistance > boundOffset ? PlaneClassification.FRONT : centerDistance < -boundOffset ? PlaneClassification.BACK : PlaneClassification.INTERSECT;
    };
    AxisAlignedBoundingBox.prototype.transformFrom = function (bounds, matrix) {
        var aabb = bounds;
        var cx = aabb._centerX;
        var cy = aabb._centerY;
        var cz = aabb._centerZ;
        var raw = Matrix3DUtils.RAW_DATA_CONTAINER;
        matrix.copyRawDataTo(raw);
        var m11 = raw[0], m12 = raw[4], m13 = raw[8], m14 = raw[12];
        var m21 = raw[1], m22 = raw[5], m23 = raw[9], m24 = raw[13];
        var m31 = raw[2], m32 = raw[6], m33 = raw[10], m34 = raw[14];
        this._centerX = cx * m11 + cy * m12 + cz * m13 + m14;
        this._centerY = cx * m21 + cy * m22 + cz * m23 + m24;
        this._centerZ = cx * m31 + cy * m32 + cz * m33 + m34;
        if (m11 < 0)
            m11 = -m11;
        if (m12 < 0)
            m12 = -m12;
        if (m13 < 0)
            m13 = -m13;
        if (m21 < 0)
            m21 = -m21;
        if (m22 < 0)
            m22 = -m22;
        if (m23 < 0)
            m23 = -m23;
        if (m31 < 0)
            m31 = -m31;
        if (m32 < 0)
            m32 = -m32;
        if (m33 < 0)
            m33 = -m33;
        var hx = aabb._halfExtentsX;
        var hy = aabb._halfExtentsY;
        var hz = aabb._halfExtentsZ;
        this._halfExtentsX = hx * m11 + hy * m12 + hz * m13;
        this._halfExtentsY = hx * m21 + hy * m22 + hz * m23;
        this._halfExtentsZ = hx * m31 + hy * m32 + hz * m33;
        this._aabb.width = this._aabb.height = this._aabb.depth = this._halfExtentsX * 2;
        this._aabb.x = this._centerX - this._halfExtentsX;
        this._aabb.y = this._centerY + this._halfExtentsY;
        this._aabb.z = this._centerZ - this._halfExtentsZ;
    };
    return AxisAlignedBoundingBox;
})(BoundingVolumeBase);
module.exports = AxisAlignedBoundingBox;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImF3YXlqcy1jb3JlL2xpYi9ib3VuZHMvYXhpc2FsaWduZWRib3VuZGluZ2JveC50cyJdLCJuYW1lcyI6WyJBeGlzQWxpZ25lZEJvdW5kaW5nQm94IiwiQXhpc0FsaWduZWRCb3VuZGluZ0JveC5jb25zdHJ1Y3RvciIsIkF4aXNBbGlnbmVkQm91bmRpbmdCb3gubnVsbGlmeSIsIkF4aXNBbGlnbmVkQm91bmRpbmdCb3guaXNJbkZydXN0dW0iLCJBeGlzQWxpZ25lZEJvdW5kaW5nQm94LnJheUludGVyc2VjdGlvbiIsIkF4aXNBbGlnbmVkQm91bmRpbmdCb3guY29udGFpbnNQb2ludCIsIkF4aXNBbGlnbmVkQm91bmRpbmdCb3guZnJvbUV4dHJlbWVzIiwiQXhpc0FsaWduZWRCb3VuZGluZ0JveC5jbG9uZSIsIkF4aXNBbGlnbmVkQm91bmRpbmdCb3guaGFsZkV4dGVudHNYIiwiQXhpc0FsaWduZWRCb3VuZGluZ0JveC5oYWxmRXh0ZW50c1kiLCJBeGlzQWxpZ25lZEJvdW5kaW5nQm94LmhhbGZFeHRlbnRzWiIsIkF4aXNBbGlnbmVkQm91bmRpbmdCb3guY2xvc2VzdFBvaW50VG9Qb2ludCIsIkF4aXNBbGlnbmVkQm91bmRpbmdCb3guY2xhc3NpZnlUb1BsYW5lIiwiQXhpc0FsaWduZWRCb3VuZGluZ0JveC50cmFuc2Zvcm1Gcm9tIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSxJQUFPLGtCQUFrQixXQUFhLDJDQUEyQyxDQUFDLENBQUM7QUFFbkYsSUFBTyxhQUFhLFdBQWMsb0NBQW9DLENBQUMsQ0FBQztBQUN4RSxJQUFPLG1CQUFtQixXQUFhLDBDQUEwQyxDQUFDLENBQUM7QUFFbkYsSUFBTyxRQUFRLFdBQWdCLCtCQUErQixDQUFDLENBQUM7QUFFaEUsQUFJQTs7O0dBREc7SUFDRyxzQkFBc0I7SUFBU0EsVUFBL0JBLHNCQUFzQkEsVUFBMkJBO0lBU3REQTs7T0FFR0E7SUFDSEEsU0FaS0Esc0JBQXNCQTtRQWMxQkMsaUJBQU9BLENBQUNBO1FBWkRBLGFB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Q0FBRUEsR0FBQ0EsRUFBRUEsQ0FBQ0E7WUFDbkRBLEVBQUVBLENBQUNBLENBQUNBLGdCQUFnQkEsR0FBR0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7Z0JBQzFCQSxFQUFFQSxHQUFHQSxFQUFFQSxHQUFHQSxnQkFBZ0JBLEdBQUNBLEVBQUVBLENBQUNBO2dCQUM5QkEsRUFBRUEsR0FBR0EsRUFBRUEsR0FBR0EsZ0JBQWdCQSxHQUFDQSxFQUFFQSxDQUFDQTtnQkFDOUJBLEVBQUVBLENBQUNBLENBQUNBLEVBQUVBLEdBQUdBLENBQUNBLElBQUlBLENBQUNBLGFBQWFBLElBQUlBLEVBQUVBLEdBQUdBLElBQUlBLENBQUNBLGFBQWFBLElBQUlBLEVBQUVBLEdBQUdBLENBQUNBLElBQUlBLENBQUNBLGFBQWFBLElBQUlBLEVBQUVBLEdBQUdBLElBQUlBLENBQUNBLGFBQWFBLENBQUNBLENBQUNBLENBQUNBO29CQUNoSEEsWUFBWUEsQ0FBQ0EsQ0FBQ0EsR0FBR0EsQ0FBQ0EsQ0FBQ0E7b0JBQ25CQSxZQUFZQSxDQUFDQSxDQUFDQSxHQUFHQSxDQUFDQSxDQUFDQSxDQUFDQTtvQkFDcEJBLFlBQVlBLENBQUNBLENBQUNBLEdBQUdBLENBQUNBLENBQUNBO29CQUNuQkEsVUFBVUEsR0FBR0EsSUFBSUEsQ0FBQ0E7Z0JBQ25CQSxDQUFDQTtZQUNGQSxDQUFDQTtRQUNGQSxDQUFDQTtRQUNEQSxFQUFFQSxDQUFDQSxDQUFDQSxDQUFDQSxVQUFVQSxJQUFJQSxFQUFFQSxHQUFHQSxDQUFDQSxDQUFDQSxDQUFDQSxDQUFDQTtZQUMzQkEsZ0JBQWdCQSxHQUFHQSxDQUFFQSxJQUFJQSxDQUFDQSxhQUFhQSxHQUFHQSxFQUFFQSxDQUFFQSxHQUFDQSxFQUFFQSxDQUFDQTtZQUNsREEsRUFBRUEsQ0FBQ0EsQ0FBQ0EsZ0JBQWdCQSxHQUFHQSxDQUFDQSxDQUFDQSxDQUFDQSxDQUFDQTtnQkFDMUJBLEVBQUVBLEdBQUdBLEVBQUVBLEdBQUdBLGdCQUFnQkEsR0FBQ0EsRUFBRUEsQ0FBQ0E7Z0JBQzlCQSxFQUFFQSxH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QUNBO1FBQ2xCQSxFQUFFQSxDQUFDQSxDQUFDQSxDQUFDQSxHQUFHQSxJQUFJQSxDQUFDQSxLQUFLQSxDQUFDQSxDQUFDQSxHQUFHQSxJQUFJQSxDQUFDQSxLQUFLQSxDQUFDQSxLQUFLQSxDQUFDQTtZQUN2Q0EsQ0FBQ0EsR0FBR0EsSUFBSUEsQ0FBQ0EsS0FBS0EsQ0FBQ0EsQ0FBQ0EsR0FBR0EsSUFBSUEsQ0FBQ0EsS0FBS0EsQ0FBQ0EsS0FBS0EsQ0FBQ0E7UUFDckNBLE1BQU1BLENBQUNBLENBQUNBLEdBQUdBLENBQUNBLENBQUNBO1FBRWJBLENBQUNBLEdBQUdBLEtBQUtBLENBQUNBLENBQUNBLENBQUNBO1FBQ1pBLEVBQUVBLENBQUNBLENBQUNBLENBQUNBLEdBQUdBLElBQUlBLENBQUNBLEtBQUtBLENBQUNBLENBQUNBLEdBQUdBLElBQUlBLENBQUNBLEtBQUtBLENBQUNBLE1BQU1BLENBQUNBO1lBQ3hDQSxDQUFDQSxHQUFHQSxJQUFJQSxDQUFDQSxLQUFLQSxDQUFDQSxDQUFDQSxHQUFHQSxJQUFJQSxDQUFDQSxLQUFLQSxDQUFDQSxNQUFNQSxDQUFDQTtRQUN0Q0EsRUFBRUEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsR0FBR0EsSUFBSUEsQ0FBQ0EsS0FBS0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7WUFDcEJBLENBQUNBLEdBQUdBLElBQUlBLENBQUNBLEtBQUtBLENBQUNBLENBQUNBLENBQUNBO1FBQ2xCQSxNQUFNQSxDQUFDQSxDQUFDQSxHQUFHQSxDQUFDQSxDQUFDQTtRQUViQSxDQUFDQSxHQUFHQSxLQUFLQSxDQUFDQSxDQUFDQSxDQUFDQTtRQUNaQSxFQUFFQSxDQUFDQSxDQUFDQSxDQUFDQSxHQUFHQSxJQUFJQSxDQUFDQSxLQUFLQSxDQUFDQSxDQUFDQSxDQUFDQTtZQUNwQkEsQ0FBQ0EsR0FBR0EsSUFBSUEsQ0FBQ0EsS0FBS0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7UUFDbEJBLEVBQUVBLENBQUNBLENBQUNBLENBQUNBLEdBQUdBLElBQUlBLENBQUNBLEtBQUtBLENBQUNBLENBQUNBLEdBQUdBLElBQUlBLENBQUNBLEtBQUtBLENBQUNBLEtBQUtBLENBQUNBO1lBQ3ZDQSxDQUFDQSxHQUFHQSxJQUFJQSxDQUFDQSxLQUFLQSxDQUFDQSxDQUFDQSxHQUFHQSxJQUFJQSxDQUFDQSxLQUFLQSxDQUFDQSxLQUFLQSxDQUFDQTtRQUNyQ0EsTUFBTUEsQ0FBQ0EsQ0FBQ0EsR0FBR0EsQ0FBQ0EsQ0FBQ0E7UUFFYkEsTUFBTUEsQ0FBQ0EsTUFBTUEsQ0FBQ0E7SUFDZkEsQ0FBQ0E7SUFFTVgsZ0RBQWVBLEdBQXRCQSxVQUF1QkEsS0FBYUE7UUFFbkNZLElBQUlBLENBQUNBLEdBQVVBLEtBQUtBLENBQUNBLENBQUNBLENBQUNBO1FBQ3ZCQSxJQUFJQSxDQUFDQSxHQUFVQSxLQUFLQSxDQUFDQSxDQUFDQSxDQUFDQTtRQUN2QkEsSUFBSUEsQ0FBQ0EsR0FBVUEsS0FBS0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7UUFDdkJBLElBQUlBLGNBQWNBLEdBQVVBLENBQUNBLEdBQUNBLElBQUlBLENBQUNBLFFBQVFBLEdBQUdBLENBQUNBLEdBQUNBLElBQUlBLENBQUNBLFFBQVFBLEdBQUdBLENBQUNBLEdBQUNBLElBQUlBLENBQUNBLFFBQVFBLEdBQUdBLEtBQUtBLENBQUNBLENBQUNBLENBQUNBO1FBRTFGQSxFQUFFQSxDQUFDQSxDQUFDQSxDQUFDQSxHQUFHQSxDQUFDQSxDQUFDQTtZQUNUQSxDQUFDQSxHQUFHQSxDQUFDQSxDQUFDQSxDQUFDQTtRQUVSQSxFQUFFQSxDQUFDQSxDQUFDQSxDQUFDQSxHQUFHQSxDQUFDQSxDQUFDQTtZQUNUQSxDQUFDQSxHQUFHQSxDQUFDQSxDQUFDQSxDQUFDQTtRQUVSQSxFQUFFQSxDQUFDQSxDQUFDQSxDQUFDQSxHQUFHQSxDQUFDQSxDQUFDQTtZQUNUQSxDQUFDQSxHQUFHQSxDQUFDQSxDQUFDQSxDQUFDQTtRQUVSQSxJQUFJQSxXQUFXQSxHQUFVQSxDQUFDQSxHQUFDQSxJQUFJQSxDQUFDQSxhQUFhQSxHQUFHQSxDQUFDQSxHQUFDQSxJQUFJQSxDQUFDQSxhQUFhQSxHQUFHQSxDQUFDQSxHQUFDQSxJQUFJQSxDQUFDQSxhQUFhQSxDQUFDQTtRQUU1RkEsTUFBTUEsQ0FBQ0EsY0FBY0EsR0FBR0EsV0FBV0EsR0FBRUEsbUJBQW1CQSxDQUFDQSxLQUFLQSxHQUFHQSxjQUFjQSxHQUFHQSxDQUFDQSxXQUFXQSxHQUFFQSxtQkFBbUJBLENBQUNBLElBQUlBLEdBQUdBLG1CQUFtQkEsQ0FBQ0EsU0FBU0EsQ0FBQ0E7SUFDMUpBLENBQUNBO0lBRU1aLDhDQUFhQSxHQUFwQkEsVUFBcUJBLE1BQXlCQSxFQUFFQSxNQUFlQTtRQUU5RGEsSUFBSUEsSUFBSUEsR0FBbURBLE1BQU1BLENBQUNBO1FBQ2xFQSxJQUFJQSxFQUFFQSxHQUFVQSxJQUFJQSxDQUFDQSxRQUFRQSxDQUFDQTtRQUM5QkEsSUFBSUEsRUFBRUEsR0FBVUEsSUFBSUEsQ0FBQ0EsUUFBUUEsQ0FBQ0E7UUFDOUJBLElBQUlBLEVBQUVBLEdBQVVBLElBQUlBLENBQUNBLFFBQVFBLENBQUNBO1FBQzlCQSxJQUFJQSxHQUFHQSxHQUFZQSxhQUFhQSxDQUFDQSxrQkFBa0JBLENBQUNBO1FBRXBEQSxNQUFNQSxDQUFDQSxhQUFhQSxDQUFDQSxHQUFHQSxDQUFDQSxDQUFDQTtRQUUxQkEsSUFBSUEsR0FBR0EsR0FBVUEsR0FBR0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsRUFBRUEsR0FBR0EsR0FBVUEsR0FBR0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsRUFBRUEsR0FBR0EsR0FBVUEsR0FBR0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsRUFBRUEsR0FBR0EsR0FBVUEsR0FBR0EsQ0FBQ0EsRUFBRUEsQ0FBQ0EsQ0FBQ0E7UUFDeEZBLElBQUlBLEdBQUdBLEdBQVVBLEdBQUdBLENBQUNBLENBQUNBLENBQUNBLEVBQUVBLEdBQUdBLEdBQVVBLEdBQUdBLENBQUNBLENBQUNBLENBQUNBLEVBQUVBLEdBQUdBLEdBQVVBLEdBQUdBLENBQUNBLENBQUNBLENBQUNBLEVBQUVBLEdBQUdBLEdBQVVBLEdBQUdBLENBQUNBLEVBQUVBLENBQUNBLENBQUNBO1FBQ3hGQSxJQUFJQSxHQUFHQSxHQUFVQSxHQUFHQSxDQUFDQSxDQUFDQSxDQUFDQSxFQUFFQSxHQUFHQSxHQUFVQSxHQUFHQSxDQUFDQSxDQUFDQSxDQUFDQSxFQUFFQSxHQUFHQSxHQUFVQSxHQUFHQSxDQUFDQSxFQUFFQSxDQUFDQSxFQUFFQSxHQUFHQSxHQUFVQSxHQUFHQSxDQUFDQSxFQUFFQSxDQUFDQSxDQUFDQTtRQUV6RkEsSUFBSUEsQ0FBQ0EsUUFBUUEsR0FBR0EsRUFBRUEsR0FBQ0EsR0FBR0EsR0FBR0EsRUFBRUEsR0FBQ0EsR0FBR0EsR0FBR0EsRUFBRUEsR0FBQ0EsR0FBR0EsR0FBR0EsR0FBR0EsQ0FBQ0E7UUFDL0NBLElBQUlBLENBQUNBLFFBQVFBLEdBQUdBLEVBQUVBLEdBQUNBLEdBQUdBLEdBQUdBLEVBQUVBLEdBQUNBLEdBQUdBLEdBQUdBLEVBQUVBLEdBQUNBLEdBQUdBLEdBQUdBLEdBQUdBLENBQUNBO1FBQy9DQSxJQUFJQSxDQUFDQSxRQUFRQSxHQUFHQSxFQUFFQSxHQUFDQSxHQUFHQSxHQUFHQSxFQUFFQSxHQUFDQSxHQUFHQSxHQUFHQSxFQUFFQSxHQUFDQSxHQUFHQSxHQUFHQSxHQUFHQSxDQUFDQTtRQUUvQ0EsRUFBRUEsQ0FBQ0EsQ0FBQ0EsR0FBR0EsR0FBR0EsQ0FBQ0EsQ0FBQ0E7WUFDWEEsR0FBR0EsR0FBR0EsQ0FBQ0EsR0FBR0EsQ0FBQ0E7UUFDWkEsRUFBRUEsQ0FBQ0EsQ0FBQ0EsR0FBR0EsR0FBR0EsQ0FBQ0EsQ0FBQ0E7WUFDWEEsR0FBR0EsR0FBR0EsQ0FBQ0EsR0FBR0EsQ0FBQ0E7UUFDWkEsRUFBRUEsQ0FBQ0EsQ0FBQ0EsR0FBR0EsR0FBR0EsQ0FBQ0EsQ0FBQ0E7WUFDWEEsR0FBR0EsR0FBR0EsQ0FBQ0EsR0FBR0EsQ0FBQ0E7UUFDWkEsRUFBRUEsQ0FBQ0EsQ0FBQ0EsR0FBR0EsR0FBR0EsQ0FBQ0EsQ0FBQ0E7WUFDWEEsR0FBR0EsR0FBR0EsQ0FBQ0EsR0FBR0EsQ0FBQ0E7UUFDWkEsRUFBRUEsQ0FBQ0EsQ0FBQ0EsR0FBR0EsR0FBR0EsQ0FBQ0EsQ0FBQ0E7WUFDWEEsR0FBR0EsR0FBR0EsQ0FBQ0EsR0FBR0EsQ0FBQ0E7UUFDWkEsRUFBRUEsQ0FBQ0EsQ0FBQ0EsR0FBR0EsR0FBR0EsQ0FBQ0EsQ0FBQ0E7WUFDWEEsR0FBR0EsR0FBR0EsQ0FBQ0EsR0FBR0EsQ0FBQ0E7UUFDWkEsRUFBRUEsQ0FBQ0EsQ0FBQ0EsR0FBR0EsR0FBR0EsQ0FBQ0EsQ0FBQ0E7WUFDWEEsR0FBR0EsR0FBR0EsQ0FBQ0EsR0FBR0EsQ0FBQ0E7UUFDWkEsRUFBRUEsQ0FBQ0EsQ0FBQ0EsR0FBR0EsR0FBR0EsQ0FBQ0EsQ0FBQ0E7WUFDWEEsR0FBR0EsR0FBR0EsQ0FBQ0EsR0FBR0EsQ0FBQ0E7UUFDWkEsRUFBRUEsQ0FBQ0EsQ0FBQ0EsR0FBR0EsR0FBR0EsQ0FBQ0EsQ0FBQ0E7WUFDWEEsR0FBR0EsR0FBR0EsQ0FBQ0EsR0FBR0EsQ0FBQ0E7UUFDWkEsSUFBSUEsRUFBRUEsR0FBVUEsSUFBSUEsQ0FBQ0EsYUFBYUEsQ0FBQ0E7UUFDbkNBLElBQUlBLEVBQUVBLEdBQVVBLElBQUlBLENBQUNBLGFBQWFBLENBQUNBO1FBQ25DQSxJQUFJQSxFQUFFQSxHQUFVQSxJQUFJQSxDQUFDQSxhQUFhQSxDQUFDQTtRQUNuQ0EsSUFBSUEsQ0FBQ0EsYUFBYUEsR0FBR0EsRUFBRUEsR0FBQ0EsR0FBR0EsR0FBR0EsRUFBRUEsR0FBQ0EsR0FBR0EsR0FBR0EsRUFBRUEsR0FBQ0EsR0FBR0EsQ0FBQ0E7UUFDOUNBLElBQUlBLENBQUNBLGFBQWFBLEdBQUdBLEVBQUVBLEdBQUNBLEdBQUdBLEdBQUdBLEVBQUVBLEdBQUNBLEdBQUdBLEdBQUdBLEVBQUVBLEdBQUNBLEdBQUdBLENBQUNBO1FBQzlDQSxJQUFJQSxDQUFDQSxhQUFhQSxHQUFHQSxFQUFFQSxHQUFDQSxHQUFHQSxHQUFHQSxFQUFFQSxHQUFDQSxHQUFHQSxHQUFHQSxFQUFFQSxHQUFDQSxHQUFHQSxDQUFDQTtRQUU5Q0EsSUFBSUEsQ0FBQ0EsS0FBS0EsQ0FBQ0EsS0FBS0EsR0FBR0EsSUFBSUEsQ0FBQ0EsS0FBS0EsQ0FBQ0EsTUFBTUEsR0FBR0EsSUFBSUEsQ0FBQ0EsS0FBS0EsQ0FBQ0EsS0FBS0EsR0FBR0EsSUFBSUEsQ0FBQ0EsYUFBYUEsR0FBQ0EsQ0FBQ0EsQ0FBQ0E7UUFDL0VBLElBQUlBLENBQUNBLEtBQUtBLENBQUNBLENBQUNBLEdBQUdBLElBQUlBLENBQUNBLFFBQVFBLEdBQUdBLElBQUlBLENBQUNBLGFBQWFBLENBQUNBO1FBQ2xEQSxJQUFJQSxDQUFDQSxLQUFLQSxDQUFDQSxDQUFDQSxHQUFHQSxJQUFJQSxDQUFDQSxRQUFRQSxHQUFHQSxJQUFJQSxDQUFDQSxhQUFhQSxDQUFDQTtRQUNsREEsSUFBSUEsQ0FBQ0EsS0FBS0EsQ0FBQ0EsQ0FBQ0EsR0FBR0EsSUFBSUEsQ0FBQ0EsUUFBUUEsR0FBR0EsSUFBSUEsQ0FBQ0EsYUFBYUEsQ0FBQ0E7SUFDbkRBLENBQUNBO0lBQ0ZiLDZCQUFDQTtBQUFEQSxDQXhUQSxBQXdUQ0EsRUF4VG9DLGtCQUFrQixFQXdUdEQ7QUFFRCxBQUFnQyxpQkFBdkIsc0JBQXNCLENBQUMiLCJmaWxlIjoiYm91bmRzL0F4aXNBbGlnbmVkQm91bmRpbmdCb3guanMiLCJzb3VyY2VSb290IjoiLi4vIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEJvdW5kaW5nVm9sdW1lQmFzZVx0XHRcdD0gcmVxdWlyZShcImF3YXlqcy1jb3JlL2xpYi9ib3VuZHMvQm91bmRpbmdWb2x1bWVCYXNlXCIpO1xuaW1wb3J0IE1hdHJpeDNEXHRcdFx0XHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLWNvcmUvbGliL2dlb20vTWF0cml4M0RcIik7XG5pbXBvcnQgTWF0cml4M0RVdGlsc1x0XHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLWNvcmUvbGliL2dlb20vTWF0cml4M0RVdGlsc1wiKTtcbmltcG9ydCBQbGFuZUNsYXNzaWZpY2F0aW9uXHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLWNvcmUvbGliL2dlb20vUGxhbmVDbGFzc2lmaWNhdGlvblwiKTtcbmltcG9ydCBQbGFuZTNEXHRcdFx0XHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLWNvcmUvbGliL2dlb20vUGxhbmUzRFwiKTtcbmltcG9ydCBWZWN0b3IzRFx0XHRcdFx0XHRcdD0gcmVxdWlyZShcImF3YXlqcy1jb3JlL2xpYi9nZW9tL1ZlY3RvcjNEXCIpO1xuXG4vKipcbiAqIEF4aXNBbGlnbmVkQm91bmRpbmdCb3ggcmVwcmVzZW50cyBhIGJvdW5kaW5nIGJveCB2b2x1bWUgdGhhdCBoYXMgaXRzIHBsYW5lcyBhbGlnbmVkIHRvIHRoZSBsb2NhbCBjb29yZGluYXRlIGF4ZXMgb2YgdGhlIGJvdW5kZWQgb2JqZWN0LlxuICogVGhpcyBpcyB1c2VmdWwgZm9yIG1vc3QgbWVzaGVzLlxuICovXG5jbGFzcyBBeGlzQWxpZ25lZEJvdW5kaW5nQm94IGV4dGVuZHMgQm91bmRpbmdWb2x1bWVCYXNlXG57XG5cdHByaXZhdGUgX2NlbnRlclg6bnVtYmVyID0gMDtcblx0cHJpdmF0ZSBfY2VudGVyWTpudW1iZXIgPSAwO1xuXHRwcml2YXRlIF9jZW50ZXJaOm51bWJlciA9IDA7XG5cdHByaXZhdGUgX2hhbGZFeHRlbnRzWDpudW1iZXIgPSAwO1xuXHRwcml2YXRlIF9oYWxmRXh0ZW50c1k6bnVtYmVyID0gMDtcblx0cHJpdmF0ZSBfaGFsZkV4dGVudHNaOm51bWJlciA9IDA7XG5cblx0LyoqXG5cdCAqIENyZWF0ZXMgYSBuZXcgPGNvZGU+QXhpc0FsaWduZWRCb3VuZGluZ0JveDwvY29kZT4gb2JqZWN0LlxuXHQgKi9cblx0Y29uc3RydWN0b3IoKVxuXHR7XG5cdFx0c3VwZXIoKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBAaW5oZXJpdERvY1xuXHQgKi9cblx0cHVibGljIG51bGxpZnkoKVxuXHR7XG5cdFx0c3VwZXIubnVsbGlmeSgpO1xuXG5cdFx0dGhpcy5fY2VudGVyWCA9IHRoaXMuX2NlbnRlclkgPSB0aGlzLl9jZW50ZXJaID0gMDtcblx0XHR0aGlzLl9oYWxmRXh0ZW50c1ggPSB0aGlzLl9oYWxmRXh0ZW50c1kgPSB0aGlzLl9oYWxmRXh0ZW50c1ogPSAwO1xuXHR9XG5cblx0LyoqXG5cdCAqIEBpbmhlcml0RG9jXG5cdCAqL1xuXHRwdWJsaWMgaXNJbkZydXN0dW0ocGxhbmVzOkFycmF5PFBsYW5lM0Q+LCBudW1QbGFuZXM6bnVtYmVyKTpib29sZWFuXG5cdHtcblx0XHRmb3IgKHZhciBpOm51bWJlciA9IDA7IGkgPCBudW1QbGFuZXM7ICsraSkge1xuXG5cdFx0XHR2YXIgcGxhbmU6UGxhbmUzRCA9IHBsYW5lc1tpXTtcblx0XHRcdHZhciBhOm51bWJlciA9IHBsYW5lLmE7XG5cdFx0XHR2YXIgYjpudW1iZXIgPSBwbGFuZS5iO1xuXHRcdFx0dmFyIGM6bnVtYmVyID0gcGxhbmUuYztcblx0XHRcdHZhciBmbGlwcGVkRXh0ZW50WDpudW1iZXIgPSBhIDwgMD8gLXRoaXMuX2hhbGZFeHRlbnRzWCA6IHRoaXMuX2hhbGZFeHRlbnRzWDtcblx0XHRcdHZhciBmbGlwcGVkRXh0ZW50WTpudW1iZXIgPSBiIDwgMD8gLXRoaXMuX2hhbGZFeHRlbnRzWSA6IHRoaXMuX2hhbGZFeHRlbnRzWTtcblx0XHRcdHZhciBmbGlwcGVkRXh0ZW50WjpudW1iZXIgPSBjIDwgMD8gLXRoaXMuX2hhbGZFeHRlbnRzWiA6IHRoaXMuX2hhbGZFeHRlbnRzWjtcblx0XHRcdHZhciBwcm9qRGlzdDpudW1iZXIgPSBhKih0aGlzLl9jZW50ZXJYICsgZmxpcHBlZEV4dGVudFgpICsgYioodGhpcy5fY2VudGVyWSArIGZsaXBwZWRFeHRlbnRZKSArIGMqKHRoaXMuX2NlbnRlclogKyBmbGlwcGVkRXh0ZW50WikgLSBwbGFuZS5kO1xuXG5cdFx0XHRpZiAocHJvakRpc3QgPCAwKVxuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHRydWU7XG5cdH1cblxuXHRwdWJsaWMgcmF5SW50ZXJzZWN0aW9uKHBvc2l0aW9uOlZlY3RvcjNELCBkaXJlY3Rpb246VmVjdG9yM0QsIHRhcmdldE5vcm1hbDpWZWN0b3IzRCk6bnVtYmVyXG5cdHtcblxuXHRcdGlmICh0aGlzLmNvbnRhaW5zUG9pbnQocG9zaXRpb24pKVxuXHRcdFx0cmV0dXJuIDA7XG5cblx0XHR2YXIgcHg6bnVtYmVyID0gcG9zaXRpb24ueCAtIHRoaXMuX2NlbnRlclhcblx0XHR2YXIgcHk6bnVtYmVyID0gcG9zaXRpb24ueSAtIHRoaXMuX2NlbnRlcllcblx0XHR2YXIgcHo6bnVtYmVyID0gcG9zaXRpb24ueiAtIHRoaXMuX2NlbnRlclo7XG5cblx0XHR2YXIgdng6bnVtYmVyID0gZGlyZWN0aW9uLnhcblx0XHR2YXIgdnk6bnVtYmVyID0gZGlyZWN0aW9uLnlcblx0XHR2YXIgdno6bnVtYmVyID0gZGlyZWN0aW9uLno7XG5cblx0XHR2YXIgaXg6bnVtYmVyO1xuXHRcdHZhciBpeTpudW1iZXI7XG5cdFx0dmFyIGl6Om51bWJlcjtcblx0XHR2YXIgcmF5RW50cnlEaXN0YW5jZTpudW1iZXI7XG5cblx0XHQvLyByYXktcGxhbmUgdGVzdHNcblx0XHR2YXIgaW50ZXJzZWN0czpib29sZWFuO1xuXHRcdGlmICh2eCA8IDApIHtcblx0XHRcdHJheUVudHJ5RGlzdGFuY2UgPSAoIHRoaXMuX2hhbGZFeHRlbnRzWCAtIHB4ICkvdng7XG5cdFx0XHRpZiAocmF5RW50cnlEaXN0YW5jZSA+IDApIHtcblx0XHRcdFx0aXkgPSBweSArIHJheUVudHJ5RGlzdGFuY2Uqdnk7XG5cdFx0XHRcdGl6ID0gcHogKyByYXlFbnRyeURpc3RhbmNlKnZ6O1xuXHRcdFx0XHRpZiAoaXkgPiAtdGhpcy5faGFsZkV4dGVudHNZICYmIGl5IDwgdGhpcy5faGFsZkV4dGVudHNZICYmIGl6ID4gLXRoaXMuX2hhbGZFeHRlbnRzWiAmJiBpeiA8IHRoaXMuX2hhbGZFeHRlbnRzWikge1xuXHRcdFx0XHRcdHRhcmdldE5vcm1hbC54ID0gMTtcblx0XHRcdFx0XHR0YXJnZXROb3JtYWwueSA9IDA7XG5cdFx0XHRcdFx0dGFyZ2V0Tm9ybWFsLnogPSAwO1xuXG5cdFx0XHRcdFx0aW50ZXJzZWN0cyA9IHRydWU7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdFx0aWYgKCFpbnRlcnNlY3RzICYmIHZ4ID4gMCkge1xuXHRcdFx0cmF5RW50cnlEaXN0YW5jZSA9ICggLXRoaXMuX2hhbGZFeHRlbnRzWCAtIHB4ICkvdng7XG5cdFx0XHRpZiAocmF5RW50cnlEaXN0YW5jZSA+IDApIHtcblx0XHRcdFx0aXkgPSBweSArIHJheUVudHJ5RGlzdGFuY2Uqdnk7XG5cdFx0XHRcdGl6ID0gcHogKyByYXlFbnRyeURpc3RhbmNlKnZ6O1xuXHRcdFx0XHRpZiAoaXkgPiAtdGhpcy5faGFsZkV4dGVudHNZICYmIGl5IDwgdGhpcy5faGFsZkV4dGVudHNZICYmIGl6ID4gLXRoaXMuX2hhbGZFeHRlbnRzWiAmJiBpeiA8IHRoaXMuX2hhbGZFeHRlbnRzWikge1xuXHRcdFx0XHRcdHRhcmdldE5vcm1hbC54ID0gLTE7XG5cdFx0XHRcdFx0dGFyZ2V0Tm9ybWFsLnkgPSAwO1xuXHRcdFx0XHRcdHRhcmdldE5vcm1hbC56ID0gMDtcblx0XHRcdFx0XHRpbnRlcnNlY3RzID0gdHJ1ZTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0XHRpZiAoIWludGVyc2VjdHMgJiYgdnkgPCAwKSB7XG5cdFx0XHRyYXlFbnRyeURpc3RhbmNlID0gKCB0aGlzLl9oYWxmRXh0ZW50c1kgLSBweSApL3Z5O1xuXHRcdFx0aWYgKHJheUVudHJ5RGlzdGFuY2UgPiAwKSB7XG5cdFx0XHRcdGl4ID0gcHggKyByYXlFbnRyeURpc3RhbmNlKnZ4O1xuXHRcdFx0XHRpeiA9IHB6ICsgcmF5RW50cnlEaXN0YW5jZSp2ejtcblx0XHRcdFx0aWYgKGl4ID4gLXRoaXMuX2hhbGZFeHRlbnRzWCAmJiBpeCA8IHRoaXMuX2hhbGZFeHRlbnRzWCAmJiBpeiA+IC10aGlzLl9oYWxmRXh0ZW50c1ogJiYgaXogPCB0aGlzLl9oYWxmRXh0ZW50c1opIHtcblx0XHRcdFx0XHR0YXJnZXROb3JtYWwueCA9IDA7XG5cdFx0XHRcdFx0dGFyZ2V0Tm9ybWFsLnkgPSAxO1xuXHRcdFx0XHRcdHRhcmdldE5vcm1hbC56ID0gMDtcblx0XHRcdFx0XHRpbnRlcnNlY3RzID0gdHJ1ZTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0XHRpZiAoIWludGVyc2VjdHMgJiYgdnkgPiAwKSB7XG5cdFx0XHRyYXlFbnRyeURpc3RhbmNlID0gKCAtdGhpcy5faGFsZkV4dGVudHNZIC0gcHkgKS92eTtcblx0XHRcdGlmIChyYXlFbnRyeURpc3RhbmNlID4gMCkge1xuXHRcdFx0XHRpeCA9IHB4ICsgcmF5RW50cnlEaXN0YW5jZSp2eDtcblx0XHRcdFx0aXogPSBweiArIHJheUVudHJ5RGlzdGFuY2Uqdno7XG5cdFx0XHRcdGlmIChpeCA+IC10aGlzLl9oYWxmRXh0ZW50c1ggJiYgaXggPCB0aGlzLl9oYWxmRXh0ZW50c1ggJiYgaXogPiAtdGhpcy5faGFsZkV4dGVudHNaICYmIGl6IDwgdGhpcy5faGFsZkV4dGVudHNaKSB7XG5cdFx0XHRcdFx0dGFyZ2V0Tm9ybWFsLnggPSAwO1xuXHRcdFx0XHRcdHRhcmdldE5vcm1hbC55ID0gLTE7XG5cdFx0XHRcdFx0dGFyZ2V0Tm9ybWFsLnogPSAwO1xuXHRcdFx0XHRcdGludGVyc2VjdHMgPSB0cnVlO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGlmICghaW50ZXJzZWN0cyAmJiB2eiA8IDApIHtcblx0XHRcdHJheUVudHJ5RGlzdGFuY2UgPSAoIHRoaXMuX2hhbGZFeHRlbnRzWiAtIHB6ICkvdno7XG5cdFx0XHRpZiAocmF5RW50cnlEaXN0YW5jZSA+IDApIHtcblx0XHRcdFx0aXggPSBweCArIHJheUVudHJ5RGlzdGFuY2Uqdng7XG5cdFx0XHRcdGl5ID0gcHkgKyByYXlFbnRyeURpc3RhbmNlKnZ5O1xuXHRcdFx0XHRpZiAoaXkgPiAtdGhpcy5faGFsZkV4dGVudHNZICYmIGl5IDwgdGhpcy5faGFsZkV4dGVudHNZICYmIGl4ID4gLXRoaXMuX2hhbGZFeHRlbnRzWCAmJiBpeCA8IHRoaXMuX2hhbGZFeHRlbnRzWCkge1xuXHRcdFx0XHRcdHRhcmdldE5vcm1hbC54ID0gMDtcblx0XHRcdFx0XHR0YXJnZXROb3JtYWwueSA9IDA7XG5cdFx0XHRcdFx0dGFyZ2V0Tm9ybWFsLnogPSAxO1xuXHRcdFx0XHRcdGludGVyc2VjdHMgPSB0cnVlO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGlmICghaW50ZXJzZWN0cyAmJiB2eiA+IDApIHtcblx0XHRcdHJheUVudHJ5RGlzdGFuY2UgPSAoIC10aGlzLl9oYWxmRXh0ZW50c1ogLSBweiApL3Z6O1xuXHRcdFx0aWYgKHJheUVudHJ5RGlzdGFuY2UgPiAwKSB7XG5cdFx0XHRcdGl4ID0gcHggKyByYXlFbnRyeURpc3RhbmNlKnZ4O1xuXHRcdFx0XHRpeSA9IHB5ICsgcmF5RW50cnlEaXN0YW5jZSp2eTtcblx0XHRcdFx0aWYgKGl5ID4gLXRoaXMuX2hhbGZFeHRlbnRzWSAmJiBpeSA8IHRoaXMuX2hhbGZFeHRlbnRzWSAmJiBpeCA+IC10aGlzLl9oYWxmRXh0ZW50c1ggJiYgaXggPCB0aGlzLl9oYWxmRXh0ZW50c1gpIHtcblx0XHRcdFx0XHR0YXJnZXROb3JtYWwueCA9IDA7XG5cdFx0XHRcdFx0dGFyZ2V0Tm9ybWFsLnkgPSAwO1xuXHRcdFx0XHRcdHRhcmdldE5vcm1hbC56ID0gLTE7XG5cdFx0XHRcdFx0aW50ZXJzZWN0cyA9IHRydWU7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gaW50ZXJzZWN0cz8gcmF5RW50cnlEaXN0YW5jZSA6IC0xO1xuXHR9XG5cblx0LyoqXG5cdCAqIEBpbmhlcml0RG9jXG5cdCAqL1xuXHRwdWJsaWMgY29udGFpbnNQb2ludChwb3NpdGlvbjpWZWN0b3IzRCk6Ym9vbGVhblxuXHR7XG5cdFx0dmFyIHB4Om51bWJlciA9IHBvc2l0aW9uLnggLSB0aGlzLl9jZW50ZXJYLCBweTpudW1iZXIgPSBwb3NpdGlvbi55IC0gdGhpcy5fY2VudGVyWSwgcHo6bnVtYmVyID0gcG9zaXRpb24ueiAtIHRoaXMuX2NlbnRlclo7XG5cdFx0cmV0dXJuIHB4IDw9IHRoaXMuX2hhbGZFeHRlbnRzWCAmJiBweCA+PSAtdGhpcy5faGFsZkV4dGVudHNYICYmIHB5IDw9IHRoaXMuX2hhbGZFeHRlbnRzWSAmJiBweSA+PSAtdGhpcy5faGFsZkV4dGVudHNZICYmIHB6IDw9IHRoaXMuX2hhbGZFeHRlbnRzWiAmJiBweiA+PSAtdGhpcy5faGFsZkV4dGVudHNaO1xuXHR9XG5cblx0LyoqXG5cdCAqIEBpbmhlcml0RG9jXG5cdCAqL1xuXHRwdWJsaWMgZnJvbUV4dHJlbWVzKG1pblg6bnVtYmVyLCBtaW5ZOm51bWJlciwgbWluWjpudW1iZXIsIG1heFg6bnVtYmVyLCBtYXhZOm51bWJlciwgbWF4WjpudW1iZXIpXG5cdHtcblxuXHRcdHRoaXMuX2NlbnRlclggPSAobWF4WCArIG1pblgpKi41O1xuXHRcdHRoaXMuX2NlbnRlclkgPSAobWF4WSArIG1pblkpKi41O1xuXHRcdHRoaXMuX2NlbnRlclogPSAobWF4WiArIG1pblopKi41O1xuXHRcdHRoaXMuX2hhbGZFeHRlbnRzWCA9IChtYXhYIC0gbWluWCkqLjU7XG5cdFx0dGhpcy5faGFsZkV4dGVudHNZID0gKG1heFkgLSBtaW5ZKSouNTtcblx0XHR0aGlzLl9oYWxmRXh0ZW50c1ogPSAobWF4WiAtIG1pblopKi41O1xuXG5cdFx0c3VwZXIuZnJvbUV4dHJlbWVzKG1pblgsIG1pblksIG1pblosIG1heFgsIG1heFksIG1heFopO1xuXG5cdH1cblxuXHQvKipcblx0ICogQGluaGVyaXREb2Ncblx0ICovXG5cdHB1YmxpYyBjbG9uZSgpOkJvdW5kaW5nVm9sdW1lQmFzZVxuXHR7XG5cdFx0dmFyIGNsb25lOkF4aXNBbGlnbmVkQm91bmRpbmdCb3ggPSBuZXcgQXhpc0FsaWduZWRCb3VuZGluZ0JveCgpO1xuXHRcdGNsb25lLmZyb21FeHRyZW1lcyh0aGlzLl9hYWJiLngsIHRoaXMuX2FhYmIueSArIHRoaXMuX2FhYmIuaGVpZ2h0LCB0aGlzLl9hYWJiLnosIHRoaXMuX2FhYmIueCArIHRoaXMuX2FhYmIud2lkdGgsIHRoaXMuX2FhYmIueSwgdGhpcy5fYWFiYi56ICsgdGhpcy5fYWFiYi5kZXB0aCk7XG5cdFx0cmV0dXJuIGNsb25lO1xuXHR9XG5cblx0cHVibGljIGdldCBoYWxmRXh0ZW50c1goKTpudW1iZXJcblx0e1xuXHRcdHJldHVybiB0aGlzLl9oYWxmRXh0ZW50c1g7XG5cdH1cblxuXHRwdWJsaWMgZ2V0IGhhbGZFeHRlbnRzWSgpOm51bWJlclxuXHR7XG5cdFx0cmV0dXJuIHRoaXMuX2hhbGZFeHRlbnRzWTtcblx0fVxuXG5cdHB1YmxpYyBnZXQgaGFsZkV4dGVudHNaKCk6bnVtYmVyXG5cdHtcblx0XHRyZXR1cm4gdGhpcy5faGFsZkV4dGVudHNaO1xuXHR9XG5cblx0LyoqXG5cdCAqIEZpbmRzIHRoZSBjbG9zZXN0IHBvaW50IG9uIHRoZSBib3VuZGluZyB2b2x1bWUgdG8gYW5vdGhlciBnaXZlbiBwb2ludC4gVGhpcyBjYW4gYmUgdXNlZCBmb3IgbWF4aW11bSBlcnJvciBjYWxjdWxhdGlvbnMgZm9yIGNvbnRlbnQgd2l0aGluIGEgZ2l2ZW4gYm91bmQuXG5cdCAqIEBwYXJhbSBwb2ludCBUaGUgcG9pbnQgZm9yIHdoaWNoIHRvIGZpbmQgdGhlIGNsb3Nlc3QgcG9pbnQgb24gdGhlIGJvdW5kaW5nIHZvbHVtZVxuXHQgKiBAcGFyYW0gdGFyZ2V0IEFuIG9wdGlvbmFsIFZlY3RvcjNEIHRvIHN0b3JlIHRoZSByZXN1bHQgdG8gcHJldmVudCBjcmVhdGluZyBhIG5ldyBvYmplY3QuXG5cdCAqIEByZXR1cm5cblx0ICovXG5cdHB1YmxpYyBjbG9zZXN0UG9pbnRUb1BvaW50KHBvaW50OlZlY3RvcjNELCB0YXJnZXQ6VmVjdG9yM0QgPSBudWxsKTpWZWN0b3IzRFxuXHR7XG5cdFx0dmFyIHA6bnVtYmVyO1xuXG5cdFx0aWYgKHRhcmdldCA9PSBudWxsKVxuXHRcdFx0dGFyZ2V0ID0gbmV3IFZlY3RvcjNEKCk7XG5cblx0XHRwID0gcG9pbnQueDtcblx0XHRpZiAocCA8IHRoaXMuX2FhYmIueClcblx0XHRcdHAgPSB0aGlzLl9hYWJiLng7XG5cdFx0aWYgKHAgPiB0aGlzLl9hYWJiLnggKyB0aGlzLl9hYWJiLndpZHRoKVxuXHRcdFx0cCA9IHRoaXMuX2FhYmIueCArIHRoaXMuX2FhYmIud2lkdGg7XG5cdFx0dGFyZ2V0LnggPSBwO1xuXG5cdFx0cCA9IHBvaW50Lnk7XG5cdFx0aWYgKHAgPCB0aGlzLl9hYWJiLnkgKyB0aGlzLl9hYWJiLmhlaWdodClcblx0XHRcdHAgPSB0aGlzLl9hYWJiLnkgKyB0aGlzLl9hYWJiLmhlaWdodDtcblx0XHRpZiAocCA+IHRoaXMuX2FhYmIueSlcblx0XHRcdHAgPSB0aGlzLl9hYWJiLnk7XG5cdFx0dGFyZ2V0LnkgPSBwO1xuXG5cdFx0cCA9IHBvaW50Lno7XG5cdFx0aWYgKHAgPCB0aGlzLl9hYWJiLnopXG5cdFx0XHRwID0gdGhpcy5fYWFiYi56O1xuXHRcdGlmIChwID4gdGhpcy5fYWFiYi56ICsgdGhpcy5fYWFiYi5kZXB0aClcblx0XHRcdHAgPSB0aGlzLl9hYWJiLnogKyB0aGlzLl9hYWJiLmRlcHRoO1xuXHRcdHRhcmdldC56ID0gcDtcblxuXHRcdHJldHVybiB0YXJnZXQ7XG5cdH1cblxuXHRwdWJsaWMgY2xhc3NpZnlUb1BsYW5lKHBsYW5lOlBsYW5lM0QpOm51bWJlclxuXHR7XG5cdFx0dmFyIGE6bnVtYmVyID0gcGxhbmUuYTtcblx0XHR2YXIgYjpudW1iZXIgPSBwbGFuZS5iO1xuXHRcdHZhciBjOm51bWJlciA9IHBsYW5lLmM7XG5cdFx0dmFyIGNlbnRlckRpc3RhbmNlOm51bWJlciA9IGEqdGhpcy5fY2VudGVyWCArIGIqdGhpcy5fY2VudGVyWSArIGMqdGhpcy5fY2VudGVyWiAtIHBsYW5lLmQ7XG5cblx0XHRpZiAoYSA8IDApXG5cdFx0XHRhID0gLWE7XG5cblx0XHRpZiAoYiA8IDApXG5cdFx0XHRiID0gLWI7XG5cblx0XHRpZiAoYyA8IDApXG5cdFx0XHRjID0gLWM7XG5cblx0XHR2YXIgYm91bmRPZmZzZXQ6bnVtYmVyID0gYSp0aGlzLl9oYWxmRXh0ZW50c1ggKyBiKnRoaXMuX2hhbGZFeHRlbnRzWSArIGMqdGhpcy5faGFsZkV4dGVudHNaO1xuXG5cdFx0cmV0dXJuIGNlbnRlckRpc3RhbmNlID4gYm91bmRPZmZzZXQ/IFBsYW5lQ2xhc3NpZmljYXRpb24uRlJPTlQgOiBjZW50ZXJEaXN0YW5jZSA8IC1ib3VuZE9mZnNldD8gUGxhbmVDbGFzc2lmaWNhdGlvbi5CQUNLIDogUGxhbmVDbGFzc2lmaWNhdGlvbi5JTlRFUlNFQ1Q7XG5cdH1cblxuXHRwdWJsaWMgdHJhbnNmb3JtRnJvbShib3VuZHM6Qm91bmRpbmdWb2x1bWVCYXNlLCBtYXRyaXg6TWF0cml4M0QpXG5cdHtcblx0XHR2YXIgYWFiYjpBeGlzQWxpZ25lZEJvdW5kaW5nQm94ID0gPEF4aXNBbGlnbmVkQm91bmRpbmdCb3g+IGJvdW5kcztcblx0XHR2YXIgY3g6bnVtYmVyID0gYWFiYi5fY2VudGVyWDtcblx0XHR2YXIgY3k6bnVtYmVyID0gYWFiYi5fY2VudGVyWTtcblx0XHR2YXIgY3o6bnVtYmVyID0gYWFiYi5fY2VudGVyWjtcblx0XHR2YXIgcmF3Om51bWJlcltdID0gTWF0cml4M0RVdGlscy5SQVdfREFUQV9DT05UQUlORVI7XG5cblx0XHRtYXRyaXguY29weVJhd0RhdGFUbyhyYXcpO1xuXG5cdFx0dmFyIG0xMTpudW1iZXIgPSByYXdbMF0sIG0xMjpudW1iZXIgPSByYXdbNF0sIG0xMzpudW1iZXIgPSByYXdbOF0sIG0xNDpudW1iZXIgPSByYXdbMTJdO1xuXHRcdHZhciBtMjE6bnVtYmVyID0gcmF3WzFdLCBtMjI6bnVtYmVyID0gcmF3WzVdLCBtMjM6bnVtYmVyID0gcmF3WzldLCBtMjQ6bnVtYmVyID0gcmF3WzEzXTtcblx0XHR2YXIgbTMxOm51bWJlciA9IHJhd1syXSwgbTMyOm51bWJlciA9IHJhd1s2XSwgbTMzOm51bWJlciA9IHJhd1sxMF0sIG0zNDpudW1iZXIgPSByYXdbMTRdO1xuXG5cdFx0dGhpcy5fY2VudGVyWCA9IGN4Km0xMSArIGN5Km0xMiArIGN6Km0xMyArIG0xNDtcblx0XHR0aGlzLl9jZW50ZXJZID0gY3gqbTIxICsgY3kqbTIyICsgY3oqbTIzICsgbTI0O1xuXHRcdHRoaXMuX2NlbnRlclogPSBjeCptMzEgKyBjeSptMzIgKyBjeiptMzMgKyBtMzQ7XG5cblx0XHRpZiAobTExIDwgMClcblx0XHRcdG0xMSA9IC1tMTE7XG5cdFx0aWYgKG0xMiA8IDApXG5cdFx0XHRtMTIgPSAtbTEyO1xuXHRcdGlmIChtMTMgPCAwKVxuXHRcdFx0bTEzID0gLW0xMztcblx0XHRpZiAobTIxIDwgMClcblx0XHRcdG0yMSA9IC1tMjE7XG5cdFx0aWYgKG0yMiA8IDApXG5cdFx0XHRtMjIgPSAtbTIyO1xuXHRcdGlmIChtMjMgPCAwKVxuXHRcdFx0bTIzID0gLW0yMztcblx0XHRpZiAobTMxIDwgMClcblx0XHRcdG0zMSA9IC1tMzE7XG5cdFx0aWYgKG0zMiA8IDApXG5cdFx0XHRtMzIgPSAtbTMyO1xuXHRcdGlmIChtMzMgPCAwKVxuXHRcdFx0bTMzID0gLW0zMztcblx0XHR2YXIgaHg6bnVtYmVyID0gYWFiYi5faGFsZkV4dGVudHNYO1xuXHRcdHZhciBoeTpudW1iZXIgPSBhYWJiLl9oYWxmRXh0ZW50c1k7XG5cdFx0dmFyIGh6Om51bWJlciA9IGFhYmIuX2hhbGZFeHRlbnRzWjtcblx0XHR0aGlzLl9oYWxmRXh0ZW50c1ggPSBoeCptMTEgKyBoeSptMTIgKyBoeiptMTM7XG5cdFx0dGhpcy5faGFsZkV4dGVudHNZID0gaHgqbTIxICsgaHkqbTIyICsgaHoqbTIzO1xuXHRcdHRoaXMuX2hhbGZFeHRlbnRzWiA9IGh4Km0zMSArIGh5Km0zMiArIGh6Km0zMztcblxuXHRcdHRoaXMuX2FhYmIud2lkdGggPSB0aGlzLl9hYWJiLmhlaWdodCA9IHRoaXMuX2FhYmIuZGVwdGggPSB0aGlzLl9oYWxmRXh0ZW50c1gqMjtcblx0XHR0aGlzLl9hYWJiLnggPSB0aGlzLl9jZW50ZXJYIC0gdGhpcy5faGFsZkV4dGVudHNYO1xuXHRcdHRoaXMuX2FhYmIueSA9IHRoaXMuX2NlbnRlclkgKyB0aGlzLl9oYWxmRXh0ZW50c1k7XG5cdFx0dGhpcy5fYWFiYi56ID0gdGhpcy5fY2VudGVyWiAtIHRoaXMuX2hhbGZFeHRlbnRzWjtcblx0fVxufVxuXG5leHBvcnQgPSBBeGlzQWxpZ25lZEJvdW5kaW5nQm94OyJdfQ==