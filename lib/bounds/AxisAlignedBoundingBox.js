var __extends = this.__extends || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    __.prototype = b.prototype;
    d.prototype = new __();
};
var BoundingVolumeBase = require("awayjs-core/lib/bounds/BoundingVolumeBase");

var Matrix3DUtils = require("awayjs-core/lib/core/geom/Matrix3DUtils");
var PlaneClassification = require("awayjs-core/lib/core/geom/PlaneClassification");

var Vector3D = require("awayjs-core/lib/core/geom/Vector3D");

/**
* AxisAlignedBoundingBox represents a bounding box volume that has its planes aligned to the local coordinate axes of the bounded object.
* This is useful for most meshes.
*/
var AxisAlignedBoundingBox = (function (_super) {
    __extends(AxisAlignedBoundingBox, _super);
    /**
    * Creates a new <code>AxisAlignedBoundingBox</code> object.
    */
    function AxisAlignedBoundingBox() {
        _super.call(this);
        this._centerX = 0;
        this._centerY = 0;
        this._centerZ = 0;
        this._halfExtentsX = 0;
        this._halfExtentsY = 0;
        this._halfExtentsZ = 0;
    }
    /**
    * @inheritDoc
    */
    AxisAlignedBoundingBox.prototype.nullify = function () {
        _super.prototype.nullify.call(this);

        this._centerX = this._centerY = this._centerZ = 0;
        this._halfExtentsX = this._halfExtentsY = this._halfExtentsZ = 0;
    };

    /**
    * @inheritDoc
    */
    AxisAlignedBoundingBox.prototype.isInFrustum = function (planes, numPlanes) {
        for (var i = 0; i < numPlanes; ++i) {
            var plane = planes[i];
            var a = plane.a;
            var b = plane.b;
            var c = plane.c;
            var flippedExtentX = a < 0 ? -this._halfExtentsX : this._halfExtentsX;
            var flippedExtentY = b < 0 ? -this._halfExtentsY : this._halfExtentsY;
            var flippedExtentZ = c < 0 ? -this._halfExtentsZ : this._halfExtentsZ;
            var projDist = a * (this._centerX + flippedExtentX) + b * (this._centerY + flippedExtentY) + c * (this._centerZ + flippedExtentZ) - plane.d;

            if (projDist < 0)
                return false;
        }

        return true;
    };

    AxisAlignedBoundingBox.prototype.rayIntersection = function (position, direction, targetNormal) {
        if (this.containsPoint(position))
            return 0;

        var px = position.x - this._centerX;
        var py = position.y - this._centerY;
        var pz = position.z - this._centerZ;

        var vx = direction.x;
        var vy = direction.y;
        var vz = direction.z;

        var ix;
        var iy;
        var iz;
        var rayEntryDistance;

        // ray-plane tests
        var intersects;
        if (vx < 0) {
            rayEntryDistance = (this._halfExtentsX - px) / vx;
            if (rayEntryDistance > 0) {
                iy = py + rayEntryDistance * vy;
                iz = pz + rayEntryDistance * vz;
                if (iy > -this._halfExtentsY && iy < this._halfExtentsY && iz > -this._halfExtentsZ && iz < this._halfExtentsZ) {
                    targetNormal.x = 1;
                    targetNormal.y = 0;
                    targetNormal.z = 0;

                    intersects = true;
                }
            }
        }
        if (!intersects && vx > 0) {
            rayEntryDistance = (-this._halfExtentsX - px) / vx;
            if (rayEntryDistance > 0) {
                iy = py + rayEntryDistance * vy;
                iz = pz + rayEntryDistance * vz;
                if (iy > -this._halfExtentsY && iy < this._halfExtentsY && iz > -this._halfExtentsZ && iz < this._halfExtentsZ) {
                    targetNormal.x = -1;
                    targetNormal.y = 0;
                    targetNormal.z = 0;
                    intersects = true;
                }
            }
        }
        if (!intersects && vy < 0) {
            rayEntryDistance = (this._halfExtentsY - py) / vy;
            if (rayEntryDistance > 0) {
                ix = px + rayEntryDistance * vx;
                iz = pz + rayEntryDistance * vz;
                if (ix > -this._halfExtentsX && ix < this._halfExtentsX && iz > -this._halfExtentsZ && iz < this._halfExtentsZ) {
                    targetNormal.x = 0;
                    targetNormal.y = 1;
                    targetNormal.z = 0;
                    intersects = true;
                }
            }
        }
        if (!intersects && vy > 0) {
            rayEntryDistance = (-this._halfExtentsY - py) / vy;
            if (rayEntryDistance > 0) {
                ix = px + rayEntryDistance * vx;
                iz = pz + rayEntryDistance * vz;
                if (ix > -this._halfExtentsX && ix < this._halfExtentsX && iz > -this._halfExtentsZ && iz < this._halfExtentsZ) {
                    targetNormal.x = 0;
                    targetNormal.y = -1;
                    targetNormal.z = 0;
                    intersects = true;
                }
            }
        }
        if (!intersects && vz < 0) {
            rayEntryDistance = (this._halfExtentsZ - pz) / vz;
            if (rayEntryDistance > 0) {
                ix = px + rayEntryDistance * vx;
                iy = py + rayEntryDistance * vy;
                if (iy > -this._halfExtentsY && iy < this._halfExtentsY && ix > -this._halfExtentsX && ix < this._halfExtentsX) {
                    targetNormal.x = 0;
                    targetNormal.y = 0;
                    targetNormal.z = 1;
                    intersects = true;
                }
            }
        }
        if (!intersects && vz > 0) {
            rayEntryDistance = (-this._halfExtentsZ - pz) / vz;
            if (rayEntryDistance > 0) {
                ix = px + rayEntryDistance * vx;
                iy = py + rayEntryDistance * vy;
                if (iy > -this._halfExtentsY && iy < this._halfExtentsY && ix > -this._halfExtentsX && ix < this._halfExtentsX) {
                    targetNormal.x = 0;
                    targetNormal.y = 0;
                    targetNormal.z = -1;
                    intersects = true;
                }
            }
        }

        return intersects ? rayEntryDistance : -1;
    };

    /**
    * @inheritDoc
    */
    AxisAlignedBoundingBox.prototype.containsPoint = function (position) {
        var px = position.x - this._centerX, py = position.y - this._centerY, pz = position.z - this._centerZ;
        return px <= this._halfExtentsX && px >= -this._halfExtentsX && py <= this._halfExtentsY && py >= -this._halfExtentsY && pz <= this._halfExtentsZ && pz >= -this._halfExtentsZ;
    };

    /**
    * @inheritDoc
    */
    AxisAlignedBoundingBox.prototype.fromExtremes = function (minX, minY, minZ, maxX, maxY, maxZ) {
        this._centerX = (maxX + minX) * .5;
        this._centerY = (maxY + minY) * .5;
        this._centerZ = (maxZ + minZ) * .5;
        this._halfExtentsX = (maxX - minX) * .5;
        this._halfExtentsY = (maxY - minY) * .5;
        this._halfExtentsZ = (maxZ - minZ) * .5;

        _super.prototype.fromExtremes.call(this, minX, minY, minZ, maxX, maxY, maxZ);
    };

    /**
    * @inheritDoc
    */
    AxisAlignedBoundingBox.prototype.clone = function () {
        var clone = new AxisAlignedBoundingBox();
        clone.fromExtremes(this._aabb.x, this._aabb.y + this._aabb.height, this._aabb.z, this._aabb.x + this._aabb.width, this._aabb.y, this._aabb.z + this._aabb.depth);
        return clone;
    };

    Object.defineProperty(AxisAlignedBoundingBox.prototype, "halfExtentsX", {
        get: function () {
            return this._halfExtentsX;
        },
        enumerable: true,
        configurable: true
    });

    Object.defineProperty(AxisAlignedBoundingBox.prototype, "halfExtentsY", {
        get: function () {
            return this._halfExtentsY;
        },
        enumerable: true,
        configurable: true
    });

    Object.defineProperty(AxisAlignedBoundingBox.prototype, "halfExtentsZ", {
        get: function () {
            return this._halfExtentsZ;
        },
        enumerable: true,
        configurable: true
    });

    /**
    * Finds the closest point on the bounding volume to another given point. This can be used for maximum error calculations for content within a given bound.
    * @param point The point for which to find the closest point on the bounding volume
    * @param target An optional Vector3D to store the result to prevent creating a new object.
    * @return
    */
    AxisAlignedBoundingBox.prototype.closestPointToPoint = function (point, target) {
        if (typeof target === "undefined") { target = null; }
        var p;

        if (target == null)
            target = new Vector3D();

        p = point.x;
        if (p < this._aabb.x)
            p = this._aabb.x;
        if (p > this._aabb.x + this._aabb.width)
            p = this._aabb.x + this._aabb.width;
        target.x = p;

        p = point.y;
        if (p < this._aabb.y + this._aabb.height)
            p = this._aabb.y + this._aabb.height;
        if (p > this._aabb.y)
            p = this._aabb.y;
        target.y = p;

        p = point.z;
        if (p < this._aabb.z)
            p = this._aabb.z;
        if (p > this._aabb.z + this._aabb.depth)
            p = this._aabb.z + this._aabb.depth;
        target.z = p;

        return target;
    };

    AxisAlignedBoundingBox.prototype.pUpdateBoundingRenderable = function () {
        this._pBoundingEntity.transform.scale.x = Math.max(this._halfExtentsX * 2, 0.001);
        this._pBoundingEntity.transform.scale.y = Math.max(this._halfExtentsY * 2, 0.001);
        this._pBoundingEntity.transform.scale.z = Math.max(this._halfExtentsZ * 2, 0.001);
        this._pBoundingEntity.transform.position.x = this._centerX;
        this._pBoundingEntity.transform.position.y = this._centerY;
        this._pBoundingEntity.transform.position.z = this._centerZ;
    };

    AxisAlignedBoundingBox.prototype.pCreateBoundingEntity = function () {
        return null;
    };

    AxisAlignedBoundingBox.prototype.classifyToPlane = function (plane) {
        var a = plane.a;
        var b = plane.b;
        var c = plane.c;
        var centerDistance = a * this._centerX + b * this._centerY + c * this._centerZ - plane.d;

        if (a < 0)
            a = -a;

        if (b < 0)
            b = -b;

        if (c < 0)
            c = -c;

        var boundOffset = a * this._halfExtentsX + b * this._halfExtentsY + c * this._halfExtentsZ;

        return centerDistance > boundOffset ? PlaneClassification.FRONT : centerDistance < -boundOffset ? PlaneClassification.BACK : PlaneClassification.INTERSECT;
    };

    AxisAlignedBoundingBox.prototype.transformFrom = function (bounds, matrix) {
        var aabb = bounds;
        var cx = aabb._centerX;
        var cy = aabb._centerY;
        var cz = aabb._centerZ;
        var raw = Matrix3DUtils.RAW_DATA_CONTAINER;

        matrix.copyRawDataTo(raw);

        var m11 = raw[0], m12 = raw[4], m13 = raw[8], m14 = raw[12];
        var m21 = raw[1], m22 = raw[5], m23 = raw[9], m24 = raw[13];
        var m31 = raw[2], m32 = raw[6], m33 = raw[10], m34 = raw[14];

        this._centerX = cx * m11 + cy * m12 + cz * m13 + m14;
        this._centerY = cx * m21 + cy * m22 + cz * m23 + m24;
        this._centerZ = cx * m31 + cy * m32 + cz * m33 + m34;

        if (m11 < 0)
            m11 = -m11;
        if (m12 < 0)
            m12 = -m12;
        if (m13 < 0)
            m13 = -m13;
        if (m21 < 0)
            m21 = -m21;
        if (m22 < 0)
            m22 = -m22;
        if (m23 < 0)
            m23 = -m23;
        if (m31 < 0)
            m31 = -m31;
        if (m32 < 0)
            m32 = -m32;
        if (m33 < 0)
            m33 = -m33;
        var hx = aabb._halfExtentsX;
        var hy = aabb._halfExtentsY;
        var hz = aabb._halfExtentsZ;
        this._halfExtentsX = hx * m11 + hy * m12 + hz * m13;
        this._halfExtentsY = hx * m21 + hy * m22 + hz * m23;
        this._halfExtentsZ = hx * m31 + hy * m32 + hz * m33;

        this._aabb.width = this._aabb.height = this._aabb.depth = this._halfExtentsX * 2;
        this._aabb.x = this._centerX - this._halfExtentsX;
        this._aabb.y = this._centerY + this._halfExtentsY;
        this._aabb.z = this._centerZ - this._halfExtentsZ;
    };
    return AxisAlignedBoundingBox;
})(BoundingVolumeBase);

module.exports = AxisAlignedBoundingBox;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImJvdW5kcy9BeGlzQWxpZ25lZEJvdW5kaW5nQm94LnRzIl0sIm5hbWVzIjpbIkF4aXNBbGlnbmVkQm91bmRpbmdCb3giLCJBeGlzQWxpZ25lZEJvdW5kaW5nQm94LmNvbnN0cnVjdG9yIiwiQXhpc0FsaWduZWRCb3VuZGluZ0JveC5udWxsaWZ5IiwiQXhpc0FsaWduZWRCb3VuZGluZ0JveC5pc0luRnJ1c3R1bSIsIkF4aXNBbGlnbmVkQm91bmRpbmdCb3gucmF5SW50ZXJzZWN0aW9uIiwiQXhpc0FsaWduZWRCb3VuZGluZ0JveC5jb250YWluc1BvaW50IiwiQXhpc0FsaWduZWRCb3VuZGluZ0JveC5mcm9tRXh0cmVtZXMiLCJBeGlzQWxpZ25lZEJvdW5kaW5nQm94LmNsb25lIiwiQXhpc0FsaWduZWRCb3VuZGluZ0JveC5jbG9zZXN0UG9pbnRUb1BvaW50IiwiQXhpc0FsaWduZWRCb3VuZGluZ0JveC5wVXBkYXRlQm91bmRpbmdSZW5kZXJhYmxlIiwiQXhpc0FsaWduZWRCb3VuZGluZ0JveC5wQ3JlYXRlQm91bmRpbmdFbnRpdHkiLCJBeGlzQWxpZ25lZEJvdW5kaW5nQm94LmNsYXNzaWZ5VG9QbGFuZSIsIkF4aXNBbGlnbmVkQm91bmRpbmdCb3gudHJhbnNmb3JtRnJvbSJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUEsNkVBQW1GOztBQUVuRixzRUFBNkU7QUFDN0Usa0ZBQXdGOztBQUV4Riw0REFBcUU7O0FBR3JFOzs7RUFHRztBQUNIO0lBQXFDQSx5Q0FBa0JBO0lBWXREQTs7TUFER0E7SUFDSEE7UUFFQ0MsV0FBTUEsS0FBQUEsQ0FBQ0E7UUFaUkEsS0FBUUEsUUFBUUEsR0FBVUEsQ0FBQ0EsQ0FBQ0E7UUFDNUJBLEtBQVFBLFFBQVFBLEdBQVVBLENBQUNBLENBQUNBO1FBQzVCQSxLQUFRQSxRQUFRQSxHQUFVQSxDQUFDQSxDQUFDQTtRQUM1QkEsS0FBUUEsYUFBYUEsR0FBVUEsQ0FBQ0EsQ0FBQ0E7UUFDakNBLEtBQVFBLGFBQWFBLEdBQVVBLENBQUNB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Q0FBQ0EsQ0FBQ0E7WUFDbkJBLENBQUNBLEdBQUdBLElBQUlBLENBQUNBLEtBQUtBLENBQUNBLENBQUNBLENBQUNBO1FBQ2xCQSxNQUFNQSxDQUFDQSxDQUFDQSxHQUFHQSxDQUFDQTs7UUFFWkEsQ0FBQ0EsR0FBR0EsS0FBS0EsQ0FBQ0EsQ0FBQ0E7UUFDWEEsSUFBSUEsQ0FBQ0EsR0FBR0EsSUFBSUEsQ0FBQ0EsS0FBS0EsQ0FBQ0EsQ0FBQ0E7WUFDbkJBLENBQUNBLEdBQUdBLElBQUlBLENBQUNBLEtBQUtBLENBQUNBLENBQUNBLENBQUNBO1FBQ2xCQSxJQUFJQSxDQUFDQSxHQUFHQSxJQUFJQSxDQUFDQSxLQUFLQSxDQUFDQSxDQUFDQSxHQUFHQSxJQUFJQSxDQUFDQSxLQUFLQSxDQUFDQSxLQUFLQTtZQUN0Q0EsQ0FBQ0EsR0FBR0EsSUFBSUEsQ0FBQ0EsS0FBS0EsQ0FBQ0EsQ0FBQ0EsR0FBR0EsSUFBSUEsQ0FBQ0EsS0FBS0EsQ0FBQ0EsS0FBS0EsQ0FBQ0E7UUFDckNBLE1BQU1BLENBQUNBLENBQUNBLEdBQUdBLENBQUNBOztRQUVaQSxPQUFPQSxNQUFNQTtJQUNkQSxDQUFDQTs7SUFFRFIsNkRBQUFBO1FBRUNTLElBQUlBLENBQUNBLGdCQUFnQkEsQ0FBQ0EsU0FBU0EsQ0FBQ0EsS0FBS0EsQ0FBQ0EsQ0FBQ0EsR0FBR0EsSUFBSUEsQ0FBQ0EsR0FBR0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EsYUFBYUEsR0FBQ0EsQ0FBQ0EsRUFBRUEsS0FBS0EsQ0FBQ0E7UUFDL0VBLElBQUlBLENBQUNBLGdCQUFnQkEsQ0FBQ0EsU0FBU0EsQ0FBQ0EsS0FBS0EsQ0FBQ0EsQ0FBQ0EsR0FBR0EsSUFBSUEsQ0FBQ0EsR0FBR0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EsYUFBYUEsR0FBQ0EsQ0FBQ0EsRUFBRUEsS0FBS0EsQ0FBQ0E7UUFDL0VBLElBQUlBLENBQUNBLGdCQUFnQkEsQ0FBQ0EsU0FBU0EsQ0FBQ0EsS0FBS0EsQ0FBQ0EsQ0FBQ0EsR0FBR0EsSUFBSUEsQ0FBQ0EsR0FBR0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EsYUFBYUEsR0FBQ0EsQ0FBQ0EsRUFBRUEsS0FBS0EsQ0FBQ0E7UUFDL0VBLElBQUlBLENBQUNBLGdCQUFnQkEsQ0FBQ0EsU0FBU0EsQ0FBQ0EsUUFBUUEsQ0FBQ0EsQ0FBQ0EsR0FBR0EsSUFBSUEsQ0FBQ0EsUUFBUUE7UUFDMURBLElBQUlBLENBQUNBLGdCQUFnQkEsQ0FBQ0EsU0FBU0EsQ0FBQ0EsUUFBUUEsQ0FBQ0EsQ0FBQ0EsR0FBR0EsSUFBSUEsQ0FBQ0EsUUFBUUE7UUFDMURBLElBQUlBLENBQUNBLGdCQUFnQkEsQ0FBQ0EsU0FBU0EsQ0FBQ0EsUUFBUUEsQ0FBQ0EsQ0FBQ0EsR0FBR0EsSUFBSUEsQ0FBQ0EsUUFBUUE7SUFDM0RBLENBQUNBOztJQUVEVCx5REFBQUE7UUFFQ1UsT0FBT0EsSUFBSUE7SUFDWkEsQ0FBQ0E7O0lBRURWLG1EQUFBQSxVQUF1QkEsS0FBYUE7UUFFbkNXLElBQUlBLENBQUNBLEdBQVVBLEtBQUtBLENBQUNBLENBQUNBO1FBQ3RCQSxJQUFJQSxDQUFDQSxHQUFVQSxLQUFLQSxDQUFDQSxDQUFDQTtRQUN0QkEsSUFBSUEsQ0FBQ0EsR0FBVUEsS0FBS0EsQ0FBQ0EsQ0FBQ0E7UUFDdEJBLElBQUlBLGNBQWNBLEdBQVVBLENBQUNBLEdBQUNBLElBQUlBLENBQUNBLFFBQVFBLEdBQUdBLENBQUNBLEdBQUNBLElBQUlBLENBQUNBLFFBQVFBLEdBQUdBLENBQUNBLEdBQUNBLElBQUlBLENBQUNBLFFBQVFBLEdBQUdBLEtBQUtBLENBQUNBLENBQUNBOztRQUV6RkEsSUFBSUEsQ0FBQ0EsR0FBR0EsQ0FBQ0E7WUFDUkEsQ0FBQ0EsR0FBR0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7O1FBRVJBLElBQUlBLENBQUNBLEdBQUdBLENBQUNBO1lBQ1JBLENBQUNBLEdBQUdBLENBQUNBLENBQUNBLENBQUNBOztRQUVSQSxJQUFJQSxDQUFDQSxHQUFHQSxDQUFDQTtZQUNSQSxDQUFDQSxHQUFHQSxDQUFDQSxDQUFDQSxDQUFDQTs7UUFFUkEsSUFBSUEsV0FBV0EsR0FBVUEsQ0FBQ0EsR0FBQ0EsSUFBSUEsQ0FBQ0EsYUFBYUEsR0FBR0EsQ0FBQ0EsR0FBQ0EsSUFBSUEsQ0FBQ0EsYUFBYUEsR0FBR0EsQ0FBQ0EsR0FBQ0EsSUFBSUEsQ0FBQ0EsYUFBYUE7O1FBRTNGQSxPQUFPQSxjQUFjQSxHQUFHQSxXQUFXQSxHQUFFQSxtQkFBbUJBLENBQUNBLEtBQUtBLEdBQUdBLGNBQWNBLEdBQUdBLENBQUNBLFdBQVdBLEdBQUVBLG1CQUFtQkEsQ0FBQ0EsSUFBSUEsR0FBR0EsbUJBQW1CQSxDQUFDQSxTQUFTQTtJQUN6SkEsQ0FBQ0E7O0lBRURYLGlEQUFBQSxVQUFxQkEsTUFBeUJBLEVBQUVBLE1BQWVBO1FBRTlEWSxJQUFJQSxJQUFJQSxHQUFtREEsTUFBTUE7UUFDakVBLElBQUlBLEVBQUVBLEdBQVVBLElBQUlBLENBQUNBLFFBQVFBO1FBQzdCQSxJQUFJQSxFQUFFQSxHQUFVQSxJQUFJQSxDQUFDQSxRQUFRQTtRQUM3QkEsSUFBSUEsRUFBRUEsR0FBVUEsSUFBSUEsQ0FBQ0EsUUFBUUE7UUFDN0JBLElBQUlBLEdBQUdBLEdBQVlBLGFBQWFBLENBQUNBLGtCQUFrQkE7O1FBRW5EQSxNQUFNQSxDQUFDQSxhQUFhQSxDQUFDQSxHQUFHQSxDQUFDQTs7UUFFekJBLElBQUlBLEdBQUdBLEdBQVVBLEdBQUdBLENBQUNBLENBQUNBLENBQUNBLEVBQUVBLEdBQUdBLEdBQVVBLEdBQUdBLENBQUNBLENBQUNBLENBQUNBLEVBQUVBLEdBQUdBLEdBQVVBLEdBQUdBLENBQUNBLENBQUNBLENBQUNBLEVBQUVBLEdBQUdBLEdBQVVBLEdBQUdBLENBQUNBLEVBQUVBLENBQUNBO1FBQ3ZGQSxJQUFJQSxHQUFHQSxHQUFVQSxHQUFHQSxDQUFDQSxDQUFDQSxDQUFDQSxFQUFFQSxHQUFHQSxHQUFVQSxHQUFHQSxDQUFDQSxDQUFDQSxDQUFDQSxFQUFFQSxHQUFHQSxHQUFVQSxHQUFHQSxDQUFDQSxDQUFDQSxDQUFDQSxFQUFFQSxHQUFHQSxHQUFVQSxHQUFHQSxDQUFDQSxFQUFFQSxDQUFDQTtRQUN2RkEsSUFBSUEsR0FBR0EsR0FBVUEsR0FBR0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsRUFBRUEsR0FBR0EsR0FBVUEsR0FBR0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsRUFBRUEsR0FBR0EsR0FBVUEsR0FBR0EsQ0FBQ0EsRUFBRUEsQ0FBQ0EsRUFBRUEsR0FBR0EsR0FBVUEsR0FBR0EsQ0FBQ0EsRUFBRUEsQ0FBQ0E7O1FBRXhGQSxJQUFJQSxDQUFDQSxRQUFRQSxHQUFHQSxFQUFFQSxHQUFDQSxHQUFHQSxHQUFHQSxFQUFFQSxHQUFDQSxHQUFHQSxHQUFHQSxFQUFFQSxHQUFDQSxHQUFHQSxHQUFHQSxHQUFHQTtRQUM5Q0EsSUFBSUEsQ0FBQ0EsUUFBUUEsR0FBR0EsRUFBRUEsR0FBQ0EsR0FBR0EsR0FBR0EsRUFBRUEsR0FBQ0EsR0FBR0EsR0FBR0EsRUFBRUEsR0FBQ0EsR0FBR0EsR0FBR0EsR0FBR0E7UUFDOUNBLElBQUlBLENBQUNBLFFBQVFBLEdBQUdBLEVBQUVBLEdBQUNBLEdBQUdBLEdBQUdBLEVBQUVBLEdBQUNBLEdBQUdBLEdBQUdBLEVBQUVBLEdBQUNBLEdBQUdBLEdBQUdBLEdBQUdBOztRQUU5Q0EsSUFBSUEsR0FBR0EsR0FBR0EsQ0FBQ0E7WUFDVkEsR0FBR0EsR0FBR0EsQ0FBQ0EsR0FBR0EsQ0FBQ0E7UUFDWkEsSUFBSUEsR0FBR0EsR0FBR0EsQ0FBQ0E7WUFDVkEsR0FBR0EsR0FBR0EsQ0FBQ0EsR0FBR0EsQ0FBQ0E7UUFDWkEsSUFBSUEsR0FBR0EsR0FBR0EsQ0FBQ0E7WUFDVkEsR0FBR0EsR0FBR0EsQ0FBQ0EsR0FBR0EsQ0FBQ0E7UUFDWkEsSUFBSUEsR0FBR0EsR0FBR0EsQ0FBQ0E7WUFDVkEsR0FBR0EsR0FBR0EsQ0FBQ0EsR0FBR0EsQ0FBQ0E7UUFDWkEsSUFBSUEsR0FBR0EsR0FBR0EsQ0FBQ0E7WUFDVkEsR0FBR0EsR0FBR0EsQ0FBQ0EsR0FBR0EsQ0FBQ0E7UUFDWkEsSUFBSUEsR0FBR0EsR0FBR0EsQ0FBQ0E7WUFDVkEsR0FBR0EsR0FBR0EsQ0FBQ0EsR0FBR0EsQ0FBQ0E7UUFDWkEsSUFBSUEsR0FBR0EsR0FBR0EsQ0FBQ0E7WUFDVkEsR0FBR0EsR0FBR0EsQ0FBQ0EsR0FBR0EsQ0FBQ0E7UUFDWkEsSUFBSUEsR0FBR0EsR0FBR0EsQ0FBQ0E7WUFDVkEsR0FBR0EsR0FBR0EsQ0FBQ0EsR0FBR0EsQ0FBQ0E7UUFDWkEsSUFBSUEsR0FBR0EsR0FBR0EsQ0FBQ0E7WUFDVkEsR0FBR0EsR0FBR0EsQ0FBQ0EsR0FBR0EsQ0FBQ0E7UUFDWkEsSUFBSUEsRUFBRUEsR0FBVUEsSUFBSUEsQ0FBQ0EsYUFBYUE7UUFDbENBLElBQUlBLEVBQUVBLEdBQVVBLElBQUlBLENBQUNBLGFBQWFBO1FBQ2xDQSxJQUFJQSxFQUFFQSxHQUFVQSxJQUFJQSxDQUFDQSxhQUFhQTtRQUNsQ0EsSUFBSUEsQ0FBQ0EsYUFBYUEsR0FBR0EsRUFBRUEsR0FBQ0EsR0FBR0EsR0FBR0EsRUFBRUEsR0FBQ0EsR0FBR0EsR0FBR0EsRUFBRUEsR0FBQ0EsR0FBR0E7UUFDN0NBLElBQUlBLENBQUNBLGFBQWFBLEdBQUdBLEVBQUVBLEdBQUNBLEdBQUdBLEdBQUdBLEVBQUVBLEdBQUNBLEdBQUdBLEdBQUdBLEVBQUVBLEdBQUNBLEdBQUdBO1FBQzdDQSxJQUFJQSxDQUFDQSxhQUFhQSxHQUFHQSxFQUFFQSxHQUFDQSxHQUFHQSxHQUFHQSxFQUFFQSxHQUFDQSxHQUFHQSxHQUFHQSxFQUFFQSxHQUFDQSxHQUFHQTs7UUFFN0NBLElBQUlBLENBQUNBLEtBQUtBLENBQUNBLEtBQUtBLEdBQUdBLElBQUlBLENBQUNBLEtBQUtBLENBQUNBLE1BQU1BLEdBQUdBLElBQUlBLENBQUNBLEtBQUtBLENBQUNBLEtBQUtBLEdBQUdBLElBQUlBLENBQUNBLGFBQWFBLEdBQUNBLENBQUNBO1FBQzlFQSxJQUFJQSxDQUFDQSxLQUFLQSxDQUFDQSxDQUFDQSxHQUFHQSxJQUFJQSxDQUFDQSxRQUFRQSxHQUFHQSxJQUFJQSxDQUFDQSxhQUFhQTtRQUNqREEsSUFBSUEsQ0FBQ0EsS0FBS0EsQ0FBQ0EsQ0FBQ0EsR0FBR0EsSUFBSUEsQ0FBQ0EsUUFBUUEsR0FBR0EsSUFBSUEsQ0FBQ0EsYUFBYUE7UUFDakRBLElBQUlBLENBQUNBLEtBQUtBLENBQUNBLENBQUNBLEdBQUdBLElBQUlBLENBQUNBLFFBQVFBLEdBQUdBLElBQUlBLENBQUNBLGFBQWFBO0lBQ2xEQSxDQUFDQTtJQUNGWiw4QkFBQ0E7QUFBREEsQ0FBQ0EsRUF2VW9DLGtCQUFrQixFQXVVdEQ7O0FBRUQsdUNBQWdDLENBQUEiLCJmaWxlIjoiYm91bmRzL0F4aXNBbGlnbmVkQm91bmRpbmdCb3guanMiLCJzb3VyY2VSb290IjoiL1VzZXJzL3JvYmJhdGVtYW4vV2Vic3Rvcm1Qcm9qZWN0cy9hd2F5anMtY29yZS8iLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgQm91bmRpbmdWb2x1bWVCYXNlXHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLWNvcmUvbGliL2JvdW5kcy9Cb3VuZGluZ1ZvbHVtZUJhc2VcIik7XG5pbXBvcnQgTWF0cml4M0RcdFx0XHRcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtY29yZS9saWIvY29yZS9nZW9tL01hdHJpeDNEXCIpO1xuaW1wb3J0IE1hdHJpeDNEVXRpbHNcdFx0XHRcdD0gcmVxdWlyZShcImF3YXlqcy1jb3JlL2xpYi9jb3JlL2dlb20vTWF0cml4M0RVdGlsc1wiKTtcbmltcG9ydCBQbGFuZUNsYXNzaWZpY2F0aW9uXHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLWNvcmUvbGliL2NvcmUvZ2VvbS9QbGFuZUNsYXNzaWZpY2F0aW9uXCIpO1xuaW1wb3J0IFBsYW5lM0RcdFx0XHRcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtY29yZS9saWIvY29yZS9nZW9tL1BsYW5lM0RcIik7XG5pbXBvcnQgVmVjdG9yM0RcdFx0XHRcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtY29yZS9saWIvY29yZS9nZW9tL1ZlY3RvcjNEXCIpO1xuaW1wb3J0IElFbnRpdHlcdFx0XHRcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtY29yZS9saWIvZW50aXRpZXMvSUVudGl0eVwiKTtcblxuLyoqXG4gKiBBeGlzQWxpZ25lZEJvdW5kaW5nQm94IHJlcHJlc2VudHMgYSBib3VuZGluZyBib3ggdm9sdW1lIHRoYXQgaGFzIGl0cyBwbGFuZXMgYWxpZ25lZCB0byB0aGUgbG9jYWwgY29vcmRpbmF0ZSBheGVzIG9mIHRoZSBib3VuZGVkIG9iamVjdC5cbiAqIFRoaXMgaXMgdXNlZnVsIGZvciBtb3N0IG1lc2hlcy5cbiAqL1xuY2xhc3MgQXhpc0FsaWduZWRCb3VuZGluZ0JveCBleHRlbmRzIEJvdW5kaW5nVm9sdW1lQmFzZVxue1xuXHRwcml2YXRlIF9jZW50ZXJYOm51bWJlciA9IDA7XG5cdHByaXZhdGUgX2NlbnRlclk6bnVtYmVyID0gMDtcblx0cHJpdmF0ZSBfY2VudGVyWjpudW1iZXIgPSAwO1xuXHRwcml2YXRlIF9oYWxmRXh0ZW50c1g6bnVtYmVyID0gMDtcblx0cHJpdmF0ZSBfaGFsZkV4dGVudHNZOm51bWJlciA9IDA7XG5cdHByaXZhdGUgX2hhbGZFeHRlbnRzWjpudW1iZXIgPSAwO1xuXG5cdC8qKlxuXHQgKiBDcmVhdGVzIGEgbmV3IDxjb2RlPkF4aXNBbGlnbmVkQm91bmRpbmdCb3g8L2NvZGU+IG9iamVjdC5cblx0ICovXG5cdGNvbnN0cnVjdG9yKClcblx0e1xuXHRcdHN1cGVyKCk7XG5cdH1cblxuXHQvKipcblx0ICogQGluaGVyaXREb2Ncblx0ICovXG5cdHB1YmxpYyBudWxsaWZ5KClcblx0e1xuXHRcdHN1cGVyLm51bGxpZnkoKTtcblxuXHRcdHRoaXMuX2NlbnRlclggPSB0aGlzLl9jZW50ZXJZID0gdGhpcy5fY2VudGVyWiA9IDA7XG5cdFx0dGhpcy5faGFsZkV4dGVudHNYID0gdGhpcy5faGFsZkV4dGVudHNZID0gdGhpcy5faGFsZkV4dGVudHNaID0gMDtcblx0fVxuXG5cdC8qKlxuXHQgKiBAaW5oZXJpdERvY1xuXHQgKi9cblx0cHVibGljIGlzSW5GcnVzdHVtKHBsYW5lczpBcnJheTxQbGFuZTNEPiwgbnVtUGxhbmVzOm51bWJlcik6Ym9vbGVhblxuXHR7XG5cdFx0Zm9yICh2YXIgaTpudW1iZXIgPSAwOyBpIDwgbnVtUGxhbmVzOyArK2kpIHtcblxuXHRcdFx0dmFyIHBsYW5lOlBsYW5lM0QgPSBwbGFuZXNbaV07XG5cdFx0XHR2YXIgYTpudW1iZXIgPSBwbGFuZS5hO1xuXHRcdFx0dmFyIGI6bnVtYmVyID0gcGxhbmUuYjtcblx0XHRcdHZhciBjOm51bWJlciA9IHBsYW5lLmM7XG5cdFx0XHR2YXIgZmxpcHBlZEV4dGVudFg6bnVtYmVyID0gYSA8IDA/IC10aGlzLl9oYWxmRXh0ZW50c1ggOiB0aGlzLl9oYWxmRXh0ZW50c1g7XG5cdFx0XHR2YXIgZmxpcHBlZEV4dGVudFk6bnVtYmVyID0gYiA8IDA/IC10aGlzLl9oYWxmRXh0ZW50c1kgOiB0aGlzLl9oYWxmRXh0ZW50c1k7XG5cdFx0XHR2YXIgZmxpcHBlZEV4dGVudFo6bnVtYmVyID0gYyA8IDA/IC10aGlzLl9oYWxmRXh0ZW50c1ogOiB0aGlzLl9oYWxmRXh0ZW50c1o7XG5cdFx0XHR2YXIgcHJvakRpc3Q6bnVtYmVyID0gYSoodGhpcy5fY2VudGVyWCArIGZsaXBwZWRFeHRlbnRYKSArIGIqKHRoaXMuX2NlbnRlclkgKyBmbGlwcGVkRXh0ZW50WSkgKyBjKih0aGlzLl9jZW50ZXJaICsgZmxpcHBlZEV4dGVudFopIC0gcGxhbmUuZDtcblxuXHRcdFx0aWYgKHByb2pEaXN0IDwgMClcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblxuXHRcdHJldHVybiB0cnVlO1xuXHR9XG5cblx0cHVibGljIHJheUludGVyc2VjdGlvbihwb3NpdGlvbjpWZWN0b3IzRCwgZGlyZWN0aW9uOlZlY3RvcjNELCB0YXJnZXROb3JtYWw6VmVjdG9yM0QpOm51bWJlclxuXHR7XG5cblx0XHRpZiAodGhpcy5jb250YWluc1BvaW50KHBvc2l0aW9uKSlcblx0XHRcdHJldHVybiAwO1xuXG5cdFx0dmFyIHB4Om51bWJlciA9IHBvc2l0aW9uLnggLSB0aGlzLl9jZW50ZXJYXG5cdFx0dmFyIHB5Om51bWJlciA9IHBvc2l0aW9uLnkgLSB0aGlzLl9jZW50ZXJZXG5cdFx0dmFyIHB6Om51bWJlciA9IHBvc2l0aW9uLnogLSB0aGlzLl9jZW50ZXJaO1xuXG5cdFx0dmFyIHZ4Om51bWJlciA9IGRpcmVjdGlvbi54XG5cdFx0dmFyIHZ5Om51bWJlciA9IGRpcmVjdGlvbi55XG5cdFx0dmFyIHZ6Om51bWJlciA9IGRpcmVjdGlvbi56O1xuXG5cdFx0dmFyIGl4Om51bWJlcjtcblx0XHR2YXIgaXk6bnVtYmVyO1xuXHRcdHZhciBpejpudW1iZXI7XG5cdFx0dmFyIHJheUVudHJ5RGlzdGFuY2U6bnVtYmVyO1xuXG5cdFx0Ly8gcmF5LXBsYW5lIHRlc3RzXG5cdFx0dmFyIGludGVyc2VjdHM6Ym9vbGVhbjtcblx0XHRpZiAodnggPCAwKSB7XG5cdFx0XHRyYXlFbnRyeURpc3RhbmNlID0gKCB0aGlzLl9oYWxmRXh0ZW50c1ggLSBweCApL3Z4O1xuXHRcdFx0aWYgKHJheUVudHJ5RGlzdGFuY2UgPiAwKSB7XG5cdFx0XHRcdGl5ID0gcHkgKyByYXlFbnRyeURpc3RhbmNlKnZ5O1xuXHRcdFx0XHRpeiA9IHB6ICsgcmF5RW50cnlEaXN0YW5jZSp2ejtcblx0XHRcdFx0aWYgKGl5ID4gLXRoaXMuX2hhbGZFeHRlbnRzWSAmJiBpeSA8IHRoaXMuX2hhbGZFeHRlbnRzWSAmJiBpeiA+IC10aGlzLl9oYWxmRXh0ZW50c1ogJiYgaXogPCB0aGlzLl9oYWxmRXh0ZW50c1opIHtcblx0XHRcdFx0XHR0YXJnZXROb3JtYWwueCA9IDE7XG5cdFx0XHRcdFx0dGFyZ2V0Tm9ybWFsLnkgPSAwO1xuXHRcdFx0XHRcdHRhcmdldE5vcm1hbC56ID0gMDtcblxuXHRcdFx0XHRcdGludGVyc2VjdHMgPSB0cnVlO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGlmICghaW50ZXJzZWN0cyAmJiB2eCA+IDApIHtcblx0XHRcdHJheUVudHJ5RGlzdGFuY2UgPSAoIC10aGlzLl9oYWxmRXh0ZW50c1ggLSBweCApL3Z4O1xuXHRcdFx0aWYgKHJheUVudHJ5RGlzdGFuY2UgPiAwKSB7XG5cdFx0XHRcdGl5ID0gcHkgKyByYXlFbnRyeURpc3RhbmNlKnZ5O1xuXHRcdFx0XHRpeiA9IHB6ICsgcmF5RW50cnlEaXN0YW5jZSp2ejtcblx0XHRcdFx0aWYgKGl5ID4gLXRoaXMuX2hhbGZFeHRlbnRzWSAmJiBpeSA8IHRoaXMuX2hhbGZFeHRlbnRzWSAmJiBpeiA+IC10aGlzLl9oYWxmRXh0ZW50c1ogJiYgaXogPCB0aGlzLl9oYWxmRXh0ZW50c1opIHtcblx0XHRcdFx0XHR0YXJnZXROb3JtYWwueCA9IC0xO1xuXHRcdFx0XHRcdHRhcmdldE5vcm1hbC55ID0gMDtcblx0XHRcdFx0XHR0YXJnZXROb3JtYWwueiA9IDA7XG5cdFx0XHRcdFx0aW50ZXJzZWN0cyA9IHRydWU7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdFx0aWYgKCFpbnRlcnNlY3RzICYmIHZ5IDwgMCkge1xuXHRcdFx0cmF5RW50cnlEaXN0YW5jZSA9ICggdGhpcy5faGFsZkV4dGVudHNZIC0gcHkgKS92eTtcblx0XHRcdGlmIChyYXlFbnRyeURpc3RhbmNlID4gMCkge1xuXHRcdFx0XHRpeCA9IHB4ICsgcmF5RW50cnlEaXN0YW5jZSp2eDtcblx0XHRcdFx0aXogPSBweiArIHJheUVudHJ5RGlzdGFuY2Uqdno7XG5cdFx0XHRcdGlmIChpeCA+IC10aGlzLl9oYWxmRXh0ZW50c1ggJiYgaXggPCB0aGlzLl9oYWxmRXh0ZW50c1ggJiYgaXogPiAtdGhpcy5faGFsZkV4dGVudHNaICYmIGl6IDwgdGhpcy5faGFsZkV4dGVudHNaKSB7XG5cdFx0XHRcdFx0dGFyZ2V0Tm9ybWFsLnggPSAwO1xuXHRcdFx0XHRcdHRhcmdldE5vcm1hbC55ID0gMTtcblx0XHRcdFx0XHR0YXJnZXROb3JtYWwueiA9IDA7XG5cdFx0XHRcdFx0aW50ZXJzZWN0cyA9IHRydWU7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdFx0aWYgKCFpbnRlcnNlY3RzICYmIHZ5ID4gMCkge1xuXHRcdFx0cmF5RW50cnlEaXN0YW5jZSA9ICggLXRoaXMuX2hhbGZFeHRlbnRzWSAtIHB5ICkvdnk7XG5cdFx0XHRpZiAocmF5RW50cnlEaXN0YW5jZSA+IDApIHtcblx0XHRcdFx0aXggPSBweCArIHJheUVudHJ5RGlzdGFuY2Uqdng7XG5cdFx0XHRcdGl6ID0gcHogKyByYXlFbnRyeURpc3RhbmNlKnZ6O1xuXHRcdFx0XHRpZiAoaXggPiAtdGhpcy5faGFsZkV4dGVudHNYICYmIGl4IDwgdGhpcy5faGFsZkV4dGVudHNYICYmIGl6ID4gLXRoaXMuX2hhbGZFeHRlbnRzWiAmJiBpeiA8IHRoaXMuX2hhbGZFeHRlbnRzWikge1xuXHRcdFx0XHRcdHRhcmdldE5vcm1hbC54ID0gMDtcblx0XHRcdFx0XHR0YXJnZXROb3JtYWwueSA9IC0xO1xuXHRcdFx0XHRcdHRhcmdldE5vcm1hbC56ID0gMDtcblx0XHRcdFx0XHRpbnRlcnNlY3RzID0gdHJ1ZTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0XHRpZiAoIWludGVyc2VjdHMgJiYgdnogPCAwKSB7XG5cdFx0XHRyYXlFbnRyeURpc3RhbmNlID0gKCB0aGlzLl9oYWxmRXh0ZW50c1ogLSBweiApL3Z6O1xuXHRcdFx0aWYgKHJheUVudHJ5RGlzdGFuY2UgPiAwKSB7XG5cdFx0XHRcdGl4ID0gcHggKyByYXlFbnRyeURpc3RhbmNlKnZ4O1xuXHRcdFx0XHRpeSA9IHB5ICsgcmF5RW50cnlEaXN0YW5jZSp2eTtcblx0XHRcdFx0aWYgKGl5ID4gLXRoaXMuX2hhbGZFeHRlbnRzWSAmJiBpeSA8IHRoaXMuX2hhbGZFeHRlbnRzWSAmJiBpeCA+IC10aGlzLl9oYWxmRXh0ZW50c1ggJiYgaXggPCB0aGlzLl9oYWxmRXh0ZW50c1gpIHtcblx0XHRcdFx0XHR0YXJnZXROb3JtYWwueCA9IDA7XG5cdFx0XHRcdFx0dGFyZ2V0Tm9ybWFsLnkgPSAwO1xuXHRcdFx0XHRcdHRhcmdldE5vcm1hbC56ID0gMTtcblx0XHRcdFx0XHRpbnRlcnNlY3RzID0gdHJ1ZTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0XHRpZiAoIWludGVyc2VjdHMgJiYgdnogPiAwKSB7XG5cdFx0XHRyYXlFbnRyeURpc3RhbmNlID0gKCAtdGhpcy5faGFsZkV4dGVudHNaIC0gcHogKS92ejtcblx0XHRcdGlmIChyYXlFbnRyeURpc3RhbmNlID4gMCkge1xuXHRcdFx0XHRpeCA9IHB4ICsgcmF5RW50cnlEaXN0YW5jZSp2eDtcblx0XHRcdFx0aXkgPSBweSArIHJheUVudHJ5RGlzdGFuY2Uqdnk7XG5cdFx0XHRcdGlmIChpeSA+IC10aGlzLl9oYWxmRXh0ZW50c1kgJiYgaXkgPCB0aGlzLl9oYWxmRXh0ZW50c1kgJiYgaXggPiAtdGhpcy5faGFsZkV4dGVudHNYICYmIGl4IDwgdGhpcy5faGFsZkV4dGVudHNYKSB7XG5cdFx0XHRcdFx0dGFyZ2V0Tm9ybWFsLnggPSAwO1xuXHRcdFx0XHRcdHRhcmdldE5vcm1hbC55ID0gMDtcblx0XHRcdFx0XHR0YXJnZXROb3JtYWwueiA9IC0xO1xuXHRcdFx0XHRcdGludGVyc2VjdHMgPSB0cnVlO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGludGVyc2VjdHM/IHJheUVudHJ5RGlzdGFuY2UgOiAtMTtcblx0fVxuXG5cdC8qKlxuXHQgKiBAaW5oZXJpdERvY1xuXHQgKi9cblx0cHVibGljIGNvbnRhaW5zUG9pbnQocG9zaXRpb246VmVjdG9yM0QpOmJvb2xlYW5cblx0e1xuXHRcdHZhciBweDpudW1iZXIgPSBwb3NpdGlvbi54IC0gdGhpcy5fY2VudGVyWCwgcHk6bnVtYmVyID0gcG9zaXRpb24ueSAtIHRoaXMuX2NlbnRlclksIHB6Om51bWJlciA9IHBvc2l0aW9uLnogLSB0aGlzLl9jZW50ZXJaO1xuXHRcdHJldHVybiBweCA8PSB0aGlzLl9oYWxmRXh0ZW50c1ggJiYgcHggPj0gLXRoaXMuX2hhbGZFeHRlbnRzWCAmJiBweSA8PSB0aGlzLl9oYWxmRXh0ZW50c1kgJiYgcHkgPj0gLXRoaXMuX2hhbGZFeHRlbnRzWSAmJiBweiA8PSB0aGlzLl9oYWxmRXh0ZW50c1ogJiYgcHogPj0gLXRoaXMuX2hhbGZFeHRlbnRzWjtcblx0fVxuXG5cdC8qKlxuXHQgKiBAaW5oZXJpdERvY1xuXHQgKi9cblx0cHVibGljIGZyb21FeHRyZW1lcyhtaW5YOm51bWJlciwgbWluWTpudW1iZXIsIG1pblo6bnVtYmVyLCBtYXhYOm51bWJlciwgbWF4WTpudW1iZXIsIG1heFo6bnVtYmVyKVxuXHR7XG5cblx0XHR0aGlzLl9jZW50ZXJYID0gKG1heFggKyBtaW5YKSouNTtcblx0XHR0aGlzLl9jZW50ZXJZID0gKG1heFkgKyBtaW5ZKSouNTtcblx0XHR0aGlzLl9jZW50ZXJaID0gKG1heFogKyBtaW5aKSouNTtcblx0XHR0aGlzLl9oYWxmRXh0ZW50c1ggPSAobWF4WCAtIG1pblgpKi41O1xuXHRcdHRoaXMuX2hhbGZFeHRlbnRzWSA9IChtYXhZIC0gbWluWSkqLjU7XG5cdFx0dGhpcy5faGFsZkV4dGVudHNaID0gKG1heFogLSBtaW5aKSouNTtcblxuXHRcdHN1cGVyLmZyb21FeHRyZW1lcyhtaW5YLCBtaW5ZLCBtaW5aLCBtYXhYLCBtYXhZLCBtYXhaKTtcblxuXHR9XG5cblx0LyoqXG5cdCAqIEBpbmhlcml0RG9jXG5cdCAqL1xuXHRwdWJsaWMgY2xvbmUoKTpCb3VuZGluZ1ZvbHVtZUJhc2Vcblx0e1xuXHRcdHZhciBjbG9uZTpBeGlzQWxpZ25lZEJvdW5kaW5nQm94ID0gbmV3IEF4aXNBbGlnbmVkQm91bmRpbmdCb3goKTtcblx0XHRjbG9uZS5mcm9tRXh0cmVtZXModGhpcy5fYWFiYi54LCB0aGlzLl9hYWJiLnkgKyB0aGlzLl9hYWJiLmhlaWdodCwgdGhpcy5fYWFiYi56LCB0aGlzLl9hYWJiLnggKyB0aGlzLl9hYWJiLndpZHRoLCB0aGlzLl9hYWJiLnksIHRoaXMuX2FhYmIueiArIHRoaXMuX2FhYmIuZGVwdGgpO1xuXHRcdHJldHVybiBjbG9uZTtcblx0fVxuXG5cdHB1YmxpYyBnZXQgaGFsZkV4dGVudHNYKCk6bnVtYmVyXG5cdHtcblx0XHRyZXR1cm4gdGhpcy5faGFsZkV4dGVudHNYO1xuXHR9XG5cblx0cHVibGljIGdldCBoYWxmRXh0ZW50c1koKTpudW1iZXJcblx0e1xuXHRcdHJldHVybiB0aGlzLl9oYWxmRXh0ZW50c1k7XG5cdH1cblxuXHRwdWJsaWMgZ2V0IGhhbGZFeHRlbnRzWigpOm51bWJlclxuXHR7XG5cdFx0cmV0dXJuIHRoaXMuX2hhbGZFeHRlbnRzWjtcblx0fVxuXG5cdC8qKlxuXHQgKiBGaW5kcyB0aGUgY2xvc2VzdCBwb2ludCBvbiB0aGUgYm91bmRpbmcgdm9sdW1lIHRvIGFub3RoZXIgZ2l2ZW4gcG9pbnQuIFRoaXMgY2FuIGJlIHVzZWQgZm9yIG1heGltdW0gZXJyb3IgY2FsY3VsYXRpb25zIGZvciBjb250ZW50IHdpdGhpbiBhIGdpdmVuIGJvdW5kLlxuXHQgKiBAcGFyYW0gcG9pbnQgVGhlIHBvaW50IGZvciB3aGljaCB0byBmaW5kIHRoZSBjbG9zZXN0IHBvaW50IG9uIHRoZSBib3VuZGluZyB2b2x1bWVcblx0ICogQHBhcmFtIHRhcmdldCBBbiBvcHRpb25hbCBWZWN0b3IzRCB0byBzdG9yZSB0aGUgcmVzdWx0IHRvIHByZXZlbnQgY3JlYXRpbmcgYSBuZXcgb2JqZWN0LlxuXHQgKiBAcmV0dXJuXG5cdCAqL1xuXHRwdWJsaWMgY2xvc2VzdFBvaW50VG9Qb2ludChwb2ludDpWZWN0b3IzRCwgdGFyZ2V0OlZlY3RvcjNEID0gbnVsbCk6VmVjdG9yM0Rcblx0e1xuXHRcdHZhciBwOm51bWJlcjtcblxuXHRcdGlmICh0YXJnZXQgPT0gbnVsbClcblx0XHRcdHRhcmdldCA9IG5ldyBWZWN0b3IzRCgpO1xuXG5cdFx0cCA9IHBvaW50Lng7XG5cdFx0aWYgKHAgPCB0aGlzLl9hYWJiLngpXG5cdFx0XHRwID0gdGhpcy5fYWFiYi54O1xuXHRcdGlmIChwID4gdGhpcy5fYWFiYi54ICsgdGhpcy5fYWFiYi53aWR0aClcblx0XHRcdHAgPSB0aGlzLl9hYWJiLnggKyB0aGlzLl9hYWJiLndpZHRoO1xuXHRcdHRhcmdldC54ID0gcDtcblxuXHRcdHAgPSBwb2ludC55O1xuXHRcdGlmIChwIDwgdGhpcy5fYWFiYi55ICsgdGhpcy5fYWFiYi5oZWlnaHQpXG5cdFx0XHRwID0gdGhpcy5fYWFiYi55ICsgdGhpcy5fYWFiYi5oZWlnaHQ7XG5cdFx0aWYgKHAgPiB0aGlzLl9hYWJiLnkpXG5cdFx0XHRwID0gdGhpcy5fYWFiYi55O1xuXHRcdHRhcmdldC55ID0gcDtcblxuXHRcdHAgPSBwb2ludC56O1xuXHRcdGlmIChwIDwgdGhpcy5fYWFiYi56KVxuXHRcdFx0cCA9IHRoaXMuX2FhYmIuejtcblx0XHRpZiAocCA+IHRoaXMuX2FhYmIueiArIHRoaXMuX2FhYmIuZGVwdGgpXG5cdFx0XHRwID0gdGhpcy5fYWFiYi56ICsgdGhpcy5fYWFiYi5kZXB0aDtcblx0XHR0YXJnZXQueiA9IHA7XG5cblx0XHRyZXR1cm4gdGFyZ2V0O1xuXHR9XG5cblx0cHVibGljIHBVcGRhdGVCb3VuZGluZ1JlbmRlcmFibGUoKVxuXHR7XG5cdFx0dGhpcy5fcEJvdW5kaW5nRW50aXR5LnRyYW5zZm9ybS5zY2FsZS54ID0gTWF0aC5tYXgodGhpcy5faGFsZkV4dGVudHNYKjIsIDAuMDAxKTtcblx0XHR0aGlzLl9wQm91bmRpbmdFbnRpdHkudHJhbnNmb3JtLnNjYWxlLnkgPSBNYXRoLm1heCh0aGlzLl9oYWxmRXh0ZW50c1kqMiwgMC4wMDEpO1xuXHRcdHRoaXMuX3BCb3VuZGluZ0VudGl0eS50cmFuc2Zvcm0uc2NhbGUueiA9IE1hdGgubWF4KHRoaXMuX2hhbGZFeHRlbnRzWioyLCAwLjAwMSk7XG5cdFx0dGhpcy5fcEJvdW5kaW5nRW50aXR5LnRyYW5zZm9ybS5wb3NpdGlvbi54ID0gdGhpcy5fY2VudGVyWDtcblx0XHR0aGlzLl9wQm91bmRpbmdFbnRpdHkudHJhbnNmb3JtLnBvc2l0aW9uLnkgPSB0aGlzLl9jZW50ZXJZO1xuXHRcdHRoaXMuX3BCb3VuZGluZ0VudGl0eS50cmFuc2Zvcm0ucG9zaXRpb24ueiA9IHRoaXMuX2NlbnRlclo7XG5cdH1cblxuXHRwdWJsaWMgcENyZWF0ZUJvdW5kaW5nRW50aXR5KCk6SUVudGl0eVxuXHR7XG5cdFx0cmV0dXJuIG51bGw7Ly88YXdheS5wcmltaXRpdmVzLldpcmVmcmFtZVByaW1pdGl2ZUJhc2U+IG5ldyBhd2F5LnByaW1pdGl2ZXMuV2lyZWZyYW1lQ3ViZSgxLCAxLCAxLCAweGZmZmZmZiwgMC41KTtcblx0fVxuXG5cdHB1YmxpYyBjbGFzc2lmeVRvUGxhbmUocGxhbmU6UGxhbmUzRCk6bnVtYmVyXG5cdHtcblx0XHR2YXIgYTpudW1iZXIgPSBwbGFuZS5hO1xuXHRcdHZhciBiOm51bWJlciA9IHBsYW5lLmI7XG5cdFx0dmFyIGM6bnVtYmVyID0gcGxhbmUuYztcblx0XHR2YXIgY2VudGVyRGlzdGFuY2U6bnVtYmVyID0gYSp0aGlzLl9jZW50ZXJYICsgYip0aGlzLl9jZW50ZXJZICsgYyp0aGlzLl9jZW50ZXJaIC0gcGxhbmUuZDtcblxuXHRcdGlmIChhIDwgMClcblx0XHRcdGEgPSAtYTtcblxuXHRcdGlmIChiIDwgMClcblx0XHRcdGIgPSAtYjtcblxuXHRcdGlmIChjIDwgMClcblx0XHRcdGMgPSAtYztcblxuXHRcdHZhciBib3VuZE9mZnNldDpudW1iZXIgPSBhKnRoaXMuX2hhbGZFeHRlbnRzWCArIGIqdGhpcy5faGFsZkV4dGVudHNZICsgYyp0aGlzLl9oYWxmRXh0ZW50c1o7XG5cblx0XHRyZXR1cm4gY2VudGVyRGlzdGFuY2UgPiBib3VuZE9mZnNldD8gUGxhbmVDbGFzc2lmaWNhdGlvbi5GUk9OVCA6IGNlbnRlckRpc3RhbmNlIDwgLWJvdW5kT2Zmc2V0PyBQbGFuZUNsYXNzaWZpY2F0aW9uLkJBQ0sgOiBQbGFuZUNsYXNzaWZpY2F0aW9uLklOVEVSU0VDVDtcblx0fVxuXG5cdHB1YmxpYyB0cmFuc2Zvcm1Gcm9tKGJvdW5kczpCb3VuZGluZ1ZvbHVtZUJhc2UsIG1hdHJpeDpNYXRyaXgzRClcblx0e1xuXHRcdHZhciBhYWJiOkF4aXNBbGlnbmVkQm91bmRpbmdCb3ggPSA8QXhpc0FsaWduZWRCb3VuZGluZ0JveD4gYm91bmRzO1xuXHRcdHZhciBjeDpudW1iZXIgPSBhYWJiLl9jZW50ZXJYO1xuXHRcdHZhciBjeTpudW1iZXIgPSBhYWJiLl9jZW50ZXJZO1xuXHRcdHZhciBjejpudW1iZXIgPSBhYWJiLl9jZW50ZXJaO1xuXHRcdHZhciByYXc6bnVtYmVyW10gPSBNYXRyaXgzRFV0aWxzLlJBV19EQVRBX0NPTlRBSU5FUjtcblxuXHRcdG1hdHJpeC5jb3B5UmF3RGF0YVRvKHJhdyk7XG5cblx0XHR2YXIgbTExOm51bWJlciA9IHJhd1swXSwgbTEyOm51bWJlciA9IHJhd1s0XSwgbTEzOm51bWJlciA9IHJhd1s4XSwgbTE0Om51bWJlciA9IHJhd1sxMl07XG5cdFx0dmFyIG0yMTpudW1iZXIgPSByYXdbMV0sIG0yMjpudW1iZXIgPSByYXdbNV0sIG0yMzpudW1iZXIgPSByYXdbOV0sIG0yNDpudW1iZXIgPSByYXdbMTNdO1xuXHRcdHZhciBtMzE6bnVtYmVyID0gcmF3WzJdLCBtMzI6bnVtYmVyID0gcmF3WzZdLCBtMzM6bnVtYmVyID0gcmF3WzEwXSwgbTM0Om51bWJlciA9IHJhd1sxNF07XG5cblx0XHR0aGlzLl9jZW50ZXJYID0gY3gqbTExICsgY3kqbTEyICsgY3oqbTEzICsgbTE0O1xuXHRcdHRoaXMuX2NlbnRlclkgPSBjeCptMjEgKyBjeSptMjIgKyBjeiptMjMgKyBtMjQ7XG5cdFx0dGhpcy5fY2VudGVyWiA9IGN4Km0zMSArIGN5Km0zMiArIGN6Km0zMyArIG0zNDtcblxuXHRcdGlmIChtMTEgPCAwKVxuXHRcdFx0bTExID0gLW0xMTtcblx0XHRpZiAobTEyIDwgMClcblx0XHRcdG0xMiA9IC1tMTI7XG5cdFx0aWYgKG0xMyA8IDApXG5cdFx0XHRtMTMgPSAtbTEzO1xuXHRcdGlmIChtMjEgPCAwKVxuXHRcdFx0bTIxID0gLW0yMTtcblx0XHRpZiAobTIyIDwgMClcblx0XHRcdG0yMiA9IC1tMjI7XG5cdFx0aWYgKG0yMyA8IDApXG5cdFx0XHRtMjMgPSAtbTIzO1xuXHRcdGlmIChtMzEgPCAwKVxuXHRcdFx0bTMxID0gLW0zMTtcblx0XHRpZiAobTMyIDwgMClcblx0XHRcdG0zMiA9IC1tMzI7XG5cdFx0aWYgKG0zMyA8IDApXG5cdFx0XHRtMzMgPSAtbTMzO1xuXHRcdHZhciBoeDpudW1iZXIgPSBhYWJiLl9oYWxmRXh0ZW50c1g7XG5cdFx0dmFyIGh5Om51bWJlciA9IGFhYmIuX2hhbGZFeHRlbnRzWTtcblx0XHR2YXIgaHo6bnVtYmVyID0gYWFiYi5faGFsZkV4dGVudHNaO1xuXHRcdHRoaXMuX2hhbGZFeHRlbnRzWCA9IGh4Km0xMSArIGh5Km0xMiArIGh6Km0xMztcblx0XHR0aGlzLl9oYWxmRXh0ZW50c1kgPSBoeCptMjEgKyBoeSptMjIgKyBoeiptMjM7XG5cdFx0dGhpcy5faGFsZkV4dGVudHNaID0gaHgqbTMxICsgaHkqbTMyICsgaHoqbTMzO1xuXG5cdFx0dGhpcy5fYWFiYi53aWR0aCA9IHRoaXMuX2FhYmIuaGVpZ2h0ID0gdGhpcy5fYWFiYi5kZXB0aCA9IHRoaXMuX2hhbGZFeHRlbnRzWCoyO1xuXHRcdHRoaXMuX2FhYmIueCA9IHRoaXMuX2NlbnRlclggLSB0aGlzLl9oYWxmRXh0ZW50c1g7XG5cdFx0dGhpcy5fYWFiYi55ID0gdGhpcy5fY2VudGVyWSArIHRoaXMuX2hhbGZFeHRlbnRzWTtcblx0XHR0aGlzLl9hYWJiLnogPSB0aGlzLl9jZW50ZXJaIC0gdGhpcy5faGFsZkV4dGVudHNaO1xuXHR9XG59XG5cbmV4cG9ydCA9IEF4aXNBbGlnbmVkQm91bmRpbmdCb3g7Il19