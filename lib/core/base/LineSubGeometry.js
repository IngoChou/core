var __extends = this.__extends || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    __.prototype = b.prototype;
    d.prototype = new __();
};
var LineSubMesh = require("awayjs-core/lib/core/base/LineSubMesh");
var SubGeometryBase = require("awayjs-core/lib/core/base/SubGeometryBase");
var TriangleSubGeometry = require("awayjs-core/lib/core/base/TriangleSubGeometry");
var SubGeometryEvent = require("awayjs-core/lib/events/SubGeometryEvent");

/**
* @class LineSubGeometry
*/
var LineSubGeometry = (function (_super) {
    __extends(LineSubGeometry, _super);
    /**
    *
    */
    function LineSubGeometry() {
        _super.call(this, true);
        this._positionsDirty = true;
        this._boundingPositionDirty = true;
        this._thicknessDirty = true;
        this._colorsDirty = true;

        this._pSubMeshClass = LineSubMesh;
    }
    LineSubGeometry.prototype._pUpdateStrideOffset = function () {
        this._pOffset[LineSubGeometry.VERTEX_DATA] = 0;

        var stride = 0;
        this._pOffset[LineSubGeometry.START_POSITION_DATA] = stride;
        stride += 3;

        this._pOffset[LineSubGeometry.END_POSITION_DATA] = stride;
        stride += 3;

        this._pOffset[LineSubGeometry.THICKNESS_DATA] = stride;
        stride += 1;

        this._pOffset[LineSubGeometry.COLOR_DATA] = stride;
        stride += 4;

        this._pStride[LineSubGeometry.VERTEX_DATA] = stride;
        this._pStride[LineSubGeometry.START_POSITION_DATA] = stride;
        this._pStride[LineSubGeometry.END_POSITION_DATA] = stride;
        this._pStride[LineSubGeometry.THICKNESS_DATA] = stride;
        this._pStride[LineSubGeometry.COLOR_DATA] = stride;

        var len = this._pNumVertices * stride;

        if (this._pVertices == null)
            this._pVertices = new Array(len);
        else if (this._pVertices.length != len)
            this._pVertices.length = len;

        this._pStrideOffsetDirty = false;
    };

    Object.defineProperty(LineSubGeometry.prototype, "vertices", {
        /**
        *
        */
        get: function () {
            if (this._positionsDirty)
                this.updatePositions(this._startPositions, this._endPositions);

            if (this._thicknessDirty)
                this.updateThickness(this._thickness);

            if (this._colorsDirty)
                this.updateColors(this._startColors, this._endColors);

            return this._pVertices;
        },
        enumerable: true,
        configurable: true
    });

    Object.defineProperty(LineSubGeometry.prototype, "startPositions", {
        /**
        *
        */
        get: function () {
            if (this._positionsDirty)
                this.updatePositions(this._startPositions, this._endPositions);

            return this._startPositions;
        },
        enumerable: true,
        configurable: true
    });

    Object.defineProperty(LineSubGeometry.prototype, "endPositions", {
        /**
        *
        */
        get: function () {
            if (this._positionsDirty)
                this.updatePositions(this._startPositions, this._endPositions);

            return this._endPositions;
        },
        enumerable: true,
        configurable: true
    });

    Object.defineProperty(LineSubGeometry.prototype, "thickness", {
        /**
        *
        */
        get: function () {
            if (this._thicknessDirty)
                this.updateThickness(this._thickness);

            return this._thickness;
        },
        enumerable: true,
        configurable: true
    });

    Object.defineProperty(LineSubGeometry.prototype, "startColors", {
        /**
        *
        */
        get: function () {
            if (this._colorsDirty)
                this.updateColors(this._startColors, this._endColors);

            return this._startColors;
        },
        enumerable: true,
        configurable: true
    });

    Object.defineProperty(LineSubGeometry.prototype, "endColors", {
        /**
        *
        */
        get: function () {
            if (this._colorsDirty)
                this.updateColors(this._startColors, this._endColors);

            return this._endColors;
        },
        enumerable: true,
        configurable: true
    });

    Object.defineProperty(LineSubGeometry.prototype, "numSegments", {
        /**
        * The total amount of segments in the TriangleSubGeometry.
        */
        get: function () {
            return this._numSegments;
        },
        enumerable: true,
        configurable: true
    });

    LineSubGeometry.prototype.getBoundingPositions = function () {
        if (this._boundingPositionDirty)
            this._boundingPositions = this.startPositions.concat(this.endPositions);

        return this._boundingPositions;
    };

    /**
    *
    */
    LineSubGeometry.prototype.updatePositions = function (startValues, endValues) {
        var i;
        var j;
        var values;
        var index;
        var stride;
        var positions;
        var indices;

        this._startPositions = startValues;

        if (this._startPositions == null)
            this._startPositions = new Array();

        this._endPositions = endValues;

        if (this._endPositions == null)
            this._endPositions = new Array();

        this._boundingPositionDirty = true;

        this._numSegments = this._startPositions.length / 3;

        this._pNumVertices = this._numSegments * 4;

        var lenV = this._pNumVertices * this.getStride(LineSubGeometry.VERTEX_DATA);

        if (this._pVertices == null)
            this._pVertices = new Array(lenV);
        else if (this._pVertices.length != lenV)
            this._pVertices.length = lenV;

        i = 0;
        j = 0;
        index = this.getOffset(LineSubGeometry.START_POSITION_DATA);
        stride = this.getStride(LineSubGeometry.START_POSITION_DATA);
        positions = this._pVertices;
        indices = new Array();

        while (i < startValues.length) {
            values = (index / stride & 1) ? endValues : startValues;
            positions[index] = values[i];
            positions[index + 1] = values[i + 1];
            positions[index + 2] = values[i + 2];

            values = (index / stride & 1) ? startValues : endValues;
            positions[index + 3] = values[i];
            positions[index + 4] = values[i + 1];
            positions[index + 5] = values[i + 2];

            if (++j == 4) {
                var o = index / stride - 3;
                indices.push(o, o + 1, o + 2, o + 3, o + 2, o + 1);
                j = 0;
                i += 3;
            }

            index += stride;
        }

        this.updateIndices(indices);

        this.pInvalidateBounds();

        this.notifyPositionsUpdate();

        this._positionsDirty = false;
    };

    /**
    * Updates the thickness.
    */
    LineSubGeometry.prototype.updateThickness = function (values) {
        var i;
        var j;
        var index;
        var offset;
        var stride;
        var thickness;

        this._thickness = values;

        if (values != null) {
            i = 0;
            j = 0;
            offset = this.getOffset(LineSubGeometry.THICKNESS_DATA);
            stride = this.getStride(LineSubGeometry.THICKNESS_DATA);
            thickness = this._pVertices;

            index = offset;
            while (i < values.length) {
                thickness[index] = (Math.floor(0.5 * (index - offset) / stride + 0.5) & 1) ? -values[i] : values[i];

                if (++j == 4) {
                    j = 0;
                    i++;
                }
                index += stride;
            }
        }

        this.notifyThicknessUpdate();

        this._thicknessDirty = false;
    };

    /**
    *
    */
    LineSubGeometry.prototype.updateColors = function (startValues, endValues) {
        var i;
        var j;
        var values;
        var index;
        var offset;
        var stride;
        var colors;

        this._startColors = startValues;

        this._endColors = endValues;

        //default to white
        if (this._startColors == null) {
            this._startColors = new Array(this._numSegments * 4);

            i = 0;
            while (i < this._startColors.length)
                this._startColors[i++] = 1;
        }

        if (this._endColors == null) {
            this._endColors = new Array(this._numSegments * 4);

            i = 0;
            while (i < this._endColors.length)
                this._endColors[i++] = 1;
        }

        i = 0;
        j = 0;
        offset = this.getOffset(LineSubGeometry.COLOR_DATA);
        stride = this.getStride(LineSubGeometry.COLOR_DATA);
        colors = this._pVertices;

        index = offset;

        while (i < this._startColors.length) {
            values = ((index - offset) / stride & 1) ? this._endColors : this._startColors;
            colors[index] = values[i];
            colors[index + 1] = values[i + 1];
            colors[index + 2] = values[i + 2];
            colors[index + 3] = values[i + 3];

            if (++j == 4) {
                j = 0;
                i += 4;
            }

            index += stride;
        }

        this.notifyColorsUpdate();

        this._colorsDirty = false;
    };

    /**
    *
    */
    LineSubGeometry.prototype.dispose = function () {
        _super.prototype.dispose.call(this);

        this._startPositions = null;
        this._endPositions = null;
        this._thickness = null;
        this._startColors = null;
        this._endColors = null;
    };

    /**
    * @protected
    */
    LineSubGeometry.prototype.pInvalidateBounds = function () {
        if (this.parentGeometry)
            this.parentGeometry.iInvalidateBounds(this);
    };

    /**
    * Clones the current object
    * @return An exact duplicate of the current object.
    */
    LineSubGeometry.prototype.clone = function () {
        var clone = new LineSubGeometry();
        clone.updateIndices(this._pIndices.concat());
        clone.updatePositions(this._startPositions.concat(), this._endPositions.concat());
        clone.updateThickness(this._thickness.concat());
        clone.updatePositions(this._startPositions.concat(), this._endPositions.concat());

        return clone;
    };

    LineSubGeometry.prototype._pNotifyVerticesUpdate = function () {
        this._pStrideOffsetDirty = true;

        this.notifyPositionsUpdate();
        this.notifyThicknessUpdate();
        this.notifyColorsUpdate();
    };

    LineSubGeometry.prototype.notifyPositionsUpdate = function () {
        if (this._positionsDirty)
            return;

        this._positionsDirty = true;

        if (!this._positionsUpdated)
            this._positionsUpdated = new SubGeometryEvent(SubGeometryEvent.VERTICES_UPDATED, TriangleSubGeometry.POSITION_DATA);

        this.dispatchEvent(this._positionsUpdated);
    };

    LineSubGeometry.prototype.notifyThicknessUpdate = function () {
        if (this._thicknessDirty)
            return;

        this._thicknessDirty = true;

        if (!this._thicknessUpdated)
            this._thicknessUpdated = new SubGeometryEvent(SubGeometryEvent.VERTICES_UPDATED, LineSubGeometry.THICKNESS_DATA);

        this.dispatchEvent(this._thicknessUpdated);
    };

    LineSubGeometry.prototype.notifyColorsUpdate = function () {
        if (this._colorsDirty)
            return;

        this._colorsDirty = true;

        if (!this._colorUpdated)
            this._colorUpdated = new SubGeometryEvent(SubGeometryEvent.VERTICES_UPDATED, LineSubGeometry.COLOR_DATA);

        this.dispatchEvent(this._colorUpdated);
    };
    LineSubGeometry.VERTEX_DATA = "vertices";
    LineSubGeometry.START_POSITION_DATA = "startPositions";
    LineSubGeometry.END_POSITION_DATA = "endPositions";
    LineSubGeometry.THICKNESS_DATA = "thickness";
    LineSubGeometry.COLOR_DATA = "colors";

    LineSubGeometry.POSITION_FORMAT = "float3";
    LineSubGeometry.COLOR_FORMAT = "float4";
    LineSubGeometry.THICKNESS_FORMAT = "float1";
    return LineSubGeometry;
})(SubGeometryBase);

module.exports = LineSubGeometry;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvcmUvYmFzZS9MaW5lU3ViR2VvbWV0cnkudHMiXSwibmFtZXMiOlsiTGluZVN1Ykdlb21ldHJ5IiwiTGluZVN1Ykdlb21ldHJ5LmNvbnN0cnVjdG9yIiwiTGluZVN1Ykdlb21ldHJ5Ll9wVXBkYXRlU3RyaWRlT2Zmc2V0IiwiTGluZVN1Ykdlb21ldHJ5LmdldEJvdW5kaW5nUG9zaXRpb25zIiwiTGluZVN1Ykdlb21ldHJ5LnVwZGF0ZVBvc2l0aW9ucyIsIkxpbmVTdWJHZW9tZXRyeS51cGRhdGVUaGlja25lc3MiLCJMaW5lU3ViR2VvbWV0cnkudXBkYXRlQ29sb3JzIiwiTGluZVN1Ykdlb21ldHJ5LmRpc3Bvc2UiLCJMaW5lU3ViR2VvbWV0cnkucEludmFsaWRhdGVCb3VuZHMiLCJMaW5lU3ViR2VvbWV0cnkuY2xvbmUiLCJMaW5lU3ViR2VvbWV0cnkuX3BOb3RpZnlWZXJ0aWNlc1VwZGF0ZSIsIkxpbmVTdWJHZW9tZXRyeS5ub3RpZnlQb3NpdGlvbnNVcGRhdGUiLCJMaW5lU3ViR2VvbWV0cnkubm90aWZ5VGhpY2tuZXNzVXBkYXRlIiwiTGluZVN1Ykdlb21ldHJ5Lm5vdGlmeUNvbG9yc1VwZGF0ZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUEsa0VBRXlFO0FBQ3pFLDBFQUFnRjtBQUNoRixrRkFBdUY7QUFDdkYseUVBQStFOztBQUUvRTs7RUFFRztBQUNIO0lBQThCQSxrQ0FBZUE7SUFtSjVDQTs7TUFER0E7SUFDSEE7UUFFQ0MsV0FBTUEsT0FBQUEsSUFBSUEsQ0FBQ0E7UUF4SVpBLEtBQVFBLGVBQWVBLEdBQVdBLElBQUlBLENBQUNBO1FBQ3ZDQSxLQUFRQSxzQkFBc0JBLEdBQUdBLElBQUlBLENBQUNBO1FBQ3RDQSxLQUFRQSxlQUFlQSxHQUFXQSxJQUFJQSxDQUFDQTtRQUN2Q0EsS0FBUUEsWUFBWUEsR0FBV0EsSUFBSUEsQ0FBQ0E7O1FBdUluQ0EsSUFBSUEsQ0FBQ0EsY0FBY0EsR0FBR0EsV0FBV0E7SUFDbENBLENBQUNBO0lBekhERCxpREFBQUE7UUFFQ0UsSUFBSUEsQ0FBQ0EsUUFBUUEsQ0FBQ0EsZUFBZUEsQ0FBQ0EsV0FBV0EsQ0FBQ0EsR0FBR0EsQ0FBQ0E7O1FBRTlDQSxJQUFJQSxNQUFNQSxHQUFVQSxDQUFDQTtRQUNyQkEsSUFBSUEsQ0FBQ0EsUUFBUUEsQ0FBQ0EsZUFBZUEsQ0FBQ0EsbUJBQW1CQSxDQUFDQSxHQUFHQSxNQUFNQTtRQUMzREEsTUFBTUEsSUFBSUEsQ0FBQ0E7O1FBRVhBLElBQUlBLENBQUNBLFFBQVFBLENBQUNBLGVBQWVBLENBQUNBLGlCQUFpQkEsQ0FBQ0EsR0FBR0EsTUFBTUE7UUFDekRBLE1BQU1BLElBQUlBLENBQUNBOztRQUVYQSxJQUFJQSxDQUFDQSxRQUFRQSxDQUFDQSxlQUFlQSxDQUFDQSxjQUFjQSxDQUFDQSxHQUFHQSxNQUFNQTtRQUN0REEsTUFBTUEsSUFBSUEsQ0FBQ0E7O1FBRVhBLElBQUlBLENBQUNBLFFBQVFBLENBQUNBLGVBQWVBLENBQUNBLFVBQVVBLENBQUNBLEdBQUdBLE1BQU1BO1FBQ2xEQSxNQUFNQSxJQUFJQSxDQUFDQTs7UUFFWEEsSUFBSUEsQ0FBQ0EsUUFBUUEsQ0FBQ0EsZUFBZUEsQ0FBQ0EsV0FBV0EsQ0FBQ0EsR0FBR0EsTUFBTUE7UUFDbkRBLElBQUlBLENBQUNBLFFBQVFBLENBQUNBLGVBQWVBLENBQUNBLG1CQUFtQkEsQ0FBQ0EsR0FBR0EsTUFBTUE7UUFDM0RBLElBQUlBLENBQUNBLFFBQVFBLENBQUNBLGVBQWVBLENBQUNBLGlCQUFpQkEsQ0FBQ0EsR0FBR0EsTUFBTUE7UUFDekRBLElBQUlBLENBQUNBLFFBQVFBLENBQUNBLGVBQWVBLENBQUNBLGNBQWNBLENBQUNBLEdBQUdBLE1BQU1BO1FBQ3REQSxJQUFJQSxDQUFDQSxRQUFRQSxDQUFDQSxlQUFlQSxDQUFDQSxVQUFVQSxDQUFDQSxHQUFHQSxNQUFNQTs7UUFFbERBLElBQUlBLEdBQUdBLEdBQVVBLElBQUlBLENBQUNBLGFBQWFBLEdBQUNBLE1BQU1BOztRQUUxQ0EsSUFBSUEsSUFBSUEsQ0FBQ0EsVUFBVUEsSUFBSUEsSUFBSUE7WUFDMUJBLElBQUlBLENBQUNBLFVBQVVBLEdBQUdBLElBQUlBLEtBQUtBLENBQVNBLEdBQUdBLENBQUNBO2FBQ3BDQSxJQUFJQSxJQUFJQSxDQUFDQSxVQUFVQSxDQUFDQSxNQUFNQSxJQUFJQSxHQUFHQTtZQUNyQ0EsSUFBSUEsQ0FBQ0EsVUFBVUEsQ0FBQ0EsTUFBTUEsR0FBR0EsR0FBR0EsQ0FBQ0E7O1FBRTlCQSxJQUFJQSxDQUFDQSxtQkFBbUJBLEdBQUdBLEtBQUtBO0lBQ2pDQSxDQUFDQTs7SUFLREY7UUFBQUE7O1VBREdBO2FBQ0hBO1lBRUNBLElBQUlBLElBQUlBLENBQUNBLGVBQWVBO2dCQUN2QkEsSUFBSUEsQ0FBQ0EsZUFBZUEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsZUFBZUEsRUFBRUEsSUFBSUEsQ0FBQ0EsYUFBYUEsQ0FBQ0EsQ0FBQ0E7O1lBRWhFQSxJQUFJQSxJQUFJQSxDQUFDQSxlQUFlQTtnQkFDdkJBLElBQUlBLENBQUNBLGVBQWVBLENBQUNBLElBQUlBLENBQUNBLFVBQVVBLENBQUNBLENBQUNBOztZQUV2Q0EsSUFBSUEsSUFBSUEsQ0FBQ0EsWUFBWUE7Z0JBQ3BCQSxJQUFJQSxDQUFDQSxZQUFZQSxDQUFDQSxJQUFJQSxDQUFDQSxZQUFZQSxFQUFFQSxJQUFJQSxDQUFDQSxVQUFVQSxDQUFDQSxDQUFDQTs7WUFFdkRBLE9BQU9BLElBQUlBLENBQUNBLFVBQVVBO1FBQ3ZCQSxDQUFDQTs7OztBQUFBQTtJQUtEQTtRQUFBQTs7VUFER0E7YUFDSEE7WUFFQ0EsSUFBSUEsSUFBSUEsQ0FBQ0EsZUFBZUE7Z0JBQ3ZCQSxJQUFJQSxDQUFDQSxlQUFlQSxDQUFDQSxJQUFJQSxDQUFDQSxlQUFlQSxFQUFFQSxJQUFJQSxDQUFDQSxhQUFhQSxDQUFDQSxDQUFDQTs7WUFFaEVBLE9BQU9BLElBQUlBLENBQUNBLGVBQWVBO1FBQzVCQSxDQUFDQTs7OztBQUFBQTtJQUtEQTtRQUFBQTs7VUFER0E7YUFDSEE7WUFFQ0EsSUFBSUEsSUFBSUEsQ0FBQ0EsZUFBZUE7Z0JBQ3ZCQSxJQUFJQSxDQUFDQSxlQUFlQSxDQUFDQSxJQUFJQSxDQUFDQSxlQUFlQSxFQUFFQSxJQUFJQSxDQUFDQSxhQUFhQSxDQUFDQSxDQUFDQTs7WUFFaEVBLE9BQU9BLElBQUlBLENBQUNBLGFBQWFBO1FBQzFCQSxDQUFDQTs7OztBQUFBQTtJQUtEQTtRQUFBQTs7VUFER0E7YUFDSEE7WUFFQ0EsSUFBSUEsSUFBSUEsQ0FBQ0EsZUFBZUE7Z0JBQ3ZCQSxJQUFJQSxDQUFDQSxlQUFlQSxDQUFDQSxJQUFJQSxDQUFDQSxVQUFVQSxDQUFDQSxDQUFDQTs7WUFFdkNBLE9BQU9BLElBQUlBLENBQUNBLFVBQVVBO1FBQ3ZCQSxDQUFDQTs7OztBQUFBQTtJQUtEQTtRQUFBQTs7VUFER0E7YUFDSEE7WUFFQ0EsSUFBSUEsSUFBSUEsQ0FBQ0EsWUFBWUE7Z0JBQ3BCQSxJQUFJQSxDQUFDQSxZQUFZQSxDQUFDQSxJQUFJQSxDQUFDQSxZQUFZQSxFQUFFQSxJQUFJQSxDQUFDQSxVQUFVQSxDQUFDQSxDQUFDQTs7WUFFdkRBLE9BQU9BLElBQUlBLENBQUNBLFlBQVlBO1FBQ3pCQSxDQUFDQTs7OztBQUFBQTtJQUtEQTtRQUFBQTs7VUFER0E7YUFDSEE7WUFFQ0EsSUFBSUEsSUFBSUEsQ0FBQ0EsWUFBWUE7Z0JBQ3BCQSxJQUFJQSxDQUFDQSxZQUFZQSxDQUFDQSxJQUFJQSxDQUFDQSxZQUFZQSxFQUFFQSxJQUFJQSxDQUFDQSxVQUFVQSxDQUFDQSxDQUFDQTs7WUFFdkRBLE9BQU9BLElBQUlBLENBQUNBLFVBQVVBO1FBQ3ZCQSxDQUFDQTs7OztBQUFBQTtJQUtEQTtRQUFBQTs7VUFER0E7YUFDSEE7WUFFQ0EsT0FBT0EsSUFBSUEsQ0FBQ0EsWUFBWUE7UUFDekJBLENBQUNBOzs7O0FBQUFBO0lBWURBLGlEQUFBQTtRQUVDRyxJQUFJQSxJQUFJQSxDQUFDQSxzQkFBc0JBO1lBQzlCQSxJQUFJQSxDQUFDQSxrQkFBa0JBLEdBQUdBLElBQUlBLENBQUNBLGNBQWNBLENBQUNBLE1BQU1BLENBQUNBLElBQUlBLENBQUNBLFlBQVlBLENBQUNBLENBQUNBOztRQUV6RUEsT0FBT0EsSUFBSUEsQ0FBQ0Esa0JBQWtCQTtJQUMvQkEsQ0FBQ0E7O0lBS0RIOztNQURHQTtnREFDSEEsVUFBdUJBLFdBQXlCQSxFQUFFQSxTQUF1QkE7UUFFeEVJLElBQUlBLENBQUNBO1FBQ0xBLElBQUlBLENBQUNBO1FBQ0xBLElBQUlBLE1BQU1BO1FBQ1ZBLElBQUlBLEtBQUtBO1FBQ1RBLElBQUlBLE1BQU1BO1FBQ1ZBLElBQUlBLFNBQVNBO1FBQ2JBLElBQUlBLE9BQU9BOztRQUVYQSxJQUFJQSxDQUFDQSxlQUFlQSxHQUFHQSxXQUFXQTs7UUFFbENBLElBQUlBLElBQUlBLENBQUNBLGVBQWVBLElBQUlBLElBQUlBO1lBQy9CQSxJQUFJQSxDQUFDQSxlQUFlQSxHQUFHQSxJQUFJQSxLQUFLQSxDQUFTQSxDQUFDQSxDQUFDQTs7UUFFNUNBLElBQUlBLENBQUNBLGFBQWFBLEdBQUdBLFNBQVNBOztRQUU5QkEsSUFBSUEsSUFBSUEsQ0FBQ0EsYUFBYUEsSUFBSUEsSUFBSUE7WUFDN0JBLElBQUlBLENBQUNBLGFBQWFBLEdBQUdBLElBQUlBLEtBQUtBLENBQVNBLENBQUNBLENBQUNBOztRQUUxQ0EsSUFBSUEsQ0FBQ0Esc0JBQXNCQSxHQUFHQSxJQUFJQTs7UUFFbENBLElBQUlBLENBQUNBLFlBQVlBLEdBQUdBLElBQUlBLENBQUNBLGVBQWVBLENBQUNBLE1BQU1BLEdBQUNBLENBQUNBOztRQUVqREEsSUFBSUEsQ0FBQ0EsYUFBYUEsR0FBR0EsSUFBSUEsQ0FBQ0EsWUFBWUEsR0FBQ0EsQ0FBQ0E7O1FBRXhDQSxJQUFJQSxJQUFJQSxHQUFVQSxJQUFJQSxDQUFDQSxhQUFhQSxHQUFDQSxJQUFJQSxDQUFDQSxTQUFTQSxDQUFDQSxlQUFlQSxDQUFDQSxXQUFXQSxDQUFDQTs7UUFFaEZBLElBQUlBLElBQUlBLENBQUNBLFVBQVVBLElBQUlBLElBQUlBO1lBQzFCQSxJQUFJQSxDQUFDQSxVQUFVQSxHQUFHQSxJQUFJQSxLQUFLQSxDQUFTQSxJQUFJQSxDQUFDQTthQUNyQ0EsSUFBSUEsSUFBSUEsQ0FBQ0EsVUFBVUEsQ0FBQ0EsTUFBTUEsSUFBSUEsSUFBSUE7WUFDdENBLElBQUlBLENBQUNBLFVBQVVBLENBQUNBLE1BQU1BLEdBQUdBLElBQUlBLENBQUNBOztRQUUvQkEsQ0FBQ0EsR0FBR0EsQ0FBQ0E7UUFDTEEsQ0FBQ0EsR0FBR0EsQ0FBQ0E7UUFDTEEsS0FBS0EsR0FBR0EsSUFBSUEsQ0FBQ0EsU0FBU0EsQ0FBQ0EsZUFBZUEsQ0FBQ0EsbUJBQW1CQSxDQUFDQTtRQUMzREEsTUFBTUEsR0FBR0EsSUFBSUEsQ0FBQ0EsU0FBU0EsQ0FBQ0EsZUFBZUEsQ0FBQ0EsbUJBQW1CQSxDQUFDQTtRQUM1REEsU0FBU0EsR0FBR0EsSUFBSUEsQ0FBQ0EsVUFBVUE7UUFDM0JBLE9BQU9BLEdBQUdBLElBQUlBLEtBQUtBLENBQUNBLENBQUNBOztRQUVyQkEsT0FBT0EsQ0FBQ0EsR0FBR0EsV0FBV0EsQ0FBQ0EsTUFBTUEsQ0FBRUE7WUFDOUJBLE1BQU1BLEdBQUdBLENBQUNBLEtBQUtBLEdBQUNBLE1BQU1BLEdBQUdBLENBQUNBLENBQUNBLEdBQUVBLFNBQVNBLEdBQUdBLFdBQVdBO1lBQ3BEQSxTQUFTQSxDQUFDQSxLQUFLQSxDQUFDQSxHQUFHQSxNQUFNQSxDQUFDQSxDQUFDQSxDQUFDQTtZQUM1QkEsU0FBU0EsQ0FBQ0EsS0FBS0EsR0FBR0EsQ0FBQ0EsQ0FBQ0EsR0FBR0EsTUFBTUEsQ0FBQ0EsQ0FBQ0EsR0FBR0EsQ0FBQ0EsQ0FBQ0E7WUFDcENBLFNBQVNBLENBQUNBLEtBQUtBLEdBQUdBLENBQUNBLENBQUNBLEdBQUdBLE1BQU1BLENBQUNBLENBQUNBLEdBQUdBLENBQUNBLENBQUNBOztZQUVwQ0EsTUFBTUEsR0FBR0EsQ0FBQ0EsS0FBS0EsR0FBQ0EsTUFBTUEsR0FBR0EsQ0FBQ0EsQ0FBQ0EsR0FBRUEsV0FBV0EsR0FBR0EsU0FBU0E7WUFDcERBLFNBQVNBLENBQUNBLEtBQUtBLEdBQUdBLENBQUNBLENBQUNBLEdBQUdBLE1BQU1BLENBQUNBLENBQUNBLENB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Z0JBQWdCQSxDQUFDQSxnQkFBZ0JBLEVBQUVBLGVBQWVBLENBQUNBLFVBQVVBLENBQUNBLENBQUNBOztRQUUxR0EsSUFBSUEsQ0FBQ0EsYUFBYUEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsYUFBYUEsQ0FBQ0E7SUFDdkNBLENBQUNBO0lBeGFEYiw4QkFBbUNBLFVBQVVBO0lBQzdDQSxzQ0FBMkNBLGdCQUFnQkE7SUFDM0RBLG9DQUF5Q0EsY0FBY0E7SUFDdkRBLGlDQUFzQ0EsV0FBV0E7SUFDakRBLDZCQUFrQ0EsUUFBUUE7O0lBRzFDQSxrQ0FBdUNBLFFBQVFBO0lBQy9DQSwrQkFBb0NBLFFBQVFBO0lBQzVDQSxtQ0FBd0NBLFFBQVFBO0lBZ2FqREEsdUJBQUNBO0FBQURBLENBQUNBLEVBM2E2QixlQUFlLEVBMmE1Qzs7QUFFRCxnQ0FBeUIsQ0FBQSIsImZpbGUiOiJjb3JlL2Jhc2UvTGluZVN1Ykdlb21ldHJ5LmpzIiwic291cmNlUm9vdCI6Ii9Vc2Vycy9yb2JiYXRlbWFuL1dlYnN0b3JtUHJvamVjdHMvYXdheWpzLWNvcmUvIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IERpc3BsYXlPYmplY3RDb250YWluZXJcdD0gcmVxdWlyZShcImF3YXlqcy1jb3JlL2xpYi9jb250YWluZXJzL0Rpc3BsYXlPYmplY3RDb250YWluZXJcIik7XG5pbXBvcnQgR2VvbWV0cnlcdFx0XHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLWNvcmUvbGliL2NvcmUvYmFzZS9HZW9tZXRyeVwiKTtcbmltcG9ydCBMaW5lU3ViTWVzaFx0XHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLWNvcmUvbGliL2NvcmUvYmFzZS9MaW5lU3ViTWVzaFwiKTtcbmltcG9ydCBTdWJHZW9tZXRyeUJhc2VcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtY29yZS9saWIvY29yZS9iYXNlL1N1Ykdlb21ldHJ5QmFzZVwiKTtcbmltcG9ydCBUcmlhbmdsZVN1Ykdlb21ldHJ5XHRcdD0gcmVxdWlyZShcImF3YXlqcy1jb3JlL2xpYi9jb3JlL2Jhc2UvVHJpYW5nbGVTdWJHZW9tZXRyeVwiKTtcbmltcG9ydCBTdWJHZW9tZXRyeUV2ZW50XHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLWNvcmUvbGliL2V2ZW50cy9TdWJHZW9tZXRyeUV2ZW50XCIpO1xuXG4vKipcbiAqIEBjbGFzcyBMaW5lU3ViR2VvbWV0cnlcbiAqL1xuY2xhc3MgTGluZVN1Ykdlb21ldHJ5IGV4dGVuZHMgU3ViR2VvbWV0cnlCYXNlXG57XG5cdHB1YmxpYyBzdGF0aWMgVkVSVEVYX0RBVEE6c3RyaW5nID0gXCJ2ZXJ0aWNlc1wiO1xuXHRwdWJsaWMgc3RhdGljIFNUQVJUX1BPU0lUSU9OX0RBVEE6c3RyaW5nID0gXCJzdGFydFBvc2l0aW9uc1wiO1xuXHRwdWJsaWMgc3RhdGljIEVORF9QT1NJVElPTl9EQVRBOnN0cmluZyA9IFwiZW5kUG9zaXRpb25zXCI7XG5cdHB1YmxpYyBzdGF0aWMgVEhJQ0tORVNTX0RBVEE6c3RyaW5nID0gXCJ0aGlja25lc3NcIjtcblx0cHVibGljIHN0YXRpYyBDT0xPUl9EQVRBOnN0cmluZyA9IFwiY29sb3JzXCI7XG5cblx0Ly9UT0RPIC0gbW92ZSB0aGVzZSB0byBTdGFnZUdMXG5cdHB1YmxpYyBzdGF0aWMgUE9TSVRJT05fRk9STUFUOnN0cmluZyA9IFwiZmxvYXQzXCI7XG5cdHB1YmxpYyBzdGF0aWMgQ09MT1JfRk9STUFUOnN0cmluZyA9IFwiZmxvYXQ0XCI7XG5cdHB1YmxpYyBzdGF0aWMgVEhJQ0tORVNTX0ZPUk1BVDpzdHJpbmcgPSBcImZsb2F0MVwiO1xuXG5cdHByaXZhdGUgX3Bvc2l0aW9uc0RpcnR5OmJvb2xlYW4gPSB0cnVlO1xuXHRwcml2YXRlIF9ib3VuZGluZ1Bvc2l0aW9uRGlydHkgPSB0cnVlO1xuXHRwcml2YXRlIF90aGlja25lc3NEaXJ0eTpib29sZWFuID0gdHJ1ZTtcblx0cHJpdmF0ZSBfY29sb3JzRGlydHk6Ym9vbGVhbiA9IHRydWU7XG5cblx0cHJpdmF0ZSBfc3RhcnRQb3NpdGlvbnM6QXJyYXk8bnVtYmVyPjtcblx0cHJpdmF0ZSBfZW5kUG9zaXRpb25zOkFycmF5PG51bWJlcj47XG5cdHByaXZhdGUgX2JvdW5kaW5nUG9zaXRpb25zOkFycmF5PG51bWJlcj5cblx0cHJpdmF0ZSBfdGhpY2tuZXNzOkFycmF5PG51bWJlcj47XG5cdHByaXZhdGUgX3N0YXJ0Q29sb3JzOkFycmF5PG51bWJlcj47XG5cdHByaXZhdGUgX2VuZENvbG9yczpBcnJheTxudW1iZXI+O1xuXG5cdHByaXZhdGUgX251bVNlZ21lbnRzOm51bWJlcjtcblxuXHRwcml2YXRlIF9wb3NpdGlvbnNVcGRhdGVkOlN1Ykdlb21ldHJ5RXZlbnQ7XG5cdHByaXZhdGUgX3RoaWNrbmVzc1VwZGF0ZWQ6U3ViR2VvbWV0cnlFdmVudDtcblx0cHJpdmF0ZSBfY29sb3JVcGRhdGVkOlN1Ykdlb21ldHJ5RXZlbnQ7XG5cblx0cHVibGljIF9wVXBkYXRlU3RyaWRlT2Zmc2V0KClcblx0e1xuXHRcdHRoaXMuX3BPZmZzZXRbTGluZVN1Ykdlb21ldHJ5LlZFUlRFWF9EQVRBXSA9IDA7XG5cblx0XHR2YXIgc3RyaWRlOm51bWJlciA9IDA7XG5cdFx0dGhpcy5fcE9mZnNldFtMaW5lU3ViR2VvbWV0cnkuU1RBUlRfUE9TSVRJT05fREFUQV0gPSBzdHJpZGU7XG5cdFx0c3RyaWRlICs9IDM7XG5cblx0XHR0aGlzLl9wT2Zmc2V0W0xpbmVTdWJHZW9tZXRyeS5FTkRfUE9TSVRJT05fREFUQV0gPSBzdHJpZGU7XG5cdFx0c3RyaWRlICs9IDM7XG5cblx0XHR0aGlzLl9wT2Zmc2V0W0xpbmVTdWJHZW9tZXRyeS5USElDS05FU1NfREFUQV0gPSBzdHJpZGU7XG5cdFx0c3RyaWRlICs9IDE7XG5cblx0XHR0aGlzLl9wT2Zmc2V0W0xpbmVTdWJHZW9tZXRyeS5DT0xPUl9EQVRBXSA9IHN0cmlkZTtcblx0XHRzdHJpZGUgKz0gNDtcblxuXHRcdHRoaXMuX3BTdHJpZGVbTGluZVN1Ykdlb21ldHJ5LlZFUlRFWF9EQVRBXSA9IHN0cmlkZTtcblx0XHR0aGlzLl9wU3RyaWRlW0xpbmVTdWJHZW9tZXRyeS5TVEFSVF9QT1NJVElPTl9EQVRBXSA9IHN0cmlkZTtcblx0XHR0aGlzLl9wU3RyaWRlW0xpbmVTdWJHZW9tZXRyeS5FTkRfUE9TSVRJT05fREFUQV0gPSBzdHJpZGU7XG5cdFx0dGhpcy5fcFN0cmlkZVtMaW5lU3ViR2VvbWV0cnkuVEhJQ0tORVNTX0RBVEFdID0gc3RyaWRlO1xuXHRcdHRoaXMuX3BTdHJpZGVbTGluZVN1Ykdlb21ldHJ5LkNPTE9SX0RBVEFdID0gc3RyaWRlO1xuXG5cdFx0dmFyIGxlbjpudW1iZXIgPSB0aGlzLl9wTnVtVmVydGljZXMqc3RyaWRlO1xuXG5cdFx0aWYgKHRoaXMuX3BWZXJ0aWNlcyA9PSBudWxsKVxuXHRcdFx0dGhpcy5fcFZlcnRpY2VzID0gbmV3IEFycmF5PG51bWJlcj4obGVuKTtcblx0XHRlbHNlIGlmICh0aGlzLl9wVmVydGljZXMubGVuZ3RoICE9IGxlbilcblx0XHRcdHRoaXMuX3BWZXJ0aWNlcy5sZW5ndGggPSBsZW47XG5cblx0XHR0aGlzLl9wU3RyaWRlT2Zmc2V0RGlydHkgPSBmYWxzZTtcblx0fVxuXG5cdC8qKlxuXHQgKiBcblx0ICovXG5cdHB1YmxpYyBnZXQgdmVydGljZXMoKTpBcnJheTxudW1iZXI+XG5cdHtcblx0XHRpZiAodGhpcy5fcG9zaXRpb25zRGlydHkpXG5cdFx0XHR0aGlzLnVwZGF0ZVBvc2l0aW9ucyh0aGlzLl9zdGFydFBvc2l0aW9ucywgdGhpcy5fZW5kUG9zaXRpb25zKTtcblxuXHRcdGlmICh0aGlzLl90aGlja25lc3NEaXJ0eSlcblx0XHRcdHRoaXMudXBkYXRlVGhpY2tuZXNzKHRoaXMuX3RoaWNrbmVzcyk7XG5cblx0XHRpZiAodGhpcy5fY29sb3JzRGlydHkpXG5cdFx0XHR0aGlzLnVwZGF0ZUNvbG9ycyh0aGlzLl9zdGFydENvbG9ycywgdGhpcy5fZW5kQ29sb3JzKTtcblxuXHRcdHJldHVybiB0aGlzLl9wVmVydGljZXM7XG5cdH1cblxuXHQvKipcblx0ICpcblx0ICovXG5cdHB1YmxpYyBnZXQgc3RhcnRQb3NpdGlvbnMoKTpBcnJheTxudW1iZXI+XG5cdHtcblx0XHRpZiAodGhpcy5fcG9zaXRpb25zRGlydHkpXG5cdFx0XHR0aGlzLnVwZGF0ZVBvc2l0aW9ucyh0aGlzLl9zdGFydFBvc2l0aW9ucywgdGhpcy5fZW5kUG9zaXRpb25zKTtcblxuXHRcdHJldHVybiB0aGlzLl9zdGFydFBvc2l0aW9ucztcblx0fVxuXG5cdC8qKlxuXHQgKlxuXHQgKi9cblx0cHVibGljIGdldCBlbmRQb3NpdGlvbnMoKTpBcnJheTxudW1iZXI+XG5cdHtcblx0XHRpZiAodGhpcy5fcG9zaXRpb25zRGlydHkpXG5cdFx0XHR0aGlzLnVwZGF0ZVBvc2l0aW9ucyh0aGlzLl9zdGFydFBvc2l0aW9ucywgdGhpcy5fZW5kUG9zaXRpb25zKTtcblxuXHRcdHJldHVybiB0aGlzLl9lbmRQb3NpdGlvbnM7XG5cdH1cblxuXHQvKipcblx0ICpcblx0ICovXG5cdHB1YmxpYyBnZXQgdGhpY2tuZXNzKCk6QXJyYXk8bnVtYmVyPlxuXHR7XG5cdFx0aWYgKHRoaXMuX3RoaWNrbmVzc0RpcnR5KVxuXHRcdFx0dGhpcy51cGRhdGVUaGlja25lc3ModGhpcy5fdGhpY2tuZXNzKTtcblxuXHRcdHJldHVybiB0aGlzLl90aGlja25lc3M7XG5cdH1cblxuXHQvKipcblx0ICpcblx0ICovXG5cdHB1YmxpYyBnZXQgc3RhcnRDb2xvcnMoKTpBcnJheTxudW1iZXI+XG5cdHtcblx0XHRpZiAodGhpcy5fY29sb3JzRGlydHkpXG5cdFx0XHR0aGlzLnVwZGF0ZUNvbG9ycyh0aGlzLl9zdGFydENvbG9ycywgdGhpcy5fZW5kQ29sb3JzKTtcblxuXHRcdHJldHVybiB0aGlzLl9zdGFydENvbG9ycztcblx0fVxuXG5cdC8qKlxuXHQgKlxuXHQgKi9cblx0cHVibGljIGdldCBlbmRDb2xvcnMoKTpBcnJheTxudW1iZXI+XG5cdHtcblx0XHRpZiAodGhpcy5fY29sb3JzRGlydHkpXG5cdFx0XHR0aGlzLnVwZGF0ZUNvbG9ycyh0aGlzLl9zdGFydENvbG9ycywgdGhpcy5fZW5kQ29sb3JzKTtcblxuXHRcdHJldHVybiB0aGlzLl9lbmRDb2xvcnM7XG5cdH1cblxuXHQvKipcblx0ICogVGhlIHRvdGFsIGFtb3VudCBvZiBzZWdtZW50cyBpbiB0aGUgVHJpYW5nbGVTdWJHZW9tZXRyeS5cblx0ICovXG5cdHB1YmxpYyBnZXQgbnVtU2VnbWVudHMoKTpudW1iZXJcblx0e1xuXHRcdHJldHVybiB0aGlzLl9udW1TZWdtZW50cztcblx0fVxuXG5cdC8qKlxuXHQgKlxuXHQgKi9cblx0Y29uc3RydWN0b3IoKVxuXHR7XG5cdFx0c3VwZXIodHJ1ZSk7XG5cblx0XHR0aGlzLl9wU3ViTWVzaENsYXNzID0gTGluZVN1Yk1lc2g7XG5cdH1cblxuXHRwdWJsaWMgZ2V0Qm91bmRpbmdQb3NpdGlvbnMoKTpBcnJheTxudW1iZXI+XG5cdHtcblx0XHRpZiAodGhpcy5fYm91bmRpbmdQb3NpdGlvbkRpcnR5KVxuXHRcdFx0dGhpcy5fYm91bmRpbmdQb3NpdGlvbnMgPSB0aGlzLnN0YXJ0UG9zaXRpb25zLmNvbmNhdCh0aGlzLmVuZFBvc2l0aW9ucyk7XG5cblx0XHRyZXR1cm4gdGhpcy5fYm91bmRpbmdQb3NpdGlvbnM7XG5cdH1cblxuXHQvKipcblx0ICpcblx0ICovXG5cdHB1YmxpYyB1cGRhdGVQb3NpdGlvbnMoc3RhcnRWYWx1ZXM6QXJyYXk8bnVtYmVyPiwgZW5kVmFsdWVzOkFycmF5PG51bWJlcj4pXG5cdHtcblx0XHR2YXIgaTpudW1iZXI7XG5cdFx0dmFyIGo6bnVtYmVyO1xuXHRcdHZhciB2YWx1ZXM6QXJyYXk8bnVtYmVyPlxuXHRcdHZhciBpbmRleDpudW1iZXI7XG5cdFx0dmFyIHN0cmlkZTpudW1iZXI7XG5cdFx0dmFyIHBvc2l0aW9uczpBcnJheTxudW1iZXI+O1xuXHRcdHZhciBpbmRpY2VzOkFycmF5PG51bWJlcj47XG5cblx0XHR0aGlzLl9zdGFydFBvc2l0aW9ucyA9IHN0YXJ0VmFsdWVzO1xuXG5cdFx0aWYgKHRoaXMuX3N0YXJ0UG9zaXRpb25zID09IG51bGwpXG5cdFx0XHR0aGlzLl9zdGFydFBvc2l0aW9ucyA9IG5ldyBBcnJheTxudW1iZXI+KCk7XG5cblx0XHR0aGlzLl9lbmRQb3NpdGlvbnMgPSBlbmRWYWx1ZXM7XG5cblx0XHRpZiAodGhpcy5fZW5kUG9zaXRpb25zID09IG51bGwpXG5cdFx0XHR0aGlzLl9lbmRQb3NpdGlvbnMgPSBuZXcgQXJyYXk8bnVtYmVyPigpO1xuXG5cdFx0dGhpcy5fYm91bmRpbmdQb3NpdGlvbkRpcnR5ID0gdHJ1ZTtcblxuXHRcdHRoaXMuX251bVNlZ21lbnRzID0gdGhpcy5fc3RhcnRQb3NpdGlvbnMubGVuZ3RoLzM7XG5cblx0XHR0aGlzLl9wTnVtVmVydGljZXMgPSB0aGlzLl9udW1TZWdtZW50cyo0O1xuXG5cdFx0dmFyIGxlblY6bnVtYmVyID0gdGhpcy5fcE51bVZlcnRpY2VzKnRoaXMuZ2V0U3RyaWRlKExpbmVTdWJHZW9tZXRyeS5WRVJURVhfREFUQSk7XG5cblx0XHRpZiAodGhpcy5fcFZlcnRpY2VzID09IG51bGwpXG5cdFx0XHR0aGlzLl9wVmVydGljZXMgPSBuZXcgQXJyYXk8bnVtYmVyPihsZW5WKTtcblx0XHRlbHNlIGlmICh0aGlzLl9wVmVydGljZXMubGVuZ3RoICE9IGxlblYpXG5cdFx0XHR0aGlzLl9wVmVydGljZXMubGVuZ3RoID0gbGVuVjtcblxuXHRcdGkgPSAwO1xuXHRcdGogPSAwO1xuXHRcdGluZGV4ID0gdGhpcy5nZXRPZmZzZXQoTGluZVN1Ykdlb21ldHJ5LlNUQVJUX1BPU0lUSU9OX0RBVEEpO1xuXHRcdHN0cmlkZSA9IHRoaXMuZ2V0U3RyaWRlKExpbmVTdWJHZW9tZXRyeS5TVEFSVF9QT1NJVElPTl9EQVRBKTtcblx0XHRwb3NpdGlvbnMgPSB0aGlzLl9wVmVydGljZXM7XG5cdFx0aW5kaWNlcyA9IG5ldyBBcnJheSgpO1xuXG5cdFx0d2hpbGUgKGkgPCBzdGFydFZhbHVlcy5sZW5ndGgpIHtcblx0XHRcdHZhbHVlcyA9IChpbmRleC9zdHJpZGUgJiAxKT8gZW5kVmFsdWVzIDogc3RhcnRWYWx1ZXM7XG5cdFx0XHRwb3NpdGlvbnNbaW5kZXhdID0gdmFsdWVzW2ldO1xuXHRcdFx0cG9zaXRpb25zW2luZGV4ICsgMV0gPSB2YWx1ZXNbaSArIDFdO1xuXHRcdFx0cG9zaXRpb25zW2luZGV4ICsgMl0gPSB2YWx1ZXNbaSArIDJdO1xuXG5cdFx0XHR2YWx1ZXMgPSAoaW5kZXgvc3RyaWRlICYgMSk/IHN0YXJ0VmFsdWVzIDogZW5kVmFsdWVzO1xuXHRcdFx0cG9zaXRpb25zW2luZGV4ICsgM10gPSB2YWx1ZXNbaV07XG5cdFx0XHRwb3NpdGlvbnNbaW5kZXggKyA0XSA9IHZhbHVlc1tpICsgMV07XG5cdFx0XHRwb3NpdGlvbnNbaW5kZXggKyA1XSA9IHZhbHVlc1tpICsgMl07XG5cblx0XHRcdGlmICgrK2ogPT0gNCkge1xuXHRcdFx0XHR2YXIgbzpudW1iZXIgPSBpbmRleC9zdHJpZGUgLSAzO1xuXHRcdFx0XHRpbmRpY2VzLnB1c2gobywgbyArIDEsIG8gKyAyLCBvICsgMywgbyArIDIsIG8gKyAxKTtcblx0XHRcdFx0aiA9IDA7XG5cdFx0XHRcdGkgKz0gMztcblx0XHRcdH1cblxuXHRcdFx0aW5kZXggKz0gc3RyaWRlO1xuXHRcdH1cblxuXHRcdHRoaXMudXBkYXRlSW5kaWNlcyhpbmRpY2VzKTtcblxuXHRcdHRoaXMucEludmFsaWRhdGVCb3VuZHMoKTtcblxuXHRcdHRoaXMubm90aWZ5UG9zaXRpb25zVXBkYXRlKCk7XG5cblx0XHR0aGlzLl9wb3NpdGlvbnNEaXJ0eSA9IGZhbHNlO1xuXHR9XG5cblx0LyoqXG5cdCAqIFVwZGF0ZXMgdGhlIHRoaWNrbmVzcy5cblx0ICovXG5cdHB1YmxpYyB1cGRhdGVUaGlja25lc3ModmFsdWVzOkFycmF5PG51bWJlcj4pXG5cdHtcblx0XHR2YXIgaTpudW1iZXI7XG5cdFx0dmFyIGo6bnVtYmVyO1xuXHRcdHZhciBpbmRleDpudW1iZXI7XG5cdFx0dmFyIG9mZnNldDpudW1iZXI7XG5cdFx0dmFyIHN0cmlkZTpudW1iZXI7XG5cdFx0dmFyIHRoaWNrbmVzczpBcnJheTxudW1iZXI+O1xuXG5cdFx0dGhpcy5fdGhpY2tuZXNzID0gdmFsdWVzO1xuXG5cdFx0aWYgKHZhbHVlcyAhPSBudWxsKSB7XG5cdFx0XHRpID0gMDtcblx0XHRcdGogPSAwO1xuXHRcdFx0b2Zmc2V0ID0gdGhpcy5nZXRPZmZzZXQoTGluZVN1Ykdlb21ldHJ5LlRISUNLTkVTU19EQVRBKTtcblx0XHRcdHN0cmlkZSA9IHRoaXMuZ2V0U3RyaWRlKExpbmVTdWJHZW9tZXRyeS5USElDS05FU1NfREFUQSk7XG5cdFx0XHR0aGlja25lc3MgPSB0aGlzLl9wVmVydGljZXM7XG5cblx0XHRcdGluZGV4ID0gb2Zmc2V0XG5cdFx0XHR3aGlsZSAoaSA8IHZhbHVlcy5sZW5ndGgpIHtcblx0XHRcdFx0dGhpY2tuZXNzW2luZGV4XSA9IChNYXRoLmZsb29yKDAuNSooaW5kZXggLSBvZmZzZXQpL3N0cmlkZSArIDAuNSkgJiAxKT8gLXZhbHVlc1tpXSA6IHZhbHVlc1tpXTtcblxuXHRcdFx0XHRpZiAoKytqID09IDQpIHtcblx0XHRcdFx0XHRqID0gMDtcblx0XHRcdFx0XHRpKys7XG5cdFx0XHRcdH1cblx0XHRcdFx0aW5kZXggKz0gc3RyaWRlO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHRoaXMubm90aWZ5VGhpY2tuZXNzVXBkYXRlKCk7XG5cblx0XHR0aGlzLl90aGlja25lc3NEaXJ0eSA9IGZhbHNlO1xuXHR9XG5cblx0LyoqXG5cdCAqXG5cdCAqL1xuXHRwdWJsaWMgdXBkYXRlQ29sb3JzKHN0YXJ0VmFsdWVzOkFycmF5PG51bWJlcj4sIGVuZFZhbHVlczpBcnJheTxudW1iZXI+KVxuXHR7XG5cdFx0dmFyIGk6bnVtYmVyO1xuXHRcdHZhciBqOm51bWJlcjtcblx0XHR2YXIgdmFsdWVzOkFycmF5PG51bWJlcj5cblx0XHR2YXIgaW5kZXg6bnVtYmVyO1xuXHRcdHZhciBvZmZzZXQ6bnVtYmVyO1xuXHRcdHZhciBzdHJpZGU6bnVtYmVyO1xuXHRcdHZhciBjb2xvcnM6QXJyYXk8bnVtYmVyPjtcblxuXHRcdHRoaXMuX3N0YXJ0Q29sb3JzID0gc3RhcnRWYWx1ZXM7XG5cblx0XHR0aGlzLl9lbmRDb2xvcnMgPSBlbmRWYWx1ZXM7XG5cblx0XHQvL2RlZmF1bHQgdG8gd2hpdGVcblx0XHRpZiAodGhpcy5fc3RhcnRDb2xvcnMgPT0gbnVsbCkge1xuXHRcdFx0dGhpcy5fc3RhcnRDb2xvcnMgPSBuZXcgQXJyYXkodGhpcy5fbnVtU2VnbWVudHMqNCk7XG5cblx0XHRcdGkgPSAwO1xuXHRcdFx0d2hpbGUgKGkgPCB0aGlzLl9zdGFydENvbG9ycy5sZW5ndGgpXG5cdFx0XHRcdHRoaXMuX3N0YXJ0Q29sb3JzW2krK10gPSAxO1xuXHRcdH1cblxuXHRcdGlmICh0aGlzLl9lbmRDb2xvcnMgPT0gbnVsbCkge1xuXHRcdFx0dGhpcy5fZW5kQ29sb3JzID0gbmV3IEFycmF5KHRoaXMuX251bVNlZ21lbnRzKjQpO1xuXG5cdFx0XHRpID0gMDtcblx0XHRcdHdoaWxlIChpIDwgdGhpcy5fZW5kQ29sb3JzLmxlbmd0aClcblx0XHRcdFx0dGhpcy5fZW5kQ29sb3JzW2krK10gPSAxO1xuXHRcdH1cblxuXHRcdGkgPSAwO1xuXHRcdGogPSAwO1xuXHRcdG9mZnNldCA9IHRoaXMuZ2V0T2Zmc2V0KExpbmVTdWJHZW9tZXRyeS5DT0xPUl9EQVRBKTtcblx0XHRzdHJpZGUgPSB0aGlzLmdldFN0cmlkZShMaW5lU3ViR2VvbWV0cnkuQ09MT1JfREFUQSk7XG5cdFx0Y29sb3JzID0gdGhpcy5fcFZlcnRpY2VzO1xuXG5cdFx0aW5kZXggPSBvZmZzZXQ7XG5cblx0XHR3aGlsZSAoaSA8IHRoaXMuX3N0YXJ0Q29sb3JzLmxlbmd0aCkge1xuXHRcdFx0dmFsdWVzID0gKChpbmRleCAtIG9mZnNldCkvc3RyaWRlICYgMSk/IHRoaXMuX2VuZENvbG9ycyA6IHRoaXMuX3N0YXJ0Q29sb3JzO1xuXHRcdFx0Y29sb3JzW2luZGV4XSA9IHZhbHVlc1tpXTtcblx0XHRcdGNvbG9yc1tpbmRleCArIDFdID0gdmFsdWVzW2kgKyAxXTtcblx0XHRcdGNvbG9yc1tpbmRleCArIDJdID0gdmFsdWVzW2kgKyAyXTtcblx0XHRcdGNvbG9yc1tpbmRleCArIDNdID0gdmFsdWVzW2kgKyAzXTtcblxuXHRcdFx0aWYgKCsraiA9PSA0KSB7XG5cdFx0XHRcdGogPSAwO1xuXHRcdFx0XHRpICs9IDQ7XG5cdFx0XHR9XG5cblx0XHRcdGluZGV4ICs9IHN0cmlkZTtcblx0XHR9XG5cblx0XHR0aGlzLm5vdGlmeUNvbG9yc1VwZGF0ZSgpO1xuXG5cdFx0dGhpcy5fY29sb3JzRGlydHkgPSBmYWxzZTtcblx0fVxuXG5cdC8qKlxuXHQgKlxuXHQgKi9cblx0cHVibGljIGRpc3Bvc2UoKVxuXHR7XG5cdFx0c3VwZXIuZGlzcG9zZSgpO1xuXG5cdFx0dGhpcy5fc3RhcnRQb3NpdGlvbnMgPSBudWxsO1xuXHRcdHRoaXMuX2VuZFBvc2l0aW9ucyA9IG51bGw7XG5cdFx0dGhpcy5fdGhpY2tuZXNzID0gbnVsbDtcblx0XHR0aGlzLl9zdGFydENvbG9ycyA9IG51bGw7XG5cdFx0dGhpcy5fZW5kQ29sb3JzID0gbnVsbDtcblx0fVxuXG5cdC8qKlxuXHQgKiBAcHJvdGVjdGVkXG5cdCAqL1xuXHRwdWJsaWMgcEludmFsaWRhdGVCb3VuZHMoKVxuXHR7XG5cdFx0aWYgKHRoaXMucGFyZW50R2VvbWV0cnkpXG5cdFx0XHR0aGlzLnBhcmVudEdlb21ldHJ5LmlJbnZhbGlkYXRlQm91bmRzKHRoaXMpO1xuXHR9XG5cblx0LyoqXG5cdCAqIFRoZSBHZW9tZXRyeSBvYmplY3QgdGhhdCAnb3ducycgdGhpcyBUcmlhbmdsZVN1Ykdlb21ldHJ5IG9iamVjdC5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICovXG5cdHB1YmxpYyBwYXJlbnRHZW9tZXRyeTpHZW9tZXRyeTtcblxuXHQvKipcblx0ICogQ2xvbmVzIHRoZSBjdXJyZW50IG9iamVjdFxuXHQgKiBAcmV0dXJuIEFuIGV4YWN0IGR1cGxpY2F0ZSBvZiB0aGUgY3VycmVudCBvYmplY3QuXG5cdCAqL1xuXHRwdWJsaWMgY2xvbmUoKTpMaW5lU3ViR2VvbWV0cnlcblx0e1xuXHRcdHZhciBjbG9uZTpMaW5lU3ViR2VvbWV0cnkgPSBuZXcgTGluZVN1Ykdlb21ldHJ5KCk7XG5cdFx0Y2xvbmUudXBkYXRlSW5kaWNlcyh0aGlzLl9wSW5kaWNlcy5jb25jYXQoKSk7XG5cdFx0Y2xvbmUudXBkYXRlUG9zaXRpb25zKHRoaXMuX3N0YXJ0UG9zaXRpb25zLmNvbmNhdCgpLCB0aGlzLl9lbmRQb3NpdGlvbnMuY29uY2F0KCkpO1xuXHRcdGNsb25lLnVwZGF0ZVRoaWNrbmVzcyh0aGlzLl90aGlja25lc3MuY29uY2F0KCkpO1xuXHRcdGNsb25lLnVwZGF0ZVBvc2l0aW9ucyh0aGlzLl9zdGFydFBvc2l0aW9ucy5jb25jYXQoKSwgdGhpcy5fZW5kUG9zaXRpb25zLmNvbmNhdCgpKTtcblxuXHRcdHJldHVybiBjbG9uZTtcblx0fVxuXG5cdHB1YmxpYyBfcE5vdGlmeVZlcnRpY2VzVXBkYXRlKClcblx0e1xuXHRcdHRoaXMuX3BTdHJpZGVPZmZzZXREaXJ0eSA9IHRydWU7XG5cblx0XHR0aGlzLm5vdGlmeVBvc2l0aW9uc1VwZGF0ZSgpO1xuXHRcdHRoaXMubm90aWZ5VGhpY2tuZXNzVXBkYXRlKCk7XG5cdFx0dGhpcy5ub3RpZnlDb2xvcnNVcGRhdGUoKTtcblx0fVxuXG5cdHByaXZhdGUgbm90aWZ5UG9zaXRpb25zVXBkYXRlKClcblx0e1xuXHRcdGlmICh0aGlzLl9wb3NpdGlvbnNEaXJ0eSlcblx0XHRcdHJldHVybjtcblxuXHRcdHRoaXMuX3Bvc2l0aW9uc0RpcnR5ID0gdHJ1ZTtcblxuXHRcdGlmICghdGhpcy5fcG9zaXRpb25zVXBkYXRlZClcblx0XHRcdHRoaXMuX3Bvc2l0aW9uc1VwZGF0ZWQgPSBuZXcgU3ViR2VvbWV0cnlFdmVudChTdWJHZW9tZXRyeUV2ZW50LlZFUlRJQ0VTX1VQREFURUQsIFRyaWFuZ2xlU3ViR2VvbWV0cnkuUE9TSVRJT05fREFUQSk7XG5cblx0XHR0aGlzLmRpc3BhdGNoRXZlbnQodGhpcy5fcG9zaXRpb25zVXBkYXRlZCk7XG5cdH1cblxuXHRwcml2YXRlIG5vdGlmeVRoaWNrbmVzc1VwZGF0ZSgpXG5cdHtcblx0XHRpZiAodGhpcy5fdGhpY2tuZXNzRGlydHkpXG5cdFx0XHRyZXR1cm47XG5cblx0XHR0aGlzLl90aGlja25lc3NEaXJ0eSA9IHRydWU7XG5cblx0XHRpZiAoIXRoaXMuX3RoaWNrbmVzc1VwZGF0ZWQpXG5cdFx0XHR0aGlzLl90aGlja25lc3NVcGRhdGVkID0gbmV3IFN1Ykdlb21ldHJ5RXZlbnQoU3ViR2VvbWV0cnlFdmVudC5WRVJUSUNFU19VUERBVEVELCBMaW5lU3ViR2VvbWV0cnkuVEhJQ0tORVNTX0RBVEEpO1xuXG5cdFx0dGhpcy5kaXNwYXRjaEV2ZW50KHRoaXMuX3RoaWNrbmVzc1VwZGF0ZWQpO1xuXHR9XG5cblx0cHJpdmF0ZSBub3RpZnlDb2xvcnNVcGRhdGUoKVxuXHR7XG5cdFx0aWYgKHRoaXMuX2NvbG9yc0RpcnR5KVxuXHRcdFx0cmV0dXJuO1xuXG5cdFx0dGhpcy5fY29sb3JzRGlydHkgPSB0cnVlO1xuXG5cdFx0aWYgKCF0aGlzLl9jb2xvclVwZGF0ZWQpXG5cdFx0XHR0aGlzLl9jb2xvclVwZGF0ZWQgPSBuZXcgU3ViR2VvbWV0cnlFdmVudChTdWJHZW9tZXRyeUV2ZW50LlZFUlRJQ0VTX1VQREFURUQsIExpbmVTdWJHZW9tZXRyeS5DT0xPUl9EQVRBKTtcblxuXHRcdHRoaXMuZGlzcGF0Y2hFdmVudCh0aGlzLl9jb2xvclVwZGF0ZWQpO1xuXHR9XG59XG5cbmV4cG9ydCA9IExpbmVTdWJHZW9tZXRyeTsiXX0=