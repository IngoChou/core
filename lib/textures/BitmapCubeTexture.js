var __extends = this.__extends || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    __.prototype = b.prototype;
    d.prototype = new __();
};
var Error = require("awayjs-core/lib/errors/Error");
var CubeTextureBase = require("awayjs-core/lib/textures/CubeTextureBase");
var TextureUtils = require("awayjs-core/lib/utils/TextureUtils");
var BitmapCubeTexture = (function (_super) {
    __extends(BitmapCubeTexture, _super);
    function BitmapCubeTexture(posX, negX, posY, negY, posZ, negZ, generateMipmaps) {
        if (generateMipmaps === void 0) { generateMipmaps = false; }
        _super.call(this, generateMipmaps);
        this._bitmapDatas = new Array(6);
        this._testSize(this._bitmapDatas[0] = posX);
        this._testSize(this._bitmapDatas[1] = negX);
        this._testSize(this._bitmapDatas[2] = posY);
        this._testSize(this._bitmapDatas[3] = negY);
        this._testSize(this._bitmapDatas[4] = posZ);
        this._testSize(this._bitmapDatas[5] = negZ);
        this.invalidateContent();
        this._pSetSize(posX.width);
    }
    Object.defineProperty(BitmapCubeTexture.prototype, "positiveX", {
        /**
         * The texture on the cube's right face.
         */
        get: function () {
            return this._bitmapDatas[0];
        },
        set: function (value) {
            this._testSize(value);
            this.invalidateContent();
            this._pSetSize(value.width);
            this._bitmapDatas[0] = value;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(BitmapCubeTexture.prototype, "negativeX", {
        /**
         * The texture on the cube's left face.
         */
        get: function () {
            return this._bitmapDatas[1];
        },
        set: function (value) {
            this._testSize(value);
            this.invalidateContent();
            this._pSetSize(value.width);
            this._bitmapDatas[1] = value;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(BitmapCubeTexture.prototype, "positiveY", {
        /**
         * The texture on the cube's top face.
         */
        get: function () {
            return this._bitmapDatas[2];
        },
        set: function (value) {
            this._testSize(value);
            this.invalidateContent();
            this._pSetSize(value.width);
            this._bitmapDatas[2] = value;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(BitmapCubeTexture.prototype, "negativeY", {
        /**
         * The texture on the cube's bottom face.
         */
        get: function () {
            return this._bitmapDatas[3];
        },
        set: function (value) {
            this._testSize(value);
            this.invalidateContent();
            this._pSetSize(value.width);
            this._bitmapDatas[3] = value;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(BitmapCubeTexture.prototype, "positiveZ", {
        /**
         * The texture on the cube's far face.
         */
        get: function () {
            return this._bitmapDatas[4];
        },
        set: function (value) {
            this._testSize(value);
            this.invalidateContent();
            this._pSetSize(value.width);
            this._bitmapDatas[4] = value;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(BitmapCubeTexture.prototype, "negativeZ", {
        /**
         * The texture on the cube's near face.
         */
        get: function () {
            return this._bitmapDatas[5];
        },
        set: function (value) {
            this._testSize(value);
            this.invalidateContent();
            this._pSetSize(value.width);
            this._bitmapDatas[5] = value;
        },
        enumerable: true,
        configurable: true
    });
    /**
     *
     * @param value
     * @private
     */
    BitmapCubeTexture.prototype._testSize = function (value) {
        if (value.width != value.height)
            throw new Error("BitmapData should have equal width and height!");
        if (!TextureUtils.isBitmapDataValid(value))
            throw new Error("Invalid bitmapData: Width and height must be power of 2 and cannot exceed 2048");
    };
    BitmapCubeTexture.prototype.dispose = function () {
        _super.prototype.dispose.call(this);
        var len = this._bitmapDatas.length;
        for (var i = 0; i < len; i++) {
            this._bitmapDatas[i].dispose();
            this._bitmapDatas[i] = null;
        }
        this._bitmapDatas = null;
    };
    BitmapCubeTexture.prototype._iGetTextureData = function (side) {
        return this._bitmapDatas[side];
    };
    return BitmapCubeTexture;
})(CubeTextureBase);
module.exports = BitmapCubeTexture;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImF3YXlqcy1jb3JlL2xpYi90ZXh0dXJlcy9iaXRtYXBjdWJldGV4dHVyZS50cyJdLCJuYW1lcyI6WyJCaXRtYXBDdWJlVGV4dHVyZSIsIkJpdG1hcEN1YmVUZXh0dXJlLmNvbnN0cnVjdG9yIiwiQml0bWFwQ3ViZVRleHR1cmUucG9zaXRpdmVYIiwiQml0bWFwQ3ViZVRleHR1cmUubmVnYXRpdmVYIiwiQml0bWFwQ3ViZVRleHR1cmUucG9zaXRpdmVZIiwiQml0bWFwQ3ViZVRleHR1cmUubmVnYXRpdmVZIiwiQml0bWFwQ3ViZVRleHR1cmUucG9zaXRpdmVaIiwiQml0bWFwQ3ViZVRleHR1cmUubmVnYXRpdmVaIiwiQml0bWFwQ3ViZVRleHR1cmUuX3Rlc3RTaXplIiwiQml0bWFwQ3ViZVRleHR1cmUuZGlzcG9zZSIsIkJpdG1hcEN1YmVUZXh0dXJlLl9pR2V0VGV4dHVyZURhdGEiXSwibWFwcGluZ3MiOiI7Ozs7OztBQUNBLElBQU8sS0FBSyxXQUFlLDhCQUE4QixDQUFDLENBQUM7QUFDM0QsSUFBTyxlQUFlLFdBQWEsMENBQTBDLENBQUMsQ0FBQztBQUMvRSxJQUFPLFlBQVksV0FBYyxvQ0FBb0MsQ0FBQyxDQUFDO0FBR3ZFLElBQU0saUJBQWlCO0lBQVNBLFVBQTFCQSxpQkFBaUJBLFVBQXdCQTtJQW9HOUNBLFNBcEdLQSxpQkFBaUJBLENBb0dWQSxJQUFlQSxFQUFFQSxJQUFlQSxFQUFFQSxJQUFlQSxFQUFFQSxJQUFlQSxFQUFFQSxJQUFlQSxFQUFFQSxJQUFlQSxFQUFFQSxlQUErQkE7UUFBL0JDLCtCQUErQkEsR0FBL0JBLHVCQUErQkE7UUFFaEpBLGtCQUFNQSxlQUFlQSxDQUFDQSxDQUFDQTtRQXBHaEJBLGlCQUFZQSxHQUFxQkEsSUFBSUEsS0FBS0EsQ0FBYUEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7UUFzR2pFQSxJQUFJQSxDQUFDQSxTQUFTQSxDQUFDQSxJQUFJQSxDQUFDQSxZQUFZQSxDQUFDQSxDQUFDQSxDQUFDQSxHQUFHQSxJQUFJQSxDQUFD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QUNBO0lBQ0ZWLHdCQUFDQTtBQUFEQSxDQWxKQSxBQWtKQ0EsRUFsSitCLGVBQWUsRUFrSjlDO0FBRUQsQUFBMkIsaUJBQWxCLGlCQUFpQixDQUFDIiwiZmlsZSI6InRleHR1cmVzL0JpdG1hcEN1YmVUZXh0dXJlLmpzIiwic291cmNlUm9vdCI6Ii4uLyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBCaXRtYXBEYXRhXHRcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtY29yZS9saWIvYmFzZS9CaXRtYXBEYXRhXCIpO1xuaW1wb3J0IEVycm9yXHRcdFx0XHRcdD0gcmVxdWlyZShcImF3YXlqcy1jb3JlL2xpYi9lcnJvcnMvRXJyb3JcIik7XG5pbXBvcnQgQ3ViZVRleHR1cmVCYXNlXHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLWNvcmUvbGliL3RleHR1cmVzL0N1YmVUZXh0dXJlQmFzZVwiKTtcbmltcG9ydCBUZXh0dXJlVXRpbHNcdFx0XHRcdD0gcmVxdWlyZShcImF3YXlqcy1jb3JlL2xpYi91dGlscy9UZXh0dXJlVXRpbHNcIik7XG5cblxuY2xhc3MgQml0bWFwQ3ViZVRleHR1cmUgZXh0ZW5kcyBDdWJlVGV4dHVyZUJhc2Vcbntcblx0cHJpdmF0ZSBfYml0bWFwRGF0YXM6QXJyYXk8Qml0bWFwRGF0YT4gPSBuZXcgQXJyYXk8Qml0bWFwRGF0YT4oNik7XG5cblx0LyoqXG5cdCAqIFRoZSB0ZXh0dXJlIG9uIHRoZSBjdWJlJ3MgcmlnaHQgZmFjZS5cblx0ICovXG5cdHB1YmxpYyBnZXQgcG9zaXRpdmVYKCk6Qml0bWFwRGF0YVxuXHR7XG5cdFx0cmV0dXJuIHRoaXMuX2JpdG1hcERhdGFzWzBdO1xuXHR9XG5cblx0cHVibGljIHNldCBwb3NpdGl2ZVgodmFsdWU6Qml0bWFwRGF0YSlcblx0e1xuXHRcdHRoaXMuX3Rlc3RTaXplKHZhbHVlKTtcblx0XHR0aGlzLmludmFsaWRhdGVDb250ZW50KCk7XG5cdFx0dGhpcy5fcFNldFNpemUodmFsdWUud2lkdGgpO1xuXHRcdHRoaXMuX2JpdG1hcERhdGFzWzBdID0gdmFsdWU7XG5cdH1cblxuXHQvKipcblx0ICogVGhlIHRleHR1cmUgb24gdGhlIGN1YmUncyBsZWZ0IGZhY2UuXG5cdCAqL1xuXHRwdWJsaWMgZ2V0IG5lZ2F0aXZlWCgpOkJpdG1hcERhdGFcblx0e1xuXHRcdHJldHVybiB0aGlzLl9iaXRtYXBEYXRhc1sxXTtcblx0fVxuXG5cdHB1YmxpYyBzZXQgbmVnYXRpdmVYKHZhbHVlOkJpdG1hcERhdGEpXG5cdHtcblx0XHR0aGlzLl90ZXN0U2l6ZSh2YWx1ZSk7XG5cdFx0dGhpcy5pbnZhbGlkYXRlQ29udGVudCgpO1xuXHRcdHRoaXMuX3BTZXRTaXplKHZhbHVlLndpZHRoKTtcblx0XHR0aGlzLl9iaXRtYXBEYXRhc1sxXSA9IHZhbHVlO1xuXHR9XG5cblx0LyoqXG5cdCAqIFRoZSB0ZXh0dXJlIG9uIHRoZSBjdWJlJ3MgdG9wIGZhY2UuXG5cdCAqL1xuXHRwdWJsaWMgZ2V0IHBvc2l0aXZlWSgpOkJpdG1hcERhdGFcblx0e1xuXHRcdHJldHVybiB0aGlzLl9iaXRtYXBEYXRhc1syXTtcblx0fVxuXG5cdHB1YmxpYyBzZXQgcG9zaXRpdmVZKHZhbHVlOkJpdG1hcERhdGEpXG5cdHtcblx0XHR0aGlzLl90ZXN0U2l6ZSh2YWx1ZSk7XG5cdFx0dGhpcy5pbnZhbGlkYXRlQ29udGVudCgpO1xuXHRcdHRoaXMuX3BTZXRTaXplKHZhbHVlLndpZHRoKTtcblx0XHR0aGlzLl9iaXRtYXBEYXRhc1syXSA9IHZhbHVlO1xuXHR9XG5cblx0LyoqXG5cdCAqIFRoZSB0ZXh0dXJlIG9uIHRoZSBjdWJlJ3MgYm90dG9tIGZhY2UuXG5cdCAqL1xuXHRwdWJsaWMgZ2V0IG5lZ2F0aXZlWSgpOkJpdG1hcERhdGFcblx0e1xuXHRcdHJldHVybiB0aGlzLl9iaXRtYXBEYXRhc1szXTtcblx0fVxuXG5cdHB1YmxpYyBzZXQgbmVnYXRpdmVZKHZhbHVlOkJpdG1hcERhdGEpXG5cdHtcblx0XHR0aGlzLl90ZXN0U2l6ZSh2YWx1ZSk7XG5cdFx0dGhpcy5pbnZhbGlkYXRlQ29udGVudCgpO1xuXHRcdHRoaXMuX3BTZXRTaXplKHZhbHVlLndpZHRoKTtcblx0XHR0aGlzLl9iaXRtYXBEYXRhc1szXSA9IHZhbHVlO1xuXHR9XG5cblx0LyoqXG5cdCAqIFRoZSB0ZXh0dXJlIG9uIHRoZSBjdWJlJ3MgZmFyIGZhY2UuXG5cdCAqL1xuXHRwdWJsaWMgZ2V0IHBvc2l0aXZlWigpOkJpdG1hcERhdGFcblx0e1xuXHRcdHJldHVybiB0aGlzLl9iaXRtYXBEYXRhc1s0XTtcblx0fVxuXG5cdHB1YmxpYyBzZXQgcG9zaXRpdmVaKHZhbHVlOkJpdG1hcERhdGEpXG5cdHtcblx0XHR0aGlzLl90ZXN0U2l6ZSh2YWx1ZSk7XG5cdFx0dGhpcy5pbnZhbGlkYXRlQ29udGVudCgpO1xuXHRcdHRoaXMuX3BTZXRTaXplKHZhbHVlLndpZHRoKTtcblx0XHR0aGlzLl9iaXRtYXBEYXRhc1s0XSA9IHZhbHVlO1xuXHR9XG5cblx0LyoqXG5cdCAqIFRoZSB0ZXh0dXJlIG9uIHRoZSBjdWJlJ3MgbmVhciBmYWNlLlxuXHQgKi9cblx0cHVibGljIGdldCBuZWdhdGl2ZVooKTpCaXRtYXBEYXRhXG5cdHtcblx0XHRyZXR1cm4gdGhpcy5fYml0bWFwRGF0YXNbNV07XG5cdH1cblxuXHRwdWJsaWMgc2V0IG5lZ2F0aXZlWih2YWx1ZTpCaXRtYXBEYXRhKVxuXHR7XG5cdFx0dGhpcy5fdGVzdFNpemUodmFsdWUpO1xuXHRcdHRoaXMuaW52YWxpZGF0ZUNvbnRlbnQoKTtcblx0XHR0aGlzLl9wU2V0U2l6ZSh2YWx1ZS53aWR0aCk7XG5cdFx0dGhpcy5fYml0bWFwRGF0YXNbNV0gPSB2YWx1ZTtcblx0fVxuXG5cdGNvbnN0cnVjdG9yKHBvc1g6Qml0bWFwRGF0YSwgbmVnWDpCaXRtYXBEYXRhLCBwb3NZOkJpdG1hcERhdGEsIG5lZ1k6Qml0bWFwRGF0YSwgcG9zWjpCaXRtYXBEYXRhLCBuZWdaOkJpdG1hcERhdGEsIGdlbmVyYXRlTWlwbWFwczpib29sZWFuID0gZmFsc2UpXG5cdHtcblx0XHRzdXBlcihnZW5lcmF0ZU1pcG1hcHMpO1xuXG5cdFx0dGhpcy5fdGVzdFNpemUodGhpcy5fYml0bWFwRGF0YXNbMF0gPSBwb3NYKTtcblx0XHR0aGlzLl90ZXN0U2l6ZSh0aGlzLl9iaXRtYXBEYXRhc1sxXSA9IG5lZ1gpO1xuXHRcdHRoaXMuX3Rlc3RTaXplKHRoaXMuX2JpdG1hcERhdGFzWzJdID0gcG9zWSk7XG5cdFx0dGhpcy5fdGVzdFNpemUodGhpcy5fYml0bWFwRGF0YXNbM10gPSBuZWdZKTtcblx0XHR0aGlzLl90ZXN0U2l6ZSh0aGlzLl9iaXRtYXBEYXRhc1s0XSA9IHBvc1opO1xuXHRcdHRoaXMuX3Rlc3RTaXplKHRoaXMuX2JpdG1hcERhdGFzWzVdID0gbmVnWik7XG5cblx0XHR0aGlzLmludmFsaWRhdGVDb250ZW50KCk7XG5cblx0XHR0aGlzLl9wU2V0U2l6ZShwb3NYLndpZHRoKTtcblx0fVxuXG5cdC8qKlxuXHQgKlxuXHQgKiBAcGFyYW0gdmFsdWVcblx0ICogQHByaXZhdGVcblx0ICovXG5cdHByaXZhdGUgX3Rlc3RTaXplKHZhbHVlOkJpdG1hcERhdGEpXG5cdHtcblx0XHRpZiAodmFsdWUud2lkdGggIT0gdmFsdWUuaGVpZ2h0KVxuXHRcdFx0dGhyb3cgbmV3IEVycm9yKFwiQml0bWFwRGF0YSBzaG91bGQgaGF2ZSBlcXVhbCB3aWR0aCBhbmQgaGVpZ2h0IVwiKTtcblx0XHRpZiAoIVRleHR1cmVVdGlscy5pc0JpdG1hcERhdGFWYWxpZCh2YWx1ZSkpXG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGJpdG1hcERhdGE6IFdpZHRoIGFuZCBoZWlnaHQgbXVzdCBiZSBwb3dlciBvZiAyIGFuZCBjYW5ub3QgZXhjZWVkIDIwNDhcIik7XG5cdH1cblxuXHRwdWJsaWMgZGlzcG9zZSgpXG5cdHtcblx0XHRzdXBlci5kaXNwb3NlKCk7XG5cblx0XHR2YXIgbGVuOm51bWJlciA9IHRoaXMuX2JpdG1hcERhdGFzLmxlbmd0aFxuXHRcdGZvciAodmFyIGk6bnVtYmVyID0gMDsgaSA8IGxlbjsgaSsrKSB7XG5cdFx0XHR0aGlzLl9iaXRtYXBEYXRhc1tpXS5kaXNwb3NlKCk7XG5cdFx0XHR0aGlzLl9iaXRtYXBEYXRhc1tpXSA9IG51bGw7XG5cdFx0fVxuXG5cdFx0dGhpcy5fYml0bWFwRGF0YXMgPSBudWxsO1xuXHR9XG5cblx0cHVibGljIF9pR2V0VGV4dHVyZURhdGEoc2lkZTpudW1iZXIpOkJpdG1hcERhdGFcblx0e1xuXHRcdHJldHVybiB0aGlzLl9iaXRtYXBEYXRhc1tzaWRlXTtcblx0fVxufVxuXG5leHBvcnQgPSBCaXRtYXBDdWJlVGV4dHVyZTsiXX0=