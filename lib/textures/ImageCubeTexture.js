var __extends = this.__extends || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    __.prototype = b.prototype;
    d.prototype = new __();
};
var Error = require("awayjs-core/lib/errors/Error");
var CubeTextureBase = require("awayjs-core/lib/textures/CubeTextureBase");
var TextureUtils = require("awayjs-core/lib/utils/TextureUtils");
var ImageCubeTexture = (function (_super) {
    __extends(ImageCubeTexture, _super);
    function ImageCubeTexture(posX, negX, posY, negY, posZ, negZ) {
        _super.call(this);
        this._htmlImageElements = new Array(6);
        this._testSize(this._htmlImageElements[0] = posX);
        this._testSize(this._htmlImageElements[1] = negX);
        this._testSize(this._htmlImageElements[2] = posY);
        this._testSize(this._htmlImageElements[3] = negY);
        this._testSize(this._htmlImageElements[4] = posZ);
        this._testSize(this._htmlImageElements[5] = negZ);
        this.invalidateContent();
        this._pSetSize(posX.width);
    }
    Object.defineProperty(ImageCubeTexture.prototype, "positiveX", {
        /**
         * The texture on the cube's right face.
         */
        get: function () {
            return this._htmlImageElements[0];
        },
        set: function (value) {
            this._testSize(value);
            this.invalidateContent();
            this._pSetSize(value.width);
            this._htmlImageElements[0] = value;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ImageCubeTexture.prototype, "negativeX", {
        /**
         * The texture on the cube's left face.
         */
        get: function () {
            return this._htmlImageElements[1];
        },
        set: function (value) {
            this._testSize(value);
            this.invalidateContent();
            this._pSetSize(value.width);
            this._htmlImageElements[1] = value;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ImageCubeTexture.prototype, "positiveY", {
        /**
         * The texture on the cube's top face.
         */
        get: function () {
            return this._htmlImageElements[2];
        },
        set: function (value) {
            this._testSize(value);
            this.invalidateContent();
            this._pSetSize(value.width);
            this._htmlImageElements[2] = value;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ImageCubeTexture.prototype, "negativeY", {
        /**
         * The texture on the cube's bottom face.
         */
        get: function () {
            return this._htmlImageElements[3];
        },
        set: function (value) {
            this._testSize(value);
            this.invalidateContent();
            this._pSetSize(value.width);
            this._htmlImageElements[3] = value;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ImageCubeTexture.prototype, "positiveZ", {
        /**
         * The texture on the cube's far face.
         */
        get: function () {
            return this._htmlImageElements[4];
        },
        set: function (value) {
            this._testSize(value);
            this.invalidateContent();
            this._pSetSize(value.width);
            this._htmlImageElements[4] = value;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ImageCubeTexture.prototype, "negativeZ", {
        /**
         * The texture on the cube's near face.
         */
        get: function () {
            return this._htmlImageElements[5];
        },
        set: function (value) {
            this._testSize(value);
            this.invalidateContent();
            this._pSetSize(value.width);
            this._htmlImageElements[5] = value;
        },
        enumerable: true,
        configurable: true
    });
    ImageCubeTexture.prototype._testSize = function (value) {
        if (value.width != value.height)
            throw new Error("BitmapData should have equal width and height!");
        if (!TextureUtils.isHTMLImageElementValid(value))
            throw new Error("Invalid bitmapData: Width and height must be power of 2 and cannot exceed 2048");
    };
    ImageCubeTexture.prototype._iGetTextureData = function (side) {
        return this._htmlImageElements[side];
    };
    return ImageCubeTexture;
})(CubeTextureBase);
module.exports = ImageCubeTexture;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImF3YXlqcy1jb3JlL2xpYi90ZXh0dXJlcy9JbWFnZUN1YmVUZXh0dXJlLnRzIl0sIm5hbWVzIjpbIkltYWdlQ3ViZVRleHR1cmUiLCJJbWFnZUN1YmVUZXh0dXJlLmNvbnN0cnVjdG9yIiwiSW1hZ2VDdWJlVGV4dHVyZS5wb3NpdGl2ZVgiLCJJbWFnZUN1YmVUZXh0dXJlLm5lZ2F0aXZlWCIsIkltYWdlQ3ViZVRleHR1cmUucG9zaXRpdmVZIiwiSW1hZ2VDdWJlVGV4dHVyZS5uZWdhdGl2ZVkiLCJJbWFnZUN1YmVUZXh0dXJlLnBvc2l0aXZlWiIsIkltYWdlQ3ViZVRleHR1cmUubmVnYXRpdmVaIiwiSW1hZ2VDdWJlVGV4dHVyZS5fdGVzdFNpemUiLCJJbWFnZUN1YmVUZXh0dXJlLl9pR2V0VGV4dHVyZURhdGEiXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLElBQU8sS0FBSyxXQUFlLDhCQUE4QixDQUFDLENBQUM7QUFDM0QsSUFBTyxlQUFlLFdBQWEsMENBQTBDLENBQUMsQ0FBQztBQUMvRSxJQUFPLFlBQVksV0FBYyxvQ0FBb0MsQ0FBQyxDQUFDO0FBRXZFLElBQU0sZ0JBQWdCO0lBQVNBLFVBQXpCQSxnQkFBZ0JBLFVBQXdCQTtJQW9HN0NBLFNBcEdLQSxnQkFBZ0JBLENBb0dUQSxJQUFxQkEsRUFBRUEsSUFBcUJBLEVBQUVBLElBQXFCQSxFQUFFQSxJQUFxQkEsRUFBRUEsSUFBcUJBLEVBQUVBLElBQXFCQTtRQUVuSkMsaUJBQU9BLENBQUNBO1FBcEdEQSx1QkFBa0JBLEdBQTJCQSxJQUFJQSxLQUFLQSxDQUFtQkEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7UUFzR25GQSxJQUFJQSxDQUFDQSxTQUFTQSxDQUFDQSxJQUFJQSxDQUFDQSxrQkFBa0JBLENBQUNBLENBQUNBLENBQUNBLEdBQUdBLElBQUlBLENBQUNBLENBQUNBO1FBQ2xEQSxJQUFJQSxDQUFDQSxTQUFTQSxDQUFDQSxJQUFJQSxDQUFDQSxrQkFBa0JBLENBQUNBLENBQUNBLENBQUNBLEdBQUdBLElB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QTs7O09BUkFQO0lBMEJPQSxvQ0FBU0EsR0FBakJBLFVBQWtCQSxLQUFzQkE7UUFFdkNRLEVBQUVBLENBQUNBLENBQUNBLEtBQUtBLENBQUNBLEtBQUtBLElBQUlBLEtBQUtBLENBQUNBLE1BQU1BLENBQUNBO1lBQy9CQSxNQUFNQSxJQUFJQSxLQUFLQSxDQUFDQSxnREFBZ0RBLENBQUNBLENBQUNBO1FBQ25FQSxFQUFFQSxDQUFDQSxDQUFDQSxDQUFDQSxZQUFZQSxDQUFDQSx1QkFBdUJBLENBQUNBLEtBQUtBLENBQUNBLENBQUNBO1lBQ2hEQSxNQUFNQSxJQUFJQSxLQUFLQSxDQUFDQSxnRkFBZ0ZBLENBQUNBLENBQUNBO0lBQ3BHQSxDQUFDQTtJQUVNUiwyQ0FBZ0JBLEdBQXZCQSxVQUF3QkEsSUFBV0E7UUFFbENTLE1BQU1BLENBQUNBLElBQUlBLENBQUNBLGtCQUFrQkEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsQ0FBQ0E7SUFDdENBLENBQUNBO0lBQ0ZULHVCQUFDQTtBQUFEQSxDQWhJQSxBQWdJQ0EsRUFoSThCLGVBQWUsRUFnSTdDO0FBRUQsQUFBMEIsaUJBQWpCLGdCQUFnQixDQUFDIiwiZmlsZSI6InRleHR1cmVzL0ltYWdlQ3ViZVRleHR1cmUuanMiLCJzb3VyY2VSb290IjoiLi4vIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEVycm9yXHRcdFx0XHRcdD0gcmVxdWlyZShcImF3YXlqcy1jb3JlL2xpYi9lcnJvcnMvRXJyb3JcIik7XHJcbmltcG9ydCBDdWJlVGV4dHVyZUJhc2VcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtY29yZS9saWIvdGV4dHVyZXMvQ3ViZVRleHR1cmVCYXNlXCIpO1xyXG5pbXBvcnQgVGV4dHVyZVV0aWxzXHRcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtY29yZS9saWIvdXRpbHMvVGV4dHVyZVV0aWxzXCIpO1xyXG5cclxuY2xhc3MgSW1hZ2VDdWJlVGV4dHVyZSBleHRlbmRzIEN1YmVUZXh0dXJlQmFzZVxyXG57XHJcblx0cHJpdmF0ZSBfaHRtbEltYWdlRWxlbWVudHM6QXJyYXk8SFRNTEltYWdlRWxlbWVudD4gPSBuZXcgQXJyYXk8SFRNTEltYWdlRWxlbWVudD4oNik7XHJcblxyXG5cdC8qKlxyXG5cdCAqIFRoZSB0ZXh0dXJlIG9uIHRoZSBjdWJlJ3MgcmlnaHQgZmFjZS5cclxuXHQgKi9cclxuXHRwdWJsaWMgZ2V0IHBvc2l0aXZlWCgpOkhUTUxJbWFnZUVsZW1lbnRcclxuXHR7XHJcblx0XHRyZXR1cm4gdGhpcy5faHRtbEltYWdlRWxlbWVudHNbMF07XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgc2V0IHBvc2l0aXZlWCh2YWx1ZTpIVE1MSW1hZ2VFbGVtZW50KVxyXG5cdHtcclxuXHRcdHRoaXMuX3Rlc3RTaXplKHZhbHVlKTtcclxuXHRcdHRoaXMuaW52YWxpZGF0ZUNvbnRlbnQoKTtcclxuXHRcdHRoaXMuX3BTZXRTaXplKHZhbHVlLndpZHRoKTtcclxuXHRcdHRoaXMuX2h0bWxJbWFnZUVsZW1lbnRzWzBdID0gdmFsdWU7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBUaGUgdGV4dHVyZSBvbiB0aGUgY3ViZSdzIGxlZnQgZmFjZS5cclxuXHQgKi9cclxuXHRwdWJsaWMgZ2V0IG5lZ2F0aXZlWCgpOkhUTUxJbWFnZUVsZW1lbnRcclxuXHR7XHJcblx0XHRyZXR1cm4gdGhpcy5faHRtbEltYWdlRWxlbWVudHNbMV07XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgc2V0IG5lZ2F0aXZlWCh2YWx1ZTpIVE1MSW1hZ2VFbGVtZW50KVxyXG5cdHtcclxuXHRcdHRoaXMuX3Rlc3RTaXplKHZhbHVlKTtcclxuXHRcdHRoaXMuaW52YWxpZGF0ZUNvbnRlbnQoKTtcclxuXHRcdHRoaXMuX3BTZXRTaXplKHZhbHVlLndpZHRoKTtcclxuXHRcdHRoaXMuX2h0bWxJbWFnZUVsZW1lbnRzWzFdID0gdmFsdWU7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBUaGUgdGV4dHVyZSBvbiB0aGUgY3ViZSdzIHRvcCBmYWNlLlxyXG5cdCAqL1xyXG5cdHB1YmxpYyBnZXQgcG9zaXRpdmVZKCk6SFRNTEltYWdlRWxlbWVudFxyXG5cdHtcclxuXHRcdHJldHVybiB0aGlzLl9odG1sSW1hZ2VFbGVtZW50c1syXTtcclxuXHR9XHJcblxyXG5cdHB1YmxpYyBzZXQgcG9zaXRpdmVZKHZhbHVlOkhUTUxJbWFnZUVsZW1lbnQpXHJcblx0e1xyXG5cdFx0dGhpcy5fdGVzdFNpemUodmFsdWUpO1xyXG5cdFx0dGhpcy5pbnZhbGlkYXRlQ29udGVudCgpO1xyXG5cdFx0dGhpcy5fcFNldFNpemUodmFsdWUud2lkdGgpO1xyXG5cdFx0dGhpcy5faHRtbEltYWdlRWxlbWVudHNbMl0gPSB2YWx1ZTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFRoZSB0ZXh0dXJlIG9uIHRoZSBjdWJlJ3MgYm90dG9tIGZhY2UuXHJcblx0ICovXHJcblx0cHVibGljIGdldCBuZWdhdGl2ZVkoKTpIVE1MSW1hZ2VFbGVtZW50XHJcblx0e1xyXG5cdFx0cmV0dXJuIHRoaXMuX2h0bWxJbWFnZUVsZW1lbnRzWzNdO1xyXG5cdH1cclxuXHJcblx0cHVibGljIHNldCBuZWdhdGl2ZVkodmFsdWU6SFRNTEltYWdlRWxlbWVudClcclxuXHR7XHJcblx0XHR0aGlzLl90ZXN0U2l6ZSh2YWx1ZSk7XHJcblx0XHR0aGlzLmludmFsaWRhdGVDb250ZW50KCk7XHJcblx0XHR0aGlzLl9wU2V0U2l6ZSh2YWx1ZS53aWR0aCk7XHJcblx0XHR0aGlzLl9odG1sSW1hZ2VFbGVtZW50c1szXSA9IHZhbHVlO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogVGhlIHRleHR1cmUgb24gdGhlIGN1YmUncyBmYXIgZmFjZS5cclxuXHQgKi9cclxuXHRwdWJsaWMgZ2V0IHBvc2l0aXZlWigpOkhUTUxJbWFnZUVsZW1lbnRcclxuXHR7XHJcblx0XHRyZXR1cm4gdGhpcy5faHRtbEltYWdlRWxlbWVudHNbNF07XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgc2V0IHBvc2l0aXZlWih2YWx1ZTpIVE1MSW1hZ2VFbGVtZW50KVxyXG5cdHtcclxuXHRcdHRoaXMuX3Rlc3RTaXplKHZhbHVlKTtcclxuXHRcdHRoaXMuaW52YWxpZGF0ZUNvbnRlbnQoKTtcclxuXHRcdHRoaXMuX3BTZXRTaXplKHZhbHVlLndpZHRoKTtcclxuXHRcdHRoaXMuX2h0bWxJbWFnZUVsZW1lbnRzWzRdID0gdmFsdWU7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBUaGUgdGV4dHVyZSBvbiB0aGUgY3ViZSdzIG5lYXIgZmFjZS5cclxuXHQgKi9cclxuXHRwdWJsaWMgZ2V0IG5lZ2F0aXZlWigpOkhUTUxJbWFnZUVsZW1lbnRcclxuXHR7XHJcblx0XHRyZXR1cm4gdGhpcy5faHRtbEltYWdlRWxlbWVudHNbNV07XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgc2V0IG5lZ2F0aXZlWih2YWx1ZTpIVE1MSW1hZ2VFbGVtZW50KVxyXG5cdHtcclxuXHRcdHRoaXMuX3Rlc3RTaXplKHZhbHVlKTtcclxuXHRcdHRoaXMuaW52YWxpZGF0ZUNvbnRlbnQoKTtcclxuXHRcdHRoaXMuX3BTZXRTaXplKHZhbHVlLndpZHRoKTtcclxuXHRcdHRoaXMuX2h0bWxJbWFnZUVsZW1lbnRzWzVdID0gdmFsdWU7XHJcblx0fVxyXG5cclxuXHRjb25zdHJ1Y3Rvcihwb3NYOkhUTUxJbWFnZUVsZW1lbnQsIG5lZ1g6SFRNTEltYWdlRWxlbWVudCwgcG9zWTpIVE1MSW1hZ2VFbGVtZW50LCBuZWdZOkhUTUxJbWFnZUVsZW1lbnQsIHBvc1o6SFRNTEltYWdlRWxlbWVudCwgbmVnWjpIVE1MSW1hZ2VFbGVtZW50KVxyXG5cdHtcclxuXHRcdHN1cGVyKCk7XHJcblxyXG5cdFx0dGhpcy5fdGVzdFNpemUodGhpcy5faHRtbEltYWdlRWxlbWVudHNbMF0gPSBwb3NYKTtcclxuXHRcdHRoaXMuX3Rlc3RTaXplKHRoaXMuX2h0bWxJbWFnZUVsZW1lbnRzWzFdID0gbmVnWCk7XHJcblx0XHR0aGlzLl90ZXN0U2l6ZSh0aGlzLl9odG1sSW1hZ2VFbGVtZW50c1syXSA9IHBvc1kpO1xyXG5cdFx0dGhpcy5fdGVzdFNpemUodGhpcy5faHRtbEltYWdlRWxlbWVudHNbM10gPSBuZWdZKTtcclxuXHRcdHRoaXMuX3Rlc3RTaXplKHRoaXMuX2h0bWxJbWFnZUVsZW1lbnRzWzRdID0gcG9zWik7XHJcblx0XHR0aGlzLl90ZXN0U2l6ZSh0aGlzLl9odG1sSW1hZ2VFbGVtZW50c1s1XSA9IG5lZ1opO1xyXG5cclxuXHRcdHRoaXMuaW52YWxpZGF0ZUNvbnRlbnQoKTtcclxuXHJcblx0XHR0aGlzLl9wU2V0U2l6ZShwb3NYLndpZHRoKTtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgX3Rlc3RTaXplKHZhbHVlOkhUTUxJbWFnZUVsZW1lbnQpXHJcblx0e1xyXG5cdFx0aWYgKHZhbHVlLndpZHRoICE9IHZhbHVlLmhlaWdodClcclxuXHRcdFx0dGhyb3cgbmV3IEVycm9yKFwiQml0bWFwRGF0YSBzaG91bGQgaGF2ZSBlcXVhbCB3aWR0aCBhbmQgaGVpZ2h0IVwiKTtcclxuXHRcdGlmICghVGV4dHVyZVV0aWxzLmlzSFRNTEltYWdlRWxlbWVudFZhbGlkKHZhbHVlKSlcclxuXHRcdFx0dGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBiaXRtYXBEYXRhOiBXaWR0aCBhbmQgaGVpZ2h0IG11c3QgYmUgcG93ZXIgb2YgMiBhbmQgY2Fubm90IGV4Y2VlZCAyMDQ4XCIpO1xyXG5cdH1cclxuXHJcblx0cHVibGljIF9pR2V0VGV4dHVyZURhdGEoc2lkZTpudW1iZXIpOkhUTUxJbWFnZUVsZW1lbnRcclxuXHR7XHJcblx0XHRyZXR1cm4gdGhpcy5faHRtbEltYWdlRWxlbWVudHNbc2lkZV07XHJcblx0fVxyXG59XHJcblxyXG5leHBvcnQgPSBJbWFnZUN1YmVUZXh0dXJlOyJdfQ==