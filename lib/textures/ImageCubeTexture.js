var __extends = this.__extends || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    __.prototype = b.prototype;
    d.prototype = new __();
};
var Error = require("awayjs-core/lib/errors/Error");
var CubeTextureBase = require("awayjs-core/lib/textures/CubeTextureBase");
var TextureUtils = require("awayjs-core/lib/utils/TextureUtils");
var ImageCubeTexture = (function (_super) {
    __extends(ImageCubeTexture, _super);
    function ImageCubeTexture(posX, negX, posY, negY, posZ, negZ) {
        _super.call(this);
        this._htmlImageElements = new Array(6);
        this._testSize(this._htmlImageElements[0] = posX);
        this._testSize(this._htmlImageElements[1] = negX);
        this._testSize(this._htmlImageElements[2] = posY);
        this._testSize(this._htmlImageElements[3] = negY);
        this._testSize(this._htmlImageElements[4] = posZ);
        this._testSize(this._htmlImageElements[5] = negZ);
        this.invalidateContent();
        this._pSetSize(posX.width);
    }
    Object.defineProperty(ImageCubeTexture.prototype, "positiveX", {
        /**
         * The texture on the cube's right face.
         */
        get: function () {
            return this._htmlImageElements[0];
        },
        set: function (value) {
            this._testSize(value);
            this.invalidateContent();
            this._pSetSize(value.width);
            this._htmlImageElements[0] = value;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ImageCubeTexture.prototype, "negativeX", {
        /**
         * The texture on the cube's left face.
         */
        get: function () {
            return this._htmlImageElements[1];
        },
        set: function (value) {
            this._testSize(value);
            this.invalidateContent();
            this._pSetSize(value.width);
            this._htmlImageElements[1] = value;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ImageCubeTexture.prototype, "positiveY", {
        /**
         * The texture on the cube's top face.
         */
        get: function () {
            return this._htmlImageElements[2];
        },
        set: function (value) {
            this._testSize(value);
            this.invalidateContent();
            this._pSetSize(value.width);
            this._htmlImageElements[2] = value;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ImageCubeTexture.prototype, "negativeY", {
        /**
         * The texture on the cube's bottom face.
         */
        get: function () {
            return this._htmlImageElements[3];
        },
        set: function (value) {
            this._testSize(value);
            this.invalidateContent();
            this._pSetSize(value.width);
            this._htmlImageElements[3] = value;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ImageCubeTexture.prototype, "positiveZ", {
        /**
         * The texture on the cube's far face.
         */
        get: function () {
            return this._htmlImageElements[4];
        },
        set: function (value) {
            this._testSize(value);
            this.invalidateContent();
            this._pSetSize(value.width);
            this._htmlImageElements[4] = value;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ImageCubeTexture.prototype, "negativeZ", {
        /**
         * The texture on the cube's near face.
         */
        get: function () {
            return this._htmlImageElements[5];
        },
        set: function (value) {
            this._testSize(value);
            this.invalidateContent();
            this._pSetSize(value.width);
            this._htmlImageElements[5] = value;
        },
        enumerable: true,
        configurable: true
    });
    ImageCubeTexture.prototype._testSize = function (value) {
        if (value.width != value.height)
            throw new Error("BitmapData should have equal width and height!");
        if (!TextureUtils.isHTMLImageElementValid(value))
            throw new Error("Invalid bitmapData: Width and height must be power of 2 and cannot exceed 2048");
    };
    ImageCubeTexture.prototype._iGetTextureData = function (side) {
        return this._htmlImageElements[side];
    };
    return ImageCubeTexture;
})(CubeTextureBase);
module.exports = ImageCubeTexture;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImF3YXlqcy1jb3JlL2xpYi90ZXh0dXJlcy9pbWFnZWN1YmV0ZXh0dXJlLnRzIl0sIm5hbWVzIjpbIkltYWdlQ3ViZVRleHR1cmUiLCJJbWFnZUN1YmVUZXh0dXJlLmNvbnN0cnVjdG9yIiwiSW1hZ2VDdWJlVGV4dHVyZS5wb3NpdGl2ZVgiLCJJbWFnZUN1YmVUZXh0dXJlLm5lZ2F0aXZlWCIsIkltYWdlQ3ViZVRleHR1cmUucG9zaXRpdmVZIiwiSW1hZ2VDdWJlVGV4dHVyZS5uZWdhdGl2ZVkiLCJJbWFnZUN1YmVUZXh0dXJlLnBvc2l0aXZlWiIsIkltYWdlQ3ViZVRleHR1cmUubmVnYXRpdmVaIiwiSW1hZ2VDdWJlVGV4dHVyZS5fdGVzdFNpemUiLCJJbWFnZUN1YmVUZXh0dXJlLl9pR2V0VGV4dHVyZURhdGEiXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLElBQU8sS0FBSyxXQUFlLDhCQUE4QixDQUFDLENBQUM7QUFDM0QsSUFBTyxlQUFlLFdBQWEsMENBQTBDLENBQUMsQ0FBQztBQUMvRSxJQUFPLFlBQVksV0FBYyxvQ0FBb0MsQ0FBQyxDQUFDO0FBRXZFLElBQU0sZ0JBQWdCO0lBQVNBLFVBQXpCQSxnQkFBZ0JBLFVBQXdCQTtJQW9HN0NBLFNBcEdLQSxnQkFBZ0JBLENBb0dUQSxJQUFxQkEsRUFBRUEsSUFBcUJBLEVBQUVBLElBQXFCQSxFQUFFQSxJQUFxQkEsRUFBRUEsSUFBcUJBLEVBQUVBLElBQXFCQTtRQUVuSkMsaUJBQU9BLENBQUNBO1FBcEdEQSx1QkFBa0JBLEdBQTJCQSxJQUFJQSxLQUFLQSxDQUFtQkEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7UUFzR25GQSxJQUFJQSxDQUFDQSxTQUFTQSxDQUFDQSxJQUFJQSxDQUFDQSxrQkFBa0JBLENBQUNBLENBQUNBLENBQUNBLEdBQUdBLElBQUlBLENBQUNBLENBQUNBO1FBQ2xEQSxJQUFJQSxDQUFDQSxTQUFTQSxDQUFDQSxJQUFJQSxDQUFDQSxrQkFBa0JBLENBQUNBLENBQUNBLENBQUNBLEdBQUdBLElB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QTs7O09BUkFQO0lBMEJPQSxvQ0FBU0EsR0FBakJBLFVBQWtCQSxLQUFzQkE7UUFFdkNRLEVBQUVBLENBQUNBLENBQUNBLEtBQUtBLENBQUNBLEtBQUtBLElBQUlBLEtBQUtBLENBQUNBLE1BQU1BLENBQUNBO1lBQy9CQSxNQUFNQSxJQUFJQSxLQUFLQSxDQUFDQSxnREFBZ0RBLENBQUNBLENBQUNBO1FBQ25FQSxFQUFFQSxDQUFDQSxDQUFDQSxDQUFDQSxZQUFZQSxDQUFDQSx1QkFBdUJBLENBQUNBLEtBQUtBLENBQUNBLENBQUNBO1lBQ2hEQSxNQUFNQSxJQUFJQSxLQUFLQSxDQUFDQSxnRkFBZ0ZBLENBQUNBLENBQUNBO0lBQ3BHQSxDQUFDQTtJQUVNUiwyQ0FBZ0JBLEdBQXZCQSxVQUF3QkEsSUFBV0E7UUFFbENTLE1BQU1BLENBQUNBLElBQUlBLENBQUNBLGtCQUFrQkEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsQ0FBQ0E7SUFDdENBLENBQUNBO0lBQ0ZULHVCQUFDQTtBQUFEQSxDQWhJQSxBQWdJQ0EsRUFoSThCLGVBQWUsRUFnSTdDO0FBRUQsQUFBMEIsaUJBQWpCLGdCQUFnQixDQUFDIiwiZmlsZSI6InRleHR1cmVzL0ltYWdlQ3ViZVRleHR1cmUuanMiLCJzb3VyY2VSb290IjoiLi4vIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEVycm9yXHRcdFx0XHRcdD0gcmVxdWlyZShcImF3YXlqcy1jb3JlL2xpYi9lcnJvcnMvRXJyb3JcIik7XG5pbXBvcnQgQ3ViZVRleHR1cmVCYXNlXHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLWNvcmUvbGliL3RleHR1cmVzL0N1YmVUZXh0dXJlQmFzZVwiKTtcbmltcG9ydCBUZXh0dXJlVXRpbHNcdFx0XHRcdD0gcmVxdWlyZShcImF3YXlqcy1jb3JlL2xpYi91dGlscy9UZXh0dXJlVXRpbHNcIik7XG5cbmNsYXNzIEltYWdlQ3ViZVRleHR1cmUgZXh0ZW5kcyBDdWJlVGV4dHVyZUJhc2Vcbntcblx0cHJpdmF0ZSBfaHRtbEltYWdlRWxlbWVudHM6QXJyYXk8SFRNTEltYWdlRWxlbWVudD4gPSBuZXcgQXJyYXk8SFRNTEltYWdlRWxlbWVudD4oNik7XG5cblx0LyoqXG5cdCAqIFRoZSB0ZXh0dXJlIG9uIHRoZSBjdWJlJ3MgcmlnaHQgZmFjZS5cblx0ICovXG5cdHB1YmxpYyBnZXQgcG9zaXRpdmVYKCk6SFRNTEltYWdlRWxlbWVudFxuXHR7XG5cdFx0cmV0dXJuIHRoaXMuX2h0bWxJbWFnZUVsZW1lbnRzWzBdO1xuXHR9XG5cblx0cHVibGljIHNldCBwb3NpdGl2ZVgodmFsdWU6SFRNTEltYWdlRWxlbWVudClcblx0e1xuXHRcdHRoaXMuX3Rlc3RTaXplKHZhbHVlKTtcblx0XHR0aGlzLmludmFsaWRhdGVDb250ZW50KCk7XG5cdFx0dGhpcy5fcFNldFNpemUodmFsdWUud2lkdGgpO1xuXHRcdHRoaXMuX2h0bWxJbWFnZUVsZW1lbnRzWzBdID0gdmFsdWU7XG5cdH1cblxuXHQvKipcblx0ICogVGhlIHRleHR1cmUgb24gdGhlIGN1YmUncyBsZWZ0IGZhY2UuXG5cdCAqL1xuXHRwdWJsaWMgZ2V0IG5lZ2F0aXZlWCgpOkhUTUxJbWFnZUVsZW1lbnRcblx0e1xuXHRcdHJldHVybiB0aGlzLl9odG1sSW1hZ2VFbGVtZW50c1sxXTtcblx0fVxuXG5cdHB1YmxpYyBzZXQgbmVnYXRpdmVYKHZhbHVlOkhUTUxJbWFnZUVsZW1lbnQpXG5cdHtcblx0XHR0aGlzLl90ZXN0U2l6ZSh2YWx1ZSk7XG5cdFx0dGhpcy5pbnZhbGlkYXRlQ29udGVudCgpO1xuXHRcdHRoaXMuX3BTZXRTaXplKHZhbHVlLndpZHRoKTtcblx0XHR0aGlzLl9odG1sSW1hZ2VFbGVtZW50c1sxXSA9IHZhbHVlO1xuXHR9XG5cblx0LyoqXG5cdCAqIFRoZSB0ZXh0dXJlIG9uIHRoZSBjdWJlJ3MgdG9wIGZhY2UuXG5cdCAqL1xuXHRwdWJsaWMgZ2V0IHBvc2l0aXZlWSgpOkhUTUxJbWFnZUVsZW1lbnRcblx0e1xuXHRcdHJldHVybiB0aGlzLl9odG1sSW1hZ2VFbGVtZW50c1syXTtcblx0fVxuXG5cdHB1YmxpYyBzZXQgcG9zaXRpdmVZKHZhbHVlOkhUTUxJbWFnZUVsZW1lbnQpXG5cdHtcblx0XHR0aGlzLl90ZXN0U2l6ZSh2YWx1ZSk7XG5cdFx0dGhpcy5pbnZhbGlkYXRlQ29udGVudCgpO1xuXHRcdHRoaXMuX3BTZXRTaXplKHZhbHVlLndpZHRoKTtcblx0XHR0aGlzLl9odG1sSW1hZ2VFbGVtZW50c1syXSA9IHZhbHVlO1xuXHR9XG5cblx0LyoqXG5cdCAqIFRoZSB0ZXh0dXJlIG9uIHRoZSBjdWJlJ3MgYm90dG9tIGZhY2UuXG5cdCAqL1xuXHRwdWJsaWMgZ2V0IG5lZ2F0aXZlWSgpOkhUTUxJbWFnZUVsZW1lbnRcblx0e1xuXHRcdHJldHVybiB0aGlzLl9odG1sSW1hZ2VFbGVtZW50c1szXTtcblx0fVxuXG5cdHB1YmxpYyBzZXQgbmVnYXRpdmVZKHZhbHVlOkhUTUxJbWFnZUVsZW1lbnQpXG5cdHtcblx0XHR0aGlzLl90ZXN0U2l6ZSh2YWx1ZSk7XG5cdFx0dGhpcy5pbnZhbGlkYXRlQ29udGVudCgpO1xuXHRcdHRoaXMuX3BTZXRTaXplKHZhbHVlLndpZHRoKTtcblx0XHR0aGlzLl9odG1sSW1hZ2VFbGVtZW50c1szXSA9IHZhbHVlO1xuXHR9XG5cblx0LyoqXG5cdCAqIFRoZSB0ZXh0dXJlIG9uIHRoZSBjdWJlJ3MgZmFyIGZhY2UuXG5cdCAqL1xuXHRwdWJsaWMgZ2V0IHBvc2l0aXZlWigpOkhUTUxJbWFnZUVsZW1lbnRcblx0e1xuXHRcdHJldHVybiB0aGlzLl9odG1sSW1hZ2VFbGVtZW50c1s0XTtcblx0fVxuXG5cdHB1YmxpYyBzZXQgcG9zaXRpdmVaKHZhbHVlOkhUTUxJbWFnZUVsZW1lbnQpXG5cdHtcblx0XHR0aGlzLl90ZXN0U2l6ZSh2YWx1ZSk7XG5cdFx0dGhpcy5pbnZhbGlkYXRlQ29udGVudCgpO1xuXHRcdHRoaXMuX3BTZXRTaXplKHZhbHVlLndpZHRoKTtcblx0XHR0aGlzLl9odG1sSW1hZ2VFbGVtZW50c1s0XSA9IHZhbHVlO1xuXHR9XG5cblx0LyoqXG5cdCAqIFRoZSB0ZXh0dXJlIG9uIHRoZSBjdWJlJ3MgbmVhciBmYWNlLlxuXHQgKi9cblx0cHVibGljIGdldCBuZWdhdGl2ZVooKTpIVE1MSW1hZ2VFbGVtZW50XG5cdHtcblx0XHRyZXR1cm4gdGhpcy5faHRtbEltYWdlRWxlbWVudHNbNV07XG5cdH1cblxuXHRwdWJsaWMgc2V0IG5lZ2F0aXZlWih2YWx1ZTpIVE1MSW1hZ2VFbGVtZW50KVxuXHR7XG5cdFx0dGhpcy5fdGVzdFNpemUodmFsdWUpO1xuXHRcdHRoaXMuaW52YWxpZGF0ZUNvbnRlbnQoKTtcblx0XHR0aGlzLl9wU2V0U2l6ZSh2YWx1ZS53aWR0aCk7XG5cdFx0dGhpcy5faHRtbEltYWdlRWxlbWVudHNbNV0gPSB2YWx1ZTtcblx0fVxuXG5cdGNvbnN0cnVjdG9yKHBvc1g6SFRNTEltYWdlRWxlbWVudCwgbmVnWDpIVE1MSW1hZ2VFbGVtZW50LCBwb3NZOkhUTUxJbWFnZUVsZW1lbnQsIG5lZ1k6SFRNTEltYWdlRWxlbWVudCwgcG9zWjpIVE1MSW1hZ2VFbGVtZW50LCBuZWdaOkhUTUxJbWFnZUVsZW1lbnQpXG5cdHtcblx0XHRzdXBlcigpO1xuXG5cdFx0dGhpcy5fdGVzdFNpemUodGhpcy5faHRtbEltYWdlRWxlbWVudHNbMF0gPSBwb3NYKTtcblx0XHR0aGlzLl90ZXN0U2l6ZSh0aGlzLl9odG1sSW1hZ2VFbGVtZW50c1sxXSA9IG5lZ1gpO1xuXHRcdHRoaXMuX3Rlc3RTaXplKHRoaXMuX2h0bWxJbWFnZUVsZW1lbnRzWzJdID0gcG9zWSk7XG5cdFx0dGhpcy5fdGVzdFNpemUodGhpcy5faHRtbEltYWdlRWxlbWVudHNbM10gPSBuZWdZKTtcblx0XHR0aGlzLl90ZXN0U2l6ZSh0aGlzLl9odG1sSW1hZ2VFbGVtZW50c1s0XSA9IHBvc1opO1xuXHRcdHRoaXMuX3Rlc3RTaXplKHRoaXMuX2h0bWxJbWFnZUVsZW1lbnRzWzVdID0gbmVnWik7XG5cblx0XHR0aGlzLmludmFsaWRhdGVDb250ZW50KCk7XG5cblx0XHR0aGlzLl9wU2V0U2l6ZShwb3NYLndpZHRoKTtcblx0fVxuXG5cdHByaXZhdGUgX3Rlc3RTaXplKHZhbHVlOkhUTUxJbWFnZUVsZW1lbnQpXG5cdHtcblx0XHRpZiAodmFsdWUud2lkdGggIT0gdmFsdWUuaGVpZ2h0KVxuXHRcdFx0dGhyb3cgbmV3IEVycm9yKFwiQml0bWFwRGF0YSBzaG91bGQgaGF2ZSBlcXVhbCB3aWR0aCBhbmQgaGVpZ2h0IVwiKTtcblx0XHRpZiAoIVRleHR1cmVVdGlscy5pc0hUTUxJbWFnZUVsZW1lbnRWYWxpZCh2YWx1ZSkpXG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGJpdG1hcERhdGE6IFdpZHRoIGFuZCBoZWlnaHQgbXVzdCBiZSBwb3dlciBvZiAyIGFuZCBjYW5ub3QgZXhjZWVkIDIwNDhcIik7XG5cdH1cblxuXHRwdWJsaWMgX2lHZXRUZXh0dXJlRGF0YShzaWRlOm51bWJlcik6SFRNTEltYWdlRWxlbWVudFxuXHR7XG5cdFx0cmV0dXJuIHRoaXMuX2h0bWxJbWFnZUVsZW1lbnRzW3NpZGVdO1xuXHR9XG59XG5cbmV4cG9ydCA9IEltYWdlQ3ViZVRleHR1cmU7Il19