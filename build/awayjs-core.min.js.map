{
  "version": 3,
  "sources": [
    "node_modules/browser-pack/_prelude.js",
    "awayjs-core.js",
    "awayjs-core/lib/attributes/AttributesBuffer.ts",
    "awayjs-core/lib/attributes/AttributesView.ts",
    "awayjs-core/lib/attributes/Byte4Attributes.ts",
    "awayjs-core/lib/attributes/Float1Attributes.ts",
    "awayjs-core/lib/attributes/Float2Attributes.ts",
    "awayjs-core/lib/attributes/Float3Attributes.ts",
    "awayjs-core/lib/attributes/Float4Attributes.ts",
    "awayjs-core/lib/attributes/Short2Attributes.ts",
    "awayjs-core/lib/attributes/Short3Attributes.ts",
    "awayjs-core/lib/data/BitmapImage2D.ts",
    "awayjs-core/lib/data/BitmapImageChannel.ts",
    "awayjs-core/lib/data/BitmapImageCube.ts",
    "awayjs-core/lib/data/BlendMode.ts",
    "awayjs-core/lib/data/CPUCanvas.ts",
    "awayjs-core/lib/data/CPURenderingContext2D.ts",
    "awayjs-core/lib/data/Image2D.ts",
    "awayjs-core/lib/data/ImageBase.ts",
    "awayjs-core/lib/data/ImageCube.ts",
    "awayjs-core/lib/data/ImageData.ts",
    "awayjs-core/lib/data/Sampler2D.ts",
    "awayjs-core/lib/data/SamplerBase.ts",
    "awayjs-core/lib/data/SamplerCube.ts",
    "awayjs-core/lib/data/SpecularImage2D.ts",
    "awayjs-core/lib/data/WaveAudio.ts",
    "awayjs-core/lib/errors/AbstractMethodError.ts",
    "awayjs-core/lib/errors/ArgumentError.ts",
    "awayjs-core/lib/errors/DocumentError.ts",
    "awayjs-core/lib/errors/Error.ts",
    "awayjs-core/lib/errors/PartialImplementationError.ts",
    "awayjs-core/lib/errors/RangeError.ts",
    "awayjs-core/lib/events/AssetEvent.ts",
    "awayjs-core/lib/events/EventDispatcher.ts",
    "awayjs-core/lib/events/Event.ts",
    "awayjs-core/lib/events/HTTPStatusEvent.ts",
    "awayjs-core/lib/events/IOErrorEvent.ts",
    "awayjs-core/lib/events/LoaderEvent.ts",
    "awayjs-core/lib/events/ParserEvent.ts",
    "awayjs-core/lib/events/ProgressEvent.ts",
    "awayjs-core/lib/events/ProjectionEvent.ts",
    "awayjs-core/lib/events/TimerEvent.ts",
    "awayjs-core/lib/geom/Box.ts",
    "awayjs-core/lib/geom/ColorTransform.ts",
    "awayjs-core/lib/geom/MathConsts.ts",
    "awayjs-core/lib/geom/Matrix3DUtils.ts",
    "awayjs-core/lib/geom/Matrix3D.ts",
    "awayjs-core/lib/geom/Matrix.ts",
    "awayjs-core/lib/geom/Orientation3D.ts",
    "awayjs-core/lib/geom/PerspectiveProjection.ts",
    "awayjs-core/lib/geom/Plane3D.ts",
    "awayjs-core/lib/geom/PlaneClassification.ts",
    "awayjs-core/lib/geom/Point.ts",
    "awayjs-core/lib/geom/PoissonLookup.ts",
    "awayjs-core/lib/geom/Quaternion.ts",
    "awayjs-core/lib/geom/Rectangle.ts",
    "awayjs-core/lib/geom/Sphere.ts",
    "awayjs-core/lib/geom/UVTransform.ts",
    "awayjs-core/lib/geom/Vector3D.ts",
    "awayjs-core/lib/library/AssetBase.ts",
    "awayjs-core/lib/library/AssetLibraryBundle.ts",
    "awayjs-core/lib/library/AssetLibraryIterator.ts",
    "awayjs-core/lib/library/AssetLibrary.ts",
    "awayjs-core/lib/library/ConflictPrecedence.ts",
    "awayjs-core/lib/library/ConflictStrategyBase.ts",
    "awayjs-core/lib/library/ConflictStrategy.ts",
    "awayjs-core/lib/library/ErrorConflictStrategy.ts",
    "awayjs-core/lib/library/IDUtil.ts",
    "awayjs-core/lib/library/IgnoreConflictStrategy.ts",
    "awayjs-core/lib/library/LoaderContext.ts",
    "awayjs-core/lib/library/LoaderSession.ts",
    "awayjs-core/lib/library/NumSuffixConflictStrategy.ts",
    "awayjs-core/lib/managers/AudioManager.ts",
    "awayjs-core/lib/managers/StreamingAudioChannel.ts",
    "awayjs-core/lib/managers/WebAudioChannel.ts",
    "awayjs-core/lib/net/CrossDomainPolicy.ts",
    "awayjs-core/lib/net/URLLoaderDataFormat.ts",
    "awayjs-core/lib/net/URLLoader.ts",
    "awayjs-core/lib/net/URLRequestMethod.ts",
    "awayjs-core/lib/net/URLRequest.ts",
    "awayjs-core/lib/net/URLVariables.ts",
    "awayjs-core/lib/parsers/Image2DParser.ts",
    "awayjs-core/lib/parsers/ImageCubeParser.ts",
    "awayjs-core/lib/parsers/ParserBase.ts",
    "awayjs-core/lib/parsers/ParserDataFormat.ts",
    "awayjs-core/lib/parsers/ParserUtils.ts",
    "awayjs-core/lib/parsers/ResourceDependency.ts",
    "awayjs-core/lib/parsers/TextureAtlasParser.ts",
    "awayjs-core/lib/parsers/WaveAudioParser.ts",
    "awayjs-core/lib/projections/CoordinateSystem.ts",
    "awayjs-core/lib/projections/FreeMatrixProjection.ts",
    "awayjs-core/lib/projections/ObliqueNearPlaneProjection.ts",
    "awayjs-core/lib/projections/OrthographicOffCenterProjection.ts",
    "awayjs-core/lib/projections/OrthographicProjection.ts",
    "awayjs-core/lib/projections/PerspectiveProjection.ts",
    "awayjs-core/lib/projections/ProjectionBase.ts",
    "awayjs-core/lib/ui/Keyboard.ts",
    "awayjs-core/lib/utils/BitmapImageUtils.ts",
    "awayjs-core/lib/utils/ByteArrayBase.ts",
    "awayjs-core/lib/utils/ByteArrayBuffer.ts",
    "awayjs-core/lib/utils/ByteArray.ts",
    "awayjs-core/lib/utils/CSS.ts",
    "awayjs-core/lib/utils/ColorUtils.ts",
    "awayjs-core/lib/utils/Debug.ts",
    "awayjs-core/lib/utils/Extensions.ts",
    "awayjs-core/lib/utils/ImageUtils.ts",
    "awayjs-core/lib/utils/MipmapGenerator.ts",
    "awayjs-core/lib/utils/RequestAnimationFrame.ts",
    "awayjs-core/lib/utils/Timer.ts",
    "awayjs-core/lib/utils/XmlUtils.ts",
    "awayjs-core/lib/utils/getTimer.ts"
  ],
  "names": [
    "require",
    "e",
    "t",
    "n",
    "r",
    "s",
    "o",
    "u",
    "a",
    "i",
    "f",
    "Error",
    "code",
    "l",
    "exports",
    "call",
    "length",
    "awayjs-core/lib/attributes/AttributesBuffer",
    "module",
    "__extends",
    "this",
    "d",
    "b",
    "p",
    "hasOwnProperty",
    "__",
    "constructor",
    "prototype",
    "AssetBase",
    "AttributesBuffer",
    "_super",
    "stride",
    "count",
    "_attributesBufferVO",
    "Array",
    "_count",
    "_stride",
    "_newStride",
    "_viewVOs",
    "_buffer",
    "ArrayBuffer",
    "_bufferView",
    "Uint8Array",
    "byteLength",
    "Object",
    "defineProperty",
    "get",
    "assetType",
    "enumerable",
    "configurable",
    "_lengthDirty",
    "_updateLength",
    "set",
    "value",
    "invalidateLength",
    "_contentDirty",
    "buffer",
    "invalidateContent",
    "len",
    "invalidate",
    "dispose",
    "clone",
    "attributesBuffer",
    "bufferView",
    "view",
    "_internalClone",
    "getView",
    "index",
    "_setAttributes",
    "viewIndex",
    "arrayBufferView",
    "offset",
    "array",
    "viewVO",
    "vLength",
    "vOffset",
    "vCount",
    "subarray",
    "_getLocalArrayBuffer",
    "localBuffer",
    "localBufferView",
    "_iAddAttributesBufferVO",
    "AttributesBufferVO",
    "push",
    "_iRemoveAttributesBufferVO",
    "splice",
    "indexOf",
    "_addView",
    "ViewVO",
    "_index",
    "_removeView",
    "_getOffset",
    "j",
    "newLength",
    "newBuffer",
    "newView",
    "vOldOffset",
    "oldOffset",
    "Math",
    "min",
    "size",
    "dimensions",
    "awayjs-core/lib/library/AssetBase",
    "awayjs-core/lib/attributes/AttributesView",
    "AttributesView",
    "arrayClass",
    "attributesBufferCount",
    "_arrayClass",
    "_size",
    "BYTES_PER_ELEMENT",
    "_dimensions",
    "_attributesBuffer",
    "values",
    "_localArrayBuffer",
    "_cloneCache",
    "cloneCache",
    "awayjs-core/lib/attributes/Byte4Attributes",
    "Byte4Attributes",
    "attributesBufferLength",
    "unsigned",
    "Int8Array",
    "awayjs-core/lib/attributes/Float1Attributes",
    "Float1Attributes",
    "Float32Array",
    "awayjs-core/lib/attributes/Float2Attributes",
    "Float2Attributes",
    "awayjs-core/lib/attributes/Float3Attributes",
    "Float3Attributes",
    "awayjs-core/lib/attributes/Float4Attributes",
    "Float4Attributes",
    "awayjs-core/lib/attributes/Short2Attributes",
    "Short2Attributes",
    "Uint16Array",
    "Int16Array",
    "awayjs-core/lib/attributes/Short3Attributes",
    "Short3Attributes",
    "awayjs-core/lib/data/BitmapImage2D",
    "Image2D",
    "ColorUtils",
    "BitmapImageUtils",
    "CPUCanvas",
    "BitmapImage2D",
    "width",
    "height",
    "transparent",
    "fillColor",
    "powerOfTwo",
    "_locked",
    "_transparent",
    "document",
    "_imageCanvas",
    "createElement",
    "_context",
    "getContext",
    "fillRect",
    "_rect",
    "draw",
    "colorTransform",
    "rect",
    "_imageData",
    "getImageData",
    "data",
    "x",
    "y",
    "redMultiplier",
    "redOffset",
    "greenMultiplier",
    "greenOffset",
    "blueMultiplier",
    "blueOffset",
    "alphaMultiplier",
    "alphaOffset",
    "putImageData",
    "copyChannel",
    "sourceBitmap",
    "sourceRect",
    "destPoint",
    "sourceChannel",
    "destChannel",
    "imageData",
    "sourceData",
    "destData",
    "sourceOffset",
    "round",
    "log",
    "destOffset",
    "sourceIndex",
    "destIndex",
    "copyPixels",
    "source",
    "destRect",
    "getCanvas",
    "_copyPixels",
    "matrix",
    "blendMode",
    "clipRect",
    "smoothing",
    "_draw",
    "color",
    "_fillRect",
    "getPixel",
    "g",
    "pixelData",
    "getPixel32",
    "lock",
    "setArray",
    "inputArray",
    "argb",
    "float32ColorToARGB",
    "setPixel",
    "setPixel32",
    "setPixels",
    "inputByteArray",
    "position",
    "readUnsignedInt",
    "unlock",
    "_setSize",
    "awayjs-core/lib/data/CPUCanvas",
    "awayjs-core/lib/data/Image2D",
    "awayjs-core/lib/utils/BitmapImageUtils",
    "awayjs-core/lib/utils/ColorUtils",
    "awayjs-core/lib/data/BitmapImageChannel",
    "BitmapImageChannel",
    "ALPHA",
    "BLUE",
    "GREEN",
    "RED",
    "awayjs-core/lib/data/BitmapImageCube",
    "ImageCube",
    "Rectangle",
    "BitmapImageCube",
    "side",
    "posX",
    "negX",
    "posY",
    "negY",
    "posZ",
    "negZ",
    "awayjs-core/lib/data/ImageCube",
    "awayjs-core/lib/geom/Rectangle",
    "awayjs-core/lib/data/BlendMode",
    "BlendMode",
    "ADD",
    "DARKEN",
    "DIFFERENCE",
    "ERASE",
    "HARDLIGHT",
    "INVERT",
    "LAYER",
    "LIGHTEN",
    "MULTIPLY",
    "NORMAL",
    "OVERLAY",
    "SCREEN",
    "SHADER",
    "SUBTRACT",
    "CPURenderingContext2D",
    "ImageData",
    "reset",
    "contextId",
    "awayjs-core/lib/data/CPURenderingContext2D",
    "awayjs-core/lib/data/ImageData",
    "Matrix",
    "Point",
    "cpuCanvas",
    "point",
    "point2",
    "restore",
    "setTransform",
    "m11",
    "m12",
    "m21",
    "m22",
    "dx",
    "dy",
    "save",
    "arc",
    "radius",
    "startAngle",
    "endAngle",
    "anticlockwise",
    "measureText",
    "text",
    "undefined",
    "isPointInPath",
    "fillRule",
    "quadraticCurveTo",
    "cpx",
    "cpy",
    "imagedata",
    "dirtyX",
    "dirtyY",
    "dirtyWidth",
    "dirtyHeight",
    "rotate",
    "angle",
    "fillText",
    "maxWidth",
    "translate",
    "scale",
    "createRadialGradient",
    "x0",
    "y0",
    "r0",
    "x1",
    "y1",
    "r1",
    "lineTo",
    "getLineDash",
    "fill",
    "createImageData",
    "imageDataOrSw",
    "sh",
    "createPattern",
    "image",
    "repetition",
    "closePath",
    "w",
    "h",
    "clip",
    "clearRect",
    "moveTo",
    "sx",
    "sy",
    "sw",
    "applyPixel32",
    "target",
    "floor",
    "alpha",
    "copyPixel32",
    "fromX",
    "fromY",
    "fromIndex",
    "fillStyle",
    "parsedFillStyle",
    "colorStrings",
    "substring",
    "lastIndexOf",
    "split",
    "parsedA",
    "parseFloat",
    "parsedR",
    "parseInt",
    "parsedG",
    "parsedB",
    "bezierCurveTo",
    "cp1x",
    "cp1y",
    "cp2x",
    "cp2y",
    "drawImage",
    "offsetX",
    "offsetY",
    "canvasOffsetX",
    "canvasOffsetY",
    "canvasImageWidth",
    "canvasImageHeight",
    "toString",
    "bitmap",
    "drawBitmap",
    "htmlImage",
    "htmlCanvas",
    "htmlContext",
    "htmlImageData",
    "resultBitmap",
    "passBitmap",
    "canvas",
    "canvasImageData",
    "scaleX",
    "sqrt",
    "scaleY",
    "c",
    "tx",
    "ty",
    "invert",
    "transformPoint",
    "sampleBilinear",
    "p1",
    "p2",
    "sampleBox",
    "sample",
    "transform",
    "stroke",
    "strokeRect",
    "setLineDash",
    "segments",
    "strokeText",
    "beginPath",
    "arcTo",
    "x2",
    "y2",
    "createLinearGradient",
    "v",
    "texture",
    "texelSizeX",
    "texelSizeY",
    "color00",
    "color10",
    "color01",
    "color11",
    "interColor0",
    "interpolateColor",
    "interColor1",
    "result",
    "area",
    "xsize",
    "ysize",
    "toY",
    "ceil",
    "max",
    "toX",
    "awayjs-core/lib/geom/Matrix",
    "awayjs-core/lib/geom/Point",
    "awayjs-core/lib/data/IImageCanvas",
    "ImageBase",
    "ImageUtils",
    "_powerOfTwo",
    "_testDimensions",
    "invalidateSize",
    "isDimensionValid",
    "awayjs-core/lib/data/ImageBase",
    "awayjs-core/lib/utils/ImageUtils",
    "_imageObject",
    "_pFormat",
    "_iAddImageObject",
    "ImageObject",
    "_iRemoveImageObject",
    "awayjs-core/lib/data/Sampler2D",
    "SamplerBase",
    "Sampler2D",
    "repeat",
    "smooth",
    "mipmap",
    "_repeat",
    "_updateRect",
    "_imageRect",
    "_frameRect",
    "awayjs-core/lib/data/SamplerBase",
    "_smooth",
    "_mipmap",
    "awayjs-core/lib/data/SamplerCube",
    "SamplerCube",
    "awayjs-core/lib/data/SpecularImage2D",
    "SpecularImage2D",
    "specularSource",
    "glossSource",
    "_specularSource",
    "_glossSource",
    "_output",
    "_testSize",
    "origin",
    "awayjs-core/lib/data/WaveAudio",
    "AudioManager",
    "WaveAudio",
    "_volume",
    "_audioChannel",
    "volume",
    "currentTime",
    "duration",
    "stop",
    "play",
    "loop",
    "getChannel",
    "id",
    "newInstance",
    "name",
    "awayjs-core/lib/managers/AudioManager",
    "awayjs-core/lib/errors/AbstractMethodError",
    "AbstractMethodError",
    "message",
    "awayjs-core/lib/errors/Error",
    "awayjs-core/lib/errors/ArgumentError",
    "ArgumentError",
    "awayjs-core/lib/errors/DocumentError",
    "DocumentError",
    "DOCUMENT_DOES_NOT_EXIST",
    "_name",
    "_errorID",
    "_messsage",
    "awayjs-core/lib/errors/PartialImplementationError",
    "PartialImplementationError",
    "dependency",
    "awayjs-core/lib/errors/RangeError",
    "RangeError",
    "awayjs-core/lib/events/AssetEvent",
    "Event",
    "AssetEvent",
    "type",
    "asset",
    "prevName",
    "_asset",
    "_prevName",
    "assetPrevName",
    "ASSET_COMPLETE",
    "ASSET_RENAME",
    "ASSET_CONFLICT_RESOLVED",
    "TEXTURE_SIZE_ERROR",
    "awayjs-core/lib/events/Event",
    "awayjs-core/lib/events/EventDispatcher",
    "EventDispatcher",
    "listeners",
    "addEventListener",
    "listener",
    "getEventListenerIndex",
    "removeEventListener",
    "dispatchEvent",
    "event",
    "listenerArray",
    "hasEventListener",
    "COMPLETE",
    "OPEN",
    "ENTER_FRAME",
    "EXIT_FRAME",
    "RESIZE",
    "ERROR",
    "CHANGE",
    "awayjs-core/lib/events/HTTPStatusEvent",
    "HTTPStatusEvent",
    "status",
    "HTTP_STATUS",
    "awayjs-core/lib/events/IEventDispatcher",
    "awayjs-core/lib/events/IOErrorEvent",
    "IOErrorEvent",
    "IO_ERROR",
    "awayjs-core/lib/events/LoaderEvent",
    "LoaderEvent",
    "url",
    "content",
    "assets",
    "_url",
    "_content",
    "_assets",
    "RESOURCE_COMPLETE",
    "awayjs-core/lib/events/ParserEvent",
    "ParserEvent",
    "_message",
    "PARSE_COMPLETE",
    "PARSE_ERROR",
    "READY_FOR_DEPENDENCIES",
    "awayjs-core/lib/events/ProgressEvent",
    "ProgressEvent",
    "PROGRESS",
    "awayjs-core/lib/events/ProjectionEvent",
    "ProjectionEvent",
    "projection",
    "_projection",
    "MATRIX_CHANGED",
    "awayjs-core/lib/events/TimerEvent",
    "TimerEvent",
    "TIMER",
    "TIMER_COMPLETE",
    "awayjs-core/lib/geom/Box",
    "Vector3D",
    "Box",
    "z",
    "depth",
    "val",
    "_bottomRightBack",
    "_topLeftFront",
    "contains",
    "containsPoint",
    "containsBox",
    "box",
    "copyFrom",
    "sourceBox",
    "equals",
    "toCompare",
    "inflate",
    "dz",
    "inflatePoint",
    "delta",
    "intersection",
    "toIntersect",
    "intersects",
    "rayIntersection",
    "direction",
    "targetNormal",
    "halfExtentsX",
    "halfExtentsY",
    "halfExtentsZ",
    "centerX",
    "centerY",
    "centerZ",
    "px",
    "py",
    "pz",
    "vx",
    "vy",
    "vz",
    "ix",
    "iy",
    "iz",
    "rayEntryDistance",
    "closestPointToPoint",
    "isEmpty",
    "offsetPosition",
    "setEmpty",
    "setTo",
    "xa",
    "ya",
    "za",
    "widtha",
    "heighta",
    "deptha",
    "union",
    "toUnion",
    "awayjs-core/lib/geom/Vector3D",
    "awayjs-core/lib/geom/ColorTransform",
    "ColorTransform",
    "clear",
    "copyTo",
    "destination",
    "prepend",
    "ct",
    "awayjs-core/lib/geom/MathConsts",
    "MathConsts",
    "RADIANS_TO_DEGREES",
    "PI",
    "DEGREES_TO_RADIANS",
    "awayjs-core/lib/geom/Matrix3DUtils",
    "Matrix3D",
    "Matrix3DUtils",
    "quaternion2matrix",
    "quarternion",
    "m",
    "xx",
    "xy",
    "xz",
    "xw",
    "yy",
    "yz",
    "yw",
    "zz",
    "zw",
    "raw",
    "RAW_DATA_CONTAINER",
    "copyRawDataFrom",
    "getForward",
    "copyColumnTo",
    "normalize",
    "getUp",
    "getRight",
    "compare",
    "m1",
    "m2",
    "r2",
    "rawData",
    "copyRawDataTo",
    "lookAt",
    "pos",
    "dir",
    "up",
    "dirN",
    "upN",
    "lftN",
    "crossProduct",
    "dotProduct",
    "reflection",
    "plane",
    "ab2",
    "ac2",
    "bc2",
    "transformVector",
    "vector",
    "k",
    "deltaTransformVector",
    "getTranslation",
    "deltaTransformVectors",
    "vin",
    "vout",
    "outIndex",
    "CALCULATION_MATRIX",
    "awayjs-core/lib/geom/Matrix3D",
    "Orientation3D",
    "identity",
    "append",
    "lhs",
    "lrd",
    "m111",
    "m112",
    "m113",
    "m114",
    "m121",
    "m122",
    "m123",
    "m124",
    "m131",
    "m132",
    "m133",
    "m134",
    "m141",
    "m142",
    "m143",
    "m144",
    "m211",
    "m212",
    "m213",
    "m214",
    "m221",
    "m222",
    "m223",
    "m224",
    "m231",
    "m232",
    "m233",
    "m234",
    "m241",
    "m242",
    "m243",
    "m244",
    "appendRotation",
    "degrees",
    "axis",
    "getAxisRotation",
    "appendSkew",
    "xSkew",
    "ySkew",
    "zSkew",
    "tempRawData",
    "tempMatrix",
    "appendScale",
    "xScale",
    "yScale",
    "zScale",
    "appendTranslation",
    "copyColumnFrom",
    "column",
    "vector3D",
    "sourceMatrix3D",
    "sourceRaw",
    "transpose",
    "copyRowFrom",
    "row",
    "copyRowTo",
    "copyToMatrix3D",
    "dest",
    "decompose",
    "orientationStyle",
    "q",
    "_components",
    "colX",
    "colY",
    "colZ",
    "skew",
    "scaleBy",
    "combine",
    "rot",
    "AXIS_ANGLE",
    "acos",
    "QUATERNION",
    "tr",
    "EULER_ANGLES",
    "asin",
    "atan2",
    "interpolate",
    "thisMat",
    "toMat",
    "percent",
    "interpolateTo",
    "determinant",
    "invertable",
    "abs",
    "m13",
    "m14",
    "m23",
    "m24",
    "m31",
    "m32",
    "m33",
    "m34",
    "m41",
    "m42",
    "m43",
    "m44",
    "rhs",
    "prependRotation",
    "prependScale",
    "prependTranslation",
    "recompose",
    "components",
    "sin",
    "cos",
    "rotation",
    "transformBox",
    "minX",
    "minY",
    "minZ",
    "maxX",
    "maxY",
    "maxZ",
    "transformVectors",
    "rad",
    "tmp1",
    "tmp2",
    "_position",
    "toFixed",
    "decimalPlace",
    "magnitude",
    "pow",
    "awayjs-core/lib/geom/Orientation3D",
    "concat",
    "a1",
    "c1",
    "tx1",
    "sourceMatrix",
    "createBox",
    "createGradientBox",
    "deltaTransformPoint",
    "norm",
    "multiply",
    "awayjs-core/lib/geom/PerspectiveProjection",
    "PerspectiveProjection",
    "toMatrix3D",
    "_matrix3D",
    "awayjs-core/lib/geom/Plane3D",
    "PlaneClassification",
    "Plane3D",
    "_iAlignment",
    "ALIGN_XY_AXIS",
    "ALIGN_YZ_AXIS",
    "ALIGN_XZ_AXIS",
    "ALIGN_ANY",
    "fromPoints",
    "p0",
    "d1x",
    "d1y",
    "d1z",
    "d2x",
    "d2y",
    "d2z",
    "fromNormalAndPoint",
    "normal",
    "distance",
    "classifyPoint",
    "epsilon",
    "FRONT",
    "BACK",
    "INTERSECT",
    "awayjs-core/lib/geom/PlaneClassification",
    "IN",
    "OUT",
    "add",
    "sourcePoint",
    "thickness",
    "invLength",
    "subtract",
    "pt1",
    "pt2",
    "polar",
    "awayjs-core/lib/geom/PoissonLookup",
    "PoissonLookup",
    "initDistributions",
    "_distributions",
    "getDistribution",
    "awayjs-core/lib/geom/Quaternion",
    "Quaternion",
    "qa",
    "qb",
    "w1",
    "z1",
    "w2",
    "z2",
    "multiplyVector",
    "fromAxisAngle",
    "sin_a",
    "cos_a",
    "slerp",
    "dot",
    "s1",
    "s2",
    "lerp",
    "fromEulerAngles",
    "ax",
    "ay",
    "az",
    "halfX",
    "halfY",
    "halfZ",
    "cosX",
    "sinX",
    "cosY",
    "sinY",
    "cosZ",
    "sinZ",
    "toEulerAngles",
    "mag",
    "xy2",
    "xz2",
    "xw2",
    "yz2",
    "yw2",
    "zw2",
    "ww",
    "fromMatrix",
    "toRawData",
    "exclude4thRow",
    "rotatePoint",
    "_bottomRight",
    "_topLeft",
    "containsRect",
    "offsetPoint",
    "awayjs-core/lib/geom/Sphere",
    "Sphere",
    "det",
    "sqrtDet",
    "awayjs-core/lib/geom/UVTransform",
    "UVTransform",
    "_uvMatrix",
    "_rotation",
    "_scaleU",
    "_scaleV",
    "_offsetU",
    "_offsetV",
    "_uvMatrixDirty",
    "updateUVMatrix",
    "lengthSquared",
    "angleBetween",
    "ascl",
    "bscl",
    "src",
    "decrementBy",
    "allFour",
    "incrementBy",
    "nearEquals",
    "tolerance",
    "negate",
    "project",
    "X_AXIS",
    "Y_AXIS",
    "Z_AXIS",
    "_id",
    "ID_COUNT",
    "_originalName",
    "updateFullPath",
    "prev",
    "_clearInterfaces",
    "_namespace",
    "_full_path",
    "assetPathEquals",
    "ns",
    "isAsset",
    "assetClass",
    "resetAssetPath",
    "overrideOriginal",
    "DEFAULT_NAMESPACE",
    "awayjs-core/lib/library/AssetLibraryBundle",
    "AssetLibraryIterator",
    "LoaderSession",
    "ConflictPrecedence",
    "ConflictStrategy",
    "AssetLibraryBundle",
    "_this",
    "_loaderSessionsGarbage",
    "_assetDictionary",
    "_loaderSessions",
    "conflictStrategy",
    "IGNORE",
    "create",
    "conflictPrecedence",
    "FAVOR_NEW",
    "_onAssetRenameDelegate",
    "onAssetRename",
    "_onAssetConflictResolvedDelegate",
    "onAssetConflictResolved",
    "_onResourceCompleteDelegate",
    "onResourceComplete",
    "_onTextureSizeErrorDelegate",
    "onTextureSizeError",
    "_onAssetCompleteDelegate",
    "onAssetComplete",
    "_onLoadErrorDelegate",
    "onLoadError",
    "_onParseErrorDelegate",
    "onParseError",
    "getInstance",
    "key",
    "_iInstances",
    "enableParser",
    "parserClass",
    "enableParsers",
    "parserClasses",
    "_strategy",
    "_strategyPreference",
    "createIterator",
    "assetTypeFilter",
    "namespaceFilter",
    "filterFunc",
    "load",
    "req",
    "context",
    "parser",
    "getLoaderSession",
    "loadData",
    "loader",
    "_iAddErrorHandler",
    "_iAddParseErrorHandler",
    "disposeLoaderSession",
    "_gcTimeoutIID",
    "setTimeout",
    "loaderSessionGC",
    "getAsset",
    "_assetDictDirty",
    "rehashAssetDict",
    "getAllAssets",
    "addAsset",
    "old",
    "assetNamespace",
    "resolveConflict",
    "removeAsset",
    "idx",
    "removeAssetFromDict",
    "removeAssetByName",
    "removeAllAssets",
    "removeNamespaceAssets",
    "old_assets",
    "autoRemoveEmptyNamespace",
    "empty",
    "stopAllLoaderSessions",
    "killloaderSession",
    "pop",
    "clearTimeout",
    "dict",
    "awayjs-core/lib/library/AssetLibraryIterator",
    "awayjs-core/lib/library/ConflictPrecedence",
    "awayjs-core/lib/library/ConflictStrategy",
    "awayjs-core/lib/library/LoaderSession",
    "filter",
    "_idx",
    "_filtered",
    "next",
    "setIndex",
    "awayjs-core/lib/library/AssetLibrary",
    "AssetLibrary",
    "getBundle",
    "stopLoad",
    "FAVOR_OLD",
    "awayjs-core/lib/library/ConflictStrategyBase",
    "ConflictStrategyBase",
    "changedAsset",
    "oldAsset",
    "assetsDictionary",
    "precedence",
    "_pUpdateNames",
    "nonConflictingName",
    "newAsset",
    "loser_prev_name",
    "winner",
    "loser",
    "ErrorConflictStrategy",
    "IgnoreConflictStrategy",
    "NumSuffixConflictStrategy",
    "include",
    "APPEND_NUM_SUFFIX",
    "THROW_ERROR",
    "awayjs-core/lib/library/ErrorConflictStrategy",
    "awayjs-core/lib/library/IgnoreConflictStrategy",
    "awayjs-core/lib/library/NumSuffixConflictStrategy",
    "assetFullPath",
    "awayjs-core/lib/library/IAssetClass",
    "awayjs-core/lib/library/IAsset",
    "awayjs-core/lib/library/IDUtil",
    "IDUtil",
    "createUID",
    "uid",
    "ALPHA_CHAR_CODES",
    "random",
    "time",
    "Date",
    "getTime",
    "timeString",
    "toUpperCase",
    "substr",
    "charCodeAt",
    "String",
    "fromCharCode",
    "apply",
    "awayjs-core/lib/library/IWrapperClass",
    "awayjs-core/lib/library/LoaderContext",
    "LoaderContext",
    "includeDependencies",
    "dependencyBaseUrl",
    "_includeDependencies",
    "_dependencyBaseUrl",
    "_embeddedDataByUrl",
    "_remappedUrls",
    "_materialMode",
    "UNDEFINED",
    "materialMode",
    "_overrideAbsPath",
    "_overrideFullUrls",
    "mapUrl",
    "originalUrl",
    "newUrl",
    "mapUrlToData",
    "_iHasDataForUrl",
    "_iGetDataForUrl",
    "_iHasMappingForUrl",
    "_iGetRemappedUrl",
    "SINGLEPASS_MATERIALS",
    "MULTIPASS_MATERIALS",
    "URLLoader",
    "URLLoaderDataFormat",
    "Image2DParser",
    "ImageCubeParser",
    "TextureAtlasParser",
    "ResourceDependency",
    "WaveAudioParser",
    "_stack",
    "_errorHandlers",
    "_parseErrorHandlers",
    "_onReadyForDependenciesDelegate",
    "onReadyForDependencies",
    "_onParseCompleteDelegate",
    "onParseComplete",
    "_onLoadCompleteDelegate",
    "onLoadComplete",
    "_parsers",
    "parsers",
    "_baseDependency",
    "_uri",
    "replace",
    "retrieveDependency",
    "retrieveNext",
    "_currentDependency",
    "dependencies",
    "parsingPaused",
    "_iResumeParsing",
    "_iSuccess",
    "resolve",
    "_iLoader",
    "addEventListeners",
    "request",
    "Function",
    "_iSetData",
    "retrieveAsRawData",
    "parseDependency",
    "resolveDependencyUrl",
    "dataFormat",
    "BINARY",
    "_iSetParser",
    "getParserFromSuffix",
    "joinUrl",
    "base",
    "end",
    "charAt",
    "scheme_re",
    "RegExp",
    "overrideAbsolutePaths",
    "test",
    "overrideFullURLs",
    "noscheme_url",
    "retrieveParserDependencies",
    "parserDependancies",
    "resolveParserDependencies",
    "handled",
    "isDependency",
    "removeEventListeners",
    "resolveFailure",
    "suppresAssetEvents",
    "resolveName",
    "handler",
    "getParserFromData",
    "supportsData",
    "_iFileName",
    "parseAsync",
    "fileExtension",
    "toLowerCase",
    "supportsType",
    "awayjs-core/lib/net/URLLoader",
    "awayjs-core/lib/net/URLLoaderDataFormat",
    "awayjs-core/lib/parsers/Image2DParser",
    "awayjs-core/lib/parsers/ImageCubeParser",
    "awayjs-core/lib/parsers/ResourceDependency",
    "awayjs-core/lib/parsers/TextureAtlasParser",
    "awayjs-core/lib/parsers/WaveAudioParser",
    "separator",
    "_separator",
    "_next_suffix",
    "orig",
    "new_name",
    "suffix",
    "isNaN",
    "StreamingAudioChannel",
    "WebAudioChannel",
    "channelClass",
    "_channels",
    "isPlaying",
    "maxChannels",
    "channel",
    "isLooping",
    "isDecoding",
    "awayjs-core/lib/managers/StreamingAudioChannel",
    "awayjs-core/lib/managers/WebAudioChannel",
    "awayjs-core/lib/managers/IAudioChannelClass",
    "awayjs-core/lib/managers/IAudioChannel",
    "_isPlaying",
    "_isLooping",
    "_startTime",
    "_sourceOpenDelegate",
    "_sourceOpen",
    "_updateEndDelegate",
    "_updateEnd",
    "_audio",
    "Audio",
    "ontimeupdate",
    "_onTimeUpdate",
    "_updateSource",
    "_duration",
    "_sourceDirty",
    "_offset",
    "_isQueuing",
    "_isOpening",
    "_queueBuffer",
    "pause",
    "_mediaSource",
    "activeSourceBuffers",
    "console",
    "_sourceBuffer",
    "addSourceBuffer",
    "timestampOffset",
    "appendBuffer",
    "endOfStream",
    "_disposeSource",
    "MediaSource",
    "_urlString",
    "URL",
    "createObjectURL",
    "remove",
    "removeSourceBuffer",
    "revokeObjectURL",
    "_isDecoding",
    "_audioCtx",
    "window",
    "_gainNode",
    "createGain",
    "gain",
    "connect",
    "_onEndedDelegate",
    "_onEnded",
    "_currentTime",
    "_decodeCache",
    "_onDecodeComplete",
    "_errorCache",
    "decodeAudioData",
    "_onError",
    "_source",
    "createBufferSource",
    "onended",
    "start",
    "error",
    "disconnect",
    "awayjs-core/lib/net/CrossDomainPolicy",
    "CrossDomainPolicy",
    "ANONYMOUS",
    "USE_CREDENTIALS",
    "TEXT",
    "VARIABLES",
    "BLOB",
    "ARRAY_BUFFER",
    "URLRequestMethod",
    "URLVariables",
    "AwayEvent",
    "AwayProgressEvent",
    "_bytesLoaded",
    "_bytesTotal",
    "_dataFormat",
    "_loadError",
    "_request",
    "_data",
    "format",
    "initXHR",
    "method",
    "POST",
    "postRequest",
    "getRequest",
    "isSupported",
    "close",
    "_XHR",
    "abort",
    "disposeXHR",
    "setResponseType",
    "xhr",
    "responseType",
    "open",
    "async",
    "send",
    "handleXmlHttpRequestException",
    "urlVars",
    "formData",
    "XMLHttpRequest",
    "onloadstart",
    "onLoadStart",
    "onprogress",
    "onProgress",
    "onabort",
    "onAbort",
    "onerror",
    "onload",
    "ontimeout",
    "onTimeOut",
    "onloadend",
    "onLoadEnd",
    "onreadystatechange",
    "onReadyStateChange",
    "decodeURLVariables",
    "join",
    "tokens",
    "re",
    "exec",
    "decodeURIComponent",
    "readyState",
    "_loadErrorEvent",
    "_progressEvent",
    "bytesTotal",
    "total",
    "bytesLoaded",
    "loaded",
    "_loadStartEvent",
    "responseText",
    "response",
    "_loadCompleteEvent",
    "awayjs-core/lib/net/URLRequestMethod",
    "awayjs-core/lib/net/URLVariables",
    "GET",
    "awayjs-core/lib/net/URLRequest",
    "URLRequest",
    "_variables",
    "decode",
    "obj",
    "fd",
    "FormData",
    "ParserBase",
    "ParserUtils",
    "ByteArray",
    "extension",
    "HTMLImageElement",
    "ba",
    "readUnsignedShort",
    "readShort",
    "readUTFBytes",
    "readByte",
    "_pProceedParsing",
    "sizeError",
    "_loadingImage",
    "MORE_TO_PARSE",
    "_htmlImageElement",
    "isHTMLImageElementValid",
    "imageToBitmapImage2D",
    "_pFinalizeAsset",
    "htmlImageElement",
    "byteArrayToImage",
    "arrayBufferToImage",
    "Blob",
    "blobToImage",
    "_pContent",
    "PARSING_DONE",
    "awayjs-core/lib/parsers/ParserBase",
    "awayjs-core/lib/parsers/ParserUtils",
    "awayjs-core/lib/utils/ByteArray",
    "JSON",
    "parse",
    "_iResolveDependency",
    "resourceDependency",
    "_iResolveDependencyFailure",
    "_imgDependencyDictionary",
    "_getBitmapImage2D",
    "json",
    "rec",
    "_pDieWithError",
    "_pAddDependency",
    "_validateCubeData",
    "_pPauseAndRetrieveDependencies",
    "Timer",
    "getTimer",
    "_dependencies",
    "_pOnIntervalDelegate",
    "_pOnInterval",
    "isBitmapImage2DValid",
    "bitmapImage2D",
    "isValid",
    "isImage2DValid",
    "_parsingFailure",
    "_parsingPaused",
    "_parsingComplete",
    "newMaterialMode",
    "frameLimit",
    "_pStartParsing",
    "_iResolveDependencyName",
    "_timer",
    "_isParsing",
    "type_event",
    "type_name",
    "suppressErrorEvents",
    "sub_id",
    "_pPauseParsing",
    "_pHasTime",
    "_lastFrameTime",
    "_frameLimit",
    "_pFinishParsing",
    "_pGetTextData",
    "_pGetByteData",
    "toByteArray",
    "_pGetData",
    "awayjs-core/lib/utils/Timer",
    "awayjs-core/lib/utils/getTimer",
    "awayjs-core/lib/parsers/ParserDataFormat",
    "ParserDataFormat",
    "PLAIN_TEXT",
    "IMAGE",
    "arrayBufferToBase64",
    "mimeType",
    "byteStr",
    "bytes",
    "base64Image",
    "btoa",
    "arrayBufferToAudio",
    "fileType",
    "str",
    "audio",
    "img",
    "Image",
    "arraybytes",
    "byteArrayToAudio",
    "filetype",
    "URLObj",
    "blobToAudio",
    "bitmapData",
    "setArrayBuffer",
    "getBytesAvailable",
    "parentParser",
    "suppressAssetEvents",
    "_sub_id",
    "_parser",
    "_parentParser",
    "_retrieveAsRawData",
    "_suppressAssetEvents",
    "XmlUtils",
    "_parseState",
    "TextureAtlasParserState",
    "PARSE_SUBTEXTURES",
    "nodes",
    "PARSE_XML",
    "_doc",
    "getChildrenWithTag",
    "strToXml",
    "_imagePath",
    "readAttributeValue",
    "_subTextureNodes",
    "PARSE_IMAGE",
    "sampler",
    "element",
    "imageRect",
    "frameRect",
    "awayjs-core/lib/utils/XmlUtils",
    "parseFileType",
    "awayjs-core/lib/pool/IImageObject",
    "awayjs-core/lib/projections/CoordinateSystem",
    "CoordinateSystem",
    "LEFT_HANDED",
    "RIGHT_HANDED",
    "awayjs-core/lib/projections/FreeMatrixProjection",
    "ProjectionBase",
    "FreeMatrixProjection",
    "_pMatrix",
    "_pNear",
    "_pFar",
    "_pAspectRatio",
    "pInvalidateMatrix",
    "pUpdateMatrix",
    "_pMatrixInvalid",
    "awayjs-core/lib/projections/PerspectiveProjection",
    "awayjs-core/lib/projections/ProjectionBase",
    "awayjs-core/lib/projections/IProjection",
    "awayjs-core/lib/projections/ObliqueNearPlaneProjection",
    "ObliqueNearPlaneProjection",
    "baseProjection",
    "_onProjectionMatrixChangedDelegate",
    "onProjectionMatrixChanged",
    "_baseProjection",
    "frustumCorners",
    "near",
    "far",
    "_iAspectRatio",
    "_plane",
    "cx",
    "cy",
    "cz",
    "cw",
    "signX",
    "signY",
    "inverse",
    "awayjs-core/lib/projections/OrthographicOffCenterProjection",
    "OrthographicOffCenterProjection",
    "_minX",
    "_maxX",
    "_minY",
    "_maxY",
    "unproject",
    "nX",
    "nY",
    "sZ",
    "unprojectionMatrix",
    "_pFrustumCorners",
    "awayjs-core/lib/projections/OrthographicProjection",
    "OrthographicProjection",
    "projectionHeight",
    "_projectionHeight",
    "_yMax",
    "_xMax",
    "left",
    "right",
    "top",
    "bottom",
    "_pScissorRect",
    "_pViewPort",
    "xWidth",
    "yHgt",
    "center",
    "middle",
    "fieldOfView",
    "coordinateSystem",
    "_fieldOfView",
    "_focalLength",
    "_hFieldOfView",
    "_hFocalLength",
    "_preserveAspectRatio",
    "_preserveFocalLength",
    "tan",
    "_pCoordinateSystem",
    "atan",
    "tanMinX",
    "_pOriginX",
    "tanMaxX",
    "tanMinY",
    "_pOriginY",
    "tanMaxY",
    "_unprojectionInvalid",
    "point3d",
    "_unprojection",
    "_iUpdateScissorRect",
    "_iUpdateViewport",
    "awayjs-core/lib/ui/Keyboard",
    "Keyboard",
    "A",
    "ALTERNATE",
    "AUDIO",
    "B",
    "BACKQUOTE",
    "BACKSLASH",
    "BACKSPACE",
    "C",
    "CAPS_LOCK",
    "CHANNEL_DOWN",
    "CHANNEL_UP",
    "COMMA",
    "COMMAND",
    "CONTROL",
    "D",
    "DELETE",
    "DOWN",
    "DVR",
    "E",
    "END",
    "ENTER",
    "EQUAL",
    "ESCAPE",
    "EXIT",
    "F",
    "F1",
    "F10",
    "F11",
    "F12",
    "F13",
    "F14",
    "F15",
    "F2",
    "F3",
    "F4",
    "F5",
    "F6",
    "F7",
    "F8",
    "F9",
    "FAST_FORWARD",
    "G",
    "GUIDE",
    "H",
    "HELP",
    "HOME",
    "I",
    "INFO",
    "INPUT",
    "INSERT",
    "J",
    "K",
    "KEYNAME_BEGIN",
    "KEYNAME_BREAK",
    "KEYNAME_CLEARDISPLAY",
    "KEYNAME_CLEARLINE",
    "KEYNAME_DELETE",
    "KEYNAME_DELETECHAR",
    "KEYNAME_DELETELINE",
    "KEYNAME_DOWNARROW",
    "KEYNAME_END",
    "KEYNAME_EXECUTE",
    "KEYNAME_F1",
    "KEYNAME_F10",
    "KEYNAME_F11",
    "KEYNAME_F12",
    "KEYNAME_F13",
    "KEYNAME_F14",
    "KEYNAME_F15",
    "KEYNAME_F16",
    "KEYNAME_F17",
    "KEYNAME_F18",
    "KEYNAME_F19",
    "KEYNAME_F2",
    "KEYNAME_F20",
    "KEYNAME_F21",
    "KEYNAME_F22",
    "KEYNAME_F23",
    "KEYNAME_F24",
    "KEYNAME_F25",
    "KEYNAME_F26",
    "KEYNAME_F27",
    "KEYNAME_F28",
    "KEYNAME_F29",
    "KEYNAME_F3",
    "KEYNAME_F30",
    "KEYNAME_F31",
    "KEYNAME_F32",
    "KEYNAME_F33",
    "KEYNAME_F34",
    "KEYNAME_F35",
    "KEYNAME_F4",
    "KEYNAME_F5",
    "KEYNAME_F6",
    "KEYNAME_F7",
    "KEYNAME_F8",
    "KEYNAME_F9",
    "KEYNAME_FIND",
    "KEYNAME_HELP",
    "KEYNAME_HOME",
    "KEYNAME_INSERT",
    "KEYNAME_INSERTCHAR",
    "KEYNAME_INSERTLINE",
    "KEYNAME_LEFTARROW",
    "KEYNAME_MENU",
    "KEYNAME_MODESWITCH",
    "KEYNAME_NEXT",
    "KEYNAME_PAGEDOWN",
    "KEYNAME_PAGEUP",
    "KEYNAME_PAUSE",
    "KEYNAME_PREV",
    "KEYNAME_PRINT",
    "KEYNAME_PRINTSCREEN",
    "KEYNAME_REDO",
    "KEYNAME_RESET",
    "KEYNAME_RIGHTARROW",
    "KEYNAME_SCROLLLOCK",
    "KEYNAME_SELECT",
    "KEYNAME_STOP",
    "KEYNAME_SYSREQ",
    "KEYNAME_SYSTEM",
    "KEYNAME_UNDO",
    "KEYNAME_UPARROW",
    "KEYNAME_USER",
    "L",
    "LAST",
    "LEFT",
    "LEFTBRACKET",
    "LIVE",
    "M",
    "MASTER_SHELL",
    "MENU",
    "MINUS",
    "N",
    "NEXT",
    "NUMBER_0",
    "NUMBER_1",
    "NUMBER_2",
    "NUMBER_3",
    "NUMBER_4",
    "NUMBER_5",
    "NUMBER_6",
    "NUMBER_7",
    "NUMBER_8",
    "NUMBER_9",
    "NUMPAD",
    "NUMPAD_0",
    "NUMPAD_1",
    "NUMPAD_2",
    "NUMPAD_3",
    "NUMPAD_4",
    "NUMPAD_5",
    "NUMPAD_6",
    "NUMPAD_7",
    "NUMPAD_8",
    "NUMPAD_9",
    "NUMPAD_ADD",
    "NUMPAD_DECIMAL",
    "NUMPAD_DIVIDE",
    "NUMPAD_ENTER",
    "NUMPAD_MULTIPLY",
    "NUMPAD_SUBTRACT",
    "O",
    "P",
    "PAGE_DOWN",
    "PAGE_UP",
    "PAUSE",
    "PERIOD",
    "PLAY",
    "PREVIOUS",
    "Q",
    "QUOTE",
    "R",
    "RECORD",
    "REWIND",
    "RIGHT",
    "RIGHTBRACKET",
    "S",
    "SEARCH",
    "SEMICOLON",
    "SETUP",
    "SHIFT",
    "SKIP_BACKWARD",
    "SKIP_FORWARD",
    "SLASH",
    "SPACE",
    "STOP",
    "SUBTITLE",
    "T",
    "TAB",
    "U",
    "UP",
    "V",
    "VOD",
    "W",
    "X",
    "Y",
    "YELLOW",
    "Z",
    "bmpd",
    "awayjs-core/lib/utils/ByteArrayBase",
    "ByteArrayBase",
    "_mode",
    "writeByte",
    "writeUnsignedByte",
    "readUnsignedByte",
    "writeUnsignedShort",
    "writeUnsignedInt",
    "writeFloat",
    "toFloatBits",
    "readFloat",
    "fromFloatBits",
    "compareEqual",
    "other",
    "co0",
    "c0",
    "writeBase64String",
    "dumpToConsole",
    "oldpos",
    "nstep",
    "asHexString",
    "digits",
    "lut",
    "readBase64String",
    "internalGetBase64String",
    "getUnsignedByteFunc",
    "self",
    "b0",
    "b1",
    "b2",
    "enc1",
    "enc2",
    "enc3",
    "enc4",
    "base64Key",
    "Base64Key",
    "awayjs-core/lib/utils/ByteArrayBuffer",
    "ByteArrayBuffer",
    "_bytes",
    "bi",
    "Number",
    "sign",
    "exponent",
    "mantissa",
    "maxlength",
    "unalignedarraybytestemp",
    "ensureWriteableSpace",
    "ensureSpace",
    "aBuffer",
    "inInt8AView",
    "localInt8View",
    "newmaxlength",
    "newarraybuffer",
    "newview",
    "readBytes",
    "byteView",
    "localByteView",
    "view2",
    "view3",
    "DataView",
    "getUint8",
    "c2",
    "c3",
    "readInt",
    "int",
    "getInt32",
    "short",
    "getInt16",
    "readDouble",
    "double",
    "getFloat64",
    "pa",
    "Uint32Array",
    "awayjs-core/lib/utils/CSS",
    "CSS",
    "setElementSize",
    "style",
    "setElementWidth",
    "setElementHeight",
    "setElementX",
    "setElementY",
    "getElementVisibility",
    "visibility",
    "setElementVisibility",
    "visible",
    "setElementAlpha",
    "HTMLCanvasElement",
    "globalAlpha",
    "setElementPosition",
    "absolute",
    "float32Color",
    "ARGBtoFloat32",
    "componentToHex",
    "hex",
    "RGBToHexString",
    "ARGBToHexString",
    "awayjs-core/lib/utils/Debug",
    "Debug",
    "breakpoint",
    "throwPIROnKeyWordOnly",
    "enable",
    "keyword",
    "throwPIR",
    "clss",
    "fnc",
    "msg",
    "logPIR",
    "THROW_ERRORS",
    "LOG_PI_ERRORS",
    "args",
    "_i",
    "arguments",
    "ENABLE_LOG",
    "awayjs-core/lib/utils/Extensions",
    "Extensions",
    "SIMD",
    "Boolean",
    "awayjs-core/lib/utils/IArrayBufferViewClass",
    "image2D",
    "MAX_SIZE",
    "isPowerOfTwo",
    "getBestPowerOf2",
    "awayjs-core/lib/utils/MipmapGenerator",
    "MipmapGenerator",
    "_generateMipMaps",
    "output",
    "_getMipmapHolder",
    "_matrix",
    "bitmapImage",
    "downsampleImage",
    "mipMapHolder",
    "newW",
    "newH",
    "_freeMipMapHolder",
    "_mipMaps",
    "_mipMapUses",
    "holderWidth",
    "holderHeight",
    "destBitmap",
    "BoxFilter",
    "xkernel",
    "PolyphaseKernel",
    "ykernel",
    "tempBitmap",
    "iscale",
    "kernelLength",
    "kernelWidth",
    "kernelWindowSize",
    "sumR",
    "sumG",
    "sumB",
    "sumA",
    "windowSize",
    "colorR",
    "colorG",
    "colorB",
    "colorA",
    "valueAt",
    "srcLength",
    "dstLength",
    "samples",
    "sum",
    "isamples",
    "evaluate",
    "awayjs-core/lib/utils/RequestAnimationFrame",
    "RequestAnimationFrame",
    "callback",
    "callbackContext",
    "_active",
    "_argsArray",
    "_getTimer",
    "setCallback",
    "_rafUpdateFunction",
    "_tick",
    "_dt",
    "_callback",
    "_callbackContext",
    "_prevTime",
    "requestAnimationFrame",
    "delay",
    "repeatCount",
    "_repeatCount",
    "_currentCount",
    "_running",
    "_delay",
    "clearInterval",
    "_iid",
    "setInterval",
    "tick",
    "node",
    "tag",
    "fragment",
    "createDocumentFragment",
    "num",
    "childNodes",
    "child",
    "nodeName",
    "appendChild",
    "filterListByParam",
    "paramName",
    "paramValue",
    "attributes",
    "getNamedItem",
    "DOMParser",
    "parseFromString",
    "nodeToString",
    "XMLSerializer",
    "serializeToString",
    "attrName",
    "attrs",
    "attribute",
    "writeAttributeValue",
    "attrValue",
    "Attr",
    "setNamedItem",
    "hasAttribute",
    "now",
    "awayjs-core/lib/vos/IAttributesBufferVO",
    "awayjs-core/lib/vos/IAttributesVO"
  ],
  "mappings": "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",
  "file": "awayjs-core.min.js",
  "sourcesContent": [
    "(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})",
    null,
    "import AttributesView\t\t\t= require(\"awayjs-core/lib/attributes/AttributesView\");\r\nimport IAsset\t\t\t\t\t= require(\"awayjs-core/lib/library/IAsset\");\r\nimport AssetBase\t\t\t\t= require(\"awayjs-core/lib/library/AssetBase\");\r\nimport IAttributesBufferVO\t\t= require(\"awayjs-core/lib/vos/IAttributesBufferVO\");\r\n\r\nclass AttributesBuffer extends AssetBase implements IAsset\r\n{\r\n\tpublic static assetType:string = \"[assets AttributesBuffer]\";\r\n\r\n\tprivate _attributesBufferVO:Array<IAttributesBufferVO> = new Array<IAttributesBufferVO>();\r\n\tprivate _count:number = 0;\r\n\tprivate _stride:number = 0;\r\n\tprivate _newStride:number = 0;\r\n\r\n\tprivate _buffer:ArrayBuffer;\r\n\tprivate _bufferView:Uint8Array;\r\n\tprivate _contentDirty:boolean;\r\n\tprivate _lengthDirty:boolean;\r\n\tprivate _viewVOs:Array<ViewVO> = new Array<ViewVO>();\r\n\r\n\r\n\t/**\r\n\t *\r\n\t * @returns {string}\r\n\t */\r\n\tpublic get assetType():string\r\n\t{\r\n\t\treturn AttributesBuffer.assetType;\r\n\t}\r\n\r\n\tpublic get stride():number\r\n\t{\r\n\t\tif (this._lengthDirty)\r\n\t\t\tthis._updateLength();\r\n\r\n\t\treturn this._stride;\r\n\t}\r\n\r\n\tpublic set stride(value:number)\r\n\t{\r\n\t\tif (this._newStride == value)\r\n\t\t\treturn;\r\n\r\n\t\tthis._newStride = value;\r\n\r\n\t\tthis.invalidateLength();\r\n\t}\r\n\t\r\n\tpublic get count():number\r\n\t{\r\n\t\treturn this._count;\r\n\t}\r\n\t\r\n\tpublic set count(value:number)\r\n\t{\r\n\t\tif (this._count == value)\r\n\t\t\treturn;\r\n\t\t\r\n\t\tthis._count = value;\r\n\t\t\r\n\t\tthis.invalidateLength();\r\n\t}\r\n\r\n\r\n\tpublic get buffer():ArrayBuffer\r\n\t{\r\n\t\tif (this._lengthDirty)\r\n\t\t\tthis._updateLength();\r\n\r\n\t\tthis._contentDirty = false;\r\n\r\n\t\treturn this._buffer;\r\n\t}\r\n\r\n\r\n\tpublic get bufferView():Uint8Array\r\n\t{\r\n\t\tif (this._lengthDirty)\r\n\t\t\tthis._updateLength();\r\n\r\n\t\tthis._contentDirty = false;\r\n\r\n\t\treturn this._bufferView;\r\n\t}\r\n\r\n\tpublic set bufferView(value:Uint8Array)\r\n\t{\r\n\t\tthis._bufferView = value;\r\n\t\tthis._buffer = this._bufferView.buffer;\r\n\t}\r\n\r\n\tpublic get length()\r\n\t{\r\n\t\treturn this._count*this.stride;\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\tconstructor(stride:number = 0, count:number = 0)\r\n\t{\r\n\t\tsuper();\r\n\r\n\t\tthis._stride = this._newStride = stride;\r\n\t\tthis._count = count;\r\n\r\n\t\tthis._buffer = new ArrayBuffer(this._stride*this._count);\r\n\t\tthis._bufferView = new Uint8Array(this._buffer, 0, this._buffer.byteLength);\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tpublic invalidateContent():void\r\n\t{\r\n\t\tif (this._contentDirty)\r\n\t\t\treturn;\r\n\r\n\t\tvar len:number = this._attributesBufferVO.length;\r\n\t\tfor (var i:number = 0; i < len; i++)\r\n\t\t\tthis._attributesBufferVO[i].invalidate();\r\n\r\n\t\tthis._contentDirty = true;\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t * @private\r\n\t */\r\n\tpublic invalidateLength():void\r\n\t{\r\n\t\tif (this._lengthDirty)\r\n\t\t\treturn;\r\n\r\n\t\tfor (var i:number = this._attributesBufferVO.length - 1; i >= 0; i--)\r\n\t\t\tthis._attributesBufferVO[i].dispose();\r\n\r\n\t\tthis._lengthDirty = true;\r\n\r\n\t\t//dispose buffer if stride is 0\r\n\t\tif (!this._newStride) {\r\n\t\t\tthis._buffer = null;\r\n\t\t\tthis._bufferView = null;\r\n\t\t}\r\n\t}\r\n\r\n\tpublic clone():AttributesBuffer\r\n\t{\r\n\t\tvar attributesBuffer:AttributesBuffer = new AttributesBuffer(this._stride, this._count);\r\n\t\tattributesBuffer.bufferView.set(this.bufferView);\r\n\r\n\t\tvar len:number = this._viewVOs.length;\r\n\t\tfor (var i:number = 0; i < len; i++)\r\n\t\t\tthis._viewVOs[i].view._internalClone(attributesBuffer);\r\n\r\n\t\treturn attributesBuffer;\r\n\t}\r\n\r\n\tpublic getView(index:number):AttributesView\r\n\t{\r\n\t\tif (index < this._viewVOs.length)\r\n\t\t\treturn this._viewVOs[index].view;\r\n\r\n\t\treturn null;\r\n\t}\r\n\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic dispose()\r\n\t{\r\n\t\twhile (this._attributesBufferVO.length)\r\n\t\t\tthis._attributesBufferVO[0].dispose();\r\n\t}\r\n\r\n\tpublic _setAttributes(viewIndex:number, arrayBufferView:ArrayBufferView, offset:number = 0)\r\n\t{\r\n\t\tvar array:Uint8Array = (arrayBufferView instanceof Uint8Array)? <Uint8Array> arrayBufferView : new Uint8Array(arrayBufferView.buffer);\r\n\r\n\t\tvar viewVO:ViewVO = this._viewVOs[viewIndex];\r\n\t\tvar vLength:number = viewVO.length;\r\n\t\tvar vOffset:number = viewVO.offset;\r\n\t\tvar vCount:number = array.length/vLength;\r\n\r\n\t\t//make sure there is enough space in the buffer\r\n\t\tif (this.count < vCount + offset)\r\n\t\t\tthis.count = vCount + offset;\r\n\r\n\t\tif (this._lengthDirty)\r\n\t\t\tthis._updateLength();\r\n\r\n\t\t//fast path for separate buffers\r\n\t\tif (this._viewVOs.length == 1) {\r\n\t\t\tthis._bufferView.set(array);\r\n\t\t} else {\r\n\t\t\tfor (var i:number = 0; i < vCount; i++)\r\n\t\t\t\tthis._bufferView.set(array.subarray(i*vLength, (i+1)*vLength), (i+offset)*this._stride + vOffset);\r\n\t\t}\r\n\r\n\t\tthis.invalidateContent();\r\n\t}\r\n\r\n\tpublic _getLocalArrayBuffer(viewIndex:number):ArrayBuffer\r\n\t{\r\n\t\tvar viewVO:ViewVO = this._viewVOs[viewIndex];\r\n\t\tvar vLength:number = viewVO.length;\r\n\t\tvar vOffset:number = viewVO.offset;\r\n\r\n\t\tif (this._lengthDirty)\r\n\t\t\tthis._updateLength();\r\n\r\n\t\t//fast path for separate buffers\r\n\t\tif (this._viewVOs.length == 1)\r\n\t\t\treturn this._buffer;\r\n\r\n\t\tvar localBuffer:ArrayBuffer = new ArrayBuffer(this._count*vLength);\r\n\t\tvar localBufferView:Uint8Array = new Uint8Array(localBuffer);\r\n\r\n\t\tfor (var i:number = 0; i < this._count; i++)\r\n\t\t\tlocalBufferView.set(this._bufferView.subarray(i*this._stride + vOffset, i*this._stride + vOffset + vLength), i*vLength);\r\n\r\n\t\treturn localBuffer;\r\n\t}\r\n\r\n\tpublic _iAddAttributesBufferVO(AttributesBufferVO:IAttributesBufferVO):IAttributesBufferVO\r\n\t{\r\n\t\tthis._attributesBufferVO.push(AttributesBufferVO);\r\n\r\n\t\treturn AttributesBufferVO;\r\n\t}\r\n\r\n\tpublic _iRemoveAttributesBufferVO(AttributesBufferVO:IAttributesBufferVO):IAttributesBufferVO\r\n\t{\r\n\t\tthis._attributesBufferVO.splice(this._attributesBufferVO.indexOf(AttributesBufferVO), 1);\r\n\r\n\t\treturn AttributesBufferVO;\r\n\t}\r\n\r\n\tpublic _addView(view:AttributesView)\r\n\t{\r\n\t\tvar viewVO:ViewVO = new ViewVO(view);\r\n\t\tvar len:number = this._viewVOs.length;\r\n\r\n\t\tviewVO.offset = len? this._viewVOs[len - 1].offset + this._viewVOs[len - 1].length : 0;\r\n\r\n\t\tthis._viewVOs.push(viewVO);\r\n\r\n\t\tif (this._newStride < viewVO.offset + viewVO.length) {\r\n\t\t\tthis._newStride = viewVO.offset + viewVO.length;\r\n\t\t\tthis.invalidateLength();\r\n\t\t}\r\n\r\n\t\tview._index = len;\r\n\t}\r\n\r\n\tpublic _removeView(view:AttributesView)\r\n\t{\r\n\t\tvar viewIndex:number = view._index;\r\n\t\tvar viewVO:ViewVO = this._viewVOs.splice(viewIndex, 1)[0];\r\n\t\tvar len:number = this._viewVOs.length;\r\n\r\n\t\tviewVO.dispose();\r\n\r\n\t\tfor (var i:number = viewIndex; i < len; i++) {\r\n\t\t\tviewVO = this._viewVOs[i];\r\n\t\t\tviewVO.offset = i? this._viewVOs[i - 1].offset + this._viewVOs[i - 1].length : 0;\r\n\t\t\tviewVO.view._index = i;\r\n\t\t}\r\n\r\n\t\tthis._newStride = viewVO.offset + viewVO.length;\r\n\r\n\t\tthis.invalidateLength();\r\n\t}\r\n\r\n\tpublic _getOffset(viewIndex:number):number\r\n\t{\r\n\t\treturn this._viewVOs[viewIndex].offset;\r\n\t}\r\n\r\n\tpublic _updateLength()\r\n\t{\r\n\t\tthis._lengthDirty = false;\r\n\r\n\t\tvar i:number;\r\n\t\tvar j:number;\r\n\t\tvar len:number = this._viewVOs.length;\r\n\r\n\t\tvar newLength:number = this._newStride*this._count;\r\n\r\n\t\tif (!this._buffer || this._buffer.byteLength != newLength) {\r\n\t\t\tvar newBuffer:ArrayBuffer = new ArrayBuffer(newLength);\r\n\t\t\tvar newView:Uint8Array = new Uint8Array(newBuffer, 0, newBuffer.byteLength);\r\n\t\t\tvar viewVO:ViewVO;\r\n\t\t\tvar vLength:number;\r\n\t\t\tvar vOffset:number;\r\n\t\t\tvar vOldOffset:number;\r\n\r\n\t\t\tif (this._stride != this._newStride) {\r\n\t\t\t\tfor (i = 0; i < len; i++) {\r\n\t\t\t\t\tviewVO = this._viewVOs[i];\r\n\t\t\t\t\tvLength = viewVO.length;\r\n\t\t\t\t\tvOffset = viewVO.offset;\r\n\t\t\t\t\tvOldOffset = viewVO.oldOffset;\r\n\t\t\t\t\tfor (j = 0; j < this._count; j++)\r\n\t\t\t\t\t\tif (vOldOffset != null)\r\n\t\t\t\t\t\t\tnewView.set(new Uint8Array(this._buffer, j*this._stride + vOldOffset, vLength), j*this._newStride + vOffset);\r\n\r\n\t\t\t\t\tviewVO.oldOffset = viewVO.offset;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis._stride = this._newStride;\r\n\t\t\t} else {\r\n\t\t\t\tnewView.set(new Uint8Array(this._buffer, 0, Math.min(newLength, this._buffer.byteLength))); //TODO: bypass quantisation of bytearray on instantiation\r\n\t\t\t}\r\n\r\n\t\t\tthis._buffer = newBuffer;\r\n\t\t\tthis._bufferView = newView;\r\n\t\t}\r\n\t}\r\n}\r\n\r\nclass ViewVO\r\n{\r\n\tpublic view:AttributesView;\r\n\r\n\tpublic length;\r\n\r\n\tpublic offset;\r\n\r\n\tpublic oldOffset;\r\n\r\n\tconstructor(view:AttributesView)\r\n\t{\r\n\t\tthis.view = view;\r\n\t\tthis.length = view.size*view.dimensions;\r\n\t}\r\n\r\n\tpublic dispose()\r\n\t{\r\n\t\tthis.view = null;\r\n\t}\r\n\r\n\tpublic clone():ViewVO\r\n\t{\r\n\t\treturn new ViewVO(this.view);\r\n\t}\r\n}\r\n\r\nexport = AttributesBuffer;",
    "import AttributesBuffer\t\t\t= require(\"awayjs-core/lib/attributes/AttributesBuffer\");\r\nimport IAsset\t\t\t\t\t= require(\"awayjs-core/lib/library/IAsset\");\r\nimport AssetBase\t\t\t\t= require(\"awayjs-core/lib/library/AssetBase\");\r\nimport IArrayBufferViewClass\t= require(\"awayjs-core/lib/utils/IArrayBufferViewClass\");\r\n\r\nclass AttributesView extends AssetBase implements IAsset\r\n{\r\n\tpublic static assetType:string = \"[attributes AttributesView]\";\r\n\r\n\t/**\r\n\t *\r\n\t * @returns {string}\r\n\t */\r\n\tpublic get assetType():string\r\n\t{\r\n\t\treturn AttributesView.assetType;\r\n\t}\r\n\r\n\tpublic _cloneCache:AttributesView;\r\n\tpublic _attributesBuffer:AttributesBuffer;\r\n\tpublic _bufferDirty:boolean;\r\n\tprivate _size:number;\r\n\tprivate _dimensions:number;\r\n\r\n\tpublic _index:number;\r\n\tpublic _arrayClass:IArrayBufferViewClass;\r\n\r\n\tpublic _localArrayBuffer:ArrayBuffer;\r\n\r\n\tpublic normalized:boolean;\r\n\r\n\tpublic get buffer():AttributesBuffer\r\n\t{\r\n\t\treturn this._attributesBuffer;\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t * @returns {number}\r\n\t */\r\n\tpublic get size():number\r\n\t{\r\n\t\treturn this._size;\r\n\t}\r\n\r\n\tpublic set size(value:number)\r\n\t{\r\n\t\tif (this._size == value)\r\n\t\t\treturn;\r\n\r\n\t\tthis._size = value;\r\n\r\n\t\tthis._attributesBuffer._removeView(this);\r\n\t\tthis._attributesBuffer._addView(this);\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t * @returns {number}\r\n\t */\r\n\tpublic get dimensions():number\r\n\t{\r\n\t\treturn this._dimensions;\r\n\t}\r\n\r\n\tpublic set dimensions(value:number)\r\n\t{\r\n\t\tif (this._dimensions == value)\r\n\t\t\treturn;\r\n\r\n\t\tthis._dimensions = value;\r\n\r\n\t\t//reset view\r\n\t\tthis._attributesBuffer._removeView(this);\r\n\t\tthis._attributesBuffer._addView(this);\r\n\t}\r\n\r\n\tpublic get count():number\r\n\t{\r\n\t\treturn this._attributesBuffer.count;\r\n\t}\r\n\r\n\tpublic set count(value:number)\r\n\t{\r\n\t\tthis._attributesBuffer.count = value;\r\n\t}\r\n\r\n\tpublic get offset():number\r\n\t{\r\n\t\treturn this._attributesBuffer._getOffset(this._index);\r\n\t}\r\n\r\n\tpublic get length():number\r\n\t{\r\n\t\treturn this._attributesBuffer.count*this._dimensions;\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tconstructor(arrayClass:IArrayBufferViewClass, dimensions:number, count?:number);\r\n\tconstructor(arrayClass:IArrayBufferViewClass, dimensions:number, attributesBuffer?:AttributesBuffer);\r\n\tconstructor(arrayClass:IArrayBufferViewClass, dimensions:number, attributesBufferCount:any = 0)\r\n\t{\r\n\t\tsuper();\r\n\r\n\t\tthis._arrayClass = arrayClass;\r\n\t\tthis._size = arrayClass.BYTES_PER_ELEMENT;\r\n\t\tthis._dimensions = dimensions;\r\n\t\tthis._attributesBuffer = (attributesBufferCount instanceof AttributesBuffer)? <AttributesBuffer> attributesBufferCount : new AttributesBuffer(this._dimensions*this._size, attributesBufferCount);\r\n\r\n\t\tthis._attributesBuffer._addView(this);\r\n\t}\r\n\r\n\tpublic set(array:Array<number>, offset?:number);\r\n\tpublic set(arrayBufferView:ArrayBufferView, offset?:number);\r\n\tpublic set(values:any, offset:number = 0)\r\n\t{\r\n\t\tthis._attributesBuffer._setAttributes(this._index, (values instanceof Array)? new (this._arrayClass)(values) : <ArrayBufferView> values, offset);\r\n\r\n\t\tthis._localArrayBuffer = null;\r\n\t}\r\n\r\n\tpublic get(count:number, offset:number = 0):ArrayBufferView\r\n\t{\r\n\t\tif (!this._localArrayBuffer)\r\n\t\t\tthis._localArrayBuffer = this._attributesBuffer._getLocalArrayBuffer(this._index);\r\n\r\n\t\tvar len:number = this._dimensions*this._size;\r\n\t\treturn new (this._arrayClass)(this._localArrayBuffer, offset*len, count*this._dimensions);\r\n\t}\r\n\r\n\tpublic _internalClone(attributesBuffer:AttributesBuffer):AttributesView\r\n\t{\r\n\t\treturn (this._cloneCache = new AttributesView(this._arrayClass, this._dimensions, attributesBuffer));\r\n\t}\r\n\r\n\tpublic clone(attributesBuffer:AttributesBuffer = null):AttributesView\r\n\t{\r\n\t\tif (attributesBuffer)\r\n\t\t\tthis._internalClone(attributesBuffer);\r\n\r\n\t\tif (!this._cloneCache)\r\n\t\t\tthis._attributesBuffer.clone();\r\n\r\n\t\tvar cloneCache:AttributesView = this._cloneCache;\r\n\t\tthis._cloneCache = null;\r\n\r\n\t\treturn cloneCache;\r\n\t}\r\n\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic dispose()\r\n\t{\r\n\t\tthis._attributesBuffer._removeView(this);\r\n\t\tthis._attributesBuffer = null;\r\n\t\tthis._localArrayBuffer = null;\r\n\t}\r\n}\r\n\r\nexport = AttributesView;",
    "import AttributesBuffer\t\t\t= require(\"awayjs-core/lib/attributes/AttributesBuffer\");\r\nimport AttributesView\t\t\t= require(\"awayjs-core/lib/attributes/AttributesView\");\r\nimport IArrayBufferViewClass\t= require(\"awayjs-core/lib/utils/IArrayBufferViewClass\");\r\n\r\nclass Byte4Attributes extends AttributesView\r\n{\r\n\tpublic static assetType:string = \"[attributes Byte4Attributes]\";\r\n\r\n\t/**\r\n\t *\r\n\t * @returns {string}\r\n\t */\r\n\tpublic get assetType():string\r\n\t{\r\n\t\treturn Byte4Attributes.assetType;\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tconstructor(length?:number, unsigned?:boolean);\r\n\tconstructor(attributesBuffer?:AttributesBuffer, unsigned?:boolean);\r\n\tconstructor(attributesBufferLength?:any, unsigned:boolean = true)\r\n\t{\r\n\t\tsuper(unsigned? Uint8Array : Int8Array, 4, attributesBufferLength);\r\n\t}\r\n\r\n\tpublic set(array:Array<number>, offset?:number);\r\n\tpublic set(typedArray:Float32Array, offset?:number);\r\n\tpublic set(typedArray:Uint8Array, offset?:number);\r\n\tpublic set(typedArray:Int8Array, offset?:number);\r\n\tpublic set(values:any, offset:number = 0)\r\n\t{\r\n\t\tsuper.set(values, offset);\r\n\t}\r\n\r\n\tpublic get(count:number, offset?:number):Uint8Array;\r\n\tpublic get(count:number, offset?:number):Int8Array;\r\n\tpublic get(count:number, offset:number = 0):any\r\n\t{\r\n\t\treturn super.get(count, offset);\r\n\t}\r\n\r\n\tpublic _internalClone(attributesBuffer:AttributesBuffer):Byte4Attributes\r\n\t{\r\n\t\treturn (this._cloneCache = new Byte4Attributes(attributesBuffer, this._arrayClass == Uint8Array));\r\n\t}\r\n\r\n\tpublic clone(attributesBuffer:AttributesBuffer = null):Byte4Attributes\r\n\t{\r\n\t\treturn <Byte4Attributes> super.clone(attributesBuffer);\r\n\t}\r\n}\r\n\r\nexport = Byte4Attributes;",
    "import AttributesBuffer\t\t\t= require(\"awayjs-core/lib/attributes/AttributesBuffer\");\r\nimport AttributesView\t\t\t= require(\"awayjs-core/lib/attributes/AttributesView\");\r\nimport IArrayBufferViewClass\t= require(\"awayjs-core/lib/utils/IArrayBufferViewClass\");\r\n\r\nclass Float1Attributes extends AttributesView\r\n{\r\n\tpublic static assetType:string = \"[attributes Float1Attributes]\";\r\n\r\n\t/**\r\n\t *\r\n\t * @returns {string}\r\n\t */\r\n\tpublic get assetType():string\r\n\t{\r\n\t\treturn Float1Attributes.assetType;\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tconstructor(length?:number);\r\n\tconstructor(attributesBuffer?:AttributesBuffer);\r\n\tconstructor(attributesBufferLength?:any)\r\n\t{\r\n\t\tsuper(Float32Array, 1, attributesBufferLength)\r\n\t}\r\n\r\n\tpublic set(array:Array<number>, offset?:number);\r\n\tpublic set(typedArray:Float32Array, offset?:number);\r\n\tpublic set(values:any, offset:number = 0)\r\n\t{\r\n\t\tsuper.set(values, offset);\r\n\t}\r\n\r\n\tpublic get(count:number, offset:number = 0):Float32Array\r\n\t{\r\n\t\treturn <Float32Array> super.get(count, offset);\r\n\t}\r\n\r\n\tpublic _internalClone(attributesBuffer:AttributesBuffer):Float1Attributes\r\n\t{\r\n\t\treturn (this._cloneCache = new Float1Attributes(attributesBuffer));\r\n\t}\r\n\r\n\tpublic clone(attributesBuffer:AttributesBuffer = null):Float1Attributes\r\n\t{\r\n\t\treturn <Float1Attributes> super.clone(attributesBuffer);\r\n\t}\r\n}\r\n\r\nexport = Float1Attributes;",
    "import AttributesBuffer\t\t\t= require(\"awayjs-core/lib/attributes/AttributesBuffer\");\r\nimport AttributesView\t\t\t= require(\"awayjs-core/lib/attributes/AttributesView\");\r\nimport IArrayBufferViewClass\t= require(\"awayjs-core/lib/utils/IArrayBufferViewClass\");\r\n\r\nclass Float2Attributes extends AttributesView\r\n{\r\n\tpublic static assetType:string = \"[attributes Float2Attributes]\";\r\n\r\n\t/**\r\n\t *\r\n\t * @returns {string}\r\n\t */\r\n\tpublic get assetType():string\r\n\t{\r\n\t\treturn Float2Attributes.assetType;\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tconstructor(length?:number);\r\n\tconstructor(attributesBuffer?:AttributesBuffer);\r\n\tconstructor(attributesBufferLength?:any)\r\n\t{\r\n\t\tsuper(Float32Array, 2, attributesBufferLength)\r\n\t}\r\n\r\n\tpublic set(array:Array<number>, offset?:number);\r\n\tpublic set(typedArray:Float32Array, offset?:number);\r\n\tpublic set(values:any, offset:number = 0)\r\n\t{\r\n\t\tsuper.set(values, offset);\r\n\t}\r\n\r\n\tpublic get(count:number, offset:number = 0):Float32Array\r\n\t{\r\n\t\treturn <Float32Array> super.get(count, offset);\r\n\t}\r\n\r\n\tpublic _internalClone(attributesBuffer:AttributesBuffer):Float2Attributes\r\n\t{\r\n\t\treturn (this._cloneCache = new Float2Attributes(attributesBuffer));\r\n\t}\r\n\r\n\tpublic clone(attributesBuffer:AttributesBuffer = null):Float2Attributes\r\n\t{\r\n\t\treturn <Float2Attributes> super.clone(attributesBuffer);\r\n\t}\r\n}\r\n\r\nexport = Float2Attributes;",
    "import AttributesBuffer\t\t\t= require(\"awayjs-core/lib/attributes/AttributesBuffer\");\r\nimport AttributesView\t\t\t= require(\"awayjs-core/lib/attributes/AttributesView\");\r\nimport IArrayBufferViewClass\t= require(\"awayjs-core/lib/utils/IArrayBufferViewClass\");\r\n\r\nclass Float3Attributes extends AttributesView\r\n{\r\n\tpublic static assetType:string = \"[attributes Float3Attributes]\";\r\n\r\n\t/**\r\n\t *\r\n\t * @returns {string}\r\n\t */\r\n\tpublic get assetType():string\r\n\t{\r\n\t\treturn Float3Attributes.assetType;\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tconstructor(length?:number);\r\n\tconstructor(attributesBuffer?:AttributesBuffer);\r\n\tconstructor(attributesBufferLength?:any)\r\n\t{\r\n\t\tsuper(Float32Array, 3, attributesBufferLength)\r\n\t}\r\n\r\n\tpublic set(array:Array<number>, offset?:number);\r\n\tpublic set(typedArray:Float32Array, offset?:number);\r\n\tpublic set(values:any, offset:number = 0)\r\n\t{\r\n\t\tsuper.set(values, offset);\r\n\t}\r\n\r\n\tpublic get(count:number, offset:number = 0):Float32Array\r\n\t{\r\n\t\treturn <Float32Array> super.get(count, offset);\r\n\t}\r\n\r\n\tpublic _internalClone(attributesBuffer:AttributesBuffer):Float3Attributes\r\n\t{\r\n\t\treturn (this._cloneCache = new Float3Attributes(attributesBuffer));\r\n\t}\r\n\r\n\tpublic clone(attributesBuffer:AttributesBuffer = null):Float3Attributes\r\n\t{\r\n\t\treturn <Float3Attributes> super.clone(attributesBuffer);\r\n\t}\r\n}\r\n\r\nexport = Float3Attributes;",
    "import AttributesBuffer\t\t\t= require(\"awayjs-core/lib/attributes/AttributesBuffer\");\r\nimport AttributesView\t\t\t= require(\"awayjs-core/lib/attributes/AttributesView\");\r\nimport IArrayBufferViewClass\t= require(\"awayjs-core/lib/utils/IArrayBufferViewClass\");\r\n\r\nclass Float4Attributes extends AttributesView\r\n{\r\n\tpublic static assetType:string = \"[attributes Float4Attributes]\";\r\n\r\n\t/**\r\n\t *\r\n\t * @returns {string}\r\n\t */\r\n\tpublic get assetType():string\r\n\t{\r\n\t\treturn Float4Attributes.assetType;\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tconstructor(length?:number);\r\n\tconstructor(attributesBuffer?:AttributesBuffer);\r\n\tconstructor(attributesBufferLength?:any)\r\n\t{\r\n\t\tsuper(Float32Array, 4, attributesBufferLength)\r\n\t}\r\n\r\n\tpublic set(array:Array<number>, offset?:number);\r\n\tpublic set(typedArray:Float32Array, offset?:number);\r\n\tpublic set(values:any, offset:number = 0)\r\n\t{\r\n\t\tsuper.set(values, offset);\r\n\t}\r\n\r\n\tpublic get(count:number, offset:number = 0):Float32Array\r\n\t{\r\n\t\treturn <Float32Array> super.get(count, offset);\r\n\t}\r\n\r\n\tpublic _internalClone(attributesBuffer:AttributesBuffer):Float4Attributes\r\n\t{\r\n\t\treturn (this._cloneCache = new Float4Attributes(attributesBuffer));\r\n\t}\r\n\r\n\tpublic clone(attributesBuffer:AttributesBuffer = null):Float4Attributes\r\n\t{\r\n\t\treturn <Float4Attributes> super.clone(attributesBuffer);\r\n\t}\r\n}\r\n\r\nexport = Float4Attributes;",
    "import AttributesBuffer\t\t\t= require(\"awayjs-core/lib/attributes/AttributesBuffer\");\r\nimport AttributesView\t\t\t= require(\"awayjs-core/lib/attributes/AttributesView\");\r\nimport IArrayBufferViewClass\t= require(\"awayjs-core/lib/utils/IArrayBufferViewClass\");\r\n\r\nclass Short2Attributes extends AttributesView\r\n{\r\n\tpublic static assetType:string = \"[attributes Short2Attributes]\";\r\n\r\n\t/**\r\n\t *\r\n\t * @returns {string}\r\n\t */\r\n\tpublic get assetType():string\r\n\t{\r\n\t\treturn Short2Attributes.assetType;\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tconstructor(length?:number, unsigned?:boolean);\r\n\tconstructor(attributesBuffer?:AttributesBuffer, unsigned?:boolean);\r\n\tconstructor(attributesBufferLength?:any, unsigned:boolean = true)\r\n\t{\r\n\t\tsuper(unsigned? Uint16Array : Int16Array, 2, attributesBufferLength)\r\n\t}\r\n\r\n\tpublic set(array:Array<number>, offset?:number);\r\n\tpublic set(typedArray:Uint16Array, offset?:number);\r\n\tpublic set(typedArray:Int16Array, offset?:number);\r\n\tpublic set(values:any, offset:number = 0)\r\n\t{\r\n\t\tsuper.set(values, offset);\r\n\t}\r\n\r\n\tpublic get(count:number, offset?:number):Uint16Array;\r\n\tpublic get(count:number, offset?:number):Int16Array;\r\n\tpublic get(count:number, offset:number = 0):any\r\n\t{\r\n\t\treturn super.get(count, offset);\r\n\t}\r\n\r\n\tpublic _internalClone(attributesBuffer:AttributesBuffer):Short2Attributes\r\n\t{\r\n\t\treturn (this._cloneCache = new Short2Attributes(attributesBuffer, this._arrayClass == Uint16Array));\r\n\t}\r\n\r\n\tpublic clone(attributesBuffer:AttributesBuffer = null):Short2Attributes\r\n\t{\r\n\t\treturn <Short2Attributes> super.clone(attributesBuffer);\r\n\t}\r\n}\r\n\r\nexport = Short2Attributes;",
    "import AttributesBuffer\t\t\t= require(\"awayjs-core/lib/attributes/AttributesBuffer\");\r\nimport AttributesView\t\t\t= require(\"awayjs-core/lib/attributes/AttributesView\");\r\nimport IArrayBufferViewClass\t= require(\"awayjs-core/lib/utils/IArrayBufferViewClass\");\r\n\r\nclass Short3Attributes extends AttributesView\r\n{\r\n\tpublic static assetType:string = \"[attributes Short3Attributes]\";\r\n\r\n\t/**\r\n\t *\r\n\t * @returns {string}\r\n\t */\r\n\tpublic get assetType():string\r\n\t{\r\n\t\treturn Short3Attributes.assetType;\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tconstructor(length?:number, unsigned?:boolean);\r\n\tconstructor(attributesBuffer?:AttributesBuffer, unsigned?:boolean);\r\n\tconstructor(attributesBufferLength?:any, unsigned:boolean = true)\r\n\t{\r\n\t\tsuper(unsigned? Uint16Array : Int16Array, 3, attributesBufferLength)\r\n\t}\r\n\r\n\tpublic set(array:Array<number>, offset?:number);\r\n\tpublic set(typedArray:Uint16Array, offset?:number);\r\n\tpublic set(typedArray:Int16Array, offset?:number);\r\n\tpublic set(values:any, offset:number = 0)\r\n\t{\r\n\t\tsuper.set(values, offset);\r\n\t}\r\n\r\n\tpublic get(count:number, offset?:number):Uint16Array;\r\n\tpublic get(count:number, offset?:number):Int16Array;\r\n\tpublic get(count:number, offset:number = 0):any\r\n\t{\r\n\t\treturn super.get(count, offset);\r\n\t}\r\n\r\n\tpublic _internalClone(attributesBuffer:AttributesBuffer):Short3Attributes\r\n\t{\r\n\t\treturn (this._cloneCache = new Short3Attributes(attributesBuffer, this._arrayClass == Uint16Array));\r\n\t}\r\n\r\n\tpublic clone(attributesBuffer:AttributesBuffer = null):Short3Attributes\r\n\t{\r\n\t\treturn <Short3Attributes> super.clone(attributesBuffer);\r\n\t}\r\n}\r\n\r\nexport = Short3Attributes;",
    "import Image2D\t\t\t\t\t= require(\"awayjs-core/lib/data/Image2D\");\r\nimport BlendMode\t\t\t\t= require(\"awayjs-core/lib/data/BlendMode\");\r\nimport ColorTransform\t\t\t= require(\"awayjs-core/lib/geom/ColorTransform\");\r\nimport Matrix\t\t\t\t\t= require(\"awayjs-core/lib/geom/Matrix\");\r\nimport Rectangle\t\t\t\t= require(\"awayjs-core/lib/geom/Rectangle\");\r\nimport Point\t\t\t\t\t= require(\"awayjs-core/lib/geom/Point\");\r\nimport ByteArray\t\t\t\t= require(\"awayjs-core/lib/utils/ByteArray\");\r\nimport ColorUtils\t\t\t\t= require(\"awayjs-core/lib/utils/ColorUtils\");\r\nimport BitmapImageUtils\t\t\t= require(\"awayjs-core/lib/utils/BitmapImageUtils\");\r\nimport ImageUtils\t\t\t\t= require(\"awayjs-core/lib/utils/ImageUtils\");\r\nimport IImageCanvas\t\t\t\t= require(\"awayjs-core/lib/data/IImageCanvas\");\r\nimport CPUCanvas = require('awayjs-core/lib/data/CPUCanvas');\r\n/**\r\n * The BitmapImage2D class lets you work with the data(pixels) of a Bitmap\r\n * object. You can use the methods of the BitmapImage2D class to create\r\n * arbitrarily sized transparent or opaque bitmap images and manipulate them\r\n * in various ways at runtime. You can also access the BitmapImage2D for a bitmap\r\n * image that you load with the <code>flash.Assets</code> or\r\n * <code>flash.display.Loader</code> classes.\r\n *\r\n * <p>This class lets you separate bitmap rendering operations from the\r\n * internal display updating routines of flash. By manipulating a\r\n * BitmapImage2D object directly, you can create complex images without incurring\r\n * the per-frame overhead of constantly redrawing the content from vector\r\n * data.</p>\r\n *\r\n * <p>The methods of the BitmapImage2D class support effects that are not\r\n * available through the filters available to non-bitmap display objects.</p>\r\n *\r\n * <p>A BitmapImage2D object contains an array of pixel data. This data can\r\n * represent either a fully opaque bitmap or a transparent bitmap that\r\n * contains alpha channel data. Either type of BitmapImage2D object is stored as\r\n * a buffer of 32-bit integers. Each 32-bit integer determines the properties\r\n * of a single pixel in the bitmap.</p>\r\n *\r\n * <p>Each 32-bit integer is a combination of four 8-bit channel values(from\r\n * 0 to 255) that describe the alpha transparency and the red, green, and blue\r\n * (ARGB) values of the pixel.(For ARGB values, the most significant byte\r\n * represents the alpha channel value, followed by red, green, and blue.)</p>\r\n *\r\n * <p>The four channels(alpha, red, green, and blue) are represented as\r\n * numbers when you use them with the <code>BitmapImage2D.copyChannel()</code>\r\n * method or the <code>DisplacementMapFilter.componentX</code> and\r\n * <code>DisplacementMapFilter.componentY</code> properties, and these numbers\r\n * are represented by the following constants in the BitmapImage2DChannel\r\n * class:</p>\r\n *\r\n * <ul>\r\n *   <li><code>BitmapImage2DChannel.ALPHA</code></li>\r\n *   <li><code>BitmapImage2DChannel.RED</code></li>\r\n *   <li><code>BitmapImage2DChannel.GREEN</code></li>\r\n *   <li><code>BitmapImage2DChannel.BLUE</code></li>\r\n * </ul>\r\n *\r\n * <p>You can attach BitmapImage2D objects to a Bitmap object by using the\r\n * <code>bitmapData</code> property of the Bitmap object.</p>\r\n *\r\n * <p>You can use a BitmapImage2D object to fill a Graphics object by using the\r\n * <code>Graphics.beginBitmapFill()</code> method.</p>\r\n *\r\n * <p>You can also use a BitmapImage2D object to perform batch tile rendering\r\n * using the <code>flash.display.Tilesheet</code> class.</p>\r\n *\r\n * <p>In Flash Player 10, the maximum size for a BitmapImage2D object\r\n * is 8,191 pixels in width or height, and the total number of pixels cannot\r\n * exceed 16,777,215 pixels.(So, if a BitmapImage2D object is 8,191 pixels wide,\r\n * it can only be 2,048 pixels high.) In Flash Player 9 and earlier, the limitation\r\n * is 2,880 pixels in height and 2,880 in width.</p>\r\n */\r\nclass BitmapImage2D extends Image2D\r\n{\r\n\tpublic static assetType:string = \"[image BitmapImage2D]\";\r\n\r\n\tprivate _imageCanvas:IImageCanvas;\r\n\tprivate _context:CanvasRenderingContext2D;\r\n\tprivate _imageData:ImageData;\r\n\tprivate _transparent:boolean;\r\n\tprivate _locked:boolean = false;\r\n\r\n\t/**\r\n\t *\r\n\t * @returns {string}\r\n\t */\r\n\tpublic get assetType():string\r\n\t{\r\n\t\treturn BitmapImage2D.assetType;\r\n\t}\r\n\r\n\t/**\r\n\t * Defines whether the bitmap image supports per-pixel transparency. You can\r\n\t * set this value only when you construct a BitmapImage2D object by passing in\r\n\t * <code>true</code> for the <code>transparent</code> parameter of the\r\n\t * constructor. Then, after you create a BitmapImage2D object, you can check\r\n\t * whether it supports per-pixel transparency by determining if the value of\r\n\t * the <code>transparent</code> property is <code>true</code>.\r\n\t */\r\n\tpublic get transparent():boolean\r\n\t{\r\n\t\treturn this._transparent;\r\n\t}\r\n\r\n\tpublic set transparent(value:boolean)\r\n\t{\r\n\t\tthis._transparent = value;\r\n\t}\r\n\r\n\t/**\r\n\t * Creates a BitmapImage2D object with a specified width and height. If you\r\n\t * specify a value for the <code>fillColor</code> parameter, every pixel in\r\n\t * the bitmap is set to that color.\r\n\t *\r\n\t * <p>By default, the bitmap is created as transparent, unless you pass\r\n\t * the value <code>false</code> for the transparent parameter. After you\r\n\t * create an opaque bitmap, you cannot change it to a transparent bitmap.\r\n\t * Every pixel in an opaque bitmap uses only 24 bits of color channel\r\n\t * information. If you define the bitmap as transparent, every pixel uses 32\r\n\t * bits of color channel information, including an alpha transparency\r\n\t * channel.</p>\r\n\t *\r\n\t * @param width       The width of the bitmap image in pixels.\r\n\t * @param height      The height of the bitmap image in pixels.\r\n\t * @param transparent Specifies whether the bitmap image supports per-pixel\r\n\t *                    transparency. The default value is <code>true</code>\r\n\t *                    (transparent). To create a fully transparent bitmap,\r\n\t *                    set the value of the <code>transparent</code>\r\n\t *                    parameter to <code>true</code> and the value of the\r\n\t *                    <code>fillColor</code> parameter to 0x00000000(or to\r\n\t *                    0). Setting the <code>transparent</code> property to\r\n\t *                    <code>false</code> can result in minor improvements\r\n\t *                    in rendering performance.\r\n\t * @param fillColor   A 32-bit ARGB color value that you use to fill the\r\n\t *                    bitmap image area. The default value is\r\n\t *                    0xFFFFFFFF(solid white).\r\n\t */\r\n\tconstructor(width:number, height:number, transparent:boolean = true, fillColor:number = null, powerOfTwo:boolean = true)\r\n\t{\r\n\t\tsuper(width, height, powerOfTwo);\r\n\r\n\t\tthis._transparent = transparent;\r\n\t\tif(document) {\r\n\t\t\tthis._imageCanvas = <HTMLCanvasElement> document.createElement(\"canvas\");\r\n\t\t}else {\r\n\t\t\tthis._imageCanvas = new CPUCanvas();\r\n\t\t}\r\n\t\tthis._imageCanvas.width = width;\r\n\t\tthis._imageCanvas.height = height;\r\n\t\tthis._context = this._imageCanvas.getContext(\"2d\");\r\n\r\n\t\tif (fillColor != null)\r\n\t\t\tthis.fillRect(this._rect, fillColor);\r\n\t}\r\n\r\n\t/**\r\n\t * Returns a new BitmapImage2D object that is a clone of the original instance\r\n\t * with an exact copy of the contained bitmap.\r\n\t *\r\n\t * @return A new BitmapImage2D object that is identical to the original.\r\n\t */\r\n\tpublic clone():BitmapImage2D\r\n\t{\r\n\t\tvar t:BitmapImage2D = new BitmapImage2D(this.width, this.height, this.transparent, null, this.powerOfTwo);\r\n\t\tt.draw(this);\r\n\t\treturn t;\r\n\t}\r\n\r\n\t/**\r\n\t * Adjusts the color values in a specified area of a bitmap image by using a\r\n\t * <code>ColorTransform</code> object. If the rectangle matches the\r\n\t * boundaries of the bitmap image, this method transforms the color values of\r\n\t * the entire image.\r\n\t *\r\n\t * @param rect           A Rectangle object that defines the area of the\r\n\t *                       image in which the ColorTransform object is applied.\r\n\t * @param colorTransform A ColorTransform object that describes the color\r\n\t *                       transformation values to apply.\r\n\t */\r\n\tpublic colorTransform(rect:Rectangle, colorTransform:ColorTransform)\r\n\t{\r\n\t\tif (!this._locked)\r\n\t\t\tthis._imageData = this._context.getImageData(0, 0, this._rect.width, this._rect.height);\r\n\r\n\t\tvar data:Array<number> = this._imageData.data;\r\n\r\n\t\tvar i:number /*uint*/, j:number /*uint*/, index:number /*uint*/;\r\n\t\tfor (i = 0; i < rect.width; ++i) {\r\n\t\t\tfor (j = 0; j < rect.height; ++j) {\r\n\t\t\t\tindex = (i + rect.x + (j + rect.y)*this.width)*4;\r\n\r\n\t\t\t\tdata[index] = data[index]*colorTransform.redMultiplier + colorTransform.redOffset;\r\n\t\t\t\tdata[index + 1] = data[index + 1]*colorTransform.greenMultiplier + colorTransform.greenOffset;\r\n\t\t\t\tdata[index + 2] = data[index + 2]*colorTransform.blueMultiplier + colorTransform.blueOffset;\r\n\t\t\t\tdata[index + 3] = data[index + 3]*colorTransform.alphaMultiplier + colorTransform.alphaOffset;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (!this._locked) {\r\n\t\t\tthis._context.putImageData(this._imageData, 0, 0);\r\n\t\t\tthis._imageData = null;\r\n\t\t}\r\n\r\n\t\tthis.invalidateContent();\r\n\t}\r\n\r\n\t/**\r\n\t * Transfers data from one channel of another BitmapImage2D object or the\r\n\t * current BitmapImage2D object into a channel of the current BitmapImage2D object.\r\n\t * All of the data in the other channels in the destination BitmapImage2D object\r\n\t * are preserved.\r\n\t *\r\n\t * <p>The source channel value and destination channel value can be one of\r\n\t * following values: </p>\r\n\t *\r\n\t * <ul>\r\n\t *   <li><code>BitmapImage2DChannel.RED</code></li>\r\n\t *   <li><code>BitmapImage2DChannel.GREEN</code></li>\r\n\t *   <li><code>BitmapImage2DChannel.BLUE</code></li>\r\n\t *   <li><code>BitmapImage2DChannel.ALPHA</code></li>\r\n\t * </ul>\r\n\t *\r\n\t * @param sourceBitmapImage2D The input bitmap image to use. The source image\r\n\t *                         can be a different BitmapImage2D object or it can\r\n\t *                         refer to the current BitmapImage2D object.\r\n\t * @param sourceRect       The source Rectangle object. To copy only channel\r\n\t *                         data from a smaller area within the bitmap,\r\n\t *                         specify a source rectangle that is smaller than\r\n\t *                         the overall size of the BitmapImage2D object.\r\n\t * @param destPoint        The destination Point object that represents the\r\n\t *                         upper-left corner of the rectangular area where\r\n\t *                         the new channel data is placed. To copy only\r\n\t *                         channel data from one area to a different area in\r\n\t *                         the destination image, specify a point other than\r\n\t *                        (0,0).\r\n\t * @param sourceChannel    The source channel. Use a value from the\r\n\t *                         BitmapImage2DChannel class\r\n\t *                        (<code>BitmapImage2DChannel.RED</code>,\r\n\t *                         <code>BitmapImage2DChannel.BLUE</code>,\r\n\t *                         <code>BitmapImage2DChannel.GREEN</code>,\r\n\t *                         <code>BitmapImage2DChannel.ALPHA</code>).\r\n\t * @param destChannel      The destination channel. Use a value from the\r\n\t *                         BitmapImage2DChannel class\r\n\t *                        (<code>BitmapImage2DChannel.RED</code>,\r\n\t *                         <code>BitmapImage2DChannel.BLUE</code>,\r\n\t *                         <code>BitmapImage2DChannel.GREEN</code>,\r\n\t *                         <code>BitmapImage2DChannel.ALPHA</code>).\r\n\t * @throws TypeError The sourceBitmapImage2D, sourceRect or destPoint are null.\r\n\t */\r\n\tpublic copyChannel(sourceBitmap:BitmapImage2D, sourceRect:Rectangle, destPoint:Point, sourceChannel:number, destChannel:number)\r\n\t{\r\n\t\tvar imageData:ImageData = sourceBitmap.getImageData();\r\n\r\n\t\tif (!this._locked)\r\n\t\t\tthis._imageData = this._context.getImageData(0, 0, this._rect.width, this._rect.height);\r\n\r\n\t\tvar sourceData:Array<number> = sourceBitmap.getImageData().data;\r\n\t\tvar destData:Array<number> = this._imageData.data;\r\n\r\n\t\tvar sourceOffset:number = Math.round(Math.log(sourceChannel)/Math.log(2));\r\n\t\tvar destOffset:number = Math.round(Math.log(destChannel)/Math.log(2));\r\n\r\n\t\tvar i:number /*uint*/, j:number /*uint*/, sourceIndex:number /*uint*/, destIndex:number /*uint*/;\r\n\t\tfor (i = 0; i < sourceRect.width; ++i) {\r\n\t\t\tfor (j = 0; j < sourceRect.height; ++j) {\r\n\t\t\t\tsourceIndex = (i + sourceRect.x + (j + sourceRect.y)*sourceBitmap.width)*4;\r\n\t\t\t\tdestIndex = (i + destPoint.x + (j + destPoint.y)*this.width)*4;\r\n\r\n\t\t\t\tdestData[destIndex + destOffset] = sourceData[sourceIndex + sourceOffset];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (!this._locked) {\r\n\t\t\tthis._context.putImageData(this._imageData, 0, 0);\r\n\t\t\tthis._imageData = null;\r\n\t\t}\r\n\r\n\t\tthis.invalidateContent();\r\n\t}\r\n\r\n\t/**\r\n\t * Provides a fast routine to perform pixel manipulation between images with\r\n\t * no stretching, rotation, or color effects. This method copies a\r\n\t * rectangular area of a source image to a rectangular area of the same size\r\n\t * at the destination point of the destination BitmapImage2D object.\r\n\t *\r\n\t * <p>If you include the <code>alphaBitmap</code> and <code>alphaPoint</code>\r\n\t * parameters, you can use a secondary image as an alpha source for the\r\n\t * source image. If the source image has alpha data, both sets of alpha data\r\n\t * are used to composite pixels from the source image to the destination\r\n\t * image. The <code>alphaPoint</code> parameter is the point in the alpha\r\n\t * image that corresponds to the upper-left corner of the source rectangle.\r\n\t * Any pixels outside the intersection of the source image and alpha image\r\n\t * are not copied to the destination image.</p>\r\n\t *\r\n\t * <p>The <code>mergeAlpha</code> property controls whether or not the alpha\r\n\t * channel is used when a transparent image is copied onto another\r\n\t * transparent image. To copy pixels with the alpha channel data, set the\r\n\t * <code>mergeAlpha</code> property to <code>true</code>. By default, the\r\n\t * <code>mergeAlpha</code> property is <code>false</code>.</p>\r\n\t *\r\n\t * @param sourceBitmapImage2D The input bitmap image from which to copy pixels.\r\n\t *                         The source image can be a different BitmapImage2D\r\n\t *                         instance, or it can refer to the current\r\n\t *                         BitmapImage2D instance.\r\n\t * @param sourceRect       A rectangle that defines the area of the source\r\n\t *                         image to use as input.\r\n\t * @param destPoint        The destination point that represents the\r\n\t *                         upper-left corner of the rectangular area where\r\n\t *                         the new pixels are placed.\r\n\t * @param alphaBitmapImage2D  A secondary, alpha BitmapImage2D object source.\r\n\t * @param alphaPoint       The point in the alpha BitmapImage2D object source\r\n\t *                         that corresponds to the upper-left corner of the\r\n\t *                         <code>sourceRect</code> parameter.\r\n\t * @param mergeAlpha       To use the alpha channel, set the value to\r\n\t *                         <code>true</code>. To copy pixels with no alpha\r\n\t *                         channel, set the value to <code>false</code>.\r\n\t * @throws TypeError The sourceBitmapImage2D, sourceRect, destPoint are null.\r\n\t */\r\n\tpublic copyPixels(source:BitmapImage2D, sourceRect:Rectangle, destRect:Rectangle);\r\n\tpublic copyPixels(source:HTMLElement, sourceRect:Rectangle, destRect:Rectangle);\r\n\tpublic copyPixels(source:any, sourceRect:Rectangle, destRect:Rectangle)\r\n\t{\r\n\t\tif (source instanceof BitmapImage2D)\r\n\t\t\tsource = source.getCanvas();\r\n\r\n\t\tif (this._locked) {\r\n\r\n\t\t\t// If canvas is locked:\r\n\t\t\t//\r\n\t\t\t//      1) copy image data back to canvas\r\n\t\t\t//      2) draw object\r\n\t\t\t//      3) read _imageData back out\r\n\r\n\t\t\tthis._context.putImageData(this._imageData, 0, 0); // at coords 0,0\r\n\t\t\tBitmapImageUtils._copyPixels(this._context, source, sourceRect, destRect);\r\n\t\t\tthis._imageData = this._context.getImageData(0, 0, this._rect.width, this._rect.height);\r\n\r\n\t\t} else {\r\n\t\t\tBitmapImageUtils._copyPixels(this._context, source, sourceRect, destRect);\r\n\t\t}\r\n\r\n\t\tthis.invalidateContent();\r\n\t}\r\n\r\n\t/**\r\n\t * Frees memory that is used to store the BitmapImage2D object.\r\n\t *\r\n\t * <p>When the <code>dispose()</code> method is called on an image, the width\r\n\t * and height of the image are set to 0. All subsequent calls to methods or\r\n\t * properties of this BitmapImage2D instance fail, and an exception is thrown.\r\n\t * </p>\r\n\t *\r\n\t * <p><code>BitmapImage2D.dispose()</code> releases the memory occupied by the\r\n\t * actual bitmap data, immediately(a bitmap can consume up to 64 MB of\r\n\t * memory). After using <code>BitmapImage2D.dispose()</code>, the BitmapImage2D\r\n\t * object is no longer usable and an exception may be thrown if\r\n\t * you call functions on the BitmapImage2D object. However,\r\n\t * <code>BitmapImage2D.dispose()</code> does not garbage collect the BitmapImage2D\r\n\t * object(approximately 128 bytes); the memory occupied by the actual\r\n\t * BitmapImage2D object is released at the time the BitmapImage2D object is\r\n\t * collected by the garbage collector.</p>\r\n\t *\r\n\t */\r\n\tpublic dispose()\r\n\t{\r\n\t\tsuper.dispose();\r\n\r\n\t\tthis._context = null;\r\n\t\tthis._imageCanvas = null;\r\n\t\tthis._imageData = null;\r\n\t\tthis._rect = null;\r\n\t\tthis._transparent = null;\r\n\t\tthis._locked = null;\r\n\t}\r\n\r\n\t/**\r\n\t * Draws the <code>source</code> display object onto the bitmap image, using\r\n\t * the NME software renderer. You can specify <code>matrix</code>,\r\n\t * <code>colorTransform</code>, <code>blendMode</code>, and a destination\r\n\t * <code>clipRect</code> parameter to control how the rendering performs.\r\n\t * Optionally, you can specify whether the bitmap should be smoothed when\r\n\t * scaled(this works only if the source object is a BitmapImage2D object).\r\n\t *\r\n\t * <p>The source display object does not use any of its applied\r\n\t * transformations for this call. It is treated as it exists in the library\r\n\t * or file, with no matrix transform, no color transform, and no blend mode.\r\n\t * To draw a display object(such as a movie clip) by using its own transform\r\n\t * properties, you can copy its <code>transform</code> property object to the\r\n\t * <code>transform</code> property of the Bitmap object that uses the\r\n\t * BitmapImage2D object.</p>\r\n\t *\r\n\t * @param source         The display object or BitmapImage2D object to draw to\r\n\t *                       the BitmapImage2D object.(The DisplayObject and\r\n\t *                       BitmapImage2D classes implement the IBitmapDrawable\r\n\t *                       interface.)\r\n\t * @param matrix         A Matrix object used to scale, rotate, or translate\r\n\t *                       the coordinates of the bitmap. If you do not want to\r\n\t *                       apply a matrix transformation to the image, set this\r\n\t *                       parameter to an identity matrix, created with the\r\n\t *                       default <code>new Matrix()</code> constructor, or\r\n\t *                       pass a <code>null</code> value.\r\n\t * @param colorTransform A ColorTransform object that you use to adjust the\r\n\t *                       color values of the bitmap. If no object is\r\n\t *                       supplied, the bitmap image's colors are not\r\n\t *                       transformed. If you must pass this parameter but you\r\n\t *                       do not want to transform the image, set this\r\n\t *                       parameter to a ColorTransform object created with\r\n\t *                       the default <code>new ColorTransform()</code>\r\n\t *                       constructor.\r\n\t * @param blendMode      A string value, from the flash.display.BlendMode\r\n\t *                       class, specifying the blend mode to be applied to\r\n\t *                       the resulting bitmap.\r\n\t * @param clipRect       A Rectangle object that defines the area of the\r\n\t *                       source object to draw. If you do not supply this\r\n\t *                       value, no clipping occurs and the entire source\r\n\t *                       object is drawn.\r\n\t * @param smoothing      A Boolean value that determines whether a BitmapImage2D\r\n\t *                       object is smoothed when scaled or rotated, due to a\r\n\t *                       scaling or rotation in the <code>matrix</code>\r\n\t *                       parameter. The <code>smoothing</code> parameter only\r\n\t *                       applies if the <code>source</code> parameter is a\r\n\t *                       BitmapImage2D object. With <code>smoothing</code> set\r\n\t *                       to <code>false</code>, the rotated or scaled\r\n\t *                       BitmapImage2D image can appear pixelated or jagged. For\r\n\t *                       example, the following two images use the same\r\n\t *                       BitmapImage2D object for the <code>source</code>\r\n\t *                       parameter, but the <code>smoothing</code> parameter\r\n\t *                       is set to <code>true</code> on the left and\r\n\t *                       <code>false</code> on the right:\r\n\t *\r\n\t *                       <p>Drawing a bitmap with <code>smoothing</code> set\r\n\t *                       to <code>true</code> takes longer than doing so with\r\n\t *                       <code>smoothing</code> set to\r\n\t *                       <code>false</code>.</p>\r\n\t * @throws ArgumentError The <code>source</code> parameter is not a\r\n\t *                       BitmapImage2D or DisplayObject object.\r\n\t * @throws ArgumentError The source is null or not a valid IBitmapDrawable\r\n\t *                       object.\r\n\t * @throws SecurityError The <code>source</code> object and(in the case of a\r\n\t *                       Sprite or MovieClip object) all of its child objects\r\n\t *                       do not come from the same domain as the caller, or\r\n\t *                       are not in a content that is accessible to the\r\n\t *                       caller by having called the\r\n\t *                       <code>Security.allowDomain()</code> method. This\r\n\t *                       restriction does not apply to AIR content in the\r\n\t *                       application security sandbox.\r\n\t */\r\n\tpublic draw(source:BitmapImage2D, matrix?:Matrix, colorTransform?:ColorTransform, blendMode?:BlendMode, clipRect?:Rectangle, smoothing?:boolean);\r\n\tpublic draw(source:HTMLElement, matrix?:Matrix, colorTransform?:ColorTransform, blendMode?:BlendMode, clipRect?:Rectangle, smoothing?:boolean);\r\n\tpublic draw(source:any, matrix?:Matrix, colorTransform?:ColorTransform, blendMode?:BlendMode, clipRect?:Rectangle, smoothing?:boolean)\r\n\t{\r\n\t\tif (source instanceof BitmapImage2D && source.getCanvas()){\r\n\t\t\tsource = source.getCanvas();\r\n\t\t}\r\n\r\n\t\tif (this._locked) {\r\n\r\n\t\t\t// If canvas is locked:\r\n\t\t\t//\r\n\t\t\t//      1) copy image data back to canvas\r\n\t\t\t//      2) draw object\r\n\t\t\t//      3) read _imageData back out\r\n\r\n\t\t\tthis._context.putImageData(this._imageData, 0, 0); // at coords 0,0\r\n\t\t\tBitmapImageUtils._draw(this._context, source, matrix, colorTransform, blendMode, clipRect, smoothing);\r\n\t\t\tthis._imageData = this._context.getImageData(0, 0, this._rect.width, this._rect.height);\r\n\t\t} else {\r\n\t\t\tBitmapImageUtils._draw(this._context, source, matrix, colorTransform, blendMode, clipRect, smoothing);\r\n\t\t}\r\n\r\n\t\tthis.invalidateContent();\r\n\t}\r\n\r\n\t/**\r\n\t * Fills a rectangular area of pixels with a specified ARGB color.\r\n\t *\r\n\t * @param rect  The rectangular area to fill.\r\n\t * @param color The ARGB color value that fills the area. ARGB colors are\r\n\t *              often specified in hexadecimal format; for example,\r\n\t *              0xFF336699.\r\n\t * @throws TypeError The rect is null.\r\n\t */\r\n\tpublic fillRect(rect:Rectangle, color:number)\r\n\t{\r\n\t\tif (this._locked) {\r\n\r\n\t\t\t// If canvas is locked:\r\n\t\t\t//\r\n\t\t\t//      1) copy image data back to canvas\r\n\t\t\t//      2) apply fill\r\n\t\t\t//      3) read _imageData back out\r\n\r\n\t\t\tif (this._imageData)\r\n\t\t\t\tthis._context.putImageData(this._imageData, 0, 0); // at coords 0,0\r\n\r\n\t\t\tBitmapImageUtils._fillRect(this._context, rect, color, this._transparent);\r\n\r\n\t\t\tif (this._imageData)\r\n\t\t\t\tthis._imageData = this._context.getImageData(0, 0, this._rect.width, this._rect.height);\r\n\t\t} else {\r\n\t\t\tBitmapImageUtils._fillRect(this._context, rect, color, this._transparent);\r\n\t\t}\r\n\r\n\t\tthis.invalidateContent();\r\n\t}\r\n\r\n\t/**\r\n\t * Returns an integer that represents an RGB pixel value from a BitmapImage2D\r\n\t * object at a specific point(<i>x</i>, <i>y</i>). The\r\n\t * <code>getPixel()</code> method returns an unmultiplied pixel value. No\r\n\t * alpha information is returned.\r\n\t *\r\n\t * <p>All pixels in a BitmapImage2D object are stored as premultiplied color\r\n\t * values. A premultiplied image pixel has the red, green, and blue color\r\n\t * channel values already multiplied by the alpha data. For example, if the\r\n\t * alpha value is 0, the values for the RGB channels are also 0, independent\r\n\t * of their unmultiplied values. This loss of data can cause some problems\r\n\t * when you perform operations. All BitmapImage2D methods take and return\r\n\t * unmultiplied values. The internal pixel representation is converted from\r\n\t * premultiplied to unmultiplied before it is returned as a value. During a\r\n\t * set operation, the pixel value is premultiplied before the raw image pixel\r\n\t * is set.</p>\r\n\t *\r\n\t * @param x The <i>x</i> position of the pixel.\r\n\t * @param y The <i>y</i> position of the pixel.\r\n\t * @return A number that represents an RGB pixel value. If the(<i>x</i>,\r\n\t *         <i>y</i>) coordinates are outside the bounds of the image, the\r\n\t *         method returns 0.\r\n\t */\r\n\tpublic getPixel(x, y):number\r\n\t{\r\n\t\tvar r:number;\r\n\t\tvar g:number;\r\n\t\tvar b:number;\r\n\t\tvar a:number;\r\n\r\n\t\tif (!this._locked) {\r\n\t\t\tvar pixelData:ImageData = this._context.getImageData(x, y, 1, 1);\r\n\r\n\t\t\tr = pixelData.data[0];\r\n\t\t\tg = pixelData.data[1];\r\n\t\t\tb = pixelData.data[2];\r\n\t\t\ta = pixelData.data[3];\r\n\r\n\t\t} else {\r\n\t\t\tvar index:number = (x + y*this._imageData.width)*4;\r\n\r\n\t\t\tr = this._imageData.data[index + 0];\r\n\t\t\tg = this._imageData.data[index + 1];\r\n\t\t\tb = this._imageData.data[index + 2];\r\n\t\t\ta = this._imageData.data[index + 3];\r\n\t\t}\r\n\r\n\t\t//returns black if fully transparent\r\n\t\tif (!a)\r\n\t\t\treturn 0x0;\r\n\r\n\t\treturn (r << 16) | (g << 8) | b;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns an ARGB color value that contains alpha channel data and RGB data.\r\n\t * This method is similar to the <code>getPixel()</code> method, which\r\n\t * returns an RGB color without alpha channel data.\r\n\t *\r\n\t * <p>All pixels in a BitmapImage2D object are stored as premultiplied color\r\n\t * values. A premultiplied image pixel has the red, green, and blue color\r\n\t * channel values already multiplied by the alpha data. For example, if the\r\n\t * alpha value is 0, the values for the RGB channels are also 0, independent\r\n\t * of their unmultiplied values. This loss of data can cause some problems\r\n\t * when you perform operations. All BitmapImage2D methods take and return\r\n\t * unmultiplied values. The internal pixel representation is converted from\r\n\t * premultiplied to unmultiplied before it is returned as a value. During a\r\n\t * set operation, the pixel value is premultiplied before the raw image pixel\r\n\t * is set.</p>\r\n\t *\r\n\t * @param x The <i>x</i> position of the pixel.\r\n\t * @param y The <i>y</i> position of the pixel.\r\n\t * @return A number representing an ARGB pixel value. If the(<i>x</i>,\r\n\t *         <i>y</i>) coordinates are outside the bounds of the image, 0 is\r\n\t *         returned.\r\n\t */\r\n\tpublic getPixel32(x, y):number\r\n\t{\r\n\t\tvar r:number;\r\n\t\tvar g:number;\r\n\t\tvar b:number;\r\n\t\tvar a:number;\r\n\r\n\t\tif (!this._locked) {\r\n\t\t\tvar pixelData:ImageData = this._context.getImageData(x, y, 1, 1);\r\n\r\n\t\t\tr = pixelData.data[0];\r\n\t\t\tg = pixelData.data[1];\r\n\t\t\tb = pixelData.data[2];\r\n\t\t\ta = pixelData.data[3];\r\n\r\n\t\t} else {\r\n\t\t\tvar index:number = (x + y*this._imageData.width)*4;\r\n\r\n\t\t\tr = this._imageData.data[index + 0];\r\n\t\t\tg = this._imageData.data[index + 1];\r\n\t\t\tb = this._imageData.data[index + 2];\r\n\t\t\ta = this._imageData.data[index + 3];\r\n\t\t}\r\n\r\n\t\treturn (a << 24) | (r << 16) | (g << 8) | b;\r\n\t}\r\n\r\n\t/**\r\n\t * Locks an image so that any objects that reference the BitmapImage2D object,\r\n\t * such as Bitmap objects, are not updated when this BitmapImage2D object\r\n\t * changes. To improve performance, use this method along with the\r\n\t * <code>unlock()</code> method before and after numerous calls to the\r\n\t * <code>setPixel()</code> or <code>setPixel32()</code> method.\r\n\t *\r\n\t */\r\n\tpublic lock()\r\n\t{\r\n\t\tif (this._locked)\r\n\t\t\treturn;\r\n\r\n\t\tthis._locked = true;\r\n\t\tthis._imageData = this._context.getImageData(0, 0, this._rect.width, this._rect.height);\r\n\t}\r\n\r\n\t/**\r\n\t * Converts an Array into a rectangular region of pixel data. For each pixel,\r\n\t * an Array element is read and written into the BitmapImage2D pixel. The data\r\n\t * in the Array is expected to be 32-bit ARGB pixel values.\r\n\t *\r\n\t * @param rect        Specifies the rectangular region of the BitmapImage2D\r\n\t *                    object.\r\n\t * @param inputArray  An Array that consists of 32-bit unmultiplied pixel\r\n\t *                    values to be used in the rectangular region.\r\n\t * @throws RangeError The vector array is not large enough to read all the\r\n\t *                    pixel data.\r\n\t */\r\n\tpublic setArray(rect:Rectangle, inputArray:Array<number>)\r\n\t{\r\n\t\tif (!this._locked)\r\n\t\t\tthis._imageData = this._context.getImageData(0, 0, this._rect.width, this._rect.height);\r\n\r\n\t\tvar i:number /*uint*/, j:number /*uint*/, index:number /*uint*/, argb:number[] /*uint*/;\r\n\t\tfor (i = 0; i < rect.width; ++i) {\r\n\t\t\tfor (j = 0; j < rect.height; ++j) {\r\n\t\t\t\targb = ColorUtils.float32ColorToARGB(inputArray[i + j*rect.width]);\r\n\t\t\t\tindex = (i + rect.x + (j + rect.y)*this._imageData.width)*4;\r\n\r\n\t\t\t\tthis._imageData.data[index + 0] = argb[1];\r\n\t\t\t\tthis._imageData.data[index + 1] = argb[2];\r\n\t\t\t\tthis._imageData.data[index + 2] = argb[3];\r\n\t\t\t\tthis._imageData.data[index + 3] = argb[0];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (!this._locked) {\r\n\t\t\tthis._context.putImageData(this._imageData, 0, 0);\r\n\t\t\tthis._imageData = null;\r\n\t\t}\r\n\r\n\t\tthis.invalidateContent();\r\n\t}\r\n\r\n\t/**\r\n\t * Sets a single pixel of a BitmapImage2D object. The current alpha channel\r\n\t * value of the image pixel is preserved during this operation. The value of\r\n\t * the RGB color parameter is treated as an unmultiplied color value.\r\n\t *\r\n\t * <p><b>Note:</b> To increase performance, when you use the\r\n\t * <code>setPixel()</code> or <code>setPixel32()</code> method repeatedly,\r\n\t * call the <code>lock()</code> method before you call the\r\n\t * <code>setPixel()</code> or <code>setPixel32()</code> method, and then call\r\n\t * the <code>unlock()</code> method when you have made all pixel changes.\r\n\t * This process prevents objects that reference this BitmapImage2D instance from\r\n\t * updating until you finish making the pixel changes.</p>\r\n\t *\r\n\t * @param x     The <i>x</i> position of the pixel whose value changes.\r\n\t * @param y     The <i>y</i> position of the pixel whose value changes.\r\n\t * @param color The resulting RGB color for the pixel.\r\n\t */\r\n\tpublic setPixel(x:number, y:number, color:number)\r\n\t{\r\n\t\tvar argb:number[] = ColorUtils.float32ColorToARGB(color);\r\n\r\n\t\tif (!this._locked)\r\n\t\t\tthis._imageData = this._context.getImageData(0, 0, this._rect.width, this._rect.height);\r\n\r\n\t\tvar index:number = (x + y*this._imageData.width)*4;\r\n\r\n\t\tthis._imageData.data[index + 0] = argb[1];\r\n\t\tthis._imageData.data[index + 1] = argb[2];\r\n\t\tthis._imageData.data[index + 2] = argb[3];\r\n\t\tthis._imageData.data[index + 3] = 255;\r\n\r\n\t\tif (!this._locked) {\r\n\t\t\tthis._context.putImageData(this._imageData, 0, 0);\r\n\t\t\tthis._imageData = null;\r\n\t\t}\r\n\r\n\t\tthis.invalidateContent();\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the color and alpha transparency values of a single pixel of a\r\n\t * BitmapImage2D object. This method is similar to the <code>setPixel()</code>\r\n\t * method; the main difference is that the <code>setPixel32()</code> method\r\n\t * takes an ARGB color value that contains alpha channel information.\r\n\t *\r\n\t * <p>All pixels in a BitmapImage2D object are stored as premultiplied color\r\n\t * values. A premultiplied image pixel has the red, green, and blue color\r\n\t * channel values already multiplied by the alpha data. For example, if the\r\n\t * alpha value is 0, the values for the RGB channels are also 0, independent\r\n\t * of their unmultiplied values. This loss of data can cause some problems\r\n\t * when you perform operations. All BitmapImage2D methods take and return\r\n\t * unmultiplied values. The internal pixel representation is converted from\r\n\t * premultiplied to unmultiplied before it is returned as a value. During a\r\n\t * set operation, the pixel value is premultiplied before the raw image pixel\r\n\t * is set.</p>\r\n\t *\r\n\t * <p><b>Note:</b> To increase performance, when you use the\r\n\t * <code>setPixel()</code> or <code>setPixel32()</code> method repeatedly,\r\n\t * call the <code>lock()</code> method before you call the\r\n\t * <code>setPixel()</code> or <code>setPixel32()</code> method, and then call\r\n\t * the <code>unlock()</code> method when you have made all pixel changes.\r\n\t * This process prevents objects that reference this BitmapImage2D instance from\r\n\t * updating until you finish making the pixel changes.</p>\r\n\t *\r\n\t * @param x     The <i>x</i> position of the pixel whose value changes.\r\n\t * @param y     The <i>y</i> position of the pixel whose value changes.\r\n\t * @param color The resulting ARGB color for the pixel. If the bitmap is\r\n\t *              opaque(not transparent), the alpha transparency portion of\r\n\t *              this color value is ignored.\r\n\t */\r\n\tpublic setPixel32(x, y, color:number)\r\n\t{\r\n\t\tvar argb:number[] = ColorUtils.float32ColorToARGB(color);\r\n\r\n\t\tif (!this._locked)\r\n\t\t\tthis._imageData = this._context.getImageData(0, 0, this._rect.width, this._rect.height);\r\n\r\n\t\tvar index:number = (x + y*this._imageData.width)*4;\r\n\r\n\t\tthis._imageData.data[index + 0] = argb[1];\r\n\t\tthis._imageData.data[index + 1] = argb[2];\r\n\t\tthis._imageData.data[index + 2] = argb[3];\r\n\t\tthis._imageData.data[index + 3] = argb[0];\r\n\r\n\t\tif (!this._locked) {\r\n\t\t\tthis._context.putImageData(this._imageData, 0, 0);\r\n\t\t\tthis._imageData = null;\r\n\t\t}\r\n\r\n\t\tthis.invalidateContent();\r\n\t}\r\n\r\n\t/**\r\n\t * Converts a byte array into a rectangular region of pixel data. For each\r\n\t * pixel, the <code>ByteArray.readUnsignedInt()</code> method is called and\r\n\t * the return value is written into the pixel. If the byte array ends before\r\n\t * the full rectangle is written, the function returns. The data in the byte\r\n\t * array is expected to be 32-bit ARGB pixel values. No seeking is performed\r\n\t * on the byte array before or after the pixels are read.\r\n\t *\r\n\t * @param rect           Specifies the rectangular region of the BitmapImage2D\r\n\t *                       object.\r\n\t * @param inputByteArray A ByteArray object that consists of 32-bit\r\n\t *                       unmultiplied pixel values to be used in the\r\n\t *                       rectangular region.\r\n\t * @throws EOFError  The <code>inputByteArray</code> object does not include\r\n\t *                   enough data to fill the area of the <code>rect</code>\r\n\t *                   rectangle. The method fills as many pixels as possible\r\n\t *                   before throwing the exception.\r\n\t * @throws TypeError The rect or inputByteArray are null.\r\n\t */\r\n\tpublic setPixels(rect:Rectangle, inputByteArray:ByteArray)\r\n\t{\r\n\t\tif (!this._locked)\r\n\t\t\tthis._imageData = this._context.getImageData(0, 0, this._rect.width, this._rect.height);\r\n\r\n\t\tinputByteArray.position = 0;\r\n\t\tvar i:number /*uint*/, j:number /*uint*/, index:number /*uint*/;\r\n\t\tfor (i = 0; i < rect.width; ++i) {\r\n\t\t\tfor (j = 0; j < rect.height; ++j) {\r\n\t\t\t\tindex = (i + rect.x + (j + rect.y)*this._imageData.width)*4;\r\n\r\n\t\t\t\tthis._imageData.data[index + 0] = inputByteArray.readUnsignedInt();\r\n\t\t\t\tthis._imageData.data[index + 1] = inputByteArray.readUnsignedInt();\r\n\t\t\t\tthis._imageData.data[index + 2] = inputByteArray.readUnsignedInt();\r\n\t\t\t\tthis._imageData.data[index + 3] = inputByteArray.readUnsignedInt();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (!this._locked) {\r\n\t\t\tthis._context.putImageData(this._imageData, 0, 0);\r\n\t\t\tthis._imageData = null;\r\n\t\t}\r\n\r\n\t\tthis.invalidateContent();\r\n\t}\r\n\r\n\t/**\r\n\t * Unlocks an image so that any objects that reference the BitmapImage2D object,\r\n\t * such as Bitmap objects, are updated when this BitmapImage2D object changes.\r\n\t * To improve performance, use this method along with the <code>lock()</code>\r\n\t * method before and after numerous calls to the <code>setPixel()</code> or\r\n\t * <code>setPixel32()</code> method.\r\n\t *\r\n\t * @param changeRect The area of the BitmapImage2D object that has changed. If\r\n\t *                   you do not specify a value for this parameter, the\r\n\t *                   entire area of the BitmapImage2D object is considered\r\n\t *                   changed.\r\n\t */\r\n\tpublic unlock()\r\n\t{\r\n\t\tif (!this._locked)\r\n\t\t\treturn;\r\n\r\n\t\tthis._locked = false;\r\n\r\n\t\tthis._context.putImageData(this._imageData, 0, 0); // at coords 0,0\r\n\t\tthis._imageData = null;\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t * @returns {ImageData}\r\n\t */\r\n\tpublic getImageData():ImageData\r\n\t{\r\n\t\tif (!this._locked)\r\n\t\t\treturn this._context.getImageData(0, 0, this._rect.width, this._rect.height);\r\n\r\n\t\treturn this._imageData;\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t * @returns {HTMLCanvasElement}\r\n\t */\r\n\tpublic getCanvas():HTMLCanvasElement\r\n\t{\r\n\t\treturn <HTMLCanvasElement> this._imageCanvas;\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t * @param width\r\n\t * @param height\r\n\t * @private\r\n\t */\r\n\tpublic _setSize(width:number, height:number)\r\n\t{\r\n\t\tif (this._locked)\r\n\t\t\tthis._context.putImageData(this._imageData, 0, 0);\r\n\r\n\t\tif(this._imageCanvas) {\r\n\t\t\tthis._imageCanvas.width = width;\r\n\t\t\tthis._imageCanvas.height = height;\r\n\t\t}\r\n\t\t\r\n\t\tsuper._setSize(width, height);\r\n\r\n\t\tif (this._locked)\r\n\t\t\tthis._imageData = this._context.getImageData(0, 0, this._rect.width, this._rect.height);\r\n\t}\r\n}\r\n\r\nexport = BitmapImage2D;",
    "class BitmapImageChannel\r\n{\r\n\tpublic static ALPHA:number /*uint*/ = 8;\r\n\tpublic static BLUE:number /*uint*/ = 4;\r\n\tpublic static GREEN:number /*uint*/ = 2;\r\n\tpublic static RED:number /*uint*/ = 1;\r\n}\r\n\r\nexport = BitmapImageChannel;",
    "import BitmapImage2D\t\t\t= require(\"awayjs-core/lib/data/BitmapImage2D\");\r\nimport ImageCube\t\t\t\t= require(\"awayjs-core/lib/data/ImageCube\");\r\nimport BlendMode\t\t\t\t= require(\"awayjs-core/lib/data/BlendMode\");\r\nimport ColorTransform\t\t\t= require(\"awayjs-core/lib/geom/ColorTransform\");\r\nimport Matrix\t\t\t\t\t= require(\"awayjs-core/lib/geom/Matrix\");\r\nimport Rectangle\t\t\t\t= require(\"awayjs-core/lib/geom/Rectangle\");\r\nimport Point\t\t\t\t\t= require(\"awayjs-core/lib/geom/Point\");\r\nimport ByteArray\t\t\t\t= require(\"awayjs-core/lib/utils/ByteArray\");\r\nimport ColorUtils\t\t\t\t= require(\"awayjs-core/lib/utils/ColorUtils\");\r\nimport ImageUtils\t\t\t\t= require(\"awayjs-core/lib/utils/ImageUtils\");\r\nimport BitmapImageUtils\t\t\t= require(\"awayjs-core/lib/utils/BitmapImageUtils\");\r\n\r\n/**\r\n * The BitmapImage2D class lets you work with the data(pixels) of a Bitmap\r\n * object. You can use the methods of the BitmapImage2D class to create\r\n * arbitrarily sized transparent or opaque bitmap images and manipulate them\r\n * in various ways at runtime. You can also access the BitmapImage2D for a bitmap\r\n * image that you load with the <code>flash.Assets</code> or\r\n * <code>flash.display.Loader</code> classes.\r\n *\r\n * <p>This class lets you separate bitmap rendering operations from the\r\n * internal display updating routines of flash. By manipulating a\r\n * BitmapImage2D object directly, you can create complex images without incurring\r\n * the per-frame overhead of constantly redrawing the content from vector\r\n * data.</p>\r\n *\r\n * <p>The methods of the BitmapImage2D class support effects that are not\r\n * available through the filters available to non-bitmap display objects.</p>\r\n *\r\n * <p>A BitmapImage2D object contains an array of pixel data. This data can\r\n * represent either a fully opaque bitmap or a transparent bitmap that\r\n * contains alpha channel data. Either type of BitmapImage2D object is stored as\r\n * a buffer of 32-bit integers. Each 32-bit integer determines the properties\r\n * of a single pixel in the bitmap.</p>\r\n *\r\n * <p>Each 32-bit integer is a combination of four 8-bit channel values(from\r\n * 0 to 255) that describe the alpha transparency and the red, green, and blue\r\n * (ARGB) values of the pixel.(For ARGB values, the most significant byte\r\n * represents the alpha channel value, followed by red, green, and blue.)</p>\r\n *\r\n * <p>The four channels(alpha, red, green, and blue) are represented as\r\n * numbers when you use them with the <code>BitmapImage2D.copyChannel()</code>\r\n * method or the <code>DisplacementMapFilter.componentX</code> and\r\n * <code>DisplacementMapFilter.componentY</code> properties, and these numbers\r\n * are represented by the following constants in the BitmapImage2DChannel\r\n * class:</p>\r\n *\r\n * <ul>\r\n *   <li><code>BitmapImage2DChannel.ALPHA</code></li>\r\n *   <li><code>BitmapImage2DChannel.RED</code></li>\r\n *   <li><code>BitmapImage2DChannel.GREEN</code></li>\r\n *   <li><code>BitmapImage2DChannel.BLUE</code></li>\r\n * </ul>\r\n *\r\n * <p>You can attach BitmapImage2D objects to a Bitmap object by using the\r\n * <code>bitmapData</code> property of the Bitmap object.</p>\r\n *\r\n * <p>You can use a BitmapImage2D object to fill a Graphics object by using the\r\n * <code>Graphics.beginBitmapFill()</code> method.</p>\r\n *\r\n * <p>You can also use a BitmapImage2D object to perform batch tile rendering\r\n * using the <code>flash.display.Tilesheet</code> class.</p>\r\n *\r\n * <p>In Flash Player 10, the maximum size for a BitmapImage2D object\r\n * is 8,191 pixels in width or height, and the total number of pixels cannot\r\n * exceed 16,777,215 pixels.(So, if a BitmapImage2D object is 8,191 pixels wide,\r\n * it can only be 2,048 pixels high.) In Flash Player 9 and earlier, the limitation\r\n * is 2,880 pixels in height and 2,880 in width.</p>\r\n */\r\nclass BitmapImageCube extends ImageCube\r\n{\r\n\tpublic static assetType:string = \"[image BitmapImageCube]\";\r\n\r\n\tpublic static posX:number = 0;\r\n\tpublic static negX:number = 1;\r\n\tpublic static posY:number = 2;\r\n\tpublic static negY:number = 3;\r\n\tpublic static posZ:number = 4;\r\n\tpublic static negZ:number = 5;\r\n\r\n\tprivate _imageCanvas:Array<HTMLCanvasElement> = new Array<HTMLCanvasElement>(6);\r\n\tprivate _context:Array<CanvasRenderingContext2D> = new Array<CanvasRenderingContext2D>(6);\r\n\tprivate _imageData:Array<ImageData> = new Array<ImageData>(6);\r\n\tprivate _transparent:boolean;\r\n\tprivate _locked:boolean = false;\r\n\r\n\t/**\r\n\t *\r\n\t * @returns {string}\r\n\t */\r\n\tpublic get assetType():string\r\n\t{\r\n\t\treturn BitmapImageCube.assetType;\r\n\t}\r\n\r\n\t/**\r\n\t * Defines whether the bitmap image supports per-pixel transparency. You can\r\n\t * set this value only when you construct a BitmapImage2D object by passing in\r\n\t * <code>true</code> for the <code>transparent</code> parameter of the\r\n\t * constructor. Then, after you create a BitmapImage2D object, you can check\r\n\t * whether it supports per-pixel transparency by determining if the value of\r\n\t * the <code>transparent</code> property is <code>true</code>.\r\n\t */\r\n\tpublic get transparent():boolean\r\n\t{\r\n\t\treturn this._transparent;\r\n\t}\r\n\r\n\tpublic set transparent(value:boolean)\r\n\t{\r\n\t\tthis._transparent = value;\r\n\t}\r\n\r\n\t/**\r\n\t * Creates a BitmapImage2D object with a specified width and height. If you\r\n\t * specify a value for the <code>fillColor</code> parameter, every pixel in\r\n\t * the bitmap is set to that color.\r\n\t *\r\n\t * <p>By default, the bitmap is created as transparent, unless you pass\r\n\t * the value <code>false</code> for the transparent parameter. After you\r\n\t * create an opaque bitmap, you cannot change it to a transparent bitmap.\r\n\t * Every pixel in an opaque bitmap uses only 24 bits of color channel\r\n\t * information. If you define the bitmap as transparent, every pixel uses 32\r\n\t * bits of color channel information, including an alpha transparency\r\n\t * channel.</p>\r\n\t *\r\n\t * @param width       The width of the bitmap image in pixels.\r\n\t * @param height      The height of the bitmap image in pixels.\r\n\t * @param transparent Specifies whether the bitmap image supports per-pixel\r\n\t *                    transparency. The default value is <code>true</code>\r\n\t *                    (transparent). To create a fully transparent bitmap,\r\n\t *                    set the value of the <code>transparent</code>\r\n\t *                    parameter to <code>true</code> and the value of the\r\n\t *                    <code>fillColor</code> parameter to 0x00000000(or to\r\n\t *                    0). Setting the <code>transparent</code> property to\r\n\t *                    <code>false</code> can result in minor improvements\r\n\t *                    in rendering performance.\r\n\t * @param fillColor   A 32-bit ARGB color value that you use to fill the\r\n\t *                    bitmap image area. The default value is\r\n\t *                    0xFFFFFFFF(solid white).\r\n\t */\r\n\tconstructor(size:number, transparent:boolean = true, fillColor:number = null)\r\n\t{\r\n\t\tsuper(size);\r\n\r\n\t\tthis._transparent = transparent;\r\n\r\n\t\tfor (var i:number = 0; i < 6; i++) {\r\n\t\t\tthis._imageCanvas[i] = <HTMLCanvasElement> document.createElement(\"canvas\");\r\n\t\t\tthis._imageCanvas[i].width = size;\r\n\t\t\tthis._imageCanvas[i].height = size;\r\n\t\t\tthis._context[i] = this._imageCanvas[i].getContext(\"2d\");\r\n\r\n\t\t\tif (fillColor != null)\r\n\t\t\t\tthis.fillRect(i, new Rectangle(0, 0, size, size), fillColor);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Returns a new BitmapImage2D object that is a clone of the original instance\r\n\t * with an exact copy of the contained bitmap.\r\n\t *\r\n\t * @return A new BitmapImage2D object that is identical to the original.\r\n\t */\r\n\tpublic clone():BitmapImageCube\r\n\t{\r\n\t\tvar t:BitmapImageCube = new BitmapImageCube(this._size, this.transparent);\r\n\r\n\t\tfor (var i:number = 0; i < 6; i++) {\r\n\t\t\tt.draw(i, this.getCanvas(i));\r\n\t\t}\r\n\t\treturn t;\r\n\t}\r\n\r\n\t/**\r\n\t * Adjusts the color values in a specified area of a bitmap image by using a\r\n\t * <code>ColorTransform</code> object. If the rectangle matches the\r\n\t * boundaries of the bitmap image, this method transforms the color values of\r\n\t * the entire image.\r\n\t *\r\n\t * @param rect           A Rectangle object that defines the area of the\r\n\t *                       image in which the ColorTransform object is applied.\r\n\t * @param colorTransform A ColorTransform object that describes the color\r\n\t *                       transformation values to apply.\r\n\t */\r\n\tpublic colorTransform(side:number, rect:Rectangle, colorTransform:ColorTransform)\r\n\t{\r\n\t\tif (!this._locked)\r\n\t\t\tthis._imageData[side] = this._context[side].getImageData(0, 0, this._size, this._size);\r\n\r\n\t\tvar data:Array<number> = this._imageData[side].data;\r\n\r\n\t\tvar i:number /*uint*/, j:number /*uint*/, index:number /*uint*/;\r\n\t\tfor (i = 0; i < rect.width; ++i) {\r\n\t\t\tfor (j = 0; j < rect.height; ++j) {\r\n\t\t\t\tindex = (i + rect.x + (j + rect.y)*this._size)*4;\r\n\r\n\t\t\t\tdata[index] = data[index]*colorTransform.redMultiplier + colorTransform.redOffset;\r\n\t\t\t\tdata[index + 1] = data[index + 1]*colorTransform.greenMultiplier + colorTransform.greenOffset;\r\n\t\t\t\tdata[index + 2] = data[index + 2]*colorTransform.blueMultiplier + colorTransform.blueOffset;\r\n\t\t\t\tdata[index + 3] = data[index + 3]*colorTransform.alphaMultiplier + colorTransform.alphaOffset;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (!this._locked) {\r\n\t\t\tthis._context[side].putImageData(this._imageData[side], 0, 0);\r\n\t\t\tthis._imageData[side] = null;\r\n\t\t}\r\n\r\n\t\tthis.invalidateContent();\r\n\t}\r\n\r\n\t/**\r\n\t * Transfers data from one channel of another BitmapImage2D object or the\r\n\t * current BitmapImage2D object into a channel of the current BitmapImage2D object.\r\n\t * All of the data in the other channels in the destination BitmapImage2D object\r\n\t * are preserved.\r\n\t *\r\n\t * <p>The source channel value and destination channel value can be one of\r\n\t * following values: </p>\r\n\t *\r\n\t * <ul>\r\n\t *   <li><code>BitmapImage2DChannel.RED</code></li>\r\n\t *   <li><code>BitmapImage2DChannel.GREEN</code></li>\r\n\t *   <li><code>BitmapImage2DChannel.BLUE</code></li>\r\n\t *   <li><code>BitmapImage2DChannel.ALPHA</code></li>\r\n\t * </ul>\r\n\t *\r\n\t * @param sourceBitmapImage2D The input bitmap image to use. The source image\r\n\t *                         can be a different BitmapImage2D object or it can\r\n\t *                         refer to the current BitmapImage2D object.\r\n\t * @param sourceRect       The source Rectangle object. To copy only channel\r\n\t *                         data from a smaller area within the bitmap,\r\n\t *                         specify a source rectangle that is smaller than\r\n\t *                         the overall size of the BitmapImage2D object.\r\n\t * @param destPoint        The destination Point object that represents the\r\n\t *                         upper-left corner of the rectangular area where\r\n\t *                         the new channel data is placed. To copy only\r\n\t *                         channel data from one area to a different area in\r\n\t *                         the destination image, specify a point other than\r\n\t *                        (0,0).\r\n\t * @param sourceChannel    The source channel. Use a value from the\r\n\t *                         BitmapImage2DChannel class\r\n\t *                        (<code>BitmapImage2DChannel.RED</code>,\r\n\t *                         <code>BitmapImage2DChannel.BLUE</code>,\r\n\t *                         <code>BitmapImage2DChannel.GREEN</code>,\r\n\t *                         <code>BitmapImage2DChannel.ALPHA</code>).\r\n\t * @param destChannel      The destination channel. Use a value from the\r\n\t *                         BitmapImage2DChannel class\r\n\t *                        (<code>BitmapImage2DChannel.RED</code>,\r\n\t *                         <code>BitmapImage2DChannel.BLUE</code>,\r\n\t *                         <code>BitmapImage2DChannel.GREEN</code>,\r\n\t *                         <code>BitmapImage2DChannel.ALPHA</code>).\r\n\t * @throws TypeError The sourceBitmapImage2D, sourceRect or destPoint are null.\r\n\t */\r\n\tpublic copyChannel(side:number, sourceBitmap:BitmapImage2D, sourceRect:Rectangle, destPoint:Point, sourceChannel:number, destChannel:number)\r\n\t{\r\n\t\tvar imageData:ImageData = sourceBitmap.getImageData();\r\n\r\n\t\tif (!this._locked)\r\n\t\t\tthis._imageData[side] = this._context[side].getImageData(0, 0, this._size, this._size);\r\n\r\n\t\tvar sourceData:Array<number> = sourceBitmap.getImageData().data;\r\n\t\tvar destData:Array<number> = this._imageData[side].data;\r\n\r\n\t\tvar sourceOffset:number = Math.round(Math.log(sourceChannel)/Math.log(2));\r\n\t\tvar destOffset:number = Math.round(Math.log(destChannel)/Math.log(2));\r\n\r\n\t\tvar i:number /*uint*/, j:number /*uint*/, sourceIndex:number /*uint*/, destIndex:number /*uint*/;\r\n\t\tfor (i = 0; i < sourceRect.width; ++i) {\r\n\t\t\tfor (j = 0; j < sourceRect.height; ++j) {\r\n\t\t\t\tsourceIndex = (i + sourceRect.x + (j + sourceRect.y)*sourceBitmap.width)*4;\r\n\t\t\t\tdestIndex = (i + destPoint.x + (j + destPoint.y)*this._size)*4;\r\n\r\n\t\t\t\tdestData[destIndex + destOffset] = sourceData[sourceIndex + sourceOffset];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (!this._locked) {\r\n\t\t\tthis._context[side].putImageData(this._imageData[side], 0, 0);\r\n\t\t\tthis._imageData[side] = null;\r\n\t\t}\r\n\r\n\t\tthis.invalidateContent();\r\n\t}\r\n\r\n\t/**\r\n\t * Provides a fast routine to perform pixel manipulation between images with\r\n\t * no stretching, rotation, or color effects. This method copies a\r\n\t * rectangular area of a source image to a rectangular area of the same size\r\n\t * at the destination point of the destination BitmapImage2D object.\r\n\t *\r\n\t * <p>If you include the <code>alphaBitmap</code> and <code>alphaPoint</code>\r\n\t * parameters, you can use a secondary image as an alpha source for the\r\n\t * source image. If the source image has alpha data, both sets of alpha data\r\n\t * are used to composite pixels from the source image to the destination\r\n\t * image. The <code>alphaPoint</code> parameter is the point in the alpha\r\n\t * image that corresponds to the upper-left corner of the source rectangle.\r\n\t * Any pixels outside the intersection of the source image and alpha image\r\n\t * are not copied to the destination image.</p>\r\n\t *\r\n\t * <p>The <code>mergeAlpha</code> property controls whether or not the alpha\r\n\t * channel is used when a transparent image is copied onto another\r\n\t * transparent image. To copy pixels with the alpha channel data, set the\r\n\t * <code>mergeAlpha</code> property to <code>true</code>. By default, the\r\n\t * <code>mergeAlpha</code> property is <code>false</code>.</p>\r\n\t *\r\n\t * @param sourceBitmapImage2D The input bitmap image from which to copy pixels.\r\n\t *                         The source image can be a different BitmapImage2D\r\n\t *                         instance, or it can refer to the current\r\n\t *                         BitmapImage2D instance.\r\n\t * @param sourceRect       A rectangle that defines the area of the source\r\n\t *                         image to use as input.\r\n\t * @param destPoint        The destination point that represents the\r\n\t *                         upper-left corner of the rectangular area where\r\n\t *                         the new pixels are placed.\r\n\t * @param alphaBitmapImage2D  A secondary, alpha BitmapImage2D object source.\r\n\t * @param alphaPoint       The point in the alpha BitmapImage2D object source\r\n\t *                         that corresponds to the upper-left corner of the\r\n\t *                         <code>sourceRect</code> parameter.\r\n\t * @param mergeAlpha       To use the alpha channel, set the value to\r\n\t *                         <code>true</code>. To copy pixels with no alpha\r\n\t *                         channel, set the value to <code>false</code>.\r\n\t * @throws TypeError The sourceBitmapImage2D, sourceRect, destPoint are null.\r\n\t */\r\n\tpublic copyPixels(side:number, source:BitmapImage2D, sourceRect:Rectangle, destRect:Rectangle);\r\n\tpublic copyPixels(side:number, source:HTMLImageElement, sourceRect:Rectangle, destRect:Rectangle);\r\n\tpublic copyPixels(side:number, source:any, sourceRect:Rectangle, destRect:Rectangle)\r\n\t{\r\n\t\tif (source instanceof BitmapImage2D)\r\n\t\t\tsource = source.getCanvas();\r\n\r\n\t\tif (this._locked) {\r\n\r\n\t\t\t// If canvas is locked:\r\n\t\t\t//\r\n\t\t\t//      1) copy image data back to canvas\r\n\t\t\t//      2) draw object\r\n\t\t\t//      3) read _imageData back out\r\n\r\n\t\t\tthis._context[side].putImageData(this._imageData[side], 0, 0); // at coords 0,0\r\n\t\t\tBitmapImageUtils._copyPixels(this._context[side], source, sourceRect, destRect);\r\n\t\t\tthis._imageData[side] = this._context[side].getImageData(0, 0, this._size, this._size);\r\n\r\n\t\t} else {\r\n\t\t\tBitmapImageUtils._copyPixels(this._context[side], source, sourceRect, destRect);\r\n\t\t}\r\n\r\n\t\tthis.invalidateContent();\r\n\t}\r\n\r\n\t/**\r\n\t * Frees memory that is used to store the BitmapImage2D object.\r\n\t *\r\n\t * <p>When the <code>dispose()</code> method is called on an image, the width\r\n\t * and height of the image are set to 0. All subsequent calls to methods or\r\n\t * properties of this BitmapImage2D instance fail, and an exception is thrown.\r\n\t * </p>\r\n\t *\r\n\t * <p><code>BitmapImage2D.dispose()</code> releases the memory occupied by the\r\n\t * actual bitmap data, immediately(a bitmap can consume up to 64 MB of\r\n\t * memory). After using <code>BitmapImage2D.dispose()</code>, the BitmapImage2D\r\n\t * object is no longer usable and an exception may be thrown if\r\n\t * you call functions on the BitmapImage2D object. However,\r\n\t * <code>BitmapImage2D.dispose()</code> does not garbage collect the BitmapImage2D\r\n\t * object(approximately 128 bytes); the memory occupied by the actual\r\n\t * BitmapImage2D object is released at the time the BitmapImage2D object is\r\n\t * collected by the garbage collector.</p>\r\n\t *\r\n\t */\r\n\tpublic dispose()\r\n\t{\r\n\t\tsuper.dispose();\r\n\r\n\t\tfor (var i:number = 0; i < 6; i++) {\r\n\t\t\tthis._context[i] = null;\r\n\t\t\tthis._imageCanvas[i] = null;\r\n\t\t\tthis._imageData[i] = null;\r\n\t\t}\r\n\r\n\t\tthis._transparent = null;\r\n\t\tthis._locked = null;\r\n\t}\r\n\r\n\t/**\r\n\t * Draws the <code>source</code> display object onto the bitmap image, using\r\n\t * the NME software renderer. You can specify <code>matrix</code>,\r\n\t * <code>colorTransform</code>, <code>blendMode</code>, and a destination\r\n\t * <code>clipRect</code> parameter to control how the rendering performs.\r\n\t * Optionally, you can specify whether the bitmap should be smoothed when\r\n\t * scaled(this works only if the source object is a BitmapImage2D object).\r\n\t *\r\n\t * <p>The source display object does not use any of its applied\r\n\t * transformations for this call. It is treated as it exists in the library\r\n\t * or file, with no matrix transform, no color transform, and no blend mode.\r\n\t * To draw a display object(such as a movie clip) by using its own transform\r\n\t * properties, you can copy its <code>transform</code> property object to the\r\n\t * <code>transform</code> property of the Bitmap object that uses the\r\n\t * BitmapImage2D object.</p>\r\n\t *\r\n\t * @param source         The display object or BitmapImage2D object to draw to\r\n\t *                       the BitmapImage2D object.(The DisplayObject and\r\n\t *                       BitmapImage2D classes implement the IBitmapDrawable\r\n\t *                       interface.)\r\n\t * @param matrix         A Matrix object used to scale, rotate, or translate\r\n\t *                       the coordinates of the bitmap. If you do not want to\r\n\t *                       apply a matrix transformation to the image, set this\r\n\t *                       parameter to an identity matrix, created with the\r\n\t *                       default <code>new Matrix()</code> constructor, or\r\n\t *                       pass a <code>null</code> value.\r\n\t * @param colorTransform A ColorTransform object that you use to adjust the\r\n\t *                       color values of the bitmap. If no object is\r\n\t *                       supplied, the bitmap image's colors are not\r\n\t *                       transformed. If you must pass this parameter but you\r\n\t *                       do not want to transform the image, set this\r\n\t *                       parameter to a ColorTransform object created with\r\n\t *                       the default <code>new ColorTransform()</code>\r\n\t *                       constructor.\r\n\t * @param blendMode      A string value, from the flash.display.BlendMode\r\n\t *                       class, specifying the blend mode to be applied to\r\n\t *                       the resulting bitmap.\r\n\t * @param clipRect       A Rectangle object that defines the area of the\r\n\t *                       source object to draw. If you do not supply this\r\n\t *                       value, no clipping occurs and the entire source\r\n\t *                       object is drawn.\r\n\t * @param smoothing      A Boolean value that determines whether a BitmapImage2D\r\n\t *                       object is smoothed when scaled or rotated, due to a\r\n\t *                       scaling or rotation in the <code>matrix</code>\r\n\t *                       parameter. The <code>smoothing</code> parameter only\r\n\t *                       applies if the <code>source</code> parameter is a\r\n\t *                       BitmapImage2D object. With <code>smoothing</code> set\r\n\t *                       to <code>false</code>, the rotated or scaled\r\n\t *                       BitmapImage2D image can appear pixelated or jagged. For\r\n\t *                       example, the following two images use the same\r\n\t *                       BitmapImage2D object for the <code>source</code>\r\n\t *                       parameter, but the <code>smoothing</code> parameter\r\n\t *                       is set to <code>true</code> on the left and\r\n\t *                       <code>false</code> on the right:\r\n\t *\r\n\t *                       <p>Drawing a bitmap with <code>smoothing</code> set\r\n\t *                       to <code>true</code> takes longer than doing so with\r\n\t *                       <code>smoothing</code> set to\r\n\t *                       <code>false</code>.</p>\r\n\t * @throws ArgumentError The <code>source</code> parameter is not a\r\n\t *                       BitmapImage2D or DisplayObject object.\r\n\t * @throws ArgumentError The source is null or not a valid IBitmapDrawable\r\n\t *                       object.\r\n\t * @throws SecurityError The <code>source</code> object and(in the case of a\r\n\t *                       Sprite or MovieClip object) all of its child objects\r\n\t *                       do not come from the same domain as the caller, or\r\n\t *                       are not in a content that is accessible to the\r\n\t *                       caller by having called the\r\n\t *                       <code>Security.allowDomain()</code> method. This\r\n\t *                       restriction does not apply to AIR content in the\r\n\t *                       application security sandbox.\r\n\t */\r\n\tpublic draw(side:number, source:BitmapImage2D, matrix?:Matrix, colorTransform?:ColorTransform, blendMode?:BlendMode, clipRect?:Rectangle, smoothing?:boolean);\r\n\tpublic draw(side:number, source:HTMLElement, matrix?:Matrix, colorTransform?:ColorTransform, blendMode?:BlendMode, clipRect?:Rectangle, smoothing?:boolean);\r\n\tpublic draw(side:number, source:any, matrix?:Matrix, colorTransform?:ColorTransform, blendMode?:BlendMode, clipRect?:Rectangle, smoothing?:boolean)\r\n\t{\r\n\t\tif (source instanceof BitmapImage2D)\r\n\t\t\tsource = source.getCanvas();\r\n\r\n\t\tif (this._locked) {\r\n\r\n\t\t\t// If canvas is locked:\r\n\t\t\t//\r\n\t\t\t//      1) copy image data back to canvas\r\n\t\t\t//      2) draw object\r\n\t\t\t//      3) read _imageData back out\r\n\r\n\t\t\tthis._context[side].putImageData(this._imageData[side], 0, 0); // at coords 0,0\r\n\t\t\tBitmapImageUtils._draw(this._context[side], source, matrix, colorTransform, blendMode, clipRect, smoothing);\r\n\t\t\tthis._imageData[side] = this._context[side].getImageData(0, 0, this._size, this._size);\r\n\t\t} else {\r\n\t\t\tBitmapImageUtils._draw(this._context[side], source, matrix, colorTransform, blendMode, clipRect, smoothing);\r\n\t\t}\r\n\r\n\t\tthis.invalidateContent();\r\n\t}\r\n\r\n\t/**\r\n\t * Fills a rectangular area of pixels with a specified ARGB color.\r\n\t *\r\n\t * @param rect  The rectangular area to fill.\r\n\t * @param color The ARGB color value that fills the area. ARGB colors are\r\n\t *              often specified in hexadecimal format; for example,\r\n\t *              0xFF336699.\r\n\t * @throws TypeError The rect is null.\r\n\t */\r\n\tpublic fillRect(side:number, rect:Rectangle, color:number)\r\n\t{\r\n\t\tif (this._locked) {\r\n\r\n\t\t\t// If canvas is locked:\r\n\t\t\t//\r\n\t\t\t//      1) copy image data back to canvas\r\n\t\t\t//      2) apply fill\r\n\t\t\t//      3) read _imageData back out\r\n\r\n\t\t\tif (this._imageData[side])\r\n\t\t\t\tthis._context[side].putImageData(this._imageData[side], 0, 0); // at coords 0,0\r\n\r\n\t\t\tBitmapImageUtils._fillRect(this._context[side], rect, color, this._transparent);\r\n\r\n\t\t\tif (this._imageData[side])\r\n\t\t\t\tthis._imageData[side] = this._context[side].getImageData(0, 0, this._size, this._size);\r\n\t\t} else {\r\n\t\t\tBitmapImageUtils._fillRect(this._context[side], rect, color, this._transparent);\r\n\t\t}\r\n\r\n\t\tthis.invalidateContent();\r\n\t}\r\n\r\n\t/**\r\n\t * Returns an integer that represents an RGB pixel value from a BitmapImage2D\r\n\t * object at a specific point(<i>x</i>, <i>y</i>). The\r\n\t * <code>getPixel()</code> method returns an unmultiplied pixel value. No\r\n\t * alpha information is returned.\r\n\t *\r\n\t * <p>All pixels in a BitmapImage2D object are stored as premultiplied color\r\n\t * values. A premultiplied image pixel has the red, green, and blue color\r\n\t * channel values already multiplied by the alpha data. For example, if the\r\n\t * alpha value is 0, the values for the RGB channels are also 0, independent\r\n\t * of their unmultiplied values. This loss of data can cause some problems\r\n\t * when you perform operations. All BitmapImage2D methods take and return\r\n\t * unmultiplied values. The internal pixel representation is converted from\r\n\t * premultiplied to unmultiplied before it is returned as a value. During a\r\n\t * set operation, the pixel value is premultiplied before the raw image pixel\r\n\t * is set.</p>\r\n\t *\r\n\t * @param x The <i>x</i> position of the pixel.\r\n\t * @param y The <i>y</i> position of the pixel.\r\n\t * @return A number that represents an RGB pixel value. If the(<i>x</i>,\r\n\t *         <i>y</i>) coordinates are outside the bounds of the image, the\r\n\t *         method returns 0.\r\n\t */\r\n\tpublic getPixel(side:number, x:number, y:number):number\r\n\t{\r\n\t\tvar r:number;\r\n\t\tvar g:number;\r\n\t\tvar b:number;\r\n\t\tvar a:number;\r\n\r\n\t\tif (!this._locked) {\r\n\t\t\tvar pixelData:ImageData = this._context[side].getImageData(x, y, 1, 1);\r\n\r\n\t\t\tr = pixelData.data[0];\r\n\t\t\tg = pixelData.data[1];\r\n\t\t\tb = pixelData.data[2];\r\n\t\t\ta = pixelData.data[3];\r\n\r\n\t\t} else {\r\n\t\t\tvar index:number = (x + y*this._size)*4;\r\n\r\n\t\t\tr = this._imageData[side].data[index + 0];\r\n\t\t\tg = this._imageData[side].data[index + 1];\r\n\t\t\tb = this._imageData[side].data[index + 2];\r\n\t\t\ta = this._imageData[side].data[index + 3];\r\n\t\t}\r\n\r\n\t\t//returns black if fully transparent\r\n\t\tif (!a)\r\n\t\t\treturn 0x0;\r\n\r\n\t\treturn (r << 16) | (g << 8) | b;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns an ARGB color value that contains alpha channel data and RGB data.\r\n\t * This method is similar to the <code>getPixel()</code> method, which\r\n\t * returns an RGB color without alpha channel data.\r\n\t *\r\n\t * <p>All pixels in a BitmapImage2D object are stored as premultiplied color\r\n\t * values. A premultiplied image pixel has the red, green, and blue color\r\n\t * channel values already multiplied by the alpha data. For example, if the\r\n\t * alpha value is 0, the values for the RGB channels are also 0, independent\r\n\t * of their unmultiplied values. This loss of data can cause some problems\r\n\t * when you perform operations. All BitmapImage2D methods take and return\r\n\t * unmultiplied values. The internal pixel representation is converted from\r\n\t * premultiplied to unmultiplied before it is returned as a value. During a\r\n\t * set operation, the pixel value is premultiplied before the raw image pixel\r\n\t * is set.</p>\r\n\t *\r\n\t * @param x The <i>x</i> position of the pixel.\r\n\t * @param y The <i>y</i> position of the pixel.\r\n\t * @return A number representing an ARGB pixel value. If the(<i>x</i>,\r\n\t *         <i>y</i>) coordinates are outside the bounds of the image, 0 is\r\n\t *         returned.\r\n\t */\r\n\tpublic getPixel32(side:number, x, y):number\r\n\t{\r\n\t\tvar r:number;\r\n\t\tvar g:number;\r\n\t\tvar b:number;\r\n\t\tvar a:number;\r\n\r\n\t\tif (!this._locked) {\r\n\t\t\tvar pixelData:ImageData = this._context[side].getImageData(x, y, 1, 1);\r\n\r\n\t\t\tr = pixelData.data[0];\r\n\t\t\tg = pixelData.data[1];\r\n\t\t\tb = pixelData.data[2];\r\n\t\t\ta = pixelData.data[3];\r\n\r\n\t\t} else {\r\n\t\t\tvar index:number = (x + y*this._size)*4;\r\n\r\n\t\t\tr = this._imageData[side].data[index + 0];\r\n\t\t\tg = this._imageData[side].data[index + 1];\r\n\t\t\tb = this._imageData[side].data[index + 2];\r\n\t\t\ta = this._imageData[side].data[index + 3];\r\n\t\t}\r\n\r\n\t\treturn (a << 24) | (r << 16) | (g << 8) | b;\r\n\t}\r\n\r\n\t/**\r\n\t * Locks an image so that any objects that reference the BitmapImage2D object,\r\n\t * such as Bitmap objects, are not updated when this BitmapImage2D object\r\n\t * changes. To improve performance, use this method along with the\r\n\t * <code>unlock()</code> method before and after numerous calls to the\r\n\t * <code>setPixel()</code> or <code>setPixel32()</code> method.\r\n\t *\r\n\t */\r\n\tpublic lock()\r\n\t{\r\n\t\tif (this._locked)\r\n\t\t\treturn;\r\n\r\n\t\tthis._locked = true;\r\n\r\n\t\tfor (var i:number = 0; i < 6; i++)\r\n\t\t\tthis._imageData[i] = this._context[i].getImageData(0, 0, this._size, this._size);\r\n\t}\r\n\r\n\t/**\r\n\t * Converts an Array into a rectangular region of pixel data. For each pixel,\r\n\t * an Array element is read and written into the BitmapImage2D pixel. The data\r\n\t * in the Array is expected to be 32-bit ARGB pixel values.\r\n\t *\r\n\t * @param rect        Specifies the rectangular region of the BitmapImage2D\r\n\t *                    object.\r\n\t * @param inputArray  An Array that consists of 32-bit unmultiplied pixel\r\n\t *                    values to be used in the rectangular region.\r\n\t * @throws RangeError The vector array is not large enough to read all the\r\n\t *                    pixel data.\r\n\t */\r\n\tpublic setArray(side:number, rect:Rectangle, inputArray:Array<number>)\r\n\t{\r\n\t\tif (!this._locked)\r\n\t\t\tthis._imageData[side] = this._context[side].getImageData(0, 0, this._size, this._size);\r\n\r\n\t\tvar i:number /*uint*/, j:number /*uint*/, index:number /*uint*/, argb:number[] /*uint*/;\r\n\t\tfor (i = 0; i < rect.width; ++i) {\r\n\t\t\tfor (j = 0; j < rect.height; ++j) {\r\n\t\t\t\targb = ColorUtils.float32ColorToARGB(inputArray[i + j*rect.width]);\r\n\t\t\t\tindex = (i + rect.x + (j + rect.y)*this._size)*4;\r\n\r\n\t\t\t\tthis._imageData[side].data[index + 0] = argb[1];\r\n\t\t\t\tthis._imageData[side].data[index + 1] = argb[2];\r\n\t\t\t\tthis._imageData[side].data[index + 2] = argb[3];\r\n\t\t\t\tthis._imageData[side].data[index + 3] = argb[0];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (!this._locked) {\r\n\t\t\tthis._context[side].putImageData(this._imageData[side], 0, 0);\r\n\t\t\tthis._imageData[side] = null;\r\n\t\t}\r\n\r\n\t\tthis.invalidateContent();\r\n\t}\r\n\r\n\t/**\r\n\t * Sets a single pixel of a BitmapImage2D object. The current alpha channel\r\n\t * value of the image pixel is preserved during this operation. The value of\r\n\t * the RGB color parameter is treated as an unmultiplied color value.\r\n\t *\r\n\t * <p><b>Note:</b> To increase performance, when you use the\r\n\t * <code>setPixel()</code> or <code>setPixel32()</code> method repeatedly,\r\n\t * call the <code>lock()</code> method before you call the\r\n\t * <code>setPixel()</code> or <code>setPixel32()</code> method, and then call\r\n\t * the <code>unlock()</code> method when you have made all pixel changes.\r\n\t * This process prevents objects that reference this BitmapImage2D instance from\r\n\t * updating until you finish making the pixel changes.</p>\r\n\t *\r\n\t * @param x     The <i>x</i> position of the pixel whose value changes.\r\n\t * @param y     The <i>y</i> position of the pixel whose value changes.\r\n\t * @param color The resulting RGB color for the pixel.\r\n\t */\r\n\tpublic setPixel(side:number, x:number, y:number, color:number)\r\n\t{\r\n\t\tvar argb:number[] = ColorUtils.float32ColorToARGB(color);\r\n\r\n\t\tif (!this._locked)\r\n\t\t\tthis._imageData[side] = this._context[side].getImageData(0, 0, this._size, this._size);\r\n\r\n\t\tvar index:number = (x + y*this._size)*4;\r\n\r\n\t\tthis._imageData[side].data[index + 0] = argb[1];\r\n\t\tthis._imageData[side].data[index + 1] = argb[2];\r\n\t\tthis._imageData[side].data[index + 2] = argb[3];\r\n\t\tthis._imageData[side].data[index + 3] = 255;\r\n\r\n\t\tif (!this._locked) {\r\n\t\t\tthis._context[side].putImageData(this._imageData[side], 0, 0);\r\n\t\t\tthis._imageData = null;\r\n\t\t}\r\n\r\n\t\tthis.invalidateContent();\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the color and alpha transparency values of a single pixel of a\r\n\t * BitmapImage2D object. This method is similar to the <code>setPixel()</code>\r\n\t * method; the main difference is that the <code>setPixel32()</code> method\r\n\t * takes an ARGB color value that contains alpha channel information.\r\n\t *\r\n\t * <p>All pixels in a BitmapImage2D object are stored as premultiplied color\r\n\t * values. A premultiplied image pixel has the red, green, and blue color\r\n\t * channel values already multiplied by the alpha data. For example, if the\r\n\t * alpha value is 0, the values for the RGB channels are also 0, independent\r\n\t * of their unmultiplied values. This loss of data can cause some problems\r\n\t * when you perform operations. All BitmapImage2D methods take and return\r\n\t * unmultiplied values. The internal pixel representation is converted from\r\n\t * premultiplied to unmultiplied before it is returned as a value. During a\r\n\t * set operation, the pixel value is premultiplied before the raw image pixel\r\n\t * is set.</p>\r\n\t *\r\n\t * <p><b>Note:</b> To increase performance, when you use the\r\n\t * <code>setPixel()</code> or <code>setPixel32()</code> method repeatedly,\r\n\t * call the <code>lock()</code> method before you call the\r\n\t * <code>setPixel()</code> or <code>setPixel32()</code> method, and then call\r\n\t * the <code>unlock()</code> method when you have made all pixel changes.\r\n\t * This process prevents objects that reference this BitmapImage2D instance from\r\n\t * updating until you finish making the pixel changes.</p>\r\n\t *\r\n\t * @param x     The <i>x</i> position of the pixel whose value changes.\r\n\t * @param y     The <i>y</i> position of the pixel whose value changes.\r\n\t * @param color The resulting ARGB color for the pixel. If the bitmap is\r\n\t *              opaque(not transparent), the alpha transparency portion of\r\n\t *              this color value is ignored.\r\n\t */\r\n\tpublic setPixel32(side:number, x, y, color:number)\r\n\t{\r\n\t\tvar argb:number[] = ColorUtils.float32ColorToARGB(color);\r\n\r\n\t\tif (!this._locked)\r\n\t\t\tthis._imageData[side] = this._context[side].getImageData(0, 0, this._size, this._size);\r\n\r\n\t\tvar index:number = (x + y*this._size)*4;\r\n\r\n\t\tthis._imageData[side].data[index + 0] = argb[1];\r\n\t\tthis._imageData[side].data[index + 1] = argb[2];\r\n\t\tthis._imageData[side].data[index + 2] = argb[3];\r\n\t\tthis._imageData[side].data[index + 3] = argb[0];\r\n\r\n\t\tif (!this._locked) {\r\n\t\t\tthis._context[side].putImageData(this._imageData[side], 0, 0);\r\n\t\t\tthis._imageData[side] = null;\r\n\t\t}\r\n\r\n\t\tthis.invalidateContent();\r\n\t}\r\n\r\n\t/**\r\n\t * Converts a byte array into a rectangular region of pixel data. For each\r\n\t * pixel, the <code>ByteArray.readUnsignedInt()</code> method is called and\r\n\t * the return value is written into the pixel. If the byte array ends before\r\n\t * the full rectangle is written, the function returns. The data in the byte\r\n\t * array is expected to be 32-bit ARGB pixel values. No seeking is performed\r\n\t * on the byte array before or after the pixels are read.\r\n\t *\r\n\t * @param rect           Specifies the rectangular region of the BitmapImage2D\r\n\t *                       object.\r\n\t * @param inputByteArray A ByteArray object that consists of 32-bit\r\n\t *                       unmultiplied pixel values to be used in the\r\n\t *                       rectangular region.\r\n\t * @throws EOFError  The <code>inputByteArray</code> object does not include\r\n\t *                   enough data to fill the area of the <code>rect</code>\r\n\t *                   rectangle. The method fills as many pixels as possible\r\n\t *                   before throwing the exception.\r\n\t * @throws TypeError The rect or inputByteArray are null.\r\n\t */\r\n\tpublic setPixels(side:number, rect:Rectangle, inputByteArray:ByteArray)\r\n\t{\r\n\t\tif (!this._locked)\r\n\t\t\tthis._imageData[side] = this._context[side].getImageData(0, 0, this._size, this._size);\r\n\r\n\t\tinputByteArray.position = 0;\r\n\t\tvar i:number /*uint*/, j:number /*uint*/, index:number /*uint*/;\r\n\t\tfor (i = 0; i < rect.width; ++i) {\r\n\t\t\tfor (j = 0; j < rect.height; ++j) {\r\n\t\t\t\tindex = (i + rect.x + (j + rect.y)*this._size)*4;\r\n\r\n\t\t\t\tthis._imageData[side].data[index + 0] = inputByteArray.readUnsignedInt();\r\n\t\t\t\tthis._imageData[side].data[index + 1] = inputByteArray.readUnsignedInt();\r\n\t\t\t\tthis._imageData[side].data[index + 2] = inputByteArray.readUnsignedInt();\r\n\t\t\t\tthis._imageData[side].data[index + 3] = inputByteArray.readUnsignedInt();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (!this._locked) {\r\n\t\t\tthis._context[side].putImageData(this._imageData[side], 0, 0);\r\n\t\t\tthis._imageData[side] = null;\r\n\t\t}\r\n\r\n\t\tthis.invalidateContent();\r\n\t}\r\n\r\n\t/**\r\n\t * Unlocks an image so that any objects that reference the BitmapImage2D object,\r\n\t * such as Bitmap objects, are updated when this BitmapImage2D object changes.\r\n\t * To improve performance, use this method along with the <code>lock()</code>\r\n\t * method before and after numerous calls to the <code>setPixel()</code> or\r\n\t * <code>setPixel32()</code> method.\r\n\t *\r\n\t * @param changeRect The area of the BitmapImage2D object that has changed. If\r\n\t *                   you do not specify a value for this parameter, the\r\n\t *                   entire area of the BitmapImage2D object is considered\r\n\t *                   changed.\r\n\t */\r\n\tpublic unlock()\r\n\t{\r\n\t\tif (!this._locked)\r\n\t\t\treturn;\r\n\r\n\t\tthis._locked = false;\r\n\r\n\t\tfor (var i:number = 0; i < 6; i++) {\r\n\t\t\tthis._context[i].putImageData(this._imageData[i], 0, 0); // at coords 0,0\r\n\t\t\tthis._imageData[i] = null;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t * @returns {ImageData}\r\n\t */\r\n\tpublic getImageData(side:number):ImageData\r\n\t{\r\n\t\tif (!this._locked)\r\n\t\t\treturn this._context[side].getImageData(0, 0, this._size, this._size);\r\n\r\n\t\treturn this._imageData[side];\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t * @returns {HTMLCanvasElement}\r\n\t */\r\n\tpublic getCanvas(side:number):HTMLCanvasElement\r\n\t{\r\n\t\treturn this._imageCanvas[side];\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t * @param width\r\n\t * @param height\r\n\t * @private\r\n\t */\r\n\tpublic _setSize(size:number)\r\n\t{\r\n\t\tsuper._setSize(size);\r\n\r\n\t\tfor (var i:number = 0; i < 6; i++) {\r\n\t\t\tif (this._locked)\r\n\t\t\t\tthis._context[i].putImageData(this._imageData[i], 0, 0);\r\n\r\n\t\t\tthis._imageCanvas[i].width = size;\r\n\t\t\tthis._imageCanvas[i].height = size;\r\n\r\n\t\t\tif (this._locked)\r\n\t\t\t\tthis._imageData[i] = this._context[i].getImageData(0, 0, this._size, this._size);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport = BitmapImageCube;",
    "/**\r\n * A class that provides constant values for visual blend mode effects. These\r\n * constants are used in the following:\r\n * <ul>\r\n *   <li> The <code>blendMode</code> property of the\r\n * flash.display.DisplayObject class.</li>\r\n *   <li> The <code>blendMode</code> parameter of the <code>draw()</code>\r\n * method of the flash.display.BitmapData class</li>\r\n * </ul>\r\n */\r\nclass BlendMode\r\n{\r\n\t/**\r\n\t * Adds the values of the constituent colors of the display object to the\r\n\t * colors of its background, applying a ceiling of 0xFF. This setting is\r\n\t * commonly used for animating a lightening dissolve between two objects.\r\n\t *\r\n\t * <p>For example, if the display object has a pixel with an RGB value of\r\n\t * 0xAAA633, and the background pixel has an RGB value of 0xDD2200, the\r\n\t * resulting RGB value for the displayed pixel is 0xFFC833(because 0xAA +\r\n\t * 0xDD > 0xFF, 0xA6 + 0x22 = 0xC8, and 0x33 + 0x00 = 0x33).</p>\r\n\t */\r\n\tpublic static ADD:string = \"add\";\r\n\r\n\t/**\r\n\t * Applies the alpha value of each pixel of the display object to the\r\n\t * background. This requires the <code>blendMode</code> property of the\r\n\t * parent display object be set to\r\n\t * <code>away.base.BlendMode.LAYER</code>.\r\n\t *\r\n\t * <p>Not supported under GPU rendering.</p>\r\n\t */\r\n\tpublic static ALPHA:string = \"alpha\";\r\n\r\n\t/**\r\n\t * Selects the darker of the constituent colors of the display object and the\r\n\t * colors of the background(the colors with the smaller values). This\r\n\t * setting is commonly used for superimposing type.\r\n\t *\r\n\t * <p>For example, if the display object has a pixel with an RGB value of\r\n\t * 0xFFCC33, and the background pixel has an RGB value of 0xDDF800, the\r\n\t * resulting RGB value for the displayed pixel is 0xDDCC00(because 0xFF >\r\n\t * 0xDD, 0xCC < 0xF8, and 0x33 > 0x00 = 33).</p>\r\n\t *\r\n\t * <p>Not supported under GPU rendering.</p>\r\n\t */\r\n\tpublic static DARKEN:string = \"darken\";\r\n\r\n\t/**\r\n\t * Compares the constituent colors of the display object with the colors of\r\n\t * its background, and subtracts the darker of the values of the two\r\n\t * constituent colors from the lighter value. This setting is commonly used\r\n\t * for more vibrant colors.\r\n\t *\r\n\t * <p>For example, if the display object has a pixel with an RGB value of\r\n\t * 0xFFCC33, and the background pixel has an RGB value of 0xDDF800, the\r\n\t * resulting RGB value for the displayed pixel is 0x222C33(because 0xFF -\r\n\t * 0xDD = 0x22, 0xF8 - 0xCC = 0x2C, and 0x33 - 0x00 = 0x33).</p>\r\n\t */\r\n\tpublic static DIFFERENCE:string = \"difference\";\r\n\r\n\t/**\r\n\t * Erases the background based on the alpha value of the display object. This\r\n\t * process requires that the <code>blendMode</code> property of the parent\r\n\t * display object be set to <code>flash.display.BlendMode.LAYER</code>.\r\n\t *\r\n\t * <p>Not supported under GPU rendering.</p>\r\n\t */\r\n\tpublic static ERASE:string = \"erase\";\r\n\r\n\t/**\r\n\t * Adjusts the color of each pixel based on the darkness of the display\r\n\t * object. If the display object is lighter than 50% gray, the display object\r\n\t * and background colors are screened, which results in a lighter color. If\r\n\t * the display object is darker than 50% gray, the colors are multiplied,\r\n\t * which results in a darker color. This setting is commonly used for shading\r\n\t * effects.\r\n\t *\r\n\t * <p>Not supported under GPU rendering.</p>\r\n\t */\r\n\tpublic static HARDLIGHT:string = \"hardlight\";\r\n\r\n\t/**\r\n\t * Inverts the background.\r\n\t */\r\n\tpublic static INVERT:string = \"invert\";\r\n\r\n\t/**\r\n\t * Forces the creation of a transparency group for the display object. This\r\n\t * means that the display object is precomposed in a temporary buffer before\r\n\t * it is processed further. The precomposition is done automatically if the\r\n\t * display object is precached by means of bitmap caching or if the display\r\n\t * object is a display object container that has at least one child object\r\n\t * with a <code>blendMode</code> setting other than <code>\"normal\"</code>.\r\n\t *\r\n\t * <p>Not supported under GPU rendering.</p>\r\n\t */\r\n\tpublic static LAYER:string = \"layer\";\r\n\r\n\t/**\r\n\t * Selects the lighter of the constituent colors of the display object and\r\n\t * the colors of the background(the colors with the larger values). This\r\n\t * setting is commonly used for superimposing type.\r\n\t *\r\n\t * <p>For example, if the display object has a pixel with an RGB value of\r\n\t * 0xFFCC33, and the background pixel has an RGB value of 0xDDF800, the\r\n\t * resulting RGB value for the displayed pixel is 0xFFF833(because 0xFF >\r\n\t * 0xDD, 0xCC < 0xF8, and 0x33 > 0x00 = 33).</p>\r\n\t *\r\n\t * <p>Not supported under GPU rendering.</p>\r\n\t */\r\n\tpublic static LIGHTEN:string = \"lighten\";\r\n\r\n\t/**\r\n\t * Multiplies the values of the display object constituent colors by the\r\n\t * constituent colors of the background color, and normalizes by dividing by\r\n\t * 0xFF, resulting in darker colors. This setting is commonly used for\r\n\t * shadows and depth effects.\r\n\t *\r\n\t * <p>For example, if a constituent color(such as red) of one pixel in the\r\n\t * display object and the corresponding color of the pixel in the background\r\n\t * both have the value 0x88, the multiplied result is 0x4840. Dividing by\r\n\t * 0xFF yields a value of 0x48 for that constituent color, which is a darker\r\n\t * shade than the color of the display object or the color of the\r\n\t * background.</p>\r\n\t */\r\n\tpublic static MULTIPLY:string = \"multiply\";\r\n\r\n\t/**\r\n\t * The display object appears in front of the background. Pixel values of the\r\n\t * display object override the pixel values of the background. Where the\r\n\t * display object is transparent, the background is visible.\r\n\t */\r\n\tpublic static NORMAL:string = \"normal\";\r\n\r\n\t/**\r\n\t * Adjusts the color of each pixel based on the darkness of the background.\r\n\t * If the background is lighter than 50% gray, the display object and\r\n\t * background colors are screened, which results in a lighter color. If the\r\n\t * background is darker than 50% gray, the colors are multiplied, which\r\n\t * results in a darker color. This setting is commonly used for shading\r\n\t * effects.\r\n\t *\r\n\t * <p>Not supported under GPU rendering.</p>\r\n\t */\r\n\tpublic static OVERLAY:string = \"overlay\";\r\n\r\n\t/**\r\n\t * Multiplies the complement(inverse) of the display object color by the\r\n\t * complement of the background color, resulting in a bleaching effect. This\r\n\t * setting is commonly used for highlights or to remove black areas of the\r\n\t * display object.\r\n\t */\r\n\tpublic static SCREEN:string = \"screen\";\r\n\r\n\t/**\r\n\t * Uses a shader to define the blend between objects.\r\n\t *\r\n\t * <p>Setting the <code>blendShader</code> property to a Shader instance\r\n\t * automatically sets the display object's <code>blendMode</code> property to\r\n\t * <code>BlendMode.SHADER</code>. If the <code>blendMode</code> property is\r\n\t * set to <code>BlendMode.SHADER</code> without first setting the\r\n\t * <code>blendShader</code> property, the <code>blendMode</code> property is\r\n\t * set to <code>BlendMode.NORMAL</code> instead. If the\r\n\t * <code>blendShader</code> property is set(which sets the\r\n\t * <code>blendMode</code> property to <code>BlendMode.SHADER</code>), then\r\n\t * later the value of the <code>blendMode</code> property is changed, the\r\n\t * blend mode can be reset to use the blend shader simply by setting the\r\n\t * <code>blendMode</code> property to <code>BlendMode.SHADER</code>. The\r\n\t * <code>blendShader</code> property does not need to be set again except to\r\n\t * change the shader that's used to define the blend mode.</p>\r\n\t *\r\n\t * <p>Not supported under GPU rendering.</p>\r\n\t */\r\n\tpublic static SHADER:string = \"shader\";\r\n\r\n\t/**\r\n\t * Subtracts the values of the constituent colors in the display object from\r\n\t * the values of the background color, applying a floor of 0. This setting is\r\n\t * commonly used for animating a darkening dissolve between two objects.\r\n\t *\r\n\t * <p>For example, if the display object has a pixel with an RGB value of\r\n\t * 0xAA2233, and the background pixel has an RGB value of 0xDDA600, the\r\n\t * resulting RGB value for the displayed pixel is 0x338400(because 0xDD -\r\n\t * 0xAA = 0x33, 0xA6 - 0x22 = 0x84, and 0x00 - 0x33 < 0x00).</p>\r\n\t */\r\n\tpublic static SUBTRACT:string = \"subtract\";\r\n}\r\n\r\nexport = BlendMode;",
    "import IImageCanvas                = require(\"awayjs-core/lib/data/IImageCanvas\");\r\nimport CPURenderingContext2D = require('awayjs-core/lib/data/CPURenderingContext2D');\r\nimport ImageData = require('awayjs-core/lib/data/ImageData');\r\n\r\nclass CPUCanvas implements IImageCanvas {\r\n    width:number = 1;\r\n    height:number = 1;\r\n\r\n    private imageData:ImageData;\r\n\r\n    getContext(contextId:string):CanvasRenderingContext2D {\r\n        return new CPURenderingContext2D(this);\r\n    }\r\n\r\n    constructor() {\r\n        this.reset();\r\n    }\r\n\r\n    public reset() {\r\n        if (!this.imageData) {\r\n            this.imageData = new ImageData(this.width, this.height);\r\n        }\r\n        this.imageData.width = this.width;\r\n        this.imageData.height = this.height;\r\n\r\n        for (var i:number = 0; i < this.width * this.height * 4; i += 4) {\r\n            this.imageData.data[i] = 255;\r\n            this.imageData.data[i + 1] = 255;\r\n            this.imageData.data[i + 2] = 255;\r\n            this.imageData.data[i + 3] = 255;\r\n        }\r\n    }\r\n\r\n    public getImageData():ImageData {\r\n        if (this.imageData.width != this.width || this.imageData.height != this.height) {\r\n            this.reset();\r\n        }\r\n        return this.imageData;\r\n    }\r\n\r\n\r\n}\r\nexport = CPUCanvas;",
    "import ImageData = require('awayjs-core/lib/data/ImageData');\r\nimport CPUCanvas = require('awayjs-core/lib/data/CPUCanvas');\r\nimport BitmapImage2D = require(\"awayjs-core/lib/data/BitmapImage2D\");\r\nimport Matrix = require(\"awayjs-core/lib/geom/Matrix\");\r\nimport Point = require(\"awayjs-core/lib/geom/Point\");\r\n\r\n//TODO: implement all methods\r\nclass CPURenderingContext2D implements CanvasRenderingContext2D {\r\n    public miterLimit:number;\r\n    public font:string;\r\n    public globalCompositeOperation:string;\r\n    public msFillRule:string;\r\n    public lineCap:string;\r\n    public msImageSmoothingEnabled:boolean;\r\n    public lineDashOffset:number;\r\n    public shadowColor:string;\r\n    public lineJoin:string;\r\n    public shadowOffsetX:number;\r\n    public lineWidth:number;\r\n    public canvas:HTMLCanvasElement;\r\n    public strokeStyle:any;\r\n    public globalAlpha:number;\r\n    public shadowOffsetY:number;\r\n    public fillStyle:any;\r\n    public shadowBlur:number;\r\n    public textAlign:string;\r\n    public textBaseline:string;\r\n\r\n    public cpuCanvas:CPUCanvas;\r\n\r\n    private matrix:Matrix;\r\n\r\n    constructor(cpuCanvas:CPUCanvas) {\r\n        this.cpuCanvas = cpuCanvas;\r\n    }\r\n\r\n    public restore():void {\r\n        this.matrix = null;\r\n    }\r\n\r\n    public setTransform(m11:number, m12:number, m21:number, m22:number, dx:number, dy:number):void {\r\n        this.matrix = new Matrix(m11, m12, m21, m22, dx, dy);\r\n    }\r\n\r\n    public save():void {\r\n    }\r\n\r\n    public arc(x:number, y:number, radius:number, startAngle:number, endAngle:number, anticlockwise:boolean):void {\r\n    }\r\n\r\n    public measureText(text:string):TextMetrics {\r\n        return undefined;\r\n    }\r\n\r\n    public isPointInPath(x:number, y:number, fillRule:string):boolean {\r\n        return undefined;\r\n    }\r\n\r\n    public quadraticCurveTo(cpx:number, cpy:number, x:number, y:number):void {\r\n    }\r\n\r\n    public putImageData(imagedata:ImageData, dx:number, dy:number, dirtyX:number, dirtyY:number, dirtyWidth:number, dirtyHeight:number):void {\r\n    }\r\n\r\n    public rotate(angle:number):void {\r\n    }\r\n\r\n    public fillText(text:string, x:number, y:number, maxWidth:number):void {\r\n    }\r\n\r\n    public translate(x:number, y:number):void {\r\n    }\r\n\r\n    public scale(x:number, y:number):void {\r\n    }\r\n\r\n    public createRadialGradient(x0:number, y0:number, r0:number, x1:number, y1:number, r1:number):CanvasGradient {\r\n        return undefined;\r\n    }\r\n\r\n    public lineTo(x:number, y:number):void {\r\n    }\r\n\r\n    public getLineDash():number[] {\r\n        return undefined;\r\n    }\r\n\r\n    public fill(fillRule:string):void {\r\n    }\r\n\r\n    public createImageData(imageDataOrSw:any, sh:number):ImageData {\r\n        return undefined;\r\n    }\r\n\r\n    public createPattern(image:HTMLElement, repetition:string):CanvasPattern {\r\n        return undefined;\r\n    }\r\n\r\n    public closePath():void {\r\n    }\r\n\r\n    public rect(x:number, y:number, w:number, h:number):void {\r\n    }\r\n\r\n    public clip(fillRule:string):void {\r\n    }\r\n\r\n    public clearRect(x:number, y:number, w:number, h:number):void {\r\n    }\r\n\r\n    public moveTo(x:number, y:number):void {\r\n    }\r\n\r\n    public getImageData(sx:number, sy:number, sw:number, sh:number):ImageData {\r\n        //var result:ImageData = new ImageData(sw, sh);\r\n        //var i:number = 0;\r\n        //\r\n        //for (i = 0; i < sw * sh * 4; i += 4) {\r\n        //    result.data[i] = 255;\r\n        //    result.data[i + 1] = 255;\r\n        //    result.data[i + 2] = 255;\r\n        //    result.data[i + 3] = 255;\r\n        //}\r\n        //\r\n        //var imageData:ImageData = this.cpuCanvas.getImageData();\r\n        //for (i = sx; i < sx + sw; i++) {\r\n        //    for (var j:number = sy; j < sy + sh; j++) {\r\n        //        this.copyPixel32(result, i - sx, i - sy, imageData, i, j);\r\n        //    }\r\n        //}\r\n        return this.cpuCanvas.getImageData();\r\n    }\r\n\r\n    private point:Point = new Point();\r\n    private point2:Point = new Point();\r\n\r\n    private applyPixel32(target:ImageData, x:number, y:number, color:number[]) {\r\n        //todo: blending support\r\n\r\n        x = Math.floor(x);\r\n        y = Math.floor(y);\r\n\r\n        if (x < 0 || x >= target.width || y >= target.height || y < 0) return;\r\n        var index:number = (x + y * target.width) * 4;\r\n        var alpha:number = color[3] / 255;\r\n        target.data[index] += color[0] * alpha;\r\n        target.data[index + 1] += color[1] * alpha;\r\n        target.data[index + 2] += color[2] * alpha;\r\n        target.data[index + 3] += color[3];\r\n\r\n        target.data[index] = target.data[index] & 0xFF;\r\n        target.data[index + 1] = target.data[index + 1] & 0xFF;\r\n        target.data[index + 2] = target.data[index + 2] & 0xFF;\r\n        target.data[index + 3] = target.data[index + 3] & 0xFF;\r\n    }\r\n\r\n    private copyPixel32(target:ImageData, x:number, y:number, source:ImageData, fromX:number, fromY:number) {\r\n        x = Math.floor(x);\r\n        y = Math.floor(y);\r\n        fromX = Math.floor(fromX);\r\n        fromY = Math.floor(fromY);\r\n\r\n        if (x < 0 || x >= target.width || y >= target.height || y < 0) return;\r\n        if (fromX < 0 || fromX >= source.width || fromY >= source.height || fromY < 0) return;\r\n        var index:number = (x + y * target.width) * 4;\r\n        var fromIndex:number = (fromX + fromY * source.width) * 4;\r\n        target.data[index] = source.data[fromIndex];\r\n        target.data[index + 1] = source.data[fromIndex + 1];\r\n        target.data[index + 2] = source.data[fromIndex + 2];\r\n        target.data[index + 3] = source.data[fromIndex + 3];\r\n    }\r\n\r\n    private parsedFillStyle:string;\r\n    private parsedA:number;\r\n    private parsedR:number;\r\n    private parsedG:number;\r\n    private parsedB:number;\r\n\r\n    public fillRect(x:number, y:number, w:number, h:number):void {\r\n        if (this.fillStyle) {\r\n            if (this.parsedFillStyle != this.fillStyle) {\r\n                var colorStrings:string[] = this.fillStyle.substring(5, this.fillStyle.lastIndexOf(\")\")).split(\",\");\r\n                this.parsedA = parseFloat(colorStrings[3]) * 255;\r\n                this.parsedR = parseInt(colorStrings[0]);\r\n                this.parsedG = parseInt(colorStrings[1]);\r\n                this.parsedB = parseInt(colorStrings[2]);\r\n                this.parsedFillStyle = this.fillStyle;\r\n            }\r\n\r\n            var imageData:ImageData = this.cpuCanvas.getImageData();\r\n            for (var i:number = x; i < x + w; i++) {\r\n                for (var j:number = y; j < y + h; j++) {\r\n\r\n                    var index:number = (x + y * imageData.width) * 4;\r\n                    imageData.data[index] = this.parsedR;\r\n                    imageData.data[index + 1] = this.parsedG;\r\n                    imageData.data[index + 2] = this.parsedB;\r\n                    imageData.data[index + 3] = this.parsedA;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    public bezierCurveTo(cp1x:number, cp1y:number, cp2x:number, cp2y:number, x:number, y:number):void {\r\n    }\r\n\r\n    public drawImage(image:HTMLElement, offsetX:number, offsetY:number, width:number, height:number, canvasOffsetX:number, canvasOffsetY:number, canvasImageWidth:number, canvasImageHeight:number):void {\r\n        var b:any = image;\r\n        if (image.constructor.toString().indexOf(\"BitmapImage2D\") > -1) {\r\n            var bitmap:BitmapImage2D = <BitmapImage2D> b;\r\n            bitmap.lock();\r\n\r\n            this.drawBitmap(bitmap, offsetX, offsetY, width, height, canvasOffsetX, canvasOffsetY, canvasImageWidth, canvasImageHeight);\r\n\r\n            bitmap.unlock();\r\n        } else if (image.constructor.toString().indexOf(\"HTMLImage\") > -1) {\r\n            var htmlImage:HTMLImageElement = <HTMLImageElement> image;\r\n            var htmlCanvas:HTMLCanvasElement = <HTMLCanvasElement> document.createElement(\"canvas\");\r\n            htmlCanvas.width = htmlImage.width;\r\n            htmlCanvas.height = htmlImage.height;\r\n            var htmlContext:CanvasRenderingContext2D = htmlCanvas.getContext(\"2d\");\r\n            htmlContext.drawImage(htmlImage, 0, 0);\r\n            var htmlImageData:ImageData = htmlContext.getImageData(0, 0, htmlImage.width, htmlImage.height);\r\n\r\n            var resultBitmap:BitmapImage2D = new BitmapImage2D(htmlImage.width, htmlImage.height, true, 0, false);\r\n            resultBitmap.getImageData().data = htmlImageData.data;\r\n            var passBitmap:any = resultBitmap;\r\n            this.drawImage(passBitmap, offsetX, offsetY, width, height, canvasOffsetX, canvasOffsetY, canvasImageWidth, canvasImageHeight);\r\n        } else if (image.constructor.toString().indexOf(\"CPUCanvas\") > -1) {\r\n            //\r\n            var canvas:CPUCanvas = <CPUCanvas> b;\r\n            this.drawBitmap(canvas, offsetX, offsetY, width, height, canvasOffsetX, canvasOffsetY, canvasImageWidth, canvasImageHeight);\r\n            //\r\n            //if (!width || width == 0) {\r\n            //    width = canvas.width;\r\n            //    height = canvas.height;\r\n            //}\r\n            //\r\n            //var sourceData:ImageData = canvas.getImageData();\r\n            //var scaleX:number = width / sourceData.width;\r\n            //var scaleY:number = height / sourceData.height;\r\n            //\r\n            //var imageData:ImageData = this.cpuCanvas.getImageData();\r\n            //for (var i:number = offsetX; i < offsetX + width; i++) {\r\n            //    for (var j:number = offsetY; j < offsetY + height; j++) {\r\n            //        this.copyPixel32(imageData, i, j, sourceData, (i - offsetX) * scaleX, (j - offsetY) * scaleY);\r\n            //    }\r\n            //}\r\n        }\r\n    }\r\n\r\n    private drawBitmap(bitmap:any, offsetX:number, offsetY:number, width:number, height:number, canvasOffsetX:number, canvasOffsetY:number, canvasImageWidth:number, canvasImageHeight:number) {\r\n        if (!width || width == 0) {\r\n            width = bitmap.width;\r\n            height = bitmap.height;\r\n        }\r\n\r\n        if (!canvasOffsetX || canvasOffsetX == 0) {\r\n            canvasOffsetX = 0;\r\n            canvasOffsetY = 0;\r\n        }\r\n\r\n        if (!canvasImageWidth || canvasImageWidth == 0 || this.matrix) { //todo: if matrix? should we reset canvasImageWidth\r\n            canvasImageWidth = width;\r\n            canvasImageHeight = height;\r\n        }\r\n\r\n        //console.log(\"CPURenderingContext2D:drawBitmap(width: \" + width + \" height: \" + height + \" canvasImageWidth: \" + canvasImageWidth + \" canvasImageHeight: \" + canvasImageHeight);\r\n\r\n        var sourceData:ImageData = bitmap.getImageData();\r\n        var canvasImageData:ImageData = this.cpuCanvas.getImageData();\r\n\r\n        if (this.matrix || (canvasImageWidth != width || canvasImageHeight != height)) {\r\n            var matrix:Matrix = this.matrix;\r\n            if (!matrix) {\r\n                matrix = new Matrix();\r\n                matrix.scale(canvasImageWidth / width, canvasImageHeight / height);\r\n            }\r\n\r\n            var scaleX:number = Math.sqrt(matrix.a * matrix.a + matrix.b * matrix.b);\r\n            var scaleY:number = Math.sqrt(matrix.c * matrix.c + matrix.d * matrix.d);\r\n\r\n            canvasImageWidth = width * scaleX;\r\n            canvasImageHeight = height * scaleY;\r\n\r\n            matrix.tx += canvasOffsetX;\r\n            matrix.ty += canvasOffsetY;\r\n\r\n            canvasOffsetX = Math.floor(matrix.tx);\r\n            canvasOffsetY = Math.floor(matrix.ty);\r\n\r\n            matrix.invert();\r\n\r\n            if (scaleX >= 1 || scaleY >= 1) {\r\n                var p:Point = new Point();\r\n                for (var i:number = canvasOffsetX; i < canvasOffsetX + canvasImageWidth; i++) {\r\n                    for (var j:number = canvasOffsetY; j < canvasOffsetY + canvasImageHeight; j++) {\r\n                        p.x = i;\r\n                        p.y = j;\r\n                        p = matrix.transformPoint(p);\r\n\r\n                        var color:number[] = CPURenderingContext2D.sampleBilinear(p.x, p.y, sourceData);\r\n                        this.applyPixel32(canvasImageData, i, j, color);\r\n                    }\r\n                }\r\n            } else {\r\n                //decimate\r\n                var p1:Point = this.point;\r\n                var p2:Point = this.point2;\r\n                for (var i:number = canvasOffsetX; i < canvasOffsetX + canvasImageWidth; i++) {\r\n                    for (var j:number = canvasOffsetY; j < canvasOffsetY + canvasImageHeight; j++) {\r\n                        p1.x = i;\r\n                        p1.y = j;\r\n                        p1 = matrix.transformPoint(p1);\r\n\r\n                        p2.x = i + 1;\r\n                        p2.y = j + 1;\r\n                        p2 = matrix.transformPoint(p2);\r\n\r\n                        var color:number[] = CPURenderingContext2D.sampleBox(p1.x + offsetX, p1.y + offsetY, p2.x + offsetX, p2.y + offsetY, sourceData);\r\n                        this.applyPixel32(canvasImageData, i, j, color);\r\n                    }\r\n                }\r\n            }\r\n\r\n            matrix.invert();\r\n        } else {\r\n            for (var i:number = canvasOffsetX; i < canvasOffsetX + canvasImageWidth; i++) {\r\n                for (var j:number = canvasOffsetY; j < canvasOffsetY + canvasImageHeight; j++) {\r\n                    var color:number[] = CPURenderingContext2D.sample(i - canvasOffsetX + offsetX, j - canvasOffsetY + offsetY, sourceData);\r\n                    this.applyPixel32(canvasImageData, i, j, color);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    public transform(m11:number, m12:number, m21:number, m22:number, dx:number, dy:number):void {\r\n    }\r\n\r\n    public stroke():void {\r\n    }\r\n\r\n    public strokeRect(x:number, y:number, w:number, h:number):void {\r\n    }\r\n\r\n    public setLineDash(segments:number[]):void {\r\n    }\r\n\r\n    public strokeText(text:string, x:number, y:number, maxWidth:number):void {\r\n    }\r\n\r\n    public beginPath():void {\r\n    }\r\n\r\n    public arcTo(x1:number, y1:number, x2:number, y2:number, radius:number):void {\r\n    }\r\n\r\n    public createLinearGradient(x0:number, y0:number, x1:number, y1:number):CanvasGradient {\r\n        return undefined;\r\n    }\r\n\r\n    private static sampleBilinear(u:number, v:number, texture:ImageData, texelSizeX:number = 1, texelSizeY:number = 1):number[] {\r\n        var color00:number[] = CPURenderingContext2D.sample(u, v, texture);\r\n        var color10:number[] = CPURenderingContext2D.sample(u + texelSizeX, v, texture);\r\n        var color01:number[] = CPURenderingContext2D.sample(u, v + texelSizeY, texture);\r\n        var color11:number[] = CPURenderingContext2D.sample(u + texelSizeX, v + texelSizeY, texture);\r\n\r\n        var a:number = u;\r\n        a = a - Math.floor(a);\r\n\r\n        var interColor0:number[] = CPURenderingContext2D.interpolateColor(color00, color10, a);\r\n        var interColor1:number[] = CPURenderingContext2D.interpolateColor(color01, color11, a);\r\n\r\n        var b:number = v;\r\n        b = b - Math.floor(b);\r\n        return CPURenderingContext2D.interpolateColor(interColor0, interColor1, b);\r\n    }\r\n\r\n    private static sample(u:number, v:number, imageData:ImageData):number[] {\r\n        u = Math.floor(u);\r\n        v = Math.floor(v);\r\n\r\n        var result:number[] = [0, 0, 0, 0];\r\n\r\n        if (u < 0 || u >= imageData.width || v < 0 || v >= imageData.height) {\r\n            return result;\r\n        }\r\n\r\n        var index:number = (u + v * imageData.width) * 4;\r\n        result[0] = imageData.data[index];\r\n        result[1] = imageData.data[index + 1];\r\n        result[2] = imageData.data[index + 2];\r\n        result[3] = imageData.data[index + 3];\r\n        return result;\r\n    }\r\n\r\n    private static sampleBox(x0:number, y0:number, x1:number, y1:number, texture:ImageData):number[] {\r\n        var area:number = 0;// -- total area accumulated in pixels\r\n        var result:number[] = [0, 0, 0, 0];\r\n        var x:number;\r\n        var y:number;\r\n        var xsize:number;\r\n        var ysize:number;\r\n\r\n        var fromY:number = Math.floor(y0);\r\n        var toY:number = Math.ceil(y1);\r\n\r\n        fromY = Math.max(Math.min(fromY, texture.height - 1), 0);\r\n        toY = Math.max(Math.min(toY, texture.height - 1), 0);\r\n\r\n        for (y = fromY; y < toY; y++) {\r\n            ysize = 1;\r\n\r\n            if (y < y0) {\r\n                ysize = ysize * (1.0 - (y0 - y))\r\n            }\r\n\r\n            if (y > y1) {\r\n                ysize = ysize * (1.0 - (y - y1))\r\n            }\r\n\r\n            var fromX:number = Math.floor(x0);\r\n            var toX:number = Math.ceil(x1);\r\n\r\n            fromX = Math.max(Math.min(fromX, texture.width - 1), 0);\r\n            toX = Math.max(Math.min(toX, texture.width - 1), 0);\r\n\r\n\r\n            for (x = fromX; x < toX; x++) {\r\n                xsize = ysize;\r\n\r\n                var color:number[] = CPURenderingContext2D.sample(x, y, texture);\r\n\r\n                if (x < x0) {\r\n                    xsize = xsize * (1.0 - (x0 - x))\r\n                }\r\n                if (x > x1) {\r\n                    xsize = xsize * (1.0 - (x - x1))\r\n                }\r\n                result[0] += color[0] * xsize;\r\n                result[1] += color[1] * xsize;\r\n                result[2] += color[2] * xsize;\r\n                result[3] += color[3] * xsize;\r\n                area = area + xsize\r\n            }\r\n        }\r\n\r\n        result[0] /= area;\r\n        result[1] /= area;\r\n        result[2] /= area;\r\n        result[3] /= area;\r\n\r\n        result[0] = result[0] & 0xFF;\r\n        result[1] = result[1] & 0xFF;\r\n        result[2] = result[2] & 0xFF;\r\n        result[3] = result[3] & 0xFF;\r\n        return result;\r\n    }\r\n\r\n    private static interpolateColor(source:number[], target:number[], a:number):number[] {\r\n        var result:number[] = [];\r\n        result[0] = source[0] + (target[0] - source[0]) * a;\r\n        result[1] = source[1] + (target[1] - source[1]) * a;\r\n        result[2] = source[2] + (target[2] - source[2]) * a;\r\n        result[3] = source[3] + (target[3] - source[3]) * a;\r\n        return result;\r\n    }\r\n\r\n}\r\nexport = CPURenderingContext2D;",
    "import ImageBase\t\t\t\t= require(\"awayjs-core/lib/data/ImageBase\");\r\nimport Rectangle\t\t\t\t= require(\"awayjs-core/lib/geom/Rectangle\");\r\nimport ImageUtils\t\t\t\t= require(\"awayjs-core/lib/utils/ImageUtils\");\r\n\r\nclass Image2D extends ImageBase\r\n{\r\n\tpublic static assetType:string = \"[image Image2D]\";\r\n\r\n\tpublic _rect:Rectangle;\r\n\r\n\tprivate _powerOfTwo:boolean = true;\r\n\r\n\t/**\r\n\t *\r\n\t * @returns {string}\r\n\t */\r\n\tpublic get assetType():string\r\n\t{\r\n\t\treturn Image2D.assetType;\r\n\t}\r\n\r\n\t/**\r\n\t * The height of the image in pixels.\r\n\t */\r\n\tpublic get height():number\r\n\t{\r\n\t\treturn this._rect.height;\r\n\t}\r\n\r\n\tpublic set height(value:number)\r\n\t{\r\n\t\tif (this._rect.height == value)\r\n\t\t\treturn;\r\n\r\n\t\tthis._setSize(this._rect.width, value);\r\n\t}\r\n\r\n\t/**\r\n\t * The rectangle that defines the size and location of the bitmap image. The\r\n\t * top and left of the rectangle are 0; the width and height are equal to the\r\n\t * width and height in pixels of the BitmapData object.\r\n\t */\r\n\tpublic get rect():Rectangle\r\n\t{\r\n\t\treturn this._rect;\r\n\t}\r\n\r\n\t/**\r\n\t * The width of the bitmap image in pixels.\r\n\t */\r\n\tpublic get width():number\r\n\t{\r\n\t\treturn this._rect.width;\r\n\t}\r\n\r\n\tpublic set width(value:number)\r\n\t{\r\n\t\tif (this._rect.width == value)\r\n\t\t\treturn;\r\n\r\n\t\tthis._setSize(value, this._rect.height);\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tconstructor(width:number, height:number, powerOfTwo:boolean = true)\r\n\t{\r\n\t\tsuper();\r\n\r\n\t\tthis._rect = new Rectangle(0, 0, width, height);\r\n\t\tthis._powerOfTwo = powerOfTwo;\r\n\t\tthis._testDimensions();\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t * @param width\r\n\t * @param height\r\n\t * @private\r\n\t */\r\n\tpublic _setSize(width:number, height:number)\r\n\t{\r\n\t\tif (this._rect.width != width || this._rect.height != height)\r\n\t\t\tthis.invalidateSize();\r\n\r\n\t\tthis._rect.width = width;\r\n\t\tthis._rect.height = height;\r\n\r\n\t\tthis._testDimensions();\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t * @private\r\n\t */\r\n\tprivate _testDimensions()\r\n\t{\r\n\t\tif (this._powerOfTwo && (!ImageUtils.isDimensionValid(this._rect.width) || !ImageUtils.isDimensionValid(this._rect.height)))\r\n\t\t\tthrow new Error(\"Invalid dimension: Width and height must be power of 2 and cannot exceed 2048\");\r\n\t}\r\n\r\n\t/**\r\n\t * Enable POT texture size validation\r\n\t * @returns {boolean}\r\n\t */\r\n\tpublic get powerOfTwo():boolean {\r\n\t\treturn this._powerOfTwo;\r\n\t}\r\n\r\n\tpublic set powerOfTwo(value:boolean) {\r\n\t\tif(this._powerOfTwo == value) return;\r\n\t\tthis._powerOfTwo = value;\r\n\t\tthis._testDimensions();\r\n\t}\r\n}\r\n\r\nexport = Image2D;",
    "import BlendMode\t\t\t\t= require(\"awayjs-core/lib/data/BlendMode\");\r\nimport ColorTransform\t\t\t= require(\"awayjs-core/lib/geom/ColorTransform\");\r\nimport Matrix\t\t\t\t\t= require(\"awayjs-core/lib/geom/Matrix\");\r\nimport Rectangle\t\t\t\t= require(\"awayjs-core/lib/geom/Rectangle\");\r\nimport IAsset\t\t\t\t\t= require(\"awayjs-core/lib/library/IAsset\");\r\nimport AssetBase\t\t\t\t= require(\"awayjs-core/lib/library/AssetBase\");\r\nimport IImageObject\t\t\t\t= require(\"awayjs-core/lib/pool/IImageObject\");\r\nimport ColorUtils\t\t\t\t= require(\"awayjs-core/lib/utils/ColorUtils\");\r\n\r\nclass ImageBase extends AssetBase implements IAsset\r\n{\r\n\tprivate _imageObject:Array<IImageObject> = new Array<IImageObject>();\r\n\r\n\tpublic _pFormat:string = \"bgra\";\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tconstructor()\r\n\t{\r\n\t\tsuper();\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tpublic invalidateContent():void\r\n\t{\r\n\t\tvar len:number = this._imageObject.length;\r\n\t\tfor (var i:number = 0; i < len; i++)\r\n\t\t\tthis._imageObject[i].invalidate();\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t * @private\r\n\t */\r\n\tpublic invalidateSize():void\r\n\t{\r\n\t\twhile (this._imageObject.length)\r\n\t\t\tthis._imageObject[0].dispose();\r\n\t}\r\n\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic dispose()\r\n\t{\r\n\t\twhile (this._imageObject.length)\r\n\t\t\tthis._imageObject[0].dispose();\r\n\t}\r\n\r\n\r\n\tpublic _iAddImageObject(ImageObject:IImageObject):IImageObject\r\n\t{\r\n\t\tthis._imageObject.push(ImageObject);\r\n\r\n\t\treturn ImageObject;\r\n\t}\r\n\r\n\tpublic _iRemoveImageObject(ImageObject:IImageObject):IImageObject\r\n\t{\r\n\t\tthis._imageObject.splice(this._imageObject.indexOf(ImageObject), 1);\r\n\r\n\t\treturn ImageObject;\r\n\t}\r\n\r\n\r\n\t/**\r\n\t *\r\n\t * @returns {string}\r\n\t */\r\n\tpublic get format():string\r\n\t{\r\n\t\treturn this._pFormat;\r\n\t}\r\n}\r\n\r\nexport = ImageBase;",
    "import ImageBase\t\t\t\t= require(\"awayjs-core/lib/data/ImageBase\");\r\nimport ImageUtils\t\t\t\t= require(\"awayjs-core/lib/utils/ImageUtils\");\r\n\r\nclass ImageCube extends ImageBase\r\n{\r\n\tpublic static assetType:string = \"[image ImageCube]\";\r\n\r\n\tpublic _size:number;\r\n\r\n\t/**\r\n\t *\r\n\t * @returns {string}\r\n\t */\r\n\tpublic get assetType():string\r\n\t{\r\n\t\treturn ImageCube.assetType;\r\n\t}\r\n\r\n\t/**\r\n\t * The size of the cube bitmap in pixels.\r\n\t */\r\n\tpublic get size():number\r\n\t{\r\n\t\treturn this._size;\r\n\t}\r\n\r\n\tpublic set size(value:number)\r\n\t{\r\n\t\tif (this._size == value)\r\n\t\t\treturn;\r\n\r\n\t\tthis._setSize(this._size);\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tconstructor(size:number)\r\n\t{\r\n\t\tsuper();\r\n\r\n\t\tthis._size = size;\r\n\r\n\t\tthis._testDimensions();\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t * @param width\r\n\t * @param height\r\n\t * @private\r\n\t */\r\n\tpublic _setSize(size:number)\r\n\t{\r\n\t\tif (this._size != size)\r\n\t\t\tthis.invalidateSize();\r\n\r\n\t\tthis._size = size;\r\n\r\n\t\tthis._testDimensions();\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t * @private\r\n\t */\r\n\tprivate _testDimensions()\r\n\t{\r\n\t\tif (!ImageUtils.isDimensionValid(this._size))\r\n\t\t\tthrow new Error(\"Invalid dimension: Width and height must be power of 2 and cannot exceed 2048\");\r\n\t}\r\n}\r\n\r\nexport = ImageCube;",
    "class ImageData {\r\n    public width: number;\r\n    public data: number[] = [];\r\n    public height: number;\r\n\r\n    constructor(width:number, height:number) {\r\n        this.width = width;\r\n        this.height = height;\r\n    }\r\n}\r\nexport = ImageData;",
    "import SamplerBase\t\t\t\t= require(\"awayjs-core/lib/data/SamplerBase\");\r\nimport Image2D\t\t\t\t\t= require(\"awayjs-core/lib/data/Image2D\");\r\nimport Rectangle\t\t\t\t= require(\"awayjs-core/lib/geom/Rectangle\");\r\nimport IAsset\t\t\t\t\t= require(\"awayjs-core/lib/library/IAsset\");\r\n\r\n/**\r\n * The Sampler2D class represents display objects that represent bitmap images.\r\n * These can be images that you load with the <code>flash.Assets</code> or\r\n * <code>flash.display.Loader</code> classes, or they can be images that you\r\n * create with the <code>Sampler2D()</code> constructor.\r\n *\r\n * <p>The <code>Sampler2D()</code> constructor allows you to create a Sampler2D\r\n * object that contains a reference to a Image2D object. After you create a\r\n * Sampler2D object, use the <code>addChild()</code> or <code>addChildAt()</code>\r\n * method of the parent DisplayObjectContainer instance to place the bitmap on\r\n * the display list.</p>\r\n *\r\n * <p>A Sampler2D object can share its Image2D reference among several Sampler2D\r\n * objects, independent of translation or rotation properties. Because you can\r\n * create multiple Sampler2D objects that reference the same Image2D object,\r\n * multiple texture objects can use the same complex Image2D object without\r\n * incurring the memory overhead of a Image2D object for each texture\r\n * object instance.</p>\r\n\r\n */\r\nclass Sampler2D extends SamplerBase\r\n{\r\n\tpublic static assetType:string = \"[asset Sampler2D]\";\r\n\r\n\tprivate _imageRect:Rectangle;\r\n\tprivate _frameRect:Rectangle;\r\n\tprivate _repeat:boolean;\r\n\r\n\t/**\r\n\t *\r\n\t * @returns {string}\r\n\t */\r\n\tpublic get assetType():string\r\n\t{\r\n\t\treturn Sampler2D.assetType;\r\n\t}\r\n\r\n\t/**\r\n\t * Controls whether or not the Sampler2D object is snapped to the nearest pixel.\r\n\t * This value is ignored in the native and HTML5 targets.\r\n\t * The PixelSnapping class includes possible values:\r\n\t * <ul>\r\n\t *   <li><code>PixelSnapping.NEVER</code> - No pixel snapping occurs.</li>\r\n\t *   <li><code>PixelSnapping.ALWAYS</code> - The image is always snapped to\r\n\t * the nearest pixel, independent of transformation.</li>\r\n\t *   <li><code>PixelSnapping.AUTO</code> - The image is snapped to the\r\n\t * nearest pixel if it is drawn with no rotation or skew and it is drawn at a\r\n\t * scale factor of 99.9% to 100.1%. If these conditions are satisfied, the\r\n\t * bitmap image is drawn at 100% scale, snapped to the nearest pixel.\r\n\t * When targeting Flash Player, this value allows the image to be drawn as fast\r\n\t * as possible using the internal vector renderer.</li>\r\n\t * </ul>\r\n\t */\r\n\t//var pixelSnapping:PixelSnapping;\r\n\r\n\r\n\t/**\r\n\t * Controls whether or not the bitmap is smoothed when scaled. If\r\n\t * <code>true</code>, the bitmap is smoothed when scaled. If\r\n\t * <code>false</code>, the bitmap is not smoothed when scaled.\r\n\t */\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tpublic get repeat():boolean\r\n\t{\r\n\t\treturn this._repeat;\r\n\t}\r\n\tpublic set repeat(value:boolean)\r\n\t{\r\n\t\tif (this._repeat == value)\r\n\t\t\treturn;\r\n\r\n\t\tthis._repeat = value;\r\n\r\n\t\t//TODO: update dependencies\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tpublic get imageRect():Rectangle\r\n\t{\r\n\t\treturn this._imageRect;\r\n\t}\r\n\tpublic set imageRect(value:Rectangle)\r\n\t{\r\n\t\tif (this._imageRect == value)\r\n\t\t\treturn;\r\n\r\n\t\tthis._imageRect = value;\r\n\r\n\t\tthis._updateRect();\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tpublic get frameRect():Rectangle\r\n\t{\r\n\t\treturn this._frameRect;\r\n\t}\r\n\tpublic set frameRect(value:Rectangle)\r\n\t{\r\n\t\tif (this._frameRect == value)\r\n\t\t\treturn;\r\n\r\n\t\tthis._frameRect = value;\r\n\r\n\t\tthis._updateRect();\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t * @param image2D\r\n\t * @param smoothing\r\n\t */\r\n\tconstructor(repeat:boolean = false, smooth:boolean = false, mipmap:boolean = false)\r\n\t{\r\n\t\tsuper(smooth, mipmap);\r\n\r\n\t\tthis._repeat = repeat;\r\n\r\n\t\tthis._updateRect();\r\n\t}\r\n\r\n\tprivate _updateRect()\r\n\t{\r\n\t}\r\n}\r\n\r\nexport = Sampler2D;",
    "import IAsset\t\t\t\t\t= require(\"awayjs-core/lib/library/IAsset\");\r\nimport AssetBase\t\t\t\t= require(\"awayjs-core/lib/library/AssetBase\");\r\n\r\n/**\r\n *\r\n */\r\nclass SamplerBase extends AssetBase implements IAsset\r\n{\r\n\tprivate _smooth:boolean;\r\n\tprivate _mipmap:boolean;\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tpublic get smooth():boolean\r\n\t{\r\n\t\treturn this._smooth;\r\n\t}\r\n\tpublic set smooth(value:boolean)\r\n\t{\r\n\t\tif (this._smooth == value)\r\n\t\t\treturn;\r\n\r\n\t\tthis._smooth = value;\r\n\r\n\t\t//TODO: update dependencies\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tpublic get mipmap():boolean\r\n\t{\r\n\t\treturn this._mipmap;\r\n\t}\r\n\tpublic set mipmap(value:boolean)\r\n\t{\r\n\t\tif (this._mipmap == value)\r\n\t\t\treturn;\r\n\r\n\t\tthis._mipmap = value;\r\n\r\n\t\t//TODO: update dependencies\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tconstructor(smooth:boolean = false, mipmap:boolean = false)\r\n\t{\r\n\t\tsuper();\r\n\r\n\t\tthis._smooth = smooth;\r\n\t\tthis._mipmap = mipmap;\r\n\t}\r\n}\r\n\r\nexport = SamplerBase;",
    "import SamplerBase\t\t\t\t= require(\"awayjs-core/lib/data/SamplerBase\");\r\nimport ImageCube\t\t\t\t= require(\"awayjs-core/lib/data/ImageCube\");\r\n\r\n/**\r\n * The Bitmap class represents display objects that represent bitmap images.\r\n * These can be images that you load with the <code>flash.Assets</code> or\r\n * <code>flash.display.Loader</code> classes, or they can be images that you\r\n * create with the <code>Bitmap()</code> constructor.\r\n *\r\n * <p>The <code>Bitmap()</code> constructor allows you to create a Bitmap\r\n * object that contains a reference to a BitmapData object. After you create a\r\n * Bitmap object, use the <code>addChild()</code> or <code>addChildAt()</code>\r\n * method of the parent DisplayObjectContainer instance to place the bitmap on\r\n * the display list.</p>\r\n *\r\n * <p>A Bitmap object can share its BitmapData reference among several Bitmap\r\n * objects, independent of translation or rotation properties. Because you can\r\n * create multiple Bitmap objects that reference the same BitmapData object,\r\n * multiple texture objects can use the same complex BitmapData object without\r\n * incurring the memory overhead of a BitmapData object for each texture\r\n * object instance.</p>\r\n\r\n */\r\nclass SamplerCube extends SamplerBase\r\n{\r\n\tpublic static assetType:string = \"[asset SamplerCube]\";\r\n\r\n\t/**\r\n\t *\r\n\t * @returns {string}\r\n\t */\r\n\tpublic get assetType():string\r\n\t{\r\n\t\treturn SamplerCube.assetType;\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t * @param bitmapData\r\n\t * @param smoothing\r\n\t */\r\n\tconstructor(smooth:boolean = false, mipmap:boolean = false)\r\n\t{\r\n\t\tsuper(smooth, mipmap);\r\n\t}\r\n}\r\n\r\nexport = SamplerCube;",
    "import BitmapImage2D\t\t\t= require(\"awayjs-core/lib/data/BitmapImage2D\");\r\nimport BitmapImageChannel\t\t= require(\"awayjs-core/lib/data/BitmapImageChannel\");\r\nimport Image2D\t\t\t\t\t= require(\"awayjs-core/lib/data/Image2D\");\r\nimport Point\t\t\t\t\t= require(\"awayjs-core/lib/geom/Point\");\r\n\r\n/**\r\n *\r\n */\r\nclass SpecularImage2D extends Image2D\r\n{\r\n\tpublic static assetType:string = \"[asset SpecularImage2D]\";\r\n\r\n\tprivate _specularSource:BitmapImage2D;\r\n\tprivate _glossSource:BitmapImage2D;\r\n\tprivate _output:BitmapImage2D;\r\n\r\n\t/**\r\n\t *\r\n\t * @returns {string}\r\n\t */\r\n\tpublic get assetType():string\r\n\t{\r\n\t\treturn SpecularImage2D.assetType;\r\n\t}\r\n\r\n\tpublic get specularSource():BitmapImage2D\r\n\t{\r\n\t\treturn this._specularSource;\r\n\t}\r\n\r\n\tpublic set specularSource(value:BitmapImage2D)\r\n\t{\r\n\t\tif (this._specularSource == value)\r\n\t\t\treturn;\r\n\r\n\t\tthis._specularSource = value;\r\n\r\n\t\tthis.invalidateContent();\r\n\r\n\t\tthis._testSize();\r\n\t}\r\n\r\n\r\n\tpublic get glossSource():BitmapImage2D\r\n\t{\r\n\t\treturn this._glossSource;\r\n\t}\r\n\r\n\tpublic set glossSource(value:BitmapImage2D)\r\n\t{\r\n\t\tif (this._glossSource == value)\r\n\t\t\treturn;\r\n\r\n\t\tthis._glossSource = value;\r\n\r\n\t\tthis.invalidateContent();\r\n\r\n\t\tthis._testSize();\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tconstructor(specularSource:BitmapImage2D = null, glossSource:BitmapImage2D = null)\r\n\t{\r\n\t\tsuper(1, 1);\r\n\r\n\t\tthis._specularSource = specularSource;\r\n\t\tthis._glossSource = glossSource;\r\n\r\n\t\tthis._output = new BitmapImage2D(1, 1, false, 0xffffff);\r\n\r\n\t\tthis._testSize();\r\n\t}\r\n\r\n\t/**\r\n\t * Returns a new SpecularImage2D object that is a clone of the original instance\r\n\t * with an exact copy of the contained bitmap.\r\n\t *\r\n\t * @return A new SpecularImage2D object that is identical to the original.\r\n\t */\r\n\tpublic clone():SpecularImage2D\r\n\t{\r\n\t\treturn new SpecularImage2D(this._specularSource, this._glossSource);\r\n\t}\r\n\r\n\t/**\r\n\t * Frees memory that is used to store the SpecularImage2D object.\r\n\t *\r\n\t * <p>When the <code>dispose()</code> method is called on an image, the width\r\n\t * and height of the image are set to 0. All subsequent calls to methods or\r\n\t * properties of this SpecularImage2D instance fail, and an exception is thrown.\r\n\t * </p>\r\n\t *\r\n\t * <p><code>SpecularImage2D.dispose()</code> releases the memory occupied by the\r\n\t * actual bitmap data, immediately(a bitmap can consume up to 64 MB of\r\n\t * memory). After using <code>SpecularImage2D.dispose()</code>, the SpecularImage2D\r\n\t * object is no longer usable and an exception may be thrown if\r\n\t * you call functions on the SpecularImage2D object. However,\r\n\t * <code>SpecularImage2D.dispose()</code> does not garbage collect the SpecularImage2D\r\n\t * object(approximately 128 bytes); the memory occupied by the actual\r\n\t * SpecularImage2D object is released at the time the SpecularImage2D object is\r\n\t * collected by the garbage collector.</p>\r\n\t *\r\n\t */\r\n\tpublic dispose()\r\n\t{\r\n\t\tsuper.dispose();\r\n\r\n\t\tthis._rect = null;\r\n\r\n\t\tthis._output.dispose();\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t * @returns {ImageData}\r\n\t */\r\n\tpublic getImageData():ImageData\r\n\t{\r\n\t\tvar origin:Point = new Point();\r\n\r\n\t\tthis._output.fillRect(this._rect, 0xffffff);\r\n\r\n\t\tif (this._glossSource)\r\n\t\t\tthis._output.copyChannel(this._glossSource, this._rect, origin, BitmapImageChannel.GREEN, BitmapImageChannel.GREEN);\r\n\r\n\t\tif (this._specularSource)\r\n\t\t\tthis._output.copyChannel(this._specularSource, this._rect, origin, BitmapImageChannel.RED, BitmapImageChannel.RED);\r\n\r\n\t\treturn this._output.getImageData();\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t * @returns {HTMLCanvasElement}\r\n\t */\r\n\tpublic getCanvas():HTMLCanvasElement\r\n\t{\r\n\t\treturn this._output.getCanvas();\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t * @param width\r\n\t * @param height\r\n\t * @private\r\n\t */\r\n\tpublic _setSize(width:number, height:number)\r\n\t{\r\n\t\tsuper._setSize(width, height);\r\n\r\n\t\tthis._output._setSize(width, height);\r\n\t}\r\n\r\n\tprivate _testSize()\r\n\t{\r\n\t\tvar w:number, h:number;\r\n\r\n\t\tif (this._specularSource) {\r\n\t\t\tw = this._specularSource.width;\r\n\t\t\th = this._specularSource.height;\r\n\t\t} else if (this._glossSource) {\r\n\t\t\tw = this._glossSource.width;\r\n\t\t\th = this._glossSource.height;\r\n\t\t} else {\r\n\t\t\tw = 1;\r\n\t\t\th = 1;\r\n\t\t}\r\n\r\n\t\tif (w != this._output.width && h != this._output.height) {\r\n\t\t\tthis._output.dispose();\r\n\t\t\tthis._output = new BitmapImage2D(w, h, false, 0xffffff);\r\n\t\t}\r\n\r\n\t\tthis._setSize(w, h);\r\n\t}\r\n}\r\n\r\nexport = SpecularImage2D;",
    "import IAudioChannel\t\t\t\t= require(\"awayjs-core/lib/managers/IAudioChannel\");\r\nimport AudioManager\t\t\t\t= require(\"awayjs-core/lib/managers/AudioManager\");\r\nimport BlendMode\t\t\t\t= require(\"awayjs-core/lib/data/BlendMode\");\r\nimport ColorTransform\t\t\t= require(\"awayjs-core/lib/geom/ColorTransform\");\r\nimport Matrix\t\t\t\t\t= require(\"awayjs-core/lib/geom/Matrix\");\r\nimport Rectangle\t\t\t\t= require(\"awayjs-core/lib/geom/Rectangle\");\r\nimport IAsset\t\t\t\t\t= require(\"awayjs-core/lib/library/IAsset\");\r\nimport AssetBase\t\t\t\t= require(\"awayjs-core/lib/library/AssetBase\");\r\nimport ParserUtils\t\t\t\t= require(\"awayjs-core/lib/parsers/ParserUtils\");\r\nimport ColorUtils\t\t\t\t= require(\"awayjs-core/lib/utils/ColorUtils\");\r\nimport Event\t\t\t\t\t= require(\"awayjs-core/lib/events/Event\");\r\n\r\n// TODO: Audio should probably be an interface containing play/stop/seek functionality\r\nclass WaveAudio extends AssetBase implements IAsset\r\n{\r\n\tpublic static assetType:string = \"[asset WaveAudio]\";\r\n\r\n\tprivate _audioChannel:IAudioChannel;\r\n\tprivate _volume:number = 1;\r\n\tprivate _buffer:ArrayBuffer;\r\n\r\n\t/**\r\n\t *\r\n\t * @returns {string}\r\n\t */\r\n\tpublic get assetType():string\r\n\t{\r\n\t\treturn WaveAudio.assetType;\r\n\t}\r\n\r\n\tpublic get volume():number\r\n\t{\r\n\t\treturn this._volume;\r\n\t}\r\n\r\n\tpublic set volume(value:number)\r\n\t{\r\n\t\tif (this._volume == value)\r\n\t\t\treturn;\r\n\r\n\t\tthis._volume = value;\r\n\r\n\t\tif (this._audioChannel)\r\n\t\t\tthis._audioChannel.volume = this._volume;\r\n\t}\r\n\r\n\tpublic get currentTime():number\r\n\t{\r\n\t\tif (this._audioChannel)\r\n\t\t\treturn this._audioChannel.currentTime;\r\n\r\n\t\treturn 0;\r\n\t}\r\n\r\n\tpublic get duration():number\r\n\t{\r\n\t\tif (this._audioChannel)\r\n\t\t\treturn this._audioChannel.duration;\r\n\r\n\t\treturn 0;\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tconstructor(buffer:ArrayBuffer)\r\n\t{\r\n\t\tsuper();\r\n\r\n\t\tthis._buffer = buffer;\r\n\t}\r\n\r\n\tpublic dispose()\r\n\t{\r\n\t\tthis.stop();\r\n\t}\r\n\r\n\tpublic play(offset:number, loop:boolean = false)\r\n\t{\r\n\t\tthis._audioChannel = AudioManager.getChannel(this._buffer.byteLength);\r\n\r\n\t\tif (this._audioChannel) {\r\n\t\t\tthis._audioChannel.volume = this._volume;\r\n\t\t\tthis._audioChannel.play(this._buffer, offset, loop, this.id);\r\n\t\t}\r\n\t}\r\n\r\n\tpublic stop()\r\n\t{\r\n\t\tif (this._audioChannel)\r\n\t\t\tthis._audioChannel.stop();\r\n\r\n\t\tdelete this._audioChannel;\r\n\t\tthis._audioChannel = null;\r\n\t}\r\n\r\n\tpublic clone()\r\n\t{\r\n\t\tvar newInstance:WaveAudio = new WaveAudio(this._buffer);\r\n\r\n\t\tnewInstance.name = this.name;\r\n\r\n\t\treturn newInstance;\r\n\t}\r\n}\r\n\r\nexport = WaveAudio;",
    "import Error\t\t\t\t\t= require(\"awayjs-core/lib/errors/Error\");\r\n\r\n/**\r\n * AbstractMethodError is thrown when an abstract method is called. The method in question should be overridden\r\n * by a concrete subclass.\r\n */\r\nclass AbstractMethodError extends Error\r\n{\r\n\t/**\r\n\t * Create a new AbstractMethodError.\r\n\t * @param message An optional message to override the default error message.\r\n\t * @param id The id of the error.\r\n\t */\r\n\tconstructor(message:string = null, id:number = 0)\r\n\t{\r\n\t\tsuper(message || \"An abstract method was called! Either an instance of an abstract class was created, or an abstract method was not overridden by the subclass.\", id);\r\n\t}\r\n}\r\n\r\nexport = AbstractMethodError;",
    "import Error\t\t\t\t\t= require(\"awayjs-core/lib/errors/Error\");\r\n\r\n/**\r\n * AbstractMethodError is thrown when an abstract method is called. The method in question should be overridden\r\n * by a concrete subclass.\r\n */\r\nclass ArgumentError extends Error\r\n{\r\n\t/**\r\n\t * Create a new ArgumentError.\r\n\t *\r\n\t * @param message An optional message to override the default error message.\r\n\t * @param id The id of the error.\r\n\t */\r\n\tconstructor(message:string = null, id:number = 0)\r\n\t{\r\n\t\tsuper(message || \"ArgumentError\", id);\r\n\t}\r\n}\r\n\r\nexport = ArgumentError;",
    "import Error\t\t\t\t\t= require(\"awayjs-core/lib/errors/Error\");\r\n\r\nclass DocumentError extends Error\r\n{\r\n\tpublic static DOCUMENT_DOES_NOT_EXIST:string = \"documentDoesNotExist\";\r\n\r\n\tconstructor(message:string = \"DocumentError\", id:number = 0)\r\n\t{\r\n\t\tsuper(message, id);\r\n\t}\r\n}\r\n\r\nexport = DocumentError;",
    "class Error\r\n{\r\n\r\n\tprivate _errorID:number = 0;   //Contains the reference number associated with the specific error message.\r\n\tprivate _messsage:string = '';  //Contains the message associated with the Error object.\r\n\tprivate _name:string = '';  // Contains the name of the Error object.\r\n\r\n\tconstructor(message:string = '', id:number = 0, _name:string = '')\r\n\t{\r\n\r\n\t\tthis._messsage = message;\r\n\t\tthis._name = name;\r\n\t\tthis._errorID = id;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t * @returns {string}\r\n\t */\r\n\tpublic get message():string\r\n\t{\r\n\r\n\t\treturn this._messsage;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t * @param value\r\n\t */\r\n\tpublic set message(value:string)\r\n\t{\r\n\r\n\t\tthis._messsage = value;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t * @returns {string}\r\n\t */\r\n\tpublic get name():string\r\n\t{\r\n\r\n\t\treturn this._name;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t * @param value\r\n\t */\r\n\tpublic set name(value:string)\r\n\t{\r\n\r\n\t\tthis._name = value;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t * @returns {number}\r\n\t */\r\n\tpublic get errorID():number\r\n\t{\r\n\r\n\t\treturn this._errorID;\r\n\r\n\t}\r\n\r\n}\r\n\r\nexport = Error;",
    "import Error\t\t\t\t\t= require(\"awayjs-core/lib/errors/Error\");\r\n\r\n/**\r\n * AbstractMethodError is thrown when an abstract method is called. The method in question should be overridden\r\n * by a concrete subclass.\r\n */\r\nclass PartialImplementationError extends Error\r\n{\r\n\t/**\r\n\t * Create a new AbstractMethodError.\r\n\t * @param message An optional message to override the default error message.\r\n\t * @param id The id of the error.\r\n\t */\r\n\tconstructor(dependency:string = '', id:number = 0)\r\n\t{\r\n\t\tsuper(\"PartialImplementationError - this function is in development. Required Dependency: \" + dependency, id);\r\n\t}\r\n}\r\n\r\nexport = PartialImplementationError;",
    "import Error\t\t\t\t\t= require(\"awayjs-core/lib/errors/Error\");\r\n\r\n/**\r\n * RangeError is thrown when an index is accessed out of range of the number of\r\n * available indices on an Array.\r\n */\r\nclass RangeError extends Error\r\n{\r\n\t/**\r\n\t * Create a new RangeError.\r\n\t *\r\n\t * @param message An optional message to override the default error message.\r\n\t * @param id The id of the error.\r\n\t */\r\n\tconstructor(message:string = null, id:number = 0)\r\n\t{\r\n\t\tsuper(message || \"RangeError\", id);\r\n\t}\r\n}\r\n\r\nexport = RangeError;",
    "import IAsset\t\t\t\t\t= require(\"awayjs-core/lib/library/IAsset\");\r\nimport Event\t\t\t\t\t= require(\"awayjs-core/lib/events/Event\");\r\n\r\n/**\r\n * @class away.events.AssetEvent\r\n */\r\nclass AssetEvent extends Event\r\n{\r\n\t/**\r\n\t *\r\n\t */\r\n\tpublic static ASSET_COMPLETE:string = \"assetComplete\";\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tpublic static ASSET_RENAME:string = 'assetRename';\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tpublic static ASSET_CONFLICT_RESOLVED:string = 'assetConflictResolved';\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tpublic static TEXTURE_SIZE_ERROR:string = 'textureSizeError';\r\n\r\n\tprivate _asset:IAsset;\r\n\tprivate _prevName:string;\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tconstructor(type:string, asset:IAsset = null, prevName:string = null)\r\n\t{\r\n\t\tsuper(type);\r\n\r\n\t\tthis._asset = asset;\r\n\t\tthis._prevName = prevName || (this._asset? this._asset.name : null);\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tpublic get asset():IAsset\r\n\t{\r\n\t\treturn this._asset;\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tpublic get assetPrevName():string\r\n\t{\r\n\t\treturn this._prevName;\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tpublic clone():Event\r\n\t{\r\n\t\treturn <Event> new AssetEvent(this.type, this.asset, this.assetPrevName);\r\n\t}\r\n}\r\n\r\nexport = AssetEvent;",
    "import Event\t\t\t\t\t\t= require(\"awayjs-core/lib/events/Event\");\r\n\r\n/**\r\n * Base class for dispatching events\r\n*\r\n* @class away.events.EventDispatcher\r\n*\r\n*/\r\nclass EventDispatcher\r\n{\r\n\tprivate listeners:Array<Array<Function>> = new Array<Array<Function>>();\r\n\tprivate target:any;\r\n\r\n\tconstructor(target:any = null)\r\n\t{\r\n\t\tthis.target = target || this;\r\n\t}\r\n\r\n\t/**\r\n\t * Add an event listener\r\n\t * @method addEventListener\r\n\t * @param {String} Name of event to add a listener for\r\n\t * @param {Function} Callback function\r\n\t */\r\n\tpublic addEventListener(type:string, listener:Function)\r\n\t{\r\n\t\tif (this.listeners[ type ] === undefined)\r\n\t\t\tthis.listeners[ type ] = new Array<Function>();\r\n\r\n\t\tif (this.getEventListenerIndex(type, listener) === -1)\r\n\t\t\tthis.listeners[ type ].push(listener);\r\n\t}\r\n\r\n\t/**\r\n\t * Remove an event listener\r\n\t * @method removeEventListener\r\n\t * @param {String} Name of event to remove a listener for\r\n\t * @param {Function} Callback function\r\n\t */\r\n\tpublic removeEventListener(type:string, listener:Function)\r\n\t{\r\n\t\tvar index:number = this.getEventListenerIndex(type, listener);\r\n\r\n\t\tif (index !== -1)\r\n\t\t\tthis.listeners[ type ].splice(index, 1);\r\n\t}\r\n\r\n\t/**\r\n\t * Dispatch an event\r\n\t * @method dispatchEvent\r\n\t * @param {Event} Event to dispatch\r\n\t */\r\n\tpublic dispatchEvent(event:Event)\r\n\t{\r\n\t\tvar listenerArray:Array<Function> = this.listeners[ event.type ];\r\n\r\n\t\tif (listenerArray !== undefined) {\r\n\t\t\tvar l:number = listenerArray.length;\r\n\r\n\t\t\tevent.target = this.target;\r\n\r\n\t\t\tfor (var i:number = 0; i < l; i++)\r\n\t\t\t\tlistenerArray[i](event);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * get Event Listener Index in array. Returns -1 if no listener is added\r\n\t * @method getEventListenerIndex\r\n\t * @param {String} Name of event to remove a listener for\r\n\t * @param {Function} Callback function\r\n\t */\r\n\tprivate getEventListenerIndex(type:string, listener:Function):number\r\n\t{\r\n\t\tif (this.listeners[ type ] !== undefined) {\r\n\t\t\tvar a:Array<Function> = this.listeners[ type ];\r\n\t\t\tvar l:number = a.length;\r\n\r\n\t\t\tfor (var i:number = 0; i < l; i++)\r\n\t\t\t\tif (listener == a[i])\r\n\t\t\t\t\treturn i;\r\n\t\t}\r\n\r\n\t\treturn -1;\r\n\t}\r\n\r\n\t/**\r\n\t * check if an object has an event listener assigned to it\r\n\t * @method hasListener\r\n\t * @param {String} Name of event to remove a listener for\r\n\t * @param {Function} Callback function\r\n\t */\r\n\tpublic hasEventListener(type:string, listener?:Function):boolean\r\n\t{\r\n\t\tif (listener != null) {\r\n\t\t\treturn ( this.getEventListenerIndex(type, listener) !== -1 );\r\n\t\t} else {\r\n\t\t\tif (this.listeners[ type ] !== undefined)\r\n\t\t\t\treturn ( this.listeners[ type ].length > 0 );\r\n\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t}\r\n}\r\n\r\nexport = EventDispatcher;",
    "class Event\r\n{\r\n\r\n\tpublic static COMPLETE:string = 'complete';\r\n\tpublic static OPEN:string = 'open';\r\n\r\n\tpublic static ENTER_FRAME:string = 'enterFrame';\r\n\tpublic static EXIT_FRAME:string = 'exitFrame';\r\n\r\n\r\n\tpublic static RESIZE:string = \"resize\";\r\n\tpublic static ERROR:string = \"error\";\r\n\tpublic static CHANGE:string = \"change\";\r\n\r\n\t/**\r\n\t * Type of event\r\n\t * @property type\r\n\t * @type String\r\n\t */\r\n\tpublic type:string = undefined;\r\n\r\n\t/**\r\n\t * Reference to target object\r\n\t * @property target\r\n\t * @type Object\r\n\t */\r\n\tpublic target:any = undefined;\r\n\r\n\tconstructor(type:string)\r\n\t{\r\n\t\tthis.type = type;\r\n\t}\r\n\r\n\t/**\r\n\t * Clones the current event.\r\n\t * @return An exact duplicate of the current event.\r\n\t */\r\n\tpublic clone():Event\r\n\t{\r\n\t\treturn new Event(this.type);\r\n\t}\r\n}\r\n\r\nexport = Event;",
    "import Event\t\t\t\t\t= require(\"awayjs-core/lib/events/Event\");\r\n\r\n/**\r\n * @class away.events.HTTPStatusEvent\r\n */\r\nclass HTTPStatusEvent extends Event\r\n{\r\n\r\n\tpublic static HTTP_STATUS:string = \"httpStatus\";\r\n\r\n\tpublic status:number;\r\n\r\n\tconstructor(type:string, status:number = null)\r\n\t{\r\n\t\tsuper(type);\r\n\r\n\t\tthis.status = status;\r\n\r\n\t}\r\n}\r\n\r\nexport = HTTPStatusEvent;",
    "import Event\t\t\t\t\t= require(\"awayjs-core/lib/events/Event\");\r\n\r\nclass IOErrorEvent extends Event\r\n{\r\n\r\n\tpublic static IO_ERROR:string = \"ioError\";\r\n\r\n\tconstructor(type:string)\r\n\t{\r\n\t\tsuper(type);\r\n\r\n\t}\r\n}\r\n\r\nexport = IOErrorEvent;",
    "import IAsset\t\t\t\t\t= require(\"awayjs-core/lib/library/IAsset\");\r\nimport Event\t\t\t\t\t= require(\"awayjs-core/lib/events/Event\");\r\n\r\nclass LoaderEvent extends Event\r\n{\r\n\t/**\r\n\t * Dispatched when a resource and all of its dependencies is retrieved.\r\n\t */\r\n\tpublic static RESOURCE_COMPLETE:string = \"resourceComplete\";\r\n\r\n\tprivate _url:string;\r\n\tprivate _content:IAsset;\r\n\tprivate _assets:IAsset[];\r\n\r\n\t/**\r\n\t * Create a new LoaderEvent object.\r\n\t *\r\n\t * @param type The event type.\r\n\t * @param url The url of the loaded resource.\r\n\t * @param assets The assets of the loaded resource.\r\n\t */\r\n\tconstructor(type:string, url:string = null, content:IAsset = null, assets:Array<IAsset> = null)\r\n\t{\r\n\t\tsuper(type);\r\n\r\n\t\tthis._url = url;\r\n\t\tthis._content = content;\r\n\t\tthis._assets = assets;\r\n\t}\r\n\r\n\t/**\r\n\t * The content returned if the resource has been loaded inside a <code>Loader</code> object.\r\n\t */\r\n\tpublic get content():IAsset\r\n\t{\r\n\t\treturn this._content;\r\n\t}\r\n\r\n\t/**\r\n\t * The url of the loaded resource.\r\n\t */\r\n\tpublic get url():string\r\n\t{\r\n\t\treturn this._url;\r\n\t}\r\n\r\n\t/**\r\n\t * The error string on loadError.\r\n\t */\r\n\tpublic get assets():IAsset[]\r\n\t{\r\n\t\treturn this._assets;\r\n\t}\r\n\r\n\t/**\r\n\t * Clones the current event.\r\n\t * @return An exact duplicate of the current event.\r\n\t */\r\n\tpublic clone():Event\r\n\t{\r\n\t\treturn <Event> new LoaderEvent(this.type, this._url, this._content, this._assets);\r\n\t}\r\n}\r\n\r\nexport = LoaderEvent;",
    "import Event\t\t\t\t\t= require(\"awayjs-core/lib/events/Event\");\r\n\r\nclass ParserEvent extends Event\r\n{\r\n\tprivate _message:string;\r\n\r\n\t/**\r\n\t * Dispatched when parsing of an asset completed.\r\n\t */\r\n\tpublic static PARSE_COMPLETE:string = 'parseComplete';\r\n\r\n\t/**\r\n\t * Dispatched when an error occurs while parsing the data (e.g. because it's\r\n\t * incorrectly formatted.)\r\n\t */\r\n\tpublic static PARSE_ERROR:string = 'parseError';\r\n\r\n\r\n\t/**\r\n\t * Dispatched when a parser is ready to have dependencies retrieved and resolved.\r\n\t * This is an internal event that should rarely (if ever) be listened for by\r\n\t * external classes.\r\n\t */\r\n\tpublic static READY_FOR_DEPENDENCIES:string = 'readyForDependencies';\r\n\r\n\r\n\tconstructor(type:string, message:string = '')\r\n\t{\r\n\t\tsuper(type);\r\n\r\n\t\tthis._message = message;\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * Additional human-readable message. Usually supplied for ParserEvent.PARSE_ERROR events.\r\n\t */\r\n\tpublic get message():string\r\n\t{\r\n\t\treturn this._message;\r\n\t}\r\n\r\n\r\n\tpublic clone():Event\r\n\t{\r\n\t\treturn new ParserEvent(this.type, this.message);\r\n\t}\r\n}\r\n\r\nexport = ParserEvent;",
    "import Event\t\t\t\t\t= require(\"awayjs-core/lib/events/Event\");\r\n\r\nclass ProgressEvent extends Event\r\n{\r\n\tpublic static PROGRESS:string = \"progress\";\r\n\r\n\tpublic bytesLoaded:number;\r\n\r\n\tpublic bytesTotal:number;\r\n\r\n\tconstructor(type:string)\r\n\t{\r\n\t\tsuper(type);\r\n\t}\r\n}\r\n\r\nexport = ProgressEvent;",
    "import Event\t\t\t\t\t= require(\"awayjs-core/lib/events/Event\");\r\nimport IProjection\t\t\t\t= require(\"awayjs-core/lib/projections/IProjection\");\r\n\r\nclass ProjectionEvent extends Event\r\n{\r\n\tpublic static MATRIX_CHANGED:string = \"matrixChanged\";\r\n\r\n\tprivate _projection:IProjection;\r\n\r\n\tconstructor(type:string, projection:IProjection)\r\n\t{\r\n\t\tsuper(type);\r\n\t\tthis._projection = projection;\r\n\t}\r\n\r\n\tpublic get projection():IProjection\r\n\t{\r\n\t\treturn this._projection;\r\n\t}\r\n}\r\n\r\nexport = ProjectionEvent;",
    "import Event\t\t\t\t\t= require(\"awayjs-core/lib/events/Event\");\r\n\r\nclass TimerEvent extends Event\r\n{\r\n\r\n\tpublic static TIMER:string = \"timer\";\r\n\tpublic static TIMER_COMPLETE:string = \"timerComplete\";\r\n\r\n\tconstructor(type:string)\r\n\t{\r\n\t\tsuper(type);\r\n\r\n\t}\r\n}\r\n\r\nexport = TimerEvent",
    "import Vector3D\t\t\t\t\t= require(\"awayjs-core/lib/geom/Vector3D\");\r\n\r\n/**\r\n * A Box object is an area defined by its position, as indicated by its\r\n * top-left-front corner point(<i>x</i>, <i>y</i>, <i>z</i>) and by its width,\r\n * height and depth.\r\n *\r\n *\r\n * <p>The <code>x</code>, <code>y</code>, <code>z</code>, <code>width</code>,\r\n * <code>height</code> <code>depth</code> properties of the Box class are\r\n * independent of each other; changing the value of one property has no effect\r\n * on the others. However, the <code>right</code>, <code>bottom</code> and\r\n * <code>back</code> properties are integrally related to those six\r\n * properties. For example, if you change the value of the <code>right</code>\r\n * property, the value of the <code>width</code> property changes; if you\r\n * change the <code>bottom</code> property, the value of the\r\n * <code>height</code> property changes. </p>\r\n *\r\n * <p>The following methods and properties use Box objects:</p>\r\n *\r\n * <ul>\r\n *   <li>The <code>bounds</code> property of the DisplayObject class</li>\r\n * </ul>\r\n *\r\n * <p>You can use the <code>new Box()</code> constructor to create a\r\n * Box object.</p>\r\n *\r\n * <p><b>Note:</b> The Box class does not define a cubic Shape\r\n * display object.\r\n */\r\nclass Box\r\n{\r\n\tprivate _size:Vector3D;\r\n\tprivate _bottomRightBack:Vector3D;\r\n\tprivate _topLeftFront:Vector3D;\r\n\r\n\t/**\r\n\t * The height of the box, in pixels. Changing the <code>height</code> value\r\n\t * of a Box object has no effect on the <code>x</code>, <code>y</code>,\r\n\t * <code>z</code>, <code>depth</code> and <code>width</code> properties.\r\n\t */\r\n\tpublic height:number;\r\n\r\n\t/**\r\n\t * The width of the box, in pixels. Changing the <code>width</code> value\r\n\t * of a Box object has no effect on the <code>x</code>, <code>y</code>,\r\n\t * <code>z</code>, <code>depth</code> and <code>height</code> properties.\r\n\t */\r\n\tpublic width:number;\r\n\r\n\t/**\r\n\t * The deoth of the box, in pixels. Changing the <code>depth</code> value\r\n\t * of a Box object has no effect on the <code>x</code>, <code>y</code>,\r\n\t * <code>z</code>, <code>width</code> and <code>height</code> properties.\r\n\t */\r\n\tpublic depth:number;\r\n\r\n\t/**\r\n\t * The <i>x</i> coordinate of the top-left-front corner of the box.\r\n\t * Changing the value of the <code>x</code> property of a Box object has no\r\n\t * effect on the <code>y</code>, <code>z</code>, <code>width</code>,\r\n\t * <code>height</code> and <code>depth</code> properties.\r\n\t *\r\n\t * <p>The value of the <code>x</code> property is equal to the value of the\r\n\t * <code>left</code> property.</p>\r\n\t */\r\n\tpublic x:number;\r\n\r\n\t/**\r\n\t * The <i>y</i> coordinate of the top-left-front corner of the box.\r\n\t * Changing the value of the <code>y</code> property of a Box object has no\r\n\t * effect on the <code>x</code>, <code>z</code>, <code>width</code>,\r\n\t * <code>height</code> and <code>depth</code> properties.\r\n\t *\r\n\t * <p>The value of the <code>y</code> property is equal to the value of the\r\n\t * <code>top</code> property.</p>\r\n\t */\r\n\tpublic y:number;\r\n\r\n\t/**\r\n\t * The <i>y</i> coordinate of the top-left-front corner of the box.\r\n\t * Changing the value of the <code>z</code> property of a Box object has no\r\n\t * effect on the <code>x</code>, <code>y</code>, <code>width</code>,\r\n\t * <code>height</code> and <code>depth</code> properties.\r\n\t *\r\n\t * <p>The value of the <code>z</code> property is equal to the value of the\r\n\t * <code>front</code> property.</p>\r\n\t */\r\n\tpublic z:number\r\n\r\n\t/**\r\n\t * The sum of the <code>z</code> and <code>height</code> properties.\r\n\t */\r\n\tpublic get back():number\r\n\t{\r\n\t\treturn this.z + this.depth;\r\n\t}\r\n\r\n\tpublic set back(val:number)\r\n\t{\r\n\t\tthis.depth = val - this.z;\r\n\t}\r\n\r\n\t/**\r\n\t * The sum of the <code>y</code> and <code>height</code> properties.\r\n\t */\r\n\tpublic get bottom():number\r\n\t{\r\n\t\treturn this.y + this.height;\r\n\t}\r\n\r\n\tpublic set bottom(val:number)\r\n\t{\r\n\t\tthis.height = val - this.y;\r\n\t}\r\n\r\n\t/**\r\n\t * The location of the Box object's bottom-right corner, determined by the\r\n\t * values of the <code>right</code> and <code>bottom</code> properties.\r\n\t */\r\n\tpublic get bottomRightBack():Vector3D\r\n\t{\r\n\t\tif (this._bottomRightBack == null)\r\n\t\t\tthis._bottomRightBack = new Vector3D();\r\n\r\n\t\tthis._bottomRightBack.x = this.x + this.width;\r\n\t\tthis._bottomRightBack.y = this.y + this.height;\r\n\t\tthis._bottomRightBack.z = this.z + this.depth;\r\n\r\n\t\treturn this._bottomRightBack;\r\n\t}\r\n\r\n\t/**\r\n\t * The <i>z</i> coordinate of the top-left-front corner of the box. Changing\r\n\t * the <code>front</code> property of a Box object has no effect on the\r\n\t * <code>x</code>, <code>y</code>, <code>width</code> and <code>height</code>\r\n\t * properties. However it does affect the <code>depth</code> property,\r\n\t * whereas changing the <code>z</code> value does <i>not</i> affect the\r\n\t * <code>depth</code> property.\r\n\t *\r\n\t * <p>The value of the <code>left</code> property is equal to the value of\r\n\t * the <code>x</code> property.</p>\r\n\t */\r\n\tpublic get front():number\r\n\t{\r\n\t\treturn this.z;\r\n\t}\r\n\r\n\tpublic set front(val:number)\r\n\t{\r\n\t\tthis.depth += this.z - val;\r\n\t\tthis.z = val;\r\n\t}\r\n\r\n\t/**\r\n\t * The <i>x</i> coordinate of the top-left corner of the box. Changing the\r\n\t * <code>left</code> property of a Box object has no effect on the\r\n\t * <code>y</code> and <code>height</code> properties. However it does affect\r\n\t * the <code>width</code> property, whereas changing the <code>x</code> value\r\n\t * does <i>not</i> affect the <code>width</code> property.\r\n\t *\r\n\t * <p>The value of the <code>left</code> property is equal to the value of\r\n\t * the <code>x</code> property.</p>\r\n\t */\r\n\tpublic get left():number\r\n\t{\r\n\t\treturn this.x;\r\n\t}\r\n\r\n\tpublic set left(val:number)\r\n\t{\r\n\t\tthis.width += this.x - val;\r\n\t\tthis.x = val;\r\n\t}\r\n\r\n\t/**\r\n\t * The sum of the <code>x</code> and <code>width</code> properties.\r\n\t */\r\n\tpublic get right():number\r\n\t{\r\n\t\treturn this.x + this.width;\r\n\t}\r\n\r\n\tpublic set right(val:number)\r\n\t{\r\n\t\tthis.width = val - this.x;\r\n\t}\r\n\r\n\t/**\r\n\t * The size of the Box object, expressed as a Vector3D object with the\r\n\t * values of the <code>width</code>, <code>height</code> and\r\n\t * <code>depth</code> properties.\r\n\t */\r\n\tpublic get size():Vector3D\r\n\t{\r\n\t\tif (this._size == null)\r\n\t\t\tthis._size = new Vector3D();\r\n\r\n\t\tthis._size.x = this.width;\r\n\t\tthis._size.y = this.height;\r\n\t\tthis._size.z = this.depth;\r\n\r\n\t\treturn this._size;\r\n\t}\r\n\r\n\t/**\r\n\t * The <i>y</i> coordinate of the top-left-front corner of the box. Changing\r\n\t * the <code>top</code> property of a Box object has no effect on the\r\n\t * <code>x</code> and <code>width</code> properties. However it does affect\r\n\t * the <code>height</code> property, whereas changing the <code>y</code>\r\n\t * value does <i>not</i> affect the <code>height</code> property.\r\n\t *\r\n\t * <p>The value of the <code>top</code> property is equal to the value of the\r\n\t * <code>y</code> property.</p>\r\n\t */\r\n\tpublic get top():number\r\n\t{\r\n\t\treturn this.y;\r\n\t}\r\n\r\n\tpublic set top(val:number)\r\n\t{\r\n\t\tthis.height += (this.y - val);\r\n\t\tthis.y = val;\r\n\t}\r\n\r\n\t/**\r\n\t * The location of the Box object's top-left-front corner, determined by the\r\n\t * <i>x</i>, <i>y</i> and <i>z</i> coordinates of the point.\r\n\t */\r\n\tpublic get topLeftFront():Vector3D\r\n\t{\r\n\t\tif (this._topLeftFront == null)\r\n\t\t\tthis._topLeftFront = new Vector3D();\r\n\r\n\t\tthis._topLeftFront.x = this.x;\r\n\t\tthis._topLeftFront.y = this.y;\r\n\t\tthis._topLeftFront.z = this.z;\r\n\r\n\t\treturn this._topLeftFront;\r\n\t}\r\n\r\n\t/**\r\n\t * Creates a new Box object with the top-left-front corner specified by the\r\n\t * <code>x</code>, <code>y</code> and <code>z</code> parameters and with the\r\n\t * specified <code>width</code>, <code>height</code> and <code>depth</code>\r\n\t * parameters. If you call this public without parameters, a box with\r\n\t * <code>x</code>, <code>y</code>, <code>z</code>, <code>width</code>,\r\n\t * <code>height</code> and <code>depth</code> properties set to 0 is created.\r\n\t *\r\n\t * @param x      The <i>x</i> coordinate of the top-left-front corner of the\r\n\t *               box.\r\n\t * @param y      The <i>y</i> coordinate of the top-left-front corner of the\r\n\t *               box.\r\n\t * @param z      The <i>z</i> coordinate of the top-left-front corner of the\r\n\t *               box.\r\n\t * @param width  The width of the box, in pixels.\r\n\t * @param height The height of the box, in pixels.\r\n\t * @param depth The depth of the box, in pixels.\r\n\t */\r\n\tconstructor(x:number = 0, y:number = 0, z:number = 0, width:number = 0, height:number = 0, depth:number = 0)\r\n\t{\r\n\t\tthis.x = x;\r\n\t\tthis.y = y;\r\n\t\tthis.z = z;\r\n\t\tthis.width = width;\r\n\t\tthis.height = height;\r\n\t\tthis.depth = depth;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns a new Box object with the same values for the <code>x</code>,\r\n\t * <code>y</code>, <code>z</code>, <code>width</code>, <code>height</code>\r\n\t * and <code>depth</code> properties as the original Box object.\r\n\t *\r\n\t * @return A new Box object with the same values for the <code>x</code>,\r\n\t *         <code>y</code>, <code>z</code>, <code>width</code>,\r\n\t *         <code>height</code> and <code>depth</code> properties as the\r\n\t *         original Box object.\r\n\t */\r\n\tpublic clone():Box\r\n\t{\r\n\t\treturn new Box(this.x, this.y, this.z, this.width, this.height, this.depth);\r\n\t}\r\n\r\n\t/**\r\n\t * Determines whether the specified position is contained within the cubic\r\n\t * region defined by this Box object.\r\n\t *\r\n\t * @param x The <i>x</i> coordinate(horizontal component) of the position.\r\n\t * @param y The <i>y</i> coordinate(vertical component) of the position.\r\n\t * @param z The <i>z</i> coordinate(longitudinal component) of the position.\r\n\t * @return A value of <code>true</code> if the Box object contains the\r\n\t *         specified position; otherwise <code>false</code>.\r\n\t */\r\n\tpublic contains(x:number, y:number, z:number):boolean\r\n\t{\r\n\t\treturn (this.x <= x && this.x + this.width >= x && this.y <= y && this.y + this.height >= y && this.z <= z && this.z + this.depth >= z);\r\n\t}\r\n\r\n\t/**\r\n\t * Determines whether the specified position is contained within the cubic\r\n\t * region defined by this Box object. This method is similar to the\r\n\t * <code>Box.contains()</code> method, except that it takes a Vector3D\r\n\t * object as a parameter.\r\n\t *\r\n\t * @param position The position, as represented by its <i>x</i>, <i>y</i> and\r\n\t *                 <i>z</i> coordinates.\r\n\t * @return A value of <code>true</code> if the Box object contains the\r\n\t *         specified position; otherwise <code>false</code>.\r\n\t */\r\n\tpublic containsPoint(position:Vector3D):boolean\r\n\t{\r\n\t\treturn (this.x <= position.x && this.x + this.width >= position.x && this.y <= position.y && this.y + this.height >= position.y && this.z <= position.z && this.z + this.depth >= position.z);\r\n\t}\r\n\r\n\t/**\r\n\t * Determines whether the Box object specified by the <code>box</code>\r\n\t * parameter is contained within this Box object. A Box object is said to\r\n\t * contain another if the second Box object falls entirely within the\r\n\t * boundaries of the first.\r\n\t *\r\n\t * @param box The Box object being checked.\r\n\t * @return A value of <code>true</code> if the Box object that you specify\r\n\t *         is contained by this Box object; otherwise <code>false</code>.\r\n\t */\r\n\tpublic containsBox(box:Box):boolean\r\n\t{\r\n\t\treturn (this.x <= box.x && this.x + this.width >= box.x + box.width && this.y <= box.y && this.y + this.height >= box.y + box.height && this.z <= box.z && this.z + this.depth >= box.z + box.depth)\r\n\t}\r\n\r\n\t/**\r\n\t * Copies all of box data from the source Box object into the calling\r\n\t * Box object.\r\n\t *\r\n\t * @param sourceBox The Box object from which to copy the data.\r\n\t */\r\n\tpublic copyFrom(sourceBox:Box)\r\n\t{\r\n\t\tthis.x = sourceBox.x;\r\n\t\tthis.y = sourceBox.y;\r\n\t\tthis.z = sourceBox.z;\r\n\t\tthis.width = sourceBox.width;\r\n\t\tthis.height = sourceBox.height;\r\n\t\tthis.depth = sourceBox.depth;\r\n\t}\r\n\r\n\t/**\r\n\t * Determines whether the object specified in the <code>toCompare</code>\r\n\t * parameter is equal to this Box object. This method compares the\r\n\t * <code>x</code>, <code>y</code>, <code>z</code>, <code>width</code>,\r\n\t * <code>height</code> and <code>depth</code> properties of an object against\r\n\t * the same properties of this Box object.\r\n\t *\r\n\t * @param toCompare The box to compare to this Box object.\r\n\t * @return A value of <code>true</code> if the object has exactly the same\r\n\t *         values for the <code>x</code>, <code>y</code>, <code>z</code>,\r\n\t *         <code>width</code>, <code>height</code> and <code>depth</code>\r\n\t *         properties as this Box object; otherwise <code>false</code>.\r\n\t */\r\n\tpublic equals(toCompare:Box):boolean\r\n\t{\r\n\t\treturn (this.x == toCompare.x && this.y == toCompare.y && this.z == toCompare.z && this.width == toCompare.width && this.height == toCompare.height && this.depth == toCompare.depth)\r\n\t}\r\n\r\n\t/**\r\n\t * Increases the size of the Box object by the specified amounts, in\r\n\t * pixels. The center point of the Box object stays the same, and its\r\n\t * size increases to the left and right by the <code>dx</code> value, to\r\n\t * the top and the bottom by the <code>dy</code> value, and to\r\n\t * the front and the back by the <code>dz</code> value.\r\n\t *\r\n\t * @param dx The value to be added to the left and the right of the Box\r\n\t *           object. The following equation is used to calculate the new\r\n\t *           width and position of the box:\r\n\t * @param dy The value to be added to the top and the bottom of the Box\r\n\t *           object. The following equation is used to calculate the new\r\n\t *           height and position of the box:\r\n\t * @param dz The value to be added to the front and the back of the Box\r\n\t *           object. The following equation is used to calculate the new\r\n\t *           depth and position of the box:\r\n\t */\r\n\tpublic inflate(dx:number, dy:number, dz:number)\r\n\t{\r\n\t\tthis.x -= dx/2;\r\n\t\tthis.y -= dy/2;\r\n\t\tthis.z -= dz/2;\r\n\t\tthis.width += dx/2;\r\n\t\tthis.height += dy/2;\r\n\t\tthis.depth += dz/2;\r\n\t}\r\n\r\n\t/**\r\n\t * Increases the size of the Box object. This method is similar to the\r\n\t * <code>Box.inflate()</code> method except it takes a Vector3D object as\r\n\t * a parameter.\r\n\t *\r\n\t * <p>The following two code examples give the same result:</p>\r\n\t *\r\n\t * @param delta The <code>x</code> property of this Vector3D object is used to\r\n\t *              increase the horizontal dimension of the Box object.\r\n\t *              The <code>y</code> property is used to increase the vertical\r\n\t *              dimension of the Box object.\r\n\t *              The <code>z</code> property is used to increase the\r\n\t *              longitudinal dimension of the Box object.\r\n\t */\r\n\tpublic inflatePoint(delta:Vector3D)\r\n\t{\r\n\t\tthis.x -= delta.x/2;\r\n\t\tthis.y -= delta.y/2;\r\n\t\tthis.z -= delta.z/2;\r\n\t\tthis.width += delta.x/2;\r\n\t\tthis.height += delta.y/2;\r\n\t\tthis.depth += delta.z/2;\r\n\t}\r\n\r\n\t/**\r\n\t * If the Box object specified in the <code>toIntersect</code> parameter\r\n\t * intersects with this Box object, returns the area of intersection\r\n\t * as a Box object. If the boxes do not intersect, this method returns an\r\n\t * empty Box object with its properties set to 0.\r\n\t *\r\n\t * @param toIntersect The Box object to compare against to see if it\r\n\t *                    intersects with this Box object.\r\n\t * @return A Box object that equals the area of intersection. If the\r\n\t *         boxes do not intersect, this method returns an empty Box\r\n\t *         object; that is, a box with its <code>x</code>, <code>y</code>,\r\n\t *         <code>z</code>, <code>width</code>,  <code>height</code>, and\r\n\t *         <code>depth</code> properties set to 0.\r\n\t */\r\n\tpublic intersection(toIntersect:Box):Box\r\n\t{\r\n\t\tif (this.intersects(toIntersect)) {\r\n\t\t\tvar i:Box = new Box();\r\n\r\n\t\t\tif (this.x > toIntersect.x) {\r\n\t\t\t\ti.x = this.x;\r\n\t\t\t\ti.width = toIntersect.x - this.x + toIntersect.width;\r\n\r\n\t\t\t\tif (i.width > this.width)\r\n\t\t\t\t\ti.width = this.width;\r\n\t\t\t} else {\r\n\t\t\t\ti.x = toIntersect.x;\r\n\t\t\t\ti.width = this.x - toIntersect.x + this.width;\r\n\r\n\t\t\t\tif (i.width > toIntersect.width)\r\n\t\t\t\t\ti.width = toIntersect.width;\r\n\t\t\t}\r\n\r\n\t\t\tif (this.y > toIntersect.y) {\r\n\t\t\t\ti.y = this.y;\r\n\t\t\t\ti.height = toIntersect.y - this.y + toIntersect.height;\r\n\r\n\t\t\t\tif (i.height > this.height)\r\n\t\t\t\t\ti.height = this.height;\r\n\t\t\t} else {\r\n\t\t\t\ti.y = toIntersect.y;\r\n\t\t\t\ti.height = this.y - toIntersect.y + this.height;\r\n\r\n\t\t\t\tif (i.height > toIntersect.height)\r\n\t\t\t\t\ti.height = toIntersect.height;\r\n\t\t\t}\r\n\r\n\r\n\t\t\tif (this.z > toIntersect.z) {\r\n\t\t\t\ti.z = this.z;\r\n\t\t\t\ti.depth = toIntersect.z - this.z + toIntersect.depth;\r\n\r\n\t\t\t\tif (i.depth > this.depth)\r\n\t\t\t\t\ti.depth = this.depth;\r\n\t\t\t} else {\r\n\t\t\t\ti.z = toIntersect.z;\r\n\t\t\t\ti.depth = this.z - toIntersect.z + this.depth;\r\n\r\n\t\t\t\tif (i.depth > toIntersect.depth)\r\n\t\t\t\t\ti.depth = toIntersect.depth;\r\n\t\t\t}\r\n\r\n\t\t\treturn i;\r\n\t\t}\r\n\r\n\t\treturn new Box();\r\n\t}\r\n\r\n\t/**\r\n\t * Determines whether the object specified in the <code>toIntersect</code>\r\n\t * parameter intersects with this Box object. This method checks the\r\n\t * <code>x</code>, <code>y</code>, <code>z</code>, <code>width</code>,\r\n\t * <code>height</code>, and <code>depth</code> properties of the specified\r\n\t * Box object to see if it intersects with this Box object.\r\n\t *\r\n\t * @param toIntersect The Box object to compare against this Box object.\r\n\t * @return A value of <code>true</code> if the specified object intersects\r\n\t *         with this Box object; otherwise <code>false</code>.\r\n\t */\r\n\tpublic intersects(toIntersect:Box):boolean\r\n\t{\r\n\t\treturn (this.x + this.width > toIntersect.x && this.x < toIntersect.x + toIntersect.width && this.y + this.height > toIntersect.y && this.y < toIntersect.y + toIntersect.height && this.z + this.depth > toIntersect.z && this.z < toIntersect.z + toIntersect.depth);\r\n\t}\r\n\r\n\tpublic rayIntersection(position:Vector3D, direction:Vector3D, targetNormal:Vector3D):number\r\n\t{\r\n\t\tif (this.containsPoint(position))\r\n\t\t\treturn 0;\r\n\r\n\t\tvar halfExtentsX:number = this.width/2;\r\n\t\tvar halfExtentsY:number = this.height/2;\r\n\t\tvar halfExtentsZ:number = this.depth/2;\r\n\r\n\t\tvar centerX:number = this.x + halfExtentsX;\r\n\t\tvar centerY:number = this.y + halfExtentsY;\r\n\t\tvar centerZ:number = this.z + halfExtentsZ;\r\n\r\n\t\tvar px:number = position.x - centerX;\r\n\t\tvar py:number = position.y - centerY;\r\n\t\tvar pz:number = position.z - centerZ;\r\n\r\n\t\tvar vx:number = direction.x\r\n\t\tvar vy:number = direction.y\r\n\t\tvar vz:number = direction.z;\r\n\r\n\t\tvar ix:number;\r\n\t\tvar iy:number;\r\n\t\tvar iz:number;\r\n\t\tvar rayEntryDistance:number;\r\n\r\n\t\t// ray-plane tests\r\n\t\tvar intersects:boolean;\r\n\t\tif (vx < 0) {\r\n\t\t\trayEntryDistance = ( halfExtentsX - px )/vx;\r\n\t\t\tif (rayEntryDistance > 0) {\r\n\t\t\t\tiy = py + rayEntryDistance*vy;\r\n\t\t\t\tiz = pz + rayEntryDistance*vz;\r\n\t\t\t\tif (iy > -halfExtentsY && iy < halfExtentsY && iz > -halfExtentsZ && iz < halfExtentsZ) {\r\n\t\t\t\t\ttargetNormal.x = 1;\r\n\t\t\t\t\ttargetNormal.y = 0;\r\n\t\t\t\t\ttargetNormal.z = 0;\r\n\r\n\t\t\t\t\tintersects = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (!intersects && vx > 0) {\r\n\t\t\trayEntryDistance = ( -halfExtentsX - px )/vx;\r\n\t\t\tif (rayEntryDistance > 0) {\r\n\t\t\t\tiy = py + rayEntryDistance*vy;\r\n\t\t\t\tiz = pz + rayEntryDistance*vz;\r\n\t\t\t\tif (iy > -halfExtentsY && iy < halfExtentsY && iz > -halfExtentsZ && iz < halfExtentsZ) {\r\n\t\t\t\t\ttargetNormal.x = -1;\r\n\t\t\t\t\ttargetNormal.y = 0;\r\n\t\t\t\t\ttargetNormal.z = 0;\r\n\t\t\t\t\tintersects = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (!intersects && vy < 0) {\r\n\t\t\trayEntryDistance = ( halfExtentsY - py )/vy;\r\n\t\t\tif (rayEntryDistance > 0) {\r\n\t\t\t\tix = px + rayEntryDistance*vx;\r\n\t\t\t\tiz = pz + rayEntryDistance*vz;\r\n\t\t\t\tif (ix > -halfExtentsX && ix < halfExtentsX && iz > -halfExtentsZ && iz < halfExtentsZ) {\r\n\t\t\t\t\ttargetNormal.x = 0;\r\n\t\t\t\t\ttargetNormal.y = 1;\r\n\t\t\t\t\ttargetNormal.z = 0;\r\n\t\t\t\t\tintersects = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (!intersects && vy > 0) {\r\n\t\t\trayEntryDistance = ( -halfExtentsY - py )/vy;\r\n\t\t\tif (rayEntryDistance > 0) {\r\n\t\t\t\tix = px + rayEntryDistance*vx;\r\n\t\t\t\tiz = pz + rayEntryDistance*vz;\r\n\t\t\t\tif (ix > -halfExtentsX && ix < halfExtentsX && iz > -halfExtentsZ && iz < halfExtentsZ) {\r\n\t\t\t\t\ttargetNormal.x = 0;\r\n\t\t\t\t\ttargetNormal.y = -1;\r\n\t\t\t\t\ttargetNormal.z = 0;\r\n\t\t\t\t\tintersects = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (!intersects && vz < 0) {\r\n\t\t\trayEntryDistance = ( halfExtentsZ - pz )/vz;\r\n\t\t\tif (rayEntryDistance > 0) {\r\n\t\t\t\tix = px + rayEntryDistance*vx;\r\n\t\t\t\tiy = py + rayEntryDistance*vy;\r\n\t\t\t\tif (iy > -halfExtentsY && iy < halfExtentsY && ix > -halfExtentsX && ix < halfExtentsX) {\r\n\t\t\t\t\ttargetNormal.x = 0;\r\n\t\t\t\t\ttargetNormal.y = 0;\r\n\t\t\t\t\ttargetNormal.z = 1;\r\n\t\t\t\t\tintersects = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (!intersects && vz > 0) {\r\n\t\t\trayEntryDistance = ( -halfExtentsZ - pz )/vz;\r\n\t\t\tif (rayEntryDistance > 0) {\r\n\t\t\t\tix = px + rayEntryDistance*vx;\r\n\t\t\t\tiy = py + rayEntryDistance*vy;\r\n\t\t\t\tif (iy > -halfExtentsY && iy < halfExtentsY && ix > -halfExtentsX && ix < halfExtentsX) {\r\n\t\t\t\t\ttargetNormal.x = 0;\r\n\t\t\t\t\ttargetNormal.y = 0;\r\n\t\t\t\t\ttargetNormal.z = -1;\r\n\t\t\t\t\tintersects = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn intersects? rayEntryDistance : -1;\r\n\t}\r\n\r\n\t/**\r\n\t * Finds the closest point on the Box to another given point. This can be used for maximum error calculations for content within a given Box.\r\n\t *\r\n\t * @param point The point for which to find the closest point on the Box\r\n\t * @param target An optional Vector3D to store the result to prevent creating a new object.\r\n\t * @return\r\n\t */\r\n\tpublic closestPointToPoint(point:Vector3D, target:Vector3D = null):Vector3D\r\n\t{\r\n\t\tvar p:number;\r\n\r\n\t\tif (target == null)\r\n\t\t\ttarget = new Vector3D();\r\n\r\n\t\tp = point.x;\r\n\t\tif (p < this.x)\r\n\t\t\tp = this.x;\r\n\t\tif (p > this.x + this.width)\r\n\t\t\tp = this.x + this.width;\r\n\t\ttarget.x = p;\r\n\r\n\t\tp = point.y;\r\n\t\tif (p < this.y + this.height)\r\n\t\t\tp = this.y + this.height;\r\n\t\tif (p > this.y)\r\n\t\t\tp = this.y;\r\n\t\ttarget.y = p;\r\n\r\n\t\tp = point.z;\r\n\t\tif (p < this.z)\r\n\t\t\tp = this.z;\r\n\t\tif (p > this.z + this.depth)\r\n\t\t\tp = this.z + this.depth;\r\n\t\ttarget.z = p;\r\n\r\n\t\treturn target;\r\n\t}\r\n\r\n\t/**\r\n\t * Determines whether or not this Box object is empty.\r\n\t *\r\n\t * @return A value of <code>true</code> if the Box object's width, height or\r\n\t *         depth is less than or equal to 0; otherwise <code>false</code>.\r\n\t */\r\n\tpublic isEmpty():boolean\r\n\t{\r\n\t\treturn (this.x == 0 && this.y == 0 && this.z == 0 && this.width == 0 && this.height == 0 && this.depth == 0);\r\n\t}\r\n\r\n\t/**\r\n\t * Adjusts the location of the Box object, as determined by its\r\n\t * top-left-front corner, by the specified amounts.\r\n\t *\r\n\t * @param dx Moves the <i>x</i> value of the Box object by this amount.\r\n\t * @param dy Moves the <i>y</i> value of the Box object by this amount.\r\n\t * @param dz Moves the <i>z</i> value of the Box object by this amount.\r\n\t */\r\n\tpublic offset(dx:number, dy:number, dz:number)\r\n\t{\r\n\t\tthis.x += dx;\r\n\t\tthis.y += dy;\r\n\t\tthis.z += dz;\r\n\t}\r\n\r\n\t/**\r\n\t * Adjusts the location of the Box object using a Vector3D object as a\r\n\t * parameter. This method is similar to the <code>Box.offset()</code>\r\n\t * method, except that it takes a Vector3D object as a parameter.\r\n\t *\r\n\t * @param position A Vector3D object to use to offset this Box object.\r\n\t */\r\n\tpublic offsetPosition(position:Vector3D)\r\n\t{\r\n\t\tthis.x += position.x;\r\n\t\tthis.y += position.y;\r\n\t\tthis.z += position.z;\r\n\t}\r\n\r\n\t/**\r\n\t * Sets all of the Box object's properties to 0. A Box object is empty if its\r\n\t * width, height or depth is less than or equal to 0.\r\n\t *\r\n\t * <p> This method sets the values of the <code>x</code>, <code>y</code>,\r\n\t * <code>z</code>, <code>width</code>, <code>height</code>, and\r\n\t * <code>depth</code> properties to 0.</p>\r\n\t *\r\n\t */\r\n\tpublic setEmpty()\r\n\t{\r\n\t\tthis.x = 0;\r\n\t\tthis.y = 0;\r\n\t\tthis.z = 0;\r\n\t\tthis.width = 0;\r\n\t\tthis.height = 0;\r\n\t\tthis.depth = 0;\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the members of Box to the specified values\r\n\t *\r\n\t * @param xa      The <i>x</i> coordinate of the top-left-front corner of the\r\n\t *                box.\r\n\t * @param ya      The <i>y</i> coordinate of the top-left-front corner of the\r\n\t *                box.\r\n\t * @param yz      The <i>z</i> coordinate of the top-left-front corner of the\r\n\t *                box.\r\n\t * @param widtha  The width of the box, in pixels.\r\n\t * @param heighta The height of the box, in pixels.\r\n\t * @param deptha  The depth of the box, in pixels.\r\n\t */\r\n\tpublic setTo(xa:number, ya:number, za:number, widtha:number, heighta:number, deptha:number)\r\n\t{\r\n\t\tthis.x = xa;\r\n\t\tthis.y = ya;\r\n\t\tthis.z = za;\r\n\t\tthis.width = widtha;\r\n\t\tthis.height = heighta;\r\n\t\tthis.depth = deptha;\r\n\t}\r\n\r\n\t/**\r\n\t * Builds and returns a string that lists the horizontal, vertical and\r\n\t * longitudinal positions and the width, height and depth of the Box object.\r\n\t *\r\n\t * @return A string listing the value of each of the following properties of\r\n\t *         the Box object: <code>x</code>, <code>y</code>, <code>z</code>,\r\n\t *         <code>width</code>, <code>height</code>, and <code>depth</code>.\r\n\t */\r\n\tpublic toString():string\r\n\t{\r\n\t\treturn \"[Box] (x=\" + this.x + \", y=\" + this.y + \", z=\" + this.z + \", width=\" + this.width + \", height=\" + this.height + \", depth=\" + this.depth + \")\";\r\n\t}\r\n\r\n\t/**\r\n\t * Adds two boxes together to create a new Box object, by filling\r\n\t * in the horizontal, vertical and longitudinal space between the two boxes.\r\n\t *\r\n\t * <p><b>Note:</b> The <code>union()</code> method ignores boxes with\r\n\t * <code>0</code> as the height, width or depth value, such as: <code>var\r\n\t * box2:Box = new Box(300,300,300,50,50,0);</code></p>\r\n\t *\r\n\t * @param toUnion A Box object to add to this Box object.\r\n\t * @return A new Box object that is the union of the two boxes.\r\n\t */\r\n\tpublic union(toUnion:Box):Box\r\n\t{\r\n\t\tvar u:Box = new Box();\r\n\r\n\t\tif (this.x < toUnion.x) {\r\n\t\t\tu.x = this.x;\r\n\t\t\tu.width = toUnion.x - this.x + toUnion.width;\r\n\r\n\t\t\tif (u.width < this.width)\r\n\t\t\t\tu.width = this.width;\r\n\t\t} else {\r\n\t\t\tu.x = toUnion.x;\r\n\t\t\tu.width = this.x - toUnion.x + this.width;\r\n\r\n\t\t\tif (u.width < toUnion.width)\r\n\t\t\t\tu.width = toUnion.width;\r\n\t\t}\r\n\r\n\t\tif (this.y < toUnion.y) {\r\n\t\t\tu.y = this.y;\r\n\t\t\tu.height = toUnion.y - this.y + toUnion.height;\r\n\r\n\t\t\tif (u.height < this.height)\r\n\t\t\t\tu.height = this.height;\r\n\t\t} else {\r\n\t\t\tu.y = toUnion.y;\r\n\t\t\tu.height = this.y - toUnion.y + this.height;\r\n\r\n\t\t\tif (u.height < toUnion.height)\r\n\t\t\t\tu.height = toUnion.height;\r\n\t\t}\r\n\r\n\t\tif (this.z < toUnion.z) {\r\n\t\t\tu.z = this.z;\r\n\t\t\tu.depth = toUnion.z - this.z + toUnion.depth;\r\n\r\n\t\t\tif (u.depth < this.depth)\r\n\t\t\t\tu.depth = this.depth;\r\n\t\t} else {\r\n\t\t\tu.z = toUnion.z;\r\n\t\t\tu.depth = this.z - toUnion.z + this.depth;\r\n\r\n\t\t\tif (u.depth < toUnion.depth)\r\n\t\t\t\tu.depth = toUnion.depth;\r\n\t\t}\r\n\r\n\t\treturn u;\r\n\t}\r\n}\r\n\r\nexport = Box;",
    "import ColorUtils\t\t\t= require(\"awayjs-core/lib/utils/ColorUtils\");\r\n\r\n/**\r\n * The ColorTransform class lets you adjust the color values in a display\r\n * object. The color adjustment or <i>color transformation</i> can be applied\r\n * to all four channels: red, green, blue, and alpha transparency.\r\n *\r\n * <p>When a ColorTransform object is applied to a display object, a new value\r\n * for each color channel is calculated like this:</p>\r\n *\r\n * <ul>\r\n *   <li>New red value = (old red value * <code>redMultiplier</code>) +\r\n * <code>redOffset</code></li>\r\n *   <li>New green value = (old green value * <code>greenMultiplier</code>) +\r\n * <code>greenOffset</code></li>\r\n *   <li>New blue value = (old blue value * <code>blueMultiplier</code>) +\r\n * <code>blueOffset</code></li>\r\n *   <li>New alpha value = (old alpha value * <code>alphaMultiplier</code>) +\r\n * <code>alphaOffset</code></li>\r\n * </ul>\r\n *\r\n * <p>If any of the color channel values is greater than 255 after the\r\n * calculation, it is set to 255. If it is less than 0, it is set to 0.</p>\r\n *\r\n * <p>You can use ColorTransform objects in the following ways:</p>\r\n *\r\n * <ul>\r\n *   <li>In the <code>colorTransform</code> parameter of the\r\n * <code>colorTransform()</code> method of the BitmapData class</li>\r\n *   <li>As the <code>colorTransform</code> property of a Transform object\r\n * (which can be used as the <code>transform</code> property of a display\r\n * object)</li>\r\n * </ul>\r\n *\r\n * <p>You must use the <code>new ColorTransform()</code> constructor to create\r\n * a ColorTransform object before you can call the methods of the\r\n * ColorTransform object.</p>\r\n *\r\n * <p>Color transformations do not apply to the background color of a movie\r\n * clip(such as a loaded SWF object). They apply only to graphics and symbols\r\n * that are attached to the movie clip.</p>\r\n */\r\nclass ColorTransform\r\n{\r\n\t/**\r\n\t * A decimal value that is multiplied with the alpha transparency channel\r\n\t * value.\r\n\t *\r\n\t * <p>If you set the alpha transparency value of a display object directly by\r\n\t * using the <code>alpha</code> property of the DisplayObject instance, it\r\n\t * affects the value of the <code>alphaMultiplier</code> property of that\r\n\t * display object's <code>transform.colorTransform</code> property.</p>\r\n\t */\r\n\tpublic alphaMultiplier:number;\r\n\r\n\t/**\r\n\t * A number from -255 to 255 that is added to the alpha transparency channel\r\n\t * value after it has been multiplied by the <code>alphaMultiplier</code>\r\n\t * value.\r\n\t */\r\n    public alphaOffset:number;\r\n\r\n\t/**\r\n\t * A decimal value that is multiplied with the blue channel value.\r\n\t */\r\n    public blueMultiplier:number;\r\n\r\n\t/**\r\n\t * A number from -255 to 255 that is added to the blue channel value after it\r\n\t * has been multiplied by the <code>blueMultiplier</code> value.\r\n\t */\r\n    public blueOffset:number;\r\n\r\n\t/**\r\n\t * A decimal value that is multiplied with the green channel value.\r\n\t */\r\n    public greenMultiplier:number;\r\n\r\n\t/**\r\n\t * A number from -255 to 255 that is added to the green channel value after\r\n\t * it has been multiplied by the <code>greenMultiplier</code> value.\r\n\t */\r\n    public greenOffset:number;\r\n\r\n\t/**\r\n\t * A decimal value that is multiplied with the red channel value.\r\n\t */\r\n    public redMultiplier:number;\r\n\r\n\t/**\r\n\t * A number from -255 to 255 that is added to the red channel value after it\r\n\t * has been multiplied by the <code>redMultiplier</code> value.\r\n\t */\r\n    public redOffset:number;\r\n\r\n\t/**\r\n\t * The RGB color value for a ColorTransform object.\r\n\t *\r\n\t * <p>When you set this property, it changes the three color offset values\r\n\t * (<code>redOffset</code>, <code>greenOffset</code>, and\r\n\t * <code>blueOffset</code>) accordingly, and it sets the three color\r\n\t * multiplier values(<code>redMultiplier</code>,\r\n\t * <code>greenMultiplier</code>, and <code>blueMultiplier</code>) to 0. The\r\n\t * alpha transparency multiplier and offset values do not change.</p>\r\n\t *\r\n\t * <p>When you pass a value for this property, use the format\r\n\t * 0x<i>RRGGBB</i>. <i>RR</i>, <i>GG</i>, and <i>BB</i> each consist of two\r\n\t * hexadecimal digits that specify the offset of each color component. The 0x\r\n\t * tells the ActionScript compiler that the number is a hexadecimal\r\n\t * value.</p>\r\n\t */\r\n\tpublic get color():number\r\n\t{\r\n\t\treturn((this.redOffset << 16) | ( this.greenOffset << 8) | this.blueOffset);\r\n\t}\r\n\r\n\tpublic set color(value:number)\r\n\t{\r\n\t\tvar argb:number[] = ColorUtils.float32ColorToARGB(value);\r\n\r\n\t\tthis.redOffset = argb[1];  //(value >> 16) & 0xFF;\r\n\t\tthis.greenOffset = argb[2];  //(value >> 8) & 0xFF;\r\n\t\tthis.blueOffset = argb[3];  //value & 0xFF;\r\n\r\n\t\tthis.redMultiplier = 0;\r\n\t\tthis.greenMultiplier = 0;\r\n\t\tthis.blueMultiplier = 0;\r\n\t}\r\n\r\n\t/**\r\n\t * Creates a ColorTransform object for a display object with the specified\r\n\t * color channel values and alpha values.\r\n\t *\r\n\t * @param redMultiplier   The value for the red multiplier, in the range from\r\n\t *                        0 to 1.\r\n\t * @param greenMultiplier The value for the green multiplier, in the range\r\n\t *                        from 0 to 1.\r\n\t * @param blueMultiplier  The value for the blue multiplier, in the range\r\n\t *                        from 0 to 1.\r\n\t * @param alphaMultiplier The value for the alpha transparency multiplier, in\r\n\t *                        the range from 0 to 1.\r\n\t * @param redOffset       The offset value for the red color channel, in the\r\n\t *                        range from -255 to 255.\r\n\t * @param greenOffset     The offset value for the green color channel, in\r\n\t *                        the range from -255 to 255.\r\n\t * @param blueOffset      The offset for the blue color channel value, in the\r\n\t *                        range from -255 to 255.\r\n\t * @param alphaOffset     The offset for alpha transparency channel value, in\r\n\t *                        the range from -255 to 255.\r\n\t */\r\n\tconstructor(redMultiplier:number = 1, greenMultiplier:number = 1, blueMultiplier:number = 1, alphaMultiplier:number = 1, redOffset:number = 0, greenOffset:number = 0, blueOffset:number = 0, alphaOffset:number = 0)\r\n\t{\r\n\t\tthis.redMultiplier = redMultiplier;\r\n\t\tthis.greenMultiplier = greenMultiplier;\r\n\t\tthis.blueMultiplier = blueMultiplier;\r\n\t\tthis.alphaMultiplier = alphaMultiplier;\r\n\t\tthis.redOffset = redOffset;\r\n\t\tthis.greenOffset = greenOffset;\r\n\t\tthis.blueOffset = blueOffset;\r\n\t\tthis.alphaOffset = alphaOffset;\r\n\t}\r\n\r\n    public clear()\r\n    {\r\n        this.redMultiplier = 1;\r\n        this.greenMultiplier = 1;\r\n        this.blueMultiplier = 1;\r\n        this.alphaMultiplier = 1;\r\n        this.redOffset = 0;\r\n        this.greenOffset = 0;\r\n        this.blueOffset = 0;\r\n        this.alphaOffset = 0;\r\n    }\r\n\r\n    public clone():ColorTransform\r\n    {\r\n        return new ColorTransform(this.redMultiplier, this.greenMultiplier, this.blueMultiplier, this.alphaMultiplier, this.redOffset, this.greenOffset, this.blueOffset, this.alphaOffset);\r\n    }\r\n\r\n    public copyFrom(source:ColorTransform)\r\n    {\r\n        this.redMultiplier = source.redMultiplier;\r\n        this.greenMultiplier = source.greenMultiplier;\r\n        this.blueMultiplier = source.blueMultiplier;\r\n        this.alphaMultiplier = source.alphaMultiplier;\r\n        this.redOffset = source.redOffset;\r\n        this.greenOffset = source.greenOffset;\r\n        this.blueOffset = source.blueOffset;\r\n        this.alphaOffset = source.alphaOffset;\r\n    }\r\n\r\n    public copyTo(destination:ColorTransform)\r\n    {\r\n        destination.copyFrom(this);\r\n    }\r\n\r\n    public prepend(ct:ColorTransform)\r\n    {\r\n        this.redOffset += ct.redOffset * this.redMultiplier;\r\n        this.greenOffset += ct.greenOffset * this.greenMultiplier;\r\n        this.blueOffset += ct.blueOffset * this.blueMultiplier;\r\n        this.alphaOffset += ct.alphaOffset * this.alphaMultiplier;\r\n\r\n        this.redMultiplier *= ct.redMultiplier;\r\n        this.greenMultiplier *= ct.greenMultiplier;\r\n        this.blueMultiplier *= ct.blueMultiplier;\r\n        this.alphaMultiplier *= ct.alphaMultiplier;\r\n    }\r\n}\r\n\r\nexport = ColorTransform;",
    "/**\r\n* MathConsts provides some commonly used mathematical constants\r\n*/\r\nclass MathConsts\r\n{\r\n\t/**\r\n\t * The amount to multiply with when converting radians to degrees.\r\n\t */\r\n\tpublic static RADIANS_TO_DEGREES:number = 180/Math.PI;\r\n\r\n\t/**\r\n\t * The amount to multiply with when converting degrees to radians.\r\n\t */\r\n\tpublic static DEGREES_TO_RADIANS:number = Math.PI/180;\r\n}\r\n\r\nexport = MathConsts;",
    "import Quaternion\t\t\t\t= require(\"awayjs-core/lib/geom/Quaternion\");\r\nimport Matrix3D\t\t\t\t\t= require(\"awayjs-core/lib/geom/Matrix3D\");\r\nimport Plane3D\t\t\t\t\t= require(\"awayjs-core/lib/geom/Plane3D\");\r\nimport Vector3D\t\t\t\t\t= require(\"awayjs-core/lib/geom/Vector3D\");\r\n\r\n\r\n/**\r\n * away.geom.Matrix3DUtils provides additional Matrix3D functions.\r\n */\r\nclass Matrix3DUtils\r\n{\r\n\t/**\r\n\t * A reference to a Vector to be used as a temporary raw data container, to prevent object creation.\r\n\t */\r\n\tpublic static RAW_DATA_CONTAINER:Float32Array = new Float32Array(16);\r\n\t//public static RAW_DATA_CONTAINER:number[] = new Array<number>(16);\r\n\r\n\tpublic static CALCULATION_MATRIX:Matrix3D = new Matrix3D();\r\n\r\n\t/**\r\n\t * Fills the 3d matrix object with values representing the transformation made by the given quaternion.\r\n\t *\r\n\t * @param    quarternion    The quarterion object to convert.\r\n\t */\r\n\tpublic static quaternion2matrix(quarternion:Quaternion, m:Matrix3D = null):Matrix3D\r\n\t{\r\n\t\tvar x:number = quarternion.x;\r\n\t\tvar y:number = quarternion.y;\r\n\t\tvar z:number = quarternion.z;\r\n\t\tvar w:number = quarternion.w;\r\n\r\n\t\tvar xx:number = x*x;\r\n\t\tvar xy:number = x*y;\r\n\t\tvar xz:number = x*z;\r\n\t\tvar xw:number = x*w;\r\n\r\n\t\tvar yy:number = y*y;\r\n\t\tvar yz:number = y*z;\r\n\t\tvar yw:number = y*w;\r\n\r\n\t\tvar zz:number = z*z;\r\n\t\tvar zw:number = z*w;\r\n\r\n\t\tvar raw:Float32Array = Matrix3DUtils.RAW_DATA_CONTAINER;\r\n\t\traw[0] = 1 - 2*(yy + zz);\r\n\t\traw[1] = 2*(xy + zw);\r\n\t\traw[2] = 2*(xz - yw);\r\n\t\traw[4] = 2*(xy - zw);\r\n\t\traw[5] = 1 - 2*(xx + zz);\r\n\t\traw[6] = 2*(yz + xw);\r\n\t\traw[8] = 2*(xz + yw);\r\n\t\traw[9] = 2*(yz - xw);\r\n\t\traw[10] = 1 - 2*(xx + yy);\r\n\t\traw[3] = raw[7] = raw[11] = raw[12] = raw[13] = raw[14] = 0;\r\n\t\traw[15] = 1;\r\n\r\n\t\tif (m) {\r\n\t\t\tm.copyRawDataFrom(raw);\r\n\t\t\treturn m;\r\n\t\t} else\r\n\t\t\treturn new Matrix3D(raw);\r\n\t}\r\n\r\n\t/**\r\n\t * Returns a normalised <code>Vector3D</code> object representing the forward vector of the given matrix.\r\n\t * @param    m        The Matrix3D object to use to get the forward vector\r\n\t * @param    v        [optional] A vector holder to prevent make new Vector3D instance if already exists. Default is null.\r\n\t * @return            The forward vector\r\n\t */\r\n\tpublic static getForward(m:Matrix3D, v:Vector3D = null):Vector3D\r\n\t{\r\n\t\t//v ||= new Vector3D(0.0, 0.0, 0.0);\r\n\t\tif (v === null) {\r\n\r\n\t\t\tv = new Vector3D(0.0, 0.0, 0.0);\r\n\r\n\t\t}\r\n\r\n\t\tm.copyColumnTo(2, v);\r\n\t\tv.normalize();\r\n\r\n\t\treturn v;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns a normalised <code>Vector3D</code> object representing the up vector of the given matrix.\r\n\t * @param    m        The Matrix3D object to use to get the up vector\r\n\t * @param    v        [optional] A vector holder to prevent make new Vector3D instance if already exists. Default is null.\r\n\t * @return            The up vector\r\n\t */\r\n\tpublic static getUp(m:Matrix3D, v:Vector3D = null):Vector3D\r\n\t{\r\n\t\t//v ||= new Vector3D(0.0, 0.0, 0.0);\r\n\r\n\t\tif (v === null) {\r\n\r\n\t\t\tv = new Vector3D(0.0, 0.0, 0.0);\r\n\r\n\t\t}\r\n\r\n\t\tm.copyColumnTo(1, v);\r\n\t\tv.normalize();\r\n\r\n\t\treturn v;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns a normalised <code>Vector3D</code> object representing the right vector of the given matrix.\r\n\t * @param    m        The Matrix3D object to use to get the right vector\r\n\t * @param    v        [optional] A vector holder to prevent make new Vector3D instance if already exists. Default is null.\r\n\t * @return            The right vector\r\n\t */\r\n\tpublic static getRight(m:Matrix3D, v:Vector3D = null):Vector3D\r\n\t{\r\n\t\t//v ||= new Vector3D(0.0, 0.0, 0.0);\r\n\t\tif (v === null) {\r\n\r\n\t\t\tv = new Vector3D(0.0, 0.0, 0.0);\r\n\r\n\t\t}\r\n\r\n\t\tm.copyColumnTo(0, v);\r\n\t\tv.normalize();\r\n\r\n\t\treturn v;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns a boolean value representing whether there is any significant difference between the two given 3d matrices.\r\n\t */\r\n\tpublic static compare(m1:Matrix3D, m2:Matrix3D):boolean\r\n\t{\r\n\t\tvar r1:Float32Array = Matrix3DUtils.RAW_DATA_CONTAINER;\r\n\t\tvar r2:Float32Array = m2.rawData;\r\n\t\tm1.copyRawDataTo(r1);\r\n\r\n\t\tfor (var i:number = 0; i < 16; ++i) {\r\n\t\t\tif (r1[i] != r2[i])\r\n\t\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\t}\r\n\r\n\tpublic static lookAt(matrix:Matrix3D, pos:Vector3D, dir:Vector3D, up:Vector3D)\r\n\t{\r\n\t\tvar dirN:Vector3D;\r\n\t\tvar upN:Vector3D;\r\n\t\tvar lftN:Vector3D;\r\n\t\tvar raw:Float32Array = Matrix3DUtils.RAW_DATA_CONTAINER;\r\n\r\n\t\tlftN = dir.crossProduct(up);\r\n\t\tlftN.normalize();\r\n\r\n\t\tupN = lftN.crossProduct(dir);\r\n\t\tupN.normalize();\r\n\t\tdirN = dir.clone();\r\n\t\tdirN.normalize();\r\n\r\n\t\traw[0] = lftN.x;\r\n\t\traw[1] = upN.x;\r\n\t\traw[2] = -dirN.x;\r\n\t\traw[3] = 0.0;\r\n\r\n\t\traw[4] = lftN.y;\r\n\t\traw[5] = upN.y;\r\n\t\traw[6] = -dirN.y;\r\n\t\traw[7] = 0.0;\r\n\r\n\t\traw[8] = lftN.z;\r\n\t\traw[9] = upN.z;\r\n\t\traw[10] = -dirN.z;\r\n\t\traw[11] = 0.0;\r\n\r\n\t\traw[12] = -lftN.dotProduct(pos);\r\n\t\traw[13] = -upN.dotProduct(pos);\r\n\t\traw[14] = dirN.dotProduct(pos);\r\n\t\traw[15] = 1.0;\r\n\r\n\t\tmatrix.copyRawDataFrom(raw);\r\n\t}\r\n\r\n\tpublic static reflection(plane:Plane3D, target:Matrix3D = null):Matrix3D\r\n\t{\r\n\t\tif (target === null)\r\n\t\t\ttarget = new Matrix3D();\r\n\r\n\t\tvar a:number = plane.a, b:number = plane.b, c:number = plane.c, d:number = plane.d;\r\n\t\tvar rawData:Float32Array = Matrix3DUtils.RAW_DATA_CONTAINER;\r\n\t\tvar ab2:number = -2*a*b;\r\n\t\tvar ac2:number = -2*a*c;\r\n\t\tvar bc2:number = -2*b*c;\r\n\t\t// reflection matrix\r\n\t\trawData[0] = 1 - 2*a*a;\r\n\t\trawData[4] = ab2;\r\n\t\trawData[8] = ac2;\r\n\t\trawData[12] = -2*a*d;\r\n\t\trawData[1] = ab2;\r\n\t\trawData[5] = 1 - 2*b*b;\r\n\t\trawData[9] = bc2;\r\n\t\trawData[13] = -2*b*d;\r\n\t\trawData[2] = ac2;\r\n\t\trawData[6] = bc2;\r\n\t\trawData[10] = 1 - 2*c*c;\r\n\t\trawData[14] = -2*c*d;\r\n\t\trawData[3] = 0;\r\n\t\trawData[7] = 0;\r\n\t\trawData[11] = 0;\r\n\t\trawData[15] = 1;\r\n\t\ttarget.copyRawDataFrom(rawData);\r\n\r\n\t\treturn target;\r\n\t}\r\n\r\n\r\n\tpublic static transformVector(matrix:Matrix3D, vector:Vector3D, result:Vector3D = null):Vector3D\r\n\t{\r\n\t\tif (!result)\r\n\t\t\tresult = new Vector3D();\r\n\r\n\t\tvar raw:Float32Array = Matrix3DUtils.RAW_DATA_CONTAINER;\r\n\t\tmatrix.copyRawDataTo(raw);\r\n\t\tvar a:number = raw[0];\r\n\t\tvar e:number = raw[1];\r\n\t\tvar i:number = raw[2];\r\n\t\tvar m:number = raw[3];\r\n\t\tvar b:number = raw[4];\r\n\t\tvar f:number = raw[5];\r\n\t\tvar j:number = raw[6];\r\n\t\tvar n:number = raw[7];\r\n\t\tvar c:number = raw[8];\r\n\t\tvar g:number = raw[9];\r\n\t\tvar k:number = raw[10];\r\n\t\tvar o:number = raw[11];\r\n\t\tvar d:number = raw[12];\r\n\t\tvar h:number = raw[13];\r\n\t\tvar l:number = raw[14];\r\n\t\tvar p:number = raw[15];\r\n\r\n\t\tvar x:number = vector.x;\r\n\t\tvar y:number = vector.y;\r\n\t\tvar z:number = vector.z;\r\n\t\tresult.x = a * x + b * y + c * z + d;\r\n\t\tresult.y = e * x + f * y + g * z + h;\r\n\t\tresult.z = i * x + j * y + k * z + l;\r\n\t\tresult.w = m * x + n * y + o * z + p;\r\n\t\treturn result;\r\n\t}\r\n\r\n\tpublic static deltaTransformVector(matrix:Matrix3D, vector:Vector3D, result:Vector3D = null):Vector3D\r\n\t{\r\n\t\tif (!result)\r\n\t\t\tresult = new Vector3D();\r\n\r\n\t\tvar raw:Float32Array = Matrix3DUtils.RAW_DATA_CONTAINER;\r\n\t\tmatrix.copyRawDataTo(raw);\r\n\t\tvar a:number = raw[0];\r\n\t\tvar e:number = raw[1];\r\n\t\tvar i:number = raw[2];\r\n\t\tvar m:number = raw[3];\r\n\t\tvar b:number = raw[4];\r\n\t\tvar f:number = raw[5];\r\n\t\tvar j:number = raw[6];\r\n\t\tvar n:number = raw[7];\r\n\t\tvar c:number = raw[8];\r\n\t\tvar g:number = raw[9];\r\n\t\tvar k:number = raw[10];\r\n\t\tvar o:number = raw[11];\r\n\t\tvar x:number = vector.x;\r\n\t\tvar y:number = vector.y;\r\n\t\tvar z:number = vector.z;\r\n\t\tresult.x = a * x + b * y + c * z;\r\n\t\tresult.y = e * x + f * y + g * z;\r\n\t\tresult.z = i * x + j * y + k * z;\r\n\t\tresult.w = m * x + n * y + o * z;\r\n\t\treturn result;\r\n\t}\r\n\r\n\tpublic static getTranslation(transform:Matrix3D, result:Vector3D = null):Vector3D\r\n\t{\r\n\t\tif(!result)\r\n\t\t\tresult = new Vector3D();\r\n\r\n\t\ttransform.copyColumnTo(3, result);\r\n\t\treturn result;\r\n\t}\r\n\r\n\tpublic static deltaTransformVectors(matrix:Matrix3D, vin:Array<number>, vout:Array<number>)\r\n\t{\r\n\t\tvar raw:Float32Array = Matrix3DUtils.RAW_DATA_CONTAINER;\r\n\t\tmatrix.copyRawDataTo(raw);\r\n\t\tvar a:number = raw[0];\r\n\t\tvar e:number = raw[1];\r\n\t\tvar i:number = raw[2];\r\n\t\tvar m:number = raw[3];\r\n\t\tvar b:number = raw[4];\r\n\t\tvar f:number = raw[5];\r\n\t\tvar j:number = raw[6];\r\n\t\tvar n:number = raw[7];\r\n\t\tvar c:number = raw[8];\r\n\t\tvar g:number = raw[9];\r\n\t\tvar k:number = raw[10];\r\n\t\tvar o:number = raw[11];\r\n\t\tvar outIndex:number = 0;\r\n\t\tvar length:number = vin.length;\r\n\t\tfor(var index:number = 0; index<length; index+=3) {\r\n\t\t\tvar x:number = vin[index];\r\n\t\t\tvar y:number = vin[index+1];\r\n\t\t\tvar z:number = vin[index+2];\r\n\t\t\tvout[outIndex++] = a * x + b * y + c * z;\r\n\t\t\tvout[outIndex++] = e * x + f * y + g * z;\r\n\t\t\tvout[outIndex++] = i * x + j * y + k * z;\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport = Matrix3DUtils;",
    "import Box\t\t\t\t\t\t= require(\"awayjs-core/lib/geom/Box\");\r\nimport Orientation3D\t\t\t= require(\"awayjs-core/lib/geom/Orientation3D\");\r\nimport Quaternion\t\t\t\t= require(\"awayjs-core/lib/geom/Quaternion\");\r\nimport Vector3D\t\t\t\t\t= require(\"awayjs-core/lib/geom/Vector3D\");\r\nimport ArgumentError\t\t\t= require(\"awayjs-core/lib/errors/ArgumentError\");\r\n\r\nclass Matrix3D\r\n{\r\n\t/**\r\n\t * A Vector of 16 Numbers, where every four elements is a column of a 4x4 matrix.\r\n\t *\r\n\t * <p>An exception is thrown if the rawData property is set to a matrix that is not invertible. The Matrix3D\r\n\t * object must be invertible. If a non-invertible matrix is needed, create a subclass of the Matrix3D object.</p>\r\n\t */\r\n\tpublic rawData:Float32Array = new Float32Array(16);\r\n\r\n\tprivate static tempMatrix:Matrix3D = new Matrix3D();\r\n\tprivate static tempRawData:Float32Array = Matrix3D.tempMatrix.rawData;\r\n\r\n\tprivate _position:Vector3D;\r\n\r\n\tprivate _components:Array<Vector3D>;\r\n\r\n\t/**\r\n\t * Creates a Matrix3D object.\r\n\t */\r\n\tconstructor(v:Float32Array = null)\r\n\t{\r\n\t\tif (v != null && v.length == 16) {\r\n\t\t\tthis.copyRawDataFrom(v);\r\n\t\t} else {\r\n\t\t\tthis.identity();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Appends the matrix by multiplying another Matrix3D object by the current Matrix3D object.\r\n\t */\r\n\tpublic append(lhs:Matrix3D)\r\n\t{\r\n\t\tvar lrd:Float32Array = lhs.rawData;\r\n\r\n\t\tvar m111:number = this.rawData[0];\r\n\t\tvar m112:number = this.rawData[1];\r\n\t\tvar m113:number = this.rawData[2];\r\n\t\tvar m114:number = this.rawData[3];\r\n\t\tvar m121:number = this.rawData[4];\r\n\t\tvar m122:number = this.rawData[5];\r\n\t\tvar m123:number = this.rawData[6];\r\n\t\tvar m124:number = this.rawData[7];\r\n\t\tvar m131:number = this.rawData[8];\r\n\t\tvar m132:number = this.rawData[9];\r\n\t\tvar m133:number = this.rawData[10];\r\n\t\tvar m134:number = this.rawData[11];\r\n\t\tvar m141:number = this.rawData[12];\r\n\t\tvar m142:number = this.rawData[13];\r\n\t\tvar m143:number = this.rawData[14];\r\n\t\tvar m144:number = this.rawData[15];\r\n\t\tvar m211:number = lrd[0];\r\n\t\tvar m212:number = lrd[1];\r\n\t\tvar m213:number = lrd[2];\r\n\t\tvar m214:number = lrd[3];\r\n\t\tvar m221:number = lrd[4];\r\n\t\tvar m222:number = lrd[5];\r\n\t\tvar m223:number = lrd[6];\r\n\t\tvar m224:number = lrd[7];\r\n\t\tvar m231:number = lrd[8];\r\n\t\tvar m232:number = lrd[9];\r\n\t\tvar m233:number = lrd[10];\r\n\t\tvar m234:number = lrd[11];\r\n\t\tvar m241:number = lrd[12];\r\n\t\tvar m242:number = lrd[13];\r\n\t\tvar m243:number = lrd[14];\r\n\t\tvar m244:number = lrd[15];\r\n\r\n\t\tthis.rawData[0] = m111*m211 + m112*m221 + m113*m231 + m114*m241;\r\n\t\tthis.rawData[1] = m111*m212 + m112*m222 + m113*m232 + m114*m242;\r\n\t\tthis.rawData[2] = m111*m213 + m112*m223 + m113*m233 + m114*m243;\r\n\t\tthis.rawData[3] = m111*m214 + m112*m224 + m113*m234 + m114*m244;\r\n\r\n\t\tthis.rawData[4] = m121*m211 + m122*m221 + m123*m231 + m124*m241;\r\n\t\tthis.rawData[5] = m121*m212 + m122*m222 + m123*m232 + m124*m242;\r\n\t\tthis.rawData[6] = m121*m213 + m122*m223 + m123*m233 + m124*m243;\r\n\t\tthis.rawData[7] = m121*m214 + m122*m224 + m123*m234 + m124*m244;\r\n\r\n\t\tthis.rawData[8] = m131*m211 + m132*m221 + m133*m231 + m134*m241;\r\n\t\tthis.rawData[9] = m131*m212 + m132*m222 + m133*m232 + m134*m242;\r\n\t\tthis.rawData[10] = m131*m213 + m132*m223 + m133*m233 + m134*m243;\r\n\t\tthis.rawData[11] = m131*m214 + m132*m224 + m133*m234 + m134*m244;\r\n\r\n\t\tthis.rawData[12] = m141*m211 + m142*m221 + m143*m231 + m144*m241;\r\n\t\tthis.rawData[13] = m141*m212 + m142*m222 + m143*m232 + m144*m242;\r\n\t\tthis.rawData[14] = m141*m213 + m142*m223 + m143*m233 + m144*m243;\r\n\t\tthis.rawData[15] = m141*m214 + m142*m224 + m143*m234 + m144*m244;\r\n\t}\r\n\r\n\t/**\r\n\t * Appends an incremental rotation to a Matrix3D object.\r\n\t */\r\n\tpublic appendRotation(degrees:number, axis:Vector3D):void //, pivot:Vector3D = null )\r\n\t{\r\n\t\tthis.append(Matrix3D.getAxisRotation(axis.x, axis.y, axis.z, degrees));\r\n\t}\r\n\r\n\t/**\r\n\t * Appends an incremental skew change along the x, y, and z axes to a Matrix3D object.\r\n\t */\r\n\tpublic appendSkew(xSkew:number, ySkew:number, zSkew:number)\r\n\t{\r\n\t\tif(xSkew == 0 && ySkew == 0 && zSkew == 0) return;\r\n\t\tvar raw:Float32Array = Matrix3D.tempRawData;\r\n\t\traw[0] = 1;\r\n\t\traw[1] = 0;\r\n\t\traw[2] = 0;\r\n\t\traw[3] = 0;\r\n\r\n\t\traw[4] = xSkew;\r\n\t\traw[5] = 1;\r\n\t\traw[6] = 0;\r\n\t\traw[7] = 0;\r\n\r\n\t\traw[8] = ySkew;\r\n\t\traw[9] = zSkew;\r\n\t\traw[10] = 1;\r\n\t\traw[11] = 0;\r\n\r\n\t\traw[12] = 0;\r\n\t\traw[13] = 0;\r\n\t\traw[14] = 0;\r\n\t\traw[15] = 1;\r\n\r\n\t\tthis.append(Matrix3D.tempMatrix);\r\n\t}\r\n\r\n\t/**\r\n\t * Appends an incremental scale change along the x, y, and z axes to a Matrix3D object.\r\n\t */\r\n\tpublic appendScale(xScale:number, yScale:number, zScale:number)\r\n\t{\r\n\t\tif(xScale == 1 && yScale == 1 && zScale == 1)\r\n\t\t\treturn;\r\n\r\n\t\tvar raw:Float32Array = Matrix3D.tempRawData;\r\n\r\n\t\traw[0] = xScale;\r\n\t\traw[1] = 0;\r\n\t\traw[2] = 0;\r\n\t\traw[3] = 0;\r\n\r\n\t\traw[4] = 0;\r\n\t\traw[5] = yScale;\r\n\t\traw[6] = 0;\r\n\t\traw[7] = 0;\r\n\r\n\t\traw[8] = 0;\r\n\t\traw[9] = 0;\r\n\t\traw[10] = zScale;\r\n\t\traw[11] = 0;\r\n\r\n\t\traw[12] = 0;\r\n\t\traw[13] = 0;\r\n\t\traw[14] = 0;\r\n\t\traw[15] = 1;\r\n\r\n\t\tthis.append(Matrix3D.tempMatrix);\r\n\t}\r\n\r\n\t/**\r\n\t * Appends an incremental translation, a repositioning along the x, y, and z axes, to a Matrix3D object.\r\n\t */\r\n\tpublic appendTranslation(x:number, y:number, z:number)\r\n\t{\r\n\t\tthis.rawData[12] += x;\r\n\t\tthis.rawData[13] += y;\r\n\t\tthis.rawData[14] += z;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns a new Matrix3D object that is an exact copy of the current Matrix3D object.\r\n\t */\r\n\tpublic clone():Matrix3D\r\n\t{\r\n\t\treturn new Matrix3D(this.rawData);\r\n\t}\r\n\r\n\t/**\r\n\t * Copies a Vector3D object into specific column of the calling Matrix3D object.\r\n\t */\r\n\tpublic copyColumnFrom(column:number, vector3D:Vector3D)\r\n\t{\r\n\t\tswitch (column) {\r\n\t\t\tcase 0:\r\n\t\t\t\tthis.rawData[ 0 ] = vector3D.x;\r\n\t\t\t\tthis.rawData[ 1 ] = vector3D.y;\r\n\t\t\t\tthis.rawData[ 2 ] = vector3D.z;\r\n\t\t\t\tthis.rawData[ 3 ] = vector3D.w;\r\n\t\t\t\tbreak;\r\n\t\t\tcase 1:\r\n\t\t\t\tthis.rawData[ 4 ] = vector3D.x;\r\n\t\t\t\tthis.rawData[ 5 ] = vector3D.y;\r\n\t\t\t\tthis.rawData[ 6 ] = vector3D.z;\r\n\t\t\t\tthis.rawData[ 7 ] = vector3D.w;\r\n\t\t\t\tbreak;\r\n\t\t\tcase 2:\r\n\t\t\t\tthis.rawData[ 8 ] = vector3D.x;\r\n\t\t\t\tthis.rawData[ 9 ] = vector3D.y;\r\n\t\t\t\tthis.rawData[ 10 ] = vector3D.z;\r\n\t\t\t\tthis.rawData[ 11 ] = vector3D.w;\r\n\t\t\t\tbreak;\r\n\t\t\tcase 3:\r\n\t\t\t\tthis.rawData[ 12 ] = vector3D.x;\r\n\t\t\t\tthis.rawData[ 13 ] = vector3D.y;\r\n\t\t\t\tthis.rawData[ 14 ] = vector3D.z;\r\n\t\t\t\tthis.rawData[ 15 ] = vector3D.w;\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tthrow new ArgumentError(\"ArgumentError, Column \" + column + \" out of bounds [0, ..., 3]\");\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Copies specific column of the calling Matrix3D object into the Vector3D object.\r\n\t */\r\n\tpublic copyColumnTo(column:number, vector3D:Vector3D)\r\n\t{\r\n\t\tswitch (column) {\r\n\t\t\tcase 0:\r\n\t\t\t\tvector3D.x = this.rawData[ 0 ];\r\n\t\t\t\tvector3D.y = this.rawData[ 1 ];\r\n\t\t\t\tvector3D.z = this.rawData[ 2 ];\r\n\t\t\t\tvector3D.w = this.rawData[ 3 ];\r\n\t\t\t\tbreak;\r\n\t\t\tcase 1:\r\n\t\t\t\tvector3D.x = this.rawData[ 4 ];\r\n\t\t\t\tvector3D.y = this.rawData[ 5 ];\r\n\t\t\t\tvector3D.z = this.rawData[ 6 ];\r\n\t\t\t\tvector3D.w = this.rawData[ 7 ];\r\n\t\t\t\tbreak;\r\n\t\t\tcase 2:\r\n\t\t\t\tvector3D.x = this.rawData[ 8 ];\r\n\t\t\t\tvector3D.y = this.rawData[ 9 ];\r\n\t\t\t\tvector3D.z = this.rawData[ 10 ];\r\n\t\t\t\tvector3D.w = this.rawData[ 11 ];\r\n\t\t\t\tbreak;\r\n\t\t\tcase 3:\r\n\t\t\t\tvector3D.x = this.rawData[ 12 ];\r\n\t\t\t\tvector3D.y = this.rawData[ 13 ];\r\n\t\t\t\tvector3D.z = this.rawData[ 14 ];\r\n\t\t\t\tvector3D.w = this.rawData[ 15 ];\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tthrow new ArgumentError(\"ArgumentError, Column \" + column + \" out of bounds [0, ..., 3]\");\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Copies all of the matrix data from the source Matrix3D object into the calling Matrix3D object.\r\n\t */\r\n\tpublic copyFrom(sourceMatrix3D:Matrix3D)\r\n\t{\r\n\t\tvar sourceRaw:Float32Array = sourceMatrix3D.rawData;\r\n\t\tvar len:number = sourceRaw.length;\r\n\t\tfor (var c:number = 0; c < len; c++)\r\n\t\t\tthis.rawData[c] = sourceRaw[c];\r\n\t}\r\n\r\n\tpublic copyRawDataFrom(vector:Float32Array, index:number = 0, transpose:boolean = false):void\r\n\t{\r\n\t\tif (transpose)\r\n\t\t\tthis.transpose();\r\n\r\n\t\tvar len:number = vector.length - index;\r\n\t\tfor (var c:number = 0; c < len; c++)\r\n\t\t\tthis.rawData[c] = vector[c + index];\r\n\r\n\t\tif (transpose)\r\n\t\t\tthis.transpose();\r\n\t}\r\n\r\n\tpublic copyRawDataTo(vector:Float32Array, index:number = 0, transpose:boolean = false)\r\n\t{\r\n\t\tif (transpose)\r\n\t\t\tthis.transpose();\r\n\r\n\t\tvar len:number = this.rawData.length;\r\n\t\tfor (var c:number = 0; c < len; c++)\r\n\t\t\tvector[c + index ] = this.rawData[c];\r\n\r\n\t\tif (transpose)\r\n\t\t\tthis.transpose();\r\n\t}\r\n\r\n\t/**\r\n\t * Copies a Vector3D object into specific row of the calling Matrix3D object.\r\n\t */\r\n\tpublic copyRowFrom(row:number, vector3D:Vector3D)\r\n\t{\r\n\t\tswitch (row) {\r\n\t\t\tcase 0:\r\n\t\t\t\tthis.rawData[ 0 ] = vector3D.x;\r\n\t\t\t\tthis.rawData[ 4 ] = vector3D.y;\r\n\t\t\t\tthis.rawData[ 8 ] = vector3D.z;\r\n\t\t\t\tthis.rawData[ 12 ] = vector3D.w;\r\n\t\t\t\tbreak;\r\n\t\t\tcase 1:\r\n\t\t\t\tthis.rawData[ 1 ] = vector3D.x;\r\n\t\t\t\tthis.rawData[ 5 ] = vector3D.y;\r\n\t\t\t\tthis.rawData[ 9 ] = vector3D.z;\r\n\t\t\t\tthis.rawData[ 13 ] = vector3D.w;\r\n\t\t\t\tbreak;\r\n\t\t\tcase 2:\r\n\t\t\t\tthis.rawData[ 2 ] = vector3D.x;\r\n\t\t\t\tthis.rawData[ 6 ] = vector3D.y;\r\n\t\t\t\tthis.rawData[ 10 ] = vector3D.z;\r\n\t\t\t\tthis.rawData[ 14 ] = vector3D.w;\r\n\t\t\t\tbreak;\r\n\t\t\tcase 3:\r\n\t\t\t\tthis.rawData[ 3 ] = vector3D.x;\r\n\t\t\t\tthis.rawData[ 7 ] = vector3D.y;\r\n\t\t\t\tthis.rawData[ 11 ] = vector3D.z;\r\n\t\t\t\tthis.rawData[ 15 ] = vector3D.w;\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tthrow new ArgumentError(\"ArgumentError, Row \" + row + \" out of bounds [0, ..., 3]\");\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Copies specific row of the calling Matrix3D object into the Vector3D object.\r\n\t */\r\n\tpublic copyRowTo(row:number, vector3D:Vector3D)\r\n\t{\r\n\t\tswitch (row) {\r\n\t\t\tcase 0:\r\n\t\t\t\tvector3D.x = this.rawData[ 0 ];\r\n\t\t\t\tvector3D.y = this.rawData[ 4 ];\r\n\t\t\t\tvector3D.z = this.rawData[ 8 ];\r\n\t\t\t\tvector3D.w = this.rawData[ 12 ];\r\n\t\t\t\tbreak;\r\n\t\t\tcase 1:\r\n\t\t\t\tvector3D.x = this.rawData[ 1 ];\r\n\t\t\t\tvector3D.y = this.rawData[ 5 ];\r\n\t\t\t\tvector3D.z = this.rawData[ 9 ];\r\n\t\t\t\tvector3D.w = this.rawData[ 13 ];\r\n\t\t\t\tbreak;\r\n\t\t\tcase 2:\r\n\t\t\t\tvector3D.x = this.rawData[ 2 ];\r\n\t\t\t\tvector3D.y = this.rawData[ 6 ];\r\n\t\t\t\tvector3D.z = this.rawData[ 10 ];\r\n\t\t\t\tvector3D.w = this.rawData[ 14 ];\r\n\t\t\t\tbreak;\r\n\t\t\tcase 3:\r\n\t\t\t\tvector3D.x = this.rawData[ 3 ];\r\n\t\t\t\tvector3D.y = this.rawData[ 7 ];\r\n\t\t\t\tvector3D.z = this.rawData[ 11 ];\r\n\t\t\t\tvector3D.w = this.rawData[ 15 ]\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tthrow new ArgumentError(\"ArgumentError, Row \" + row + \" out of bounds [0, ..., 3]\");\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Copies this Matrix3D object into a destination Matrix3D object.\r\n\t */\r\n\tpublic copyToMatrix3D(dest:Matrix3D)\r\n\t{\r\n\t\tthis.copyRawDataTo(dest.rawData);\r\n\t}\r\n\r\n\t/**\r\n\t * Returns the transformation matrix's translation, rotation, and scale settings as a Vector of three Vector3D objects.\r\n\t */\r\n\tpublic decompose(orientationStyle:string = \"eulerAngles\"):Vector3D[]\r\n\t{\r\n\t\tvar q:Quaternion;\r\n\r\n\t\tif (this._components == null)\r\n\t\t\tthis._components = [new Vector3D(), new Vector3D(), new Vector3D(), new Vector3D()];\r\n\r\n\t\tvar colX:Vector3D = new Vector3D(this.rawData[0], this.rawData[1], this.rawData[2]);\r\n\t\tvar colY:Vector3D = new Vector3D(this.rawData[4], this.rawData[5], this.rawData[6]);\r\n\t\tvar colZ:Vector3D = new Vector3D(this.rawData[8], this.rawData[9], this.rawData[10]);\r\n\r\n\t\tvar pos:Vector3D = this._components[0];\r\n\t\tpos.x = this.rawData[12];\r\n\t\tpos.y = this.rawData[13];\r\n\t\tpos.z = this.rawData[14];\r\n\r\n\t\tvar scale:Vector3D = this._components[3];\r\n\t\tvar skew:Vector3D = this._components[2];\r\n\r\n\t\t//compute X scale factor and normalise colX\r\n\t\tscale.x = colX.length;\r\n\t\tcolX.scaleBy(1/scale.x);\r\n\r\n\t\t//compute XY shear factor and make colY orthogonal to colX\r\n\t\tskew.x = colX.dotProduct(colY);\r\n\t\tcolY = Vector3D.combine(colY, colX, 1, -skew.x);\r\n\r\n\t\t//compute Y scale factor and normalise colY\r\n\t\tscale.y = colY.length;\r\n\t\tcolY.scaleBy(1/scale.y);\r\n\t\tskew.x /= scale.y;\r\n\r\n\t\t//compute XZ and YZ shears and make colZ orthogonal to colX and colY\r\n\t\tskew.y = colX.dotProduct(colZ);\r\n\t\tcolZ = Vector3D.combine(colZ, colX, 1, -skew.y);\r\n\t\tskew.z = colY.dotProduct(colZ);\r\n\t\tcolZ = Vector3D.combine(colZ, colY, 1, -skew.z);\r\n\r\n\t\t//compute Z scale and normalise colZ\r\n\t\tscale.z = colZ.length;\r\n\t\tcolZ.scaleBy(1/scale.z);\r\n\t\tskew.y /= scale.z;\r\n\t\tskew.z /= scale.z;\r\n\r\n\t\t//at this point, the matrix (in cols) is orthonormal\r\n\t\t//check for a coordinate system flip. If the determinant is -1, negate the z scaling factor\r\n\t\tif (colX.dotProduct(colY.crossProduct(colZ)) < 0) {\r\n\t\t\tscale.z = -scale.z;\r\n\t\t\tcolZ.x = -colZ.x;\r\n\t\t\tcolZ.y = -colZ.y;\r\n\t\t\tcolZ.z = -colZ.z;\r\n\t\t}\r\n\r\n\t\tvar rot = this._components[1];\r\n\r\n\t\tswitch (orientationStyle) {\r\n\t\t\tcase Orientation3D.AXIS_ANGLE:\r\n\r\n\t\t\t\trot.w = Math.acos((colX.x + colY.y + colZ.z - 1)/2);\r\n\r\n\t\t\t\tvar len:number = Math.sqrt((colY.z - colZ.y)*(colY.z - colZ.y) + (colZ.x - colX.z)*(colZ.x - colX.z) + (colX.y - colY.x)*(colX.y - colY.x));\r\n\t\t\t\trot.x = (colY.z - colZ.y)/len;\r\n\t\t\t\trot.y = (colZ.x - colX.z)/len;\r\n\t\t\t\trot.z = (colX.y - colY.x)/len;\r\n\r\n\t\t\t\tbreak;\r\n\t\t\tcase Orientation3D.QUATERNION:\r\n\r\n\t\t\t\tvar tr = colX.x + colY.y + colZ.z;\r\n\r\n\t\t\t\tif (tr > 0) {\r\n\t\t\t\t\trot.w = Math.sqrt(1 + tr)/2;\r\n\r\n\t\t\t\t\trot.x = (colY.z - colZ.y)/(4*rot.w);\r\n\t\t\t\t\trot.y = (colZ.x - colX.z)/(4*rot.w);\r\n\t\t\t\t\trot.z = (colX.y - colY.x)/(4*rot.w);\r\n\t\t\t\t} else if ((colX.x > colY.y) && (colX.x > colZ.z)) {\r\n\t\t\t\t\trot.x = Math.sqrt(1 + colX.x - colY.y - colZ.z)/2;\r\n\r\n\t\t\t\t\trot.w = (colY.z - colZ.y)/(4*rot.x);\r\n\t\t\t\t\trot.y = (colX.y + colY.x)/(4*rot.x);\r\n\t\t\t\t\trot.z = (colZ.x + colX.z)/(4*rot.x);\r\n\t\t\t\t} else if (colY.y > colZ.z) {\r\n\t\t\t\t\trot.y = Math.sqrt(1 + colY.y - colX.x - colZ.z)/2;\r\n\r\n\t\t\t\t\trot.x = (colX.y + colY.x)/(4*rot.y);\r\n\t\t\t\t\trot.w = (colZ.x - colX.z)/(4*rot.y);\r\n\t\t\t\t\trot.z = (colY.z + colZ.y)/(4*rot.y);\r\n\t\t\t\t} else {\r\n\t\t\t\t\trot.z = Math.sqrt(1 + colZ.z - colX.x - colY.y)/2;\r\n\r\n\t\t\t\t\trot.x = (colZ.x + colX.z)/(4*rot.z);\r\n\t\t\t\t\trot.y = (colY.z + colZ.y)/(4*rot.z);\r\n\t\t\t\t\trot.w = (colX.y - colY.x)/(4*rot.z);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tbreak;\r\n\t\t\tcase Orientation3D.EULER_ANGLES:\r\n\r\n\t\t\t\trot.y = Math.asin(-colX.z);\r\n\r\n\t\t\t\t//var cos:number = Math.cos(rot.y);\r\n\r\n\t\t\t\tif (colX.z != 1 && colX.z != -1) {\r\n\t\t\t\t\trot.x = Math.atan2(colY.z, colZ.z);\r\n\t\t\t\t\trot.z = Math.atan2(colX.y, colX.x);\r\n\t\t\t\t} else {\r\n\t\t\t\t\trot.z = 0;\r\n\t\t\t\t\trot.x = Math.atan2(colY.x, colY.y);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\treturn this._components;\r\n\t}\r\n\r\n\t/**\r\n\t * Uses the transformation matrix without its translation elements to transform a Vector3D object from one space\r\n\t * coordinate to another.\r\n\t */\r\n\tpublic deltaTransformVector(v:Vector3D, t:Vector3D = null):Vector3D\r\n\t{\r\n\t\tvar x:number = v.x;\r\n\t\tvar y:number = v.y;\r\n\t\tvar z:number = v.z;\r\n\r\n\t\tif (!t)\r\n\t\t\tt = new Vector3D();\r\n\r\n\t\tt.x = x*this.rawData[0] + y*this.rawData[4] + z*this.rawData[8];\r\n\t\tt.y = x*this.rawData[1] + y*this.rawData[5] + z*this.rawData[9];\r\n\t\tt.z = x*this.rawData[2] + y*this.rawData[6] + z*this.rawData[10];\r\n\t\tt.w = x*this.rawData[3] + y*this.rawData[7] + z*this.rawData[11];\r\n\r\n\t\treturn t;\r\n\t}\r\n\r\n\t/**\r\n\t * Converts the current matrix to an identity or unit matrix.\r\n\t */\r\n\tpublic identity()\r\n\t{\r\n\t\tthis.rawData[0] = 1;\r\n\t\tthis.rawData[1] = 0;\r\n\t\tthis.rawData[2] = 0;\r\n\t\tthis.rawData[3] = 0;\r\n\t\tthis.rawData[4] = 0;\r\n\t\tthis.rawData[5] = 1;\r\n\t\tthis.rawData[6] = 0;\r\n\t\tthis.rawData[7] = 0;\r\n\t\tthis.rawData[8] = 0;\r\n\t\tthis.rawData[9] = 0;\r\n\t\tthis.rawData[10] = 1;\r\n\t\tthis.rawData[11] = 0;\r\n\t\tthis.rawData[12] = 0;\r\n\t\tthis.rawData[13] = 0;\r\n\t\tthis.rawData[14] = 0;\r\n\t\tthis.rawData[15] = 1;\r\n\t}\r\n\r\n\t/**\r\n\t * [static] Interpolates the translation, rotation, and scale transformation of one matrix toward those of the target matrix.\r\n\t */\r\n\tstatic interpolate(thisMat:Matrix3D, toMat:Matrix3D, percent:number):Matrix3D\r\n\t{\r\n\t\tvar m:Matrix3D = new Matrix3D();\r\n\t\tfor (var i:number = 0; i < 16; ++i)\r\n\t\t\tm.rawData[i] = thisMat.rawData[i] + (toMat.rawData[i] - thisMat.rawData[i])*percent;\r\n\r\n\t\treturn m;\r\n\t}\r\n\r\n\t/**\r\n\t * Interpolates this matrix towards the translation, rotation, and scale transformations of the target matrix.\r\n\t */\r\n\tpublic interpolateTo(toMat:Matrix3D, percent:number)\r\n\t{\r\n\t\tfor (var i:number = 0; i < 16; ++i)\r\n\t\t\tthis.rawData[i] = this.rawData[i] + (toMat.rawData[i] - this.rawData[i])*percent;\r\n\t}\r\n\r\n\t/**\r\n\t * Inverts the current matrix.\r\n\t */\r\n\tpublic invert():boolean\r\n\t{\r\n\t\tvar d = this.determinant;\r\n\t\tvar invertable:boolean = Math.abs(d) > 0.00000000001;\r\n\r\n\t\tif (invertable) {\r\n\t\t\td = 1/d;\r\n\t\t\tvar m11:number = this.rawData[0];\r\n\t\t\tvar m12:number = this.rawData[1];\r\n\t\t\tvar m13:number = this.rawData[2];\r\n\t\t\tvar m14:number = this.rawData[3];\r\n\t\t\tvar m21:number = this.rawData[4];\r\n\t\t\tvar m22:number = this.rawData[5];\r\n\t\t\tvar m23:number = this.rawData[6];\r\n\t\t\tvar m24:number = this.rawData[7];\r\n\t\t\tvar m31:number = this.rawData[8];\r\n\t\t\tvar m32:number = this.rawData[9];\r\n\t\t\tvar m33:number = this.rawData[10];\r\n\t\t\tvar m34:number = this.rawData[11];\r\n\t\t\tvar m41:number = this.rawData[12];\r\n\t\t\tvar m42:number = this.rawData[13];\r\n\t\t\tvar m43:number = this.rawData[14];\r\n\t\t\tvar m44:number = this.rawData[15];\r\n\r\n\t\t\tthis.rawData[0] = d*(m22*(m33*m44 - m43*m34) - m32*(m23*m44 - m43*m24) + m42*(m23*m34 - m33*m24));\r\n\t\t\tthis.rawData[1] = -d*(m12*(m33*m44 - m43*m34) - m32*(m13*m44 - m43*m14) + m42*(m13*m34 - m33*m14));\r\n\t\t\tthis.rawData[2] = d*(m12*(m23*m44 - m43*m24) - m22*(m13*m44 - m43*m14) + m42*(m13*m24 - m23*m14));\r\n\t\t\tthis.rawData[3] = -d*(m12*(m23*m34 - m33*m24) - m22*(m13*m34 - m33*m14) + m32*(m13*m24 - m23*m14));\r\n\t\t\tthis.rawData[4] = -d*(m21*(m33*m44 - m43*m34) - m31*(m23*m44 - m43*m24) + m41*(m23*m34 - m33*m24));\r\n\t\t\tthis.rawData[5] = d*(m11*(m33*m44 - m43*m34) - m31*(m13*m44 - m43*m14) + m41*(m13*m34 - m33*m14));\r\n\t\t\tthis.rawData[6] = -d*(m11*(m23*m44 - m43*m24) - m21*(m13*m44 - m43*m14) + m41*(m13*m24 - m23*m14));\r\n\t\t\tthis.rawData[7] = d*(m11*(m23*m34 - m33*m24) - m21*(m13*m34 - m33*m14) + m31*(m13*m24 - m23*m14));\r\n\t\t\tthis.rawData[8] = d*(m21*(m32*m44 - m42*m34) - m31*(m22*m44 - m42*m24) + m41*(m22*m34 - m32*m24));\r\n\t\t\tthis.rawData[9] = -d*(m11*(m32*m44 - m42*m34) - m31*(m12*m44 - m42*m14) + m41*(m12*m34 - m32*m14));\r\n\t\t\tthis.rawData[10] = d*(m11*(m22*m44 - m42*m24) - m21*(m12*m44 - m42*m14) + m41*(m12*m24 - m22*m14));\r\n\t\t\tthis.rawData[11] = -d*(m11*(m22*m34 - m32*m24) - m21*(m12*m34 - m32*m14) + m31*(m12*m24 - m22*m14));\r\n\t\t\tthis.rawData[12] = -d*(m21*(m32*m43 - m42*m33) - m31*(m22*m43 - m42*m23) + m41*(m22*m33 - m32*m23));\r\n\t\t\tthis.rawData[13] = d*(m11*(m32*m43 - m42*m33) - m31*(m12*m43 - m42*m13) + m41*(m12*m33 - m32*m13));\r\n\t\t\tthis.rawData[14] = -d*(m11*(m22*m43 - m42*m23) - m21*(m12*m43 - m42*m13) + m41*(m12*m23 - m22*m13));\r\n\t\t\tthis.rawData[15] = d*(m11*(m22*m33 - m32*m23) - m21*(m12*m33 - m32*m13) + m31*(m12*m23 - m22*m13));\r\n\t\t}\r\n\t\treturn invertable;\r\n\t}\r\n\r\n\t/* TODO implement pointAt\r\n\t public pointAt( pos:Vector3D, at:Vector3D = null, up:Vector3D = null )\r\n\t {\r\n\t }\r\n\t */\r\n\r\n\t/**\r\n\t * Prepends a matrix by multiplying the current Matrix3D object by another Matrix3D object.\r\n\t */\r\n\tpublic prepend(rhs:Matrix3D)\r\n\t{\r\n\t\tvar m111:number = rhs.rawData[0];\r\n\t\tvar m112:number = rhs.rawData[1];\r\n\t\tvar m113:number = rhs.rawData[2];\r\n\t\tvar m114:number = rhs.rawData[3];\r\n\t\tvar m121:number = rhs.rawData[4];\r\n\t\tvar m122:number = rhs.rawData[5];\r\n\t\tvar m123:number = rhs.rawData[6];\r\n\t\tvar m124:number = rhs.rawData[7];\r\n\t\tvar m131:number = rhs.rawData[8];\r\n\t\tvar m132:number = rhs.rawData[9];\r\n\t\tvar m133:number = rhs.rawData[10];\r\n\t\tvar m134:number = rhs.rawData[11];\r\n\t\tvar m141:number = rhs.rawData[12];\r\n\t\tvar m142:number = rhs.rawData[13];\r\n\t\tvar m143:number = rhs.rawData[14];\r\n\t\tvar m144:number = rhs.rawData[15];\r\n\r\n\t\tvar m211:number = this.rawData[0];\r\n\t\tvar m212:number = this.rawData[1];\r\n\t\tvar m213:number = this.rawData[2];\r\n\t\tvar m214:number = this.rawData[3];\r\n\t\tvar m221:number = this.rawData[4];\r\n\t\tvar m222:number = this.rawData[5];\r\n\t\tvar m223:number = this.rawData[6];\r\n\t\tvar m224:number = this.rawData[7];\r\n\t\tvar m231:number = this.rawData[8];\r\n\t\tvar m232:number = this.rawData[9];\r\n\t\tvar m233:number = this.rawData[10];\r\n\t\tvar m234:number = this.rawData[11];\r\n\t\tvar m241:number = this.rawData[12];\r\n\t\tvar m242:number = this.rawData[13];\r\n\t\tvar m243:number = this.rawData[14];\r\n\t\tvar m244:number = this.rawData[15];\r\n\r\n\t\tthis.rawData[0] = m111*m211 + m112*m221 + m113*m231 + m114*m241;\r\n\t\tthis.rawData[1] = m111*m212 + m112*m222 + m113*m232 + m114*m242;\r\n\t\tthis.rawData[2] = m111*m213 + m112*m223 + m113*m233 + m114*m243;\r\n\t\tthis.rawData[3] = m111*m214 + m112*m224 + m113*m234 + m114*m244;\r\n\r\n\t\tthis.rawData[4] = m121*m211 + m122*m221 + m123*m231 + m124*m241;\r\n\t\tthis.rawData[5] = m121*m212 + m122*m222 + m123*m232 + m124*m242;\r\n\t\tthis.rawData[6] = m121*m213 + m122*m223 + m123*m233 + m124*m243;\r\n\t\tthis.rawData[7] = m121*m214 + m122*m224 + m123*m234 + m124*m244;\r\n\r\n\t\tthis.rawData[8] = m131*m211 + m132*m221 + m133*m231 + m134*m241;\r\n\t\tthis.rawData[9] = m131*m212 + m132*m222 + m133*m232 + m134*m242;\r\n\t\tthis.rawData[10] = m131*m213 + m132*m223 + m133*m233 + m134*m243;\r\n\t\tthis.rawData[11] = m131*m214 + m132*m224 + m133*m234 + m134*m244;\r\n\r\n\t\tthis.rawData[12] = m141*m211 + m142*m221 + m143*m231 + m144*m241;\r\n\t\tthis.rawData[13] = m141*m212 + m142*m222 + m143*m232 + m144*m242;\r\n\t\tthis.rawData[14] = m141*m213 + m142*m223 + m143*m233 + m144*m243;\r\n\t\tthis.rawData[15] = m141*m214 + m142*m224 + m143*m234 + m144*m244;\r\n\t}\r\n\r\n\t/**\r\n\t * Prepends an incremental rotation to a Matrix3D object.\r\n\t */\r\n\tpublic prependRotation(degrees:number, axis:Vector3D) //, pivot:Vector3D = null )\r\n\t{\r\n\t\tvar m:Matrix3D = Matrix3D.getAxisRotation(axis.x, axis.y, axis.z, degrees);\r\n\r\n\t\t/*\r\n\t\t if ( pivot != null )\r\n\t\t {\r\n\t\t var p:Vector3D = pivot;\r\n\t\t m.appendTranslation( p.x, p.y, p.z );\r\n\t\t }\r\n\t\t */\r\n\t\tthis.prepend(m);\r\n\t}\r\n\r\n\t/**\r\n\t * Prepends an incremental scale change along the x, y, and z axes to a Matrix3D object.\r\n\t */\r\n\tpublic prependScale(xScale:number, yScale:number, zScale:number)\r\n\t{\r\n\t\tif(xScale == 1 && yScale == 1 && zScale == 1)\r\n\t\t\treturn;\r\n\r\n\t\tvar raw:Float32Array = Matrix3D.tempRawData;\r\n\r\n\t\traw[0] = xScale;\r\n\t\traw[1] = 0;\r\n\t\traw[2] = 0;\r\n\t\traw[3] = 0;\r\n\r\n\t\traw[4] = 0;\r\n\t\traw[5] = yScale;\r\n\t\traw[6] = 0;\r\n\t\traw[7] = 0;\r\n\r\n\t\traw[8] = 0;\r\n\t\traw[9] = 0;\r\n\t\traw[10] = zScale;\r\n\t\traw[11] = 0;\r\n\r\n\t\traw[12] = 0;\r\n\t\traw[13] = 0;\r\n\t\traw[14] = 0;\r\n\t\traw[15] = 1;\r\n\r\n\t\tthis.prepend(Matrix3D.tempMatrix);\r\n\t}\r\n\r\n\t/**\r\n\t * Prepends an incremental translation, a repositioning along the x, y, and z axes, to a Matrix3D object.\r\n\t */\r\n\tpublic prependTranslation(x:number, y:number, z:number)\r\n\t{\r\n\t\tvar raw:Float32Array = Matrix3D.tempRawData;\r\n\r\n\t\traw[0] = 1;\r\n\t\traw[1] = 0;\r\n\t\traw[2] = 0;\r\n\t\traw[3] = 0;\r\n\r\n\t\traw[4] = 0;\r\n\t\traw[5] = 1;\r\n\t\traw[6] = 0;\r\n\t\traw[7] = 0;\r\n\r\n\t\traw[8] = 0;\r\n\t\traw[9] = 0;\r\n\t\traw[10] = 1;\r\n\t\traw[11] = 0;\r\n\r\n\t\traw[12] = x;\r\n\t\traw[13] = y;\r\n\t\traw[14] = z;\r\n\t\traw[15] = 1;\r\n\r\n\t\tthis.prepend(Matrix3D.tempMatrix);\r\n\t}\r\n\r\n\t// TODO orientationStyle\r\n\t/**\r\n\t * Sets the transformation matrix's translation, rotation, and scale settings.\r\n\t */\r\n\tpublic recompose(components:Vector3D[]):boolean\r\n\t{\r\n\t\tvar pos:Vector3D = (components[0])? components[0] : this.position;\r\n\r\n\t\tthis.identity();\r\n\t\tvar scale:Vector3D = components[3];\r\n\t\tif(scale && (scale.x != 1 || scale.y != 1 || scale.z != 1))\r\n\t\t\tthis.appendScale(scale.x, scale.y, scale.z);\r\n\r\n\t\tvar skew:Vector3D = components[2];\r\n\t\tif(skew && (skew.x !=0 || skew.y != 0 || skew.z != 0))\r\n\t\t\tthis.appendSkew(skew.x, skew.y, skew.z);\r\n\r\n\t\tvar sin:number;\r\n\t\tvar cos:number;\r\n\t\tvar raw:Float32Array = Matrix3D.tempRawData;\r\n\t\traw[12] = 0;\r\n\t\traw[13] = 0;\r\n\t\traw[14] = 0;\r\n\t\traw[15] = 0;\r\n\r\n\t\tvar rotation:Vector3D = components[1];\r\n\t\tif (rotation) {\r\n\t\t\tvar angle:number = -rotation.x;\r\n\t\t\tif(angle != 0){\r\n\t\t\t\tsin = Math.sin(angle);\r\n\t\t\t\tcos = Math.cos(angle);\r\n\r\n\t\t\t\traw[0] = 1;\r\n\t\t\t\traw[1] = 0;\r\n\t\t\t\traw[2] = 0;\r\n\t\t\t\traw[3] = 0;\r\n\r\n\t\t\t\traw[4] = 0;\r\n\t\t\t\traw[5] = cos;\r\n\t\t\t\traw[6] = -sin;\r\n\t\t\t\traw[7] = 0;\r\n\r\n\t\t\t\traw[8] = 0;\r\n\t\t\t\traw[9] = sin;\r\n\t\t\t\traw[10] = cos;\r\n\t\t\t\traw[11] = 0;\r\n\r\n\t\t\t\tthis.append(Matrix3D.tempMatrix);\r\n\t\t\t}\r\n\t\t\tangle = -rotation.y;\r\n\t\t\tif(angle != 0){\r\n\t\t\t\tsin = Math.sin(angle);\r\n\t\t\t\tcos = Math.cos(angle);\r\n\r\n\t\t\t\traw[0] = cos;\r\n\t\t\t\traw[1] = 0;\r\n\t\t\t\traw[2] = sin;\r\n\t\t\t\traw[3] = 0;\r\n\r\n\t\t\t\traw[4] = 0;\r\n\t\t\t\traw[5] = 1;\r\n\t\t\t\traw[6] = 0;\r\n\t\t\t\traw[7] = 0;\r\n\r\n\t\t\t\traw[8] = -sin;\r\n\t\t\t\traw[9] = 0;\r\n\t\t\t\traw[10] = cos;\r\n\t\t\t\traw[11] = 0;\r\n\r\n\t\t\t\tthis.append(Matrix3D.tempMatrix);\r\n\t\t\t}\r\n\t\t\tangle = -rotation.z;\r\n\t\t\tif(angle != 0){\r\n\t\t\t\tsin = Math.sin(angle);\r\n\t\t\t\tcos = Math.cos(angle);\r\n\r\n\t\t\t\traw[0] = cos;\r\n\t\t\t\traw[1] = -sin;\r\n\t\t\t\traw[2] = 0;\r\n\t\t\t\traw[3] = 0;\r\n\r\n\t\t\t\traw[4] = sin;\r\n\t\t\t\traw[5] = cos;\r\n\t\t\t\traw[6] = 0;\r\n\t\t\t\traw[7] = 0;\r\n\r\n\t\t\t\traw[8] = 0;\r\n\t\t\t\traw[9] = 0;\r\n\t\t\t\traw[10] = 1;\r\n\t\t\t\traw[11] = 0;\r\n\r\n\t\t\t\tthis.append(Matrix3D.tempMatrix);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.position = pos;\r\n\t\tthis.rawData[15] = 1;\r\n\r\n\t\treturn true;\r\n\t}\r\n\r\n\tpublic transformVector(v:Vector3D, t:Vector3D = null):Vector3D\r\n\t{\r\n\t\tif (v == null)\r\n\t\t\treturn t || new Vector3D();\r\n\r\n\t\tvar x:number = v.x;\r\n\t\tvar y:number = v.y;\r\n\t\tvar z:number = v.z;\r\n\r\n\t\tif (!t)\r\n\t\t\tt = new Vector3D();\r\n\r\n\t\tt.x = x*this.rawData[0] + y*this.rawData[4] + z*this.rawData[8] + this.rawData[12];\r\n\t\tt.y = x*this.rawData[1] + y*this.rawData[5] + z*this.rawData[9] + this.rawData[13];\r\n\t\tt.z = x*this.rawData[2] + y*this.rawData[6] + z*this.rawData[10] + this.rawData[14];\r\n\t\tt.w = x*this.rawData[3] + y*this.rawData[7] + z*this.rawData[11] + this.rawData[15];\r\n\r\n\t\treturn t;\r\n\t}\r\n\r\n\tpublic transformBox(b:Box, t:Box = null):Box\r\n\t{\r\n\t\tif (b == null)\r\n\t\t\treturn t || new Box();\r\n\r\n\t\tvar minX:number, minY:number, minZ:number;\r\n\t\tvar maxX:number, maxY:number, maxZ:number;\r\n\r\n\t\tmaxX = b.width + (minX = b.x);\r\n\t\tmaxY = b.height + (minY = b.y);\r\n\t\tmaxZ = b.depth + (minZ = b.z);\r\n\r\n\t\tif (!t)\r\n\t\t\tt = new Box();\r\n\r\n\t\t//TODO: take account of shear\r\n\t\tt.width = maxX*this.rawData[0] + maxY*this.rawData[4] + maxZ*this.rawData[8] + this.rawData[12] - (t.x = minX*this.rawData[0] + minY*this.rawData[4] + minZ*this.rawData[8] + this.rawData[12]);\r\n\t\tt.height = maxX*this.rawData[1] + maxY*this.rawData[5] + maxZ*this.rawData[9] + this.rawData[13] - (t.y = minX*this.rawData[1] + minY*this.rawData[5] + minZ*this.rawData[9] + this.rawData[13]);\r\n\t\tt.depth = maxX*this.rawData[2] + maxY*this.rawData[6] + maxZ*this.rawData[10] + this.rawData[14] - (t.z = minX*this.rawData[2] + minY*this.rawData[6] + minZ*this.rawData[10] + this.rawData[14]);\r\n\r\n\t\treturn t;\r\n\t}\r\n\r\n\t/**\r\n\t * Uses the transformation matrix to transform a Vector of Numbers from one coordinate space to another.\r\n\t */\r\n\tpublic transformVectors(vin:number[], vout:number[])\r\n\t{\r\n\t\tvar i:number = 0;\r\n\t\tvar x:number = 0, y:number = 0, z:number = 0;\r\n\r\n\t\twhile (i + 3 <= vin.length) {\r\n\t\t\tx = vin[i];\r\n\t\t\ty = vin[i + 1];\r\n\t\t\tz = vin[i + 2];\r\n\t\t\tvout[i] = x*this.rawData[0] + y*this.rawData[4] + z*this.rawData[8] + this.rawData[12];\r\n\t\t\tvout[i + 1] = x*this.rawData[1] + y*this.rawData[5] + z*this.rawData[9] + this.rawData[13];\r\n\t\t\tvout[i + 2] = x*this.rawData[2] + y*this.rawData[6] + z*this.rawData[10] + this.rawData[14];\r\n\t\t\ti += 3;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Converts the current Matrix3D object to a matrix where the rows and columns are swapped.\r\n\t */\r\n\tpublic transpose()\r\n\t{\r\n\t\tvar raw:Float32Array = Matrix3D.tempRawData;\r\n\t\tthis.copyRawDataTo(raw);\r\n\r\n\t\tthis.rawData[1] = raw[4];\r\n\t\tthis.rawData[2] = raw[8];\r\n\t\tthis.rawData[3] = raw[12];\r\n\t\tthis.rawData[4] = raw[1];\r\n\t\tthis.rawData[6] = raw[9];\r\n\t\tthis.rawData[7] = raw[13];\r\n\t\tthis.rawData[8] = raw[2];\r\n\t\tthis.rawData[9] = raw[6];\r\n\t\tthis.rawData[11] = raw[14];\r\n\t\tthis.rawData[12] = raw[3];\r\n\t\tthis.rawData[13] = raw[7];\r\n\t\tthis.rawData[14] = raw[11];\r\n\t}\r\n\r\n\tstatic getAxisRotation(x:number, y:number, z:number, degrees:number):Matrix3D\r\n\t{\r\n\r\n\t\t// internal class use by rotations which have been tested\r\n\r\n\t\tvar m:Matrix3D = new Matrix3D();\r\n\r\n\t\tvar rad = degrees*( Math.PI/180 );\r\n\t\tvar c:number = Math.cos(rad);\r\n\t\tvar s:number = Math.sin(rad);\r\n\t\tvar t:number = 1 - c;\r\n\t\tvar tmp1:number, tmp2:number;\r\n\r\n\t\tm.rawData[0] = c + x*x*t;\r\n\t\tm.rawData[5] = c + y*y*t;\r\n\t\tm.rawData[10] = c + z*z*t;\r\n\r\n\t\ttmp1 = x*y*t;\r\n\t\ttmp2 = z*s;\r\n\t\tm.rawData[1] = tmp1 + tmp2;\r\n\t\tm.rawData[4] = tmp1 - tmp2;\r\n\t\ttmp1 = x*z*t;\r\n\t\ttmp2 = y*s;\r\n\t\tm.rawData[8] = tmp1 + tmp2;\r\n\t\tm.rawData[2] = tmp1 - tmp2;\r\n\t\ttmp1 = y*z*t;\r\n\t\ttmp2 = x*s;\r\n\t\tm.rawData[9] = tmp1 - tmp2;\r\n\t\tm.rawData[6] = tmp1 + tmp2;\r\n\r\n\t\treturn m;\r\n\t}\r\n\r\n\t/**\r\n\t * [read-only] A Number that determines whether a matrix is invertible.\r\n\t */\r\n\tpublic get determinant():number\r\n\t{\r\n\t\treturn ((this.rawData[0]*this.rawData[5] - this.rawData[4]*this.rawData[1])*(this.rawData[10]*this.rawData[15] - this.rawData[14]*this.rawData[11]) - (this.rawData[0]*this.rawData[9] - this.rawData[8]*this.rawData[1])*(this.rawData[6]*this.rawData[15] - this.rawData[14]*this.rawData[7]) + (this.rawData[0]*this.rawData[13] - this.rawData[12]*this.rawData[1])*(this.rawData[6]*this.rawData[11] - this.rawData[10]*this.rawData[7]) + (this.rawData[4]*this.rawData[9] - this.rawData[8]*this.rawData[5])*(this.rawData[2]*this.rawData[15] - this.rawData[14]*this.rawData[3]) - (this.rawData[4]*this.rawData[13] - this.rawData[12]*this.rawData[5])*(this.rawData[2]*this.rawData[11] - this.rawData[10]*this.rawData[3]) + (this.rawData[8]*this.rawData[13] - this.rawData[12]*this.rawData[9])*(this.rawData[2]*this.rawData[7] - this.rawData[6]*this.rawData[3]));\r\n\t}\r\n\r\n\t/**\r\n\t * A Vector3D object that holds the position, the 3D coordinate (x,y,z) of a display object within the\r\n\t * transformation's frame of reference.\r\n\t */\r\n\tpublic get position():Vector3D\r\n\t{\r\n\t\tif (this._position == null)\r\n\t\t\tthis._position = new Vector3D();\r\n\r\n\t\tthis._position.x = this.rawData[12];\r\n\t\tthis._position.y = this.rawData[13];\r\n\t\tthis._position.z = this.rawData[14];\r\n\r\n\t\treturn this._position;\r\n\t}\r\n\r\n\tpublic set position(value:Vector3D)\r\n\t{\r\n\t\tthis.rawData[12] = value.x;\r\n\t\tthis.rawData[13] = value.y;\r\n\t\tthis.rawData[14] = value.z;\r\n\t}\r\n\r\n\tpublic toFixed(decimalPlace:number):string\r\n\t{\r\n\t\tvar magnitude:number = Math.pow(10, decimalPlace);\r\n\t\treturn \"matrix3d(\" + Math.round(this.rawData[0]*magnitude)/magnitude + \",\" + Math.round(this.rawData[1]*magnitude)/magnitude + \",\" + Math.round(this.rawData[2]*magnitude)/magnitude + \",\" + Math.round(this.rawData[3]*magnitude)/magnitude + \",\" + Math.round(this.rawData[4]*magnitude)/magnitude + \",\" + Math.round(this.rawData[5]*magnitude)/magnitude + \",\" + Math.round(this.rawData[6]*magnitude)/magnitude + \",\" + Math.round(this.rawData[7]*magnitude)/magnitude + \",\" + Math.round(this.rawData[8]*magnitude)/magnitude + \",\" + Math.round(this.rawData[9]*magnitude)/magnitude + \",\" + Math.round(this.rawData[10]*magnitude)/magnitude + \",\" + Math.round(this.rawData[11]*magnitude)/magnitude + \",\" + Math.round(this.rawData[12]*magnitude)/magnitude + \",\" + Math.round(this.rawData[13]*magnitude)/magnitude + \",\" + Math.round(this.rawData[14]*magnitude)/magnitude + \",\" + Math.round(this.rawData[15]*magnitude)/magnitude + \")\";\r\n\t}\r\n\r\n\tpublic toString():string\r\n\t{\r\n\t\treturn \"matrix3d(\" + Math.round(this.rawData[0]*1000)/1000 + \",\" + Math.round(this.rawData[1]*1000)/1000 + \",\" + Math.round(this.rawData[2]*1000)/1000 + \",\" + Math.round(this.rawData[3]*1000)/1000 + \",\" + Math.round(this.rawData[4]*1000)/1000 + \",\" + Math.round(this.rawData[5]*1000)/1000 + \",\" + Math.round(this.rawData[6]*1000)/1000 + \",\" + Math.round(this.rawData[7]*1000)/1000 + \",\" + Math.round(this.rawData[8]*1000)/1000 + \",\" + Math.round(this.rawData[9]*1000)/1000 + \",\" + Math.round(this.rawData[10]*1000)/1000 + \",\" + Math.round(this.rawData[11]*1000)/1000 + \",\" + Math.round(this.rawData[12]*1000)/1000 + \",\" + Math.round(this.rawData[13]*1000)/1000 + \",\" + Math.round(this.rawData[14]*1000)/1000 + \",\" + Math.round(this.rawData[15]*1000)/1000 + \")\";\r\n\t}\r\n}\r\n\r\nexport = Matrix3D;",
    "import Point\t\t\t\t\t= require(\"awayjs-core/lib/geom/Point\");\r\nimport Vector3D\t\t\t\t\t= require(\"awayjs-core/lib/geom/Vector3D\");\r\nimport ArgumentError\t\t\t= require(\"awayjs-core/lib/errors/ArgumentError\");\r\n\r\n/**\r\n * The Matrix class represents a transformation matrix that determines how to\r\n * map points from one coordinate space to another. You can perform various\r\n * graphical transformations on a display object by setting the properties of\r\n * a Matrix object, applying that Matrix object to the <code>matrix</code>\r\n * property of a Transform object, and then applying that Transform object as\r\n * the <code>transform</code> property of the display object. These\r\n * transformation functions include translation(<i>x</i> and <i>y</i>\r\n * repositioning), rotation, scaling, and skewing.\r\n *\r\n * <p>Together these types of transformations are known as <i>affine\r\n * transformations</i>. Affine transformations preserve the straightness of\r\n * lines while transforming, so that parallel lines stay parallel.</p>\r\n *\r\n * <p>To apply a transformation matrix to a display object, you create a\r\n * Transform object, set its <code>matrix</code> property to the\r\n * transformation matrix, and then set the <code>transform</code> property of\r\n * the display object to the Transform object. Matrix objects are also used as\r\n * parameters of some methods, such as the following:</p>\r\n *\r\n * <ul>\r\n *   <li>The <code>draw()</code> method of a BitmapData object</li>\r\n *   <li>The <code>beginBitmapFill()</code> method,\r\n * <code>beginGradientFill()</code> method, or\r\n * <code>lineGradientStyle()</code> method of a Graphics object</li>\r\n * </ul>\r\n *\r\n * <p>A transformation matrix object is a 3 x 3 matrix with the following\r\n * contents:</p>\r\n *\r\n * <p>In traditional transformation matrixes, the <code>u</code>,\r\n * <code>v</code>, and <code>w</code> properties provide extra capabilities.\r\n * The Matrix class can only operate in two-dimensional space, so it always\r\n * assumes that the property values <code>u</code> and <code>v</code> are 0.0,\r\n * and that the property value <code>w</code> is 1.0. The effective values of\r\n * the matrix are as follows:</p>\r\n *\r\n * <p>You can get and set the values of all six of the other properties in a\r\n * Matrix object: <code>a</code>, <code>b</code>, <code>c</code>,\r\n * <code>d</code>, <code>tx</code>, and <code>ty</code>.</p>\r\n *\r\n * <p>The Matrix class supports the four major types of transformations:\r\n * translation, scaling, rotation, and skewing. You can set three of these\r\n * transformations by using specialized methods, as described in the following\r\n * table: </p>\r\n *\r\n * <p>Each transformation function alters the current matrix properties so\r\n * that you can effectively combine multiple transformations. To do this, you\r\n * call more than one transformation function before applying the matrix to\r\n * its display object target(by using the <code>transform</code> property of\r\n * that display object).</p>\r\n *\r\n * <p>Use the <code>new Matrix()</code> constructor to create a Matrix object\r\n * before you can call the methods of the Matrix object.</p>\r\n */\r\nclass Matrix\r\n{\r\n\t/**\r\n\t * The value that affects the positioning of pixels along the <i>x</i> axis\r\n\t * when scaling or rotating an image.\r\n\t */\r\n\tpublic a:number;\r\n\r\n\t/**\r\n\t * The value that affects the positioning of pixels along the <i>y</i> axis\r\n\t * when rotating or skewing an image.\r\n\t */\r\n\tpublic b:number;\r\n\r\n\t/**\r\n\t * The value that affects the positioning of pixels along the <i>x</i> axis\r\n\t * when rotating or skewing an image.\r\n\t */\r\n\tpublic c:number;\r\n\r\n\t/**\r\n\t * The value that affects the positioning of pixels along the <i>y</i> axis\r\n\t * when scaling or rotating an image.\r\n\t */\r\n\tpublic d:number;\r\n\r\n\t/**\r\n\t * The distance by which to translate each point along the <i>x</i> axis.\r\n\t */\r\n\tpublic tx:number;\r\n\r\n\t/**\r\n\t * The distance by which to translate each point along the <i>y</i> axis.\r\n\t */\r\n\tpublic ty:number;\r\n\r\n\t/**\r\n\t * Creates a new Matrix object with the specified parameters. In matrix\r\n\t * notation, the properties are organized like this:\r\n\t *\r\n\t * <p>If you do not provide any parameters to the <code>new Matrix()</code>\r\n\t * constructor, it creates an <i>identity matrix</i> with the following\r\n\t * values:</p>\r\n\t *\r\n\t * <p>In matrix notation, the identity matrix looks like this:</p>\r\n\t *\r\n\t * @param a  The value that affects the positioning of pixels along the\r\n\t *           <i>x</i> axis when scaling or rotating an image.\r\n\t * @param b  The value that affects the positioning of pixels along the\r\n\t *           <i>y</i> axis when rotating or skewing an image.\r\n\t * @param c  The value that affects the positioning of pixels along the\r\n\t *           <i>x</i> axis when rotating or skewing an image.\r\n\t * @param d  The value that affects the positioning of pixels along the\r\n\t *           <i>y</i> axis when scaling or rotating an image..\r\n\t * @param tx The distance by which to translate each point along the <i>x</i>\r\n\t *           axis.\r\n\t * @param ty The distance by which to translate each point along the <i>y</i>\r\n\t *           axis.\r\n\t */\r\n\tconstructor(a:number = 1, b:number = 0, c:number = 0, d:number = 1, tx:number = 0, ty:number = 0)\r\n\t{\r\n\t\tthis.a = a;\r\n\t\tthis.b = b;\r\n\t\tthis.c = c;\r\n\t\tthis.d = d;\r\n\t\tthis.tx = tx;\r\n\t\tthis.ty = ty;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns a new Matrix object that is a clone of this matrix, with an exact\r\n\t * copy of the contained object.\r\n\t *\r\n\t * @return A Matrix object.\r\n\t */\r\n\tpublic clone():Matrix\r\n\t{\r\n\t\treturn new Matrix(this.a, this.b, this.c, this.d, this.tx, this.ty);\r\n\t}\r\n\r\n\t/**\r\n\t * Concatenates a matrix with the current matrix, effectively combining the\r\n\t * geometric effects of the two. In mathematical terms, concatenating two\r\n\t * matrixes is the same as combining them using matrix multiplication.\r\n\t *\r\n\t * <p>For example, if matrix <code>m1</code> scales an object by a factor of\r\n\t * four, and matrix <code>m2</code> rotates an object by 1.5707963267949\r\n\t * radians(<code>Math.PI/2</code>), then <code>m1.concat(m2)</code>\r\n\t * transforms <code>m1</code> into a matrix that scales an object by a factor\r\n\t * of four and rotates the object by <code>Math.PI/2</code> radians. </p>\r\n\t *\r\n\t * <p>This method replaces the source matrix with the concatenated matrix. If\r\n\t * you want to concatenate two matrixes without altering either of the two\r\n\t * source matrixes, first copy the source matrix by using the\r\n\t * <code>clone()</code> method, as shown in the Class Examples section.</p>\r\n\t *\r\n\t * @param matrix The matrix to be concatenated to the source matrix.\r\n\t */\r\n\tpublic concat(matrix:Matrix):void\r\n\t{\r\n\t\tvar a1 = this.a*matrix.a + this.b*matrix.c;\r\n\t\tthis.b = this.a*matrix.b + this.b*matrix.d;\r\n\t\tthis.a = a1;\r\n\r\n\t\tvar c1 = this.c*matrix.a + this.d*matrix.c;\r\n\t\tthis.d = this.c*matrix.b + this.d*matrix.d;\r\n\r\n\t\tthis.c = c1;\r\n\r\n\t\tvar tx1 = this.tx*matrix.a + this.ty*matrix.c + matrix.tx;\r\n\t\tthis.ty = this.tx*matrix.b + this.ty*matrix.d + matrix.ty;\r\n\t\tthis.tx = tx1;\r\n\t}\r\n\r\n\t/**\r\n\t * Copies a Vector3D object into specific column of the calling Matrix3D\r\n\t * object.\r\n\t *\r\n\t * @param column   The column from which to copy the data from.\r\n\t * @param vector3D The Vector3D object from which to copy the data.\r\n\t */\r\n\tpublic copyColumnFrom(column:number, vector3D:Vector3D):void\r\n\t{\r\n\t\tif (column > 2) {\r\n\t\t\tthrow \"Column \" + column + \" out of bounds (2)\";\r\n\t\t} else if (column == 0) {\r\n\t\t\tthis.a = vector3D.x;\r\n\t\t\tthis.c = vector3D.y;\r\n\t\t} else if (column == 1) {\r\n\t\t\tthis.b = vector3D.x;\r\n\t\t\tthis.d = vector3D.y;\r\n\t\t} else {\r\n\t\t\tthis.tx = vector3D.x;\r\n\t\t\tthis.ty = vector3D.y;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Copies specific column of the calling Matrix object into the Vector3D\r\n\t * object. The w element of the Vector3D object will not be changed.\r\n\t *\r\n\t * @param column   The column from which to copy the data from.\r\n\t * @param vector3D The Vector3D object from which to copy the data.\r\n\t */\r\n\tpublic copyColumnTo(column:number, vector3D:Vector3D):void\r\n\t{\r\n\t\tif (column > 2) {\r\n\t\t\tthrow new ArgumentError(\"ArgumentError, Column \" + column + \" out of bounds [0, ..., 2]\");\r\n\t\t} else if (column == 0) {\r\n\t\t\tvector3D.x = this.a;\r\n\t\t\tvector3D.y = this.c;\r\n\t\t\tvector3D.z = 0;\r\n\t\t} else if (column == 1) {\r\n\t\t\tvector3D.x = this.b;\r\n\t\t\tvector3D.y = this.d;\r\n\t\t\tvector3D.z = 0;\r\n\t\t} else {\r\n\t\t\tvector3D.x = this.tx;\r\n\t\t\tvector3D.y = this.ty;\r\n\t\t\tvector3D.z = 1;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Copies all of the matrix data from the source Point object into the\r\n\t * calling Matrix object.\r\n\t *\r\n\t * @param sourceMatrix The Matrix object from which to copy the data.\r\n\t */\r\n\tpublic copyFrom(sourceMatrix:Matrix):void\r\n\t{\r\n\t\tthis.a = sourceMatrix.a;\r\n\t\tthis.b = sourceMatrix.b;\r\n\t\tthis.c = sourceMatrix.c;\r\n\t\tthis.d = sourceMatrix.d;\r\n\t\tthis.tx = sourceMatrix.tx;\r\n\t\tthis.ty = sourceMatrix.ty;\r\n\t}\r\n\r\n\t/**\r\n\t * Copies a Vector3D object into specific row of the calling Matrix object.\r\n\t *\r\n\t * @param row      The row from which to copy the data from.\r\n\t * @param vector3D The Vector3D object from which to copy the data.\r\n\t */\r\n\tpublic copyRowFrom(row:number, vector3D:Vector3D):void\r\n\t{\r\n\t\tif (row > 2) {\r\n\t\t\tthrow new ArgumentError(\"ArgumentError, Row \" + row + \" out of bounds [0, ..., 2]\");\r\n\t\t} else if (row == 0) {\r\n\t\t\tthis.a = vector3D.x;\r\n\t\t\tthis.c = vector3D.y;\r\n\t\t} else if (row == 1) {\r\n\t\t\tthis.b = vector3D.x;\r\n\t\t\tthis.d = vector3D.y;\r\n\t\t} else {\r\n\t\t\tthis.tx = vector3D.x;\r\n\t\t\tthis.ty = vector3D.y;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Copies specific row of the calling Matrix object into the Vector3D object.\r\n\t * The w element of the Vector3D object will not be changed.\r\n\t *\r\n\t * @param row      The row from which to copy the data from.\r\n\t * @param vector3D The Vector3D object from which to copy the data.\r\n\t */\r\n\tpublic copyRowTo(row:number, vector3D:Vector3D):void\r\n\t{\r\n\t\tif (row > 2) {\r\n\t\t\tthrow new ArgumentError(\"ArgumentError, Row \" + row + \" out of bounds [0, ..., 2]\");\r\n\t\t} else if (row == 0) {\r\n\t\t\tvector3D.x = this.a;\r\n\t\t\tvector3D.y = this.b;\r\n\t\t\tvector3D.z = this.tx;\r\n\t\t} else if (row == 1) {\r\n\t\t\tvector3D.x = this.c;\r\n\t\t\tvector3D.y = this.d;\r\n\t\t\tvector3D.z = this.ty;\r\n\t\t} else {\r\n\t\t\tvector3D.setTo(0, 0, 1);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Includes parameters for scaling, rotation, and translation. When applied\r\n\t * to a matrix it sets the matrix's values based on those parameters.\r\n\t *\r\n\t * <p>Using the <code>createBox()</code> method lets you obtain the same\r\n\t * matrix as you would if you applied the <code>identity()</code>,\r\n\t * <code>rotate()</code>, <code>scale()</code>, and <code>translate()</code>\r\n\t * methods in succession. For example, <code>mat1.createBox(2,2,Math.PI/4,\r\n\t * 100, 100)</code> has the same effect as the following:</p>\r\n\t *\r\n\t * @param scaleX   The factor by which to scale horizontally.\r\n\t * @param scaleY   The factor by which scale vertically.\r\n\t * @param rotation The amount to rotate, in radians.\r\n\t * @param tx       The number of pixels to translate(move) to the right\r\n\t *                 along the <i>x</i> axis.\r\n\t * @param ty       The number of pixels to translate(move) down along the\r\n\t *                 <i>y</i> axis.\r\n\t */\r\n\tpublic createBox(scaleX:number, scaleY:number, rotation:number = 0, tx:number = 0, ty:number = 0):void\r\n\t{\r\n\t\tthis.a = scaleX;\r\n\t\tthis.d = scaleY;\r\n\t\tthis.b = rotation;\r\n\t\tthis.tx = tx;\r\n\t\tthis.ty = ty;\r\n\t}\r\n\r\n\t/**\r\n\t * Creates the specific style of matrix expected by the\r\n\t * <code>beginGradientFill()</code> and <code>lineGradientStyle()</code>\r\n\t * methods of the Graphics class. Width and height are scaled to a\r\n\t * <code>scaleX</code>/<code>scaleY</code> pair and the\r\n\t * <code>tx</code>/<code>ty</code> values are offset by half the width and\r\n\t * height.\r\n\t *\r\n\t * <p>For example, consider a gradient with the following\r\n\t * characteristics:</p>\r\n\t *\r\n\t * <ul>\r\n\t *   <li><code>GradientType.LINEAR</code></li>\r\n\t *   <li>Two colors, green and blue, with the ratios array set to <code>[0,\r\n\t * 255]</code></li>\r\n\t *   <li><code>SpreadMethod.PAD</code></li>\r\n\t *   <li><code>InterpolationMethod.LINEAR_RGB</code></li>\r\n\t * </ul>\r\n\t *\r\n\t * <p>The following illustrations show gradients in which the matrix was\r\n\t * defined using the <code>createGradientBox()</code> method with different\r\n\t * parameter settings:</p>\r\n\t *\r\n\t * @param width    The width of the gradient box.\r\n\t * @param height   The height of the gradient box.\r\n\t * @param rotation The amount to rotate, in radians.\r\n\t * @param tx       The distance, in pixels, to translate to the right along\r\n\t *                 the <i>x</i> axis. This value is offset by half of the\r\n\t *                 <code>width</code> parameter.\r\n\t * @param ty       The distance, in pixels, to translate down along the\r\n\t *                 <i>y</i> axis. This value is offset by half of the\r\n\t *                 <code>height</code> parameter.\r\n\t */\r\n\tpublic createGradientBox(width:number, height:number, rotation:number = 0, tx:number = 0, ty:number = 0):void\r\n\t{\r\n\t\tthis.a = width/1638.4;\r\n\t\tthis.d = height/1638.4;\r\n\r\n\t\tif (rotation != 0.0) {\r\n\t\t\tvar cos = Math.cos(rotation);\r\n\t\t\tvar sin = Math.sin(rotation);\r\n\r\n\t\t\tthis.b = sin*this.d;\r\n\t\t\tthis.c = -sin*this.a;\r\n\t\t\tthis.a *= cos;\r\n\t\t\tthis.d *= cos;\r\n\t\t} else {\r\n\t\t\tthis.b = this.c = 0;\r\n\t\t}\r\n\r\n\t\tthis.tx = tx + width/2;\r\n\t\tthis.ty = ty + height/2;\r\n\t}\r\n\r\n\t/**\r\n\t * Given a point in the pretransform coordinate space, returns the\r\n\t * coordinates of that point after the transformation occurs. Unlike the\r\n\t * standard transformation applied using the <code>transformPoint()</code>\r\n\t * method, the <code>deltaTransformPoint()</code> method's transformation\r\n\t * does not consider the translation parameters <code>tx</code> and\r\n\t * <code>ty</code>.\r\n\t *\r\n\t * @param point The point for which you want to get the result of the matrix\r\n\t *              transformation.\r\n\t * @return The point resulting from applying the matrix transformation.\r\n\t */\r\n\tpublic deltaTransformPoint(point:Point):Point\r\n\t{\r\n\t\treturn new Point(point.x*this.a + point.y*this.c, point.x*this.b + point.y*this.d);\r\n\t}\r\n\r\n\t/**\r\n\t * Sets each matrix property to a value that causes a null transformation. An\r\n\t * object transformed by applying an identity matrix will be identical to the\r\n\t * original.\r\n\t *\r\n\t * <p>After calling the <code>identity()</code> method, the resulting matrix\r\n\t * has the following properties: <code>a</code>=1, <code>b</code>=0,\r\n\t * <code>c</code>=0, <code>d</code>=1, <code>tx</code>=0,\r\n\t * <code>ty</code>=0.</p>\r\n\t *\r\n\t * <p>In matrix notation, the identity matrix looks like this:</p>\r\n\t *\r\n\t */\r\n\tpublic identity():void\r\n\t{\r\n\t\tthis.a = 1;\r\n\t\tthis.b = 0;\r\n\t\tthis.c = 0;\r\n\t\tthis.d = 1;\r\n\t\tthis.tx = 0;\r\n\t\tthis.ty = 0;\r\n\t}\r\n\r\n\t/**\r\n\t * Performs the opposite transformation of the original matrix. You can apply\r\n\t * an inverted matrix to an object to undo the transformation performed when\r\n\t * applying the original matrix.\r\n\t */\r\n\tpublic invert():void\r\n\t{\r\n\t\tvar norm = this.a*this.d - this.b*this.c;\r\n\r\n\t\tif (norm == 0) {\r\n\t\t\tthis.a = this.b = this.c = this.d = 0;\r\n\t\t\tthis.tx = -this.tx;\r\n\t\t\tthis.ty = -this.ty;\r\n\t\t} else {\r\n\t\t\tnorm = 1.0/norm;\r\n\t\t\tvar a1 = this.d*norm;\r\n\t\t\tthis.d = this.a*norm;\r\n\t\t\tthis.a = a1;\r\n\t\t\tthis.b *= -norm;\r\n\t\t\tthis.c *= -norm;\r\n\r\n\t\t\tvar tx1 = -this.a*this.tx - this.c*this.ty;\r\n\t\t\tthis.ty = -this.b*this.tx - this.d*this.ty;\r\n\t\t\tthis.tx = tx1;\r\n\t\t}\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * Returns a new Matrix object that is a clone of this matrix, with an exact\r\n\t * copy of the contained object.\r\n\t *\r\n\t * @param matrix The matrix for which you want to get the result of the matrix\r\n\t *               transformation.\r\n\t * @return A Matrix object.\r\n\t */\r\n\tpublic multiply(matrix:Matrix):Matrix\r\n\t{\r\n\t\tvar result = new Matrix();\r\n\r\n\t\tresult.a = this.a*matrix.a + this.b*matrix.c;\r\n\t\tresult.b = this.a*matrix.b + this.b*matrix.d;\r\n\t\tresult.c = this.c*matrix.a + this.d*matrix.c;\r\n\t\tresult.d = this.c*matrix.b + this.d*matrix.d;\r\n\r\n\t\tresult.tx = this.tx*matrix.a + this.ty*matrix.c + matrix.tx;\r\n\t\tresult.ty = this.tx*matrix.b + this.ty*matrix.d + matrix.ty;\r\n\r\n\t\treturn result;\r\n\t}\r\n\r\n\t/**\r\n\t * Applies a rotation transformation to the Matrix object.\r\n\t *\r\n\t * <p>The <code>rotate()</code> method alters the <code>a</code>,\r\n\t * <code>b</code>, <code>c</code>, and <code>d</code> properties of the\r\n\t * Matrix object. In matrix notation, this is the same as concatenating the\r\n\t * current matrix with the following:</p>\r\n\t *\r\n\t * @param angle The rotation angle in radians.\r\n\t */\r\n\tpublic rotate(angle:number):void\r\n\t{\r\n\t\tvar cos = Math.cos(angle);\r\n\t\tvar sin = Math.sin(angle);\r\n\r\n\t\tvar a1 = this.a*cos - this.b*sin;\r\n\t\tthis.b = this.a*sin + this.b*cos;\r\n\t\tthis.a = a1;\r\n\r\n\t\tvar c1 = this.c*cos - this.d*sin;\r\n\t\tthis.d = this.c*sin + this.d*cos;\r\n\t\tthis.c = c1;\r\n\r\n\t\tvar tx1 = this.tx*cos - this.ty*sin;\r\n\t\tthis.ty = this.tx*sin + this.ty*cos;\r\n\t\tthis.tx = tx1;\r\n\t}\r\n\r\n\t/**\r\n\t * Applies a scaling transformation to the matrix. The <i>x</i> axis is\r\n\t * multiplied by <code>sx</code>, and the <i>y</i> axis it is multiplied by\r\n\t * <code>sy</code>.\r\n\t *\r\n\t * <p>The <code>scale()</code> method alters the <code>a</code> and\r\n\t * <code>d</code> properties of the Matrix object. In matrix notation, this\r\n\t * is the same as concatenating the current matrix with the following\r\n\t * matrix:</p>\r\n\t *\r\n\t * @param sx A multiplier used to scale the object along the <i>x</i> axis.\r\n\t * @param sy A multiplier used to scale the object along the <i>y</i> axis.\r\n\t */\r\n\tpublic scale(sx:number, sy:number):void\r\n\t{\r\n\t\tthis.a *= sx;\r\n\t\tthis.b *= sy;\r\n\r\n\t\tthis.c *= sx;\r\n\t\tthis.d *= sy;\r\n\r\n\t\tthis.tx *= sx;\r\n\t\tthis.ty *= sy;\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the members of Matrix to the specified values.\r\n\t *\r\n\t * @param a  The value that affects the positioning of pixels along the\r\n\t *           <i>x</i> axis when scaling or rotating an image.\r\n\t * @param b  The value that affects the positioning of pixels along the\r\n\t *           <i>y</i> axis when rotating or skewing an image.\r\n\t * @param c  The value that affects the positioning of pixels along the\r\n\t *           <i>x</i> axis when rotating or skewing an image.\r\n\t * @param d  The value that affects the positioning of pixels along the\r\n\t *           <i>y</i> axis when scaling or rotating an image..\r\n\t * @param tx The distance by which to translate each point along the <i>x</i>\r\n\t *           axis.\r\n\t * @param ty The distance by which to translate each point along the <i>y</i>\r\n\t *           axis.\r\n\t */\r\n\tpublic setTo(a:number, b:number, c:number, d:number, tx:number, ty:number):void\r\n\t{\r\n\t\tthis.a = a;\r\n\t\tthis.b = b;\r\n\t\tthis.c = c;\r\n\t\tthis.d = d;\r\n\t\tthis.tx = tx;\r\n\t\tthis.ty = ty;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns a text value listing the properties of the Matrix object.\r\n\t *\r\n\t * @return A string containing the values of the properties of the Matrix\r\n\t *         object: <code>a</code>, <code>b</code>, <code>c</code>,\r\n\t *         <code>d</code>, <code>tx</code>, and <code>ty</code>.\r\n\t */\r\n\tpublic toString():string\r\n\t{\r\n\t\treturn \"[Matrix] (a=\" + this.a + \", b=\" + this.b + \", c=\" + this.c + \", d=\" + this.d + \", tx=\" + this.tx + \", ty=\" + this.ty + \")\";\r\n\t}\r\n\r\n\t/**\r\n\t * Returns the result of applying the geometric transformation represented by\r\n\t * the Matrix object to the specified point.\r\n\t *\r\n\t * @param point The point for which you want to get the result of the Matrix\r\n\t *              transformation.\r\n\t * @return The point resulting from applying the Matrix transformation.\r\n\t */\r\n\tpublic transformPoint(point:Point):Point\r\n\t{\r\n\t\treturn new Point(point.x*this.a + point.y*this.c + this.tx, point.x*this.b + point.y*this.d + this.ty);\r\n\t}\r\n\r\n\t/**\r\n\t * Translates the matrix along the <i>x</i> and <i>y</i> axes, as specified\r\n\t * by the <code>dx</code> and <code>dy</code> parameters.\r\n\t *\r\n\t * @param dx The amount of movement along the <i>x</i> axis to the right, in\r\n\t *           pixels.\r\n\t * @param dy The amount of movement down along the <i>y</i> axis, in pixels.\r\n\t */\r\n\tpublic translate(dx:number, dy:number):void\r\n\t{\r\n\t\tthis.tx += dx;\r\n\t\tthis.ty += dy;\r\n\t}\r\n}\r\n\r\nexport = Matrix;",
    "/**\r\n * A Quaternion object which can be used to represent rotations.\r\n */\r\nclass Orientation3D\r\n{\r\n\t/**\r\n\t * The axis angle orientation uses a combination of an axis and an angle to determine the orientation.\r\n\t * @type {string}\r\n\t */\r\n\tpublic static AXIS_ANGLE:string = \"axisAngle\";\r\n\r\n\t/**\r\n\t * The default orientation for decompose() and recompose() methods, defines the orientation with three separate angles of rotation for each axis.\r\n\t * @type {string}\r\n\t */\r\n\tpublic static EULER_ANGLES:string = \"eulerAngles\";\r\n\r\n\t/**\r\n\t * The quaternion orientation uses complex numbers.\r\n\t * @type {string}\r\n\t */\r\n\tpublic static QUATERNION:string = \"quaternion\";\r\n}\r\n\r\nexport = Orientation3D;",
    "import Matrix3D\t\t\t\t\t= require(\"awayjs-core/lib/geom/Matrix3D\");\r\nimport Point\t\t\t\t\t= require(\"awayjs-core/lib/geom/Point\");\r\n\r\n/**\r\n * <p>The PerspectiveProjection class provides an easy way to assign or modify\r\n * the perspective transformations of a display object and all of its\r\n * children. For more complex or custom perspective transformations, use the\r\n * Matrix3D class. While the PerspectiveProjection class provides basic\r\n * three-dimensional presentation properties, the Matrix3D class provides more\r\n * detailed control over the three-dimensional presentation of display objects.\r\n * </p>\r\n *\r\n * <p>Projection is a way of representing a three-dimensional object in a\r\n * two-dimensional space, like a cube projected onto a computer screen.\r\n * Perspective projection uses a viewing frustum (a rectangular pyramid) to\r\n * model and project a three-dimensional world and its objects on the screen.\r\n * The viewing frustum becomes increasingly wider as it moves further from the\r\n * origin of the viewpoint. The origin of the viewpoint could be a camera or\r\n * the eyes of an observer facing the screen. The projected perspective\r\n * produces the illusion of three dimensions with depth and distance, where\r\n * the objects closer to the screen appear larger than the objects farther\r\n * from the screen.</p>\r\n *\r\n * <p>A default PerspectiveProjection object is a framework defined for\r\n * perspective transformation of the root object, based on the field of view\r\n * and aspect ratio (dimensions) of the stage. The projection center, the\r\n * vanishing point, is set to the center of the stage, which means the\r\n * three-dimensional display objects disappear toward the center of the stage\r\n * as they move back in the z axis. The default viewpoint is at point (0,0)\r\n * looking down the positive z axis. The y-axis points down toward the bottom\r\n * of the screen. You can gain access to the root display object's perspective\r\n * projection settings and change the field of view and projection center\r\n * properties of the perspectiveProjection property through the root object's\r\n * <code>DisplayObject.transform</code> property.</p>\r\n *\r\n * <p>You can also set a different perspective projection setting for a\r\n * display object through the parent's perspective projection. First, create a\r\n * PerspectiveProjection object and set its <code>fieldOfView</code> and\r\n * <code>projectionCenter</code> properties. Next, assign the\r\n * PerspectiveProjection object to the parent display object using the\r\n * <code>DisplayObject.transform</code> property. The specified projection\r\n * matrix and transformation will then apply to all the display object's\r\n * three-dimensional children.</p>\r\n *\r\n * <p>To modify a perspective projection of the stage or root object: use the\r\n * <code>transform.matrix</code> property of the root display object to gain\r\n * access to the PerspectiveProjection object. Or, apply different perspective\r\n * projection properties to a display object by setting the perspective\r\n * projection properties of the display object's parent. The child display\r\n * object inherits the new properties. Specifically, create a\r\n * PerspectiveProjection object and set its properties, then assign the\r\n * PerspectiveProjection object to the <code>perspectiveProjection</code>\r\n * property of the parent display object's <code>transform</code> property.\r\n * The specified projection transformation then applies to all the display\r\n * object's three-dimensional children.</p>\r\n *\r\n * <p>Since both PerspectiveProjection and Matrix3D objects perform\r\n * perspective transformations, do not assign both to a display object at the\r\n * same time. Use the PerspectiveProjection object for focal length and\r\n * projection center changes. For more control over the perspective\r\n * transformation, create a perspective projection Matrix3D object.</p>\r\n */\r\nclass PerspectiveProjection\r\n{\r\n\tprivate _matrix3D:Matrix3D;\r\n\r\n\t/**\r\n\t * Specifies an angle, as a degree between 0 and 180, for the field of\r\n\t * view in three dimensions. This value determines how strong the\r\n\t * perspective transformation and distortion apply to a\r\n\t * three-dimensional display object with a non-zero z-coordinate.\r\n\t *\r\n\t * <p>A degree close to 0 means that the screen's two-dimensional x-\r\n\t * and y-coordinates are roughly the same as the three-dimensional x-,\r\n\t * y-, and z-coordinates with little or no distortion. In other words,\r\n\t * for a small angle, a display object moving down the z axis appears\r\n\t * to stay near the same size and moves little.</p>\r\n\t *\r\n\t * <p>A value close to 180 degrees results in a fisheye projection effect:\r\n\t * positions with a z value smaller than 0 are magnified, while\r\n\t * positions with a z value larger than 0 are minimized. With a large\r\n\t * angle, a display object moving down the z axis appears to change\r\n\t * size quickly and moves a great distance. If the field of view is\r\n\t * set to 0 or 180, nothing is seen on the screen.</p>\r\n\t */\r\n\tpublic fieldOfView:number;\r\n\r\n\t/**\r\n\t * The distance between the eye or the viewpoint's origin (0,0,0) and\r\n\t * the display object located in the z axis. During the perspective\r\n\t * transformation, the <code>focalLength</code> is calculated\r\n\t * dynamically using the angle of the field of view and the stage's\r\n\t * aspect ratio (stage width divided by stage height).\r\n\t *\r\n\t * @see away.geom.PerspectiveProjection#fieldOfView\r\n\t */\r\n\tpublic focalLength:number;\r\n\r\n\t/**\r\n\t * A two-dimensional point representing the center of the projection,\r\n\t * the vanishing point for the display object.\r\n\t *\r\n\t * <p>The <code>projectionCenter</code> property is an offset to the\r\n\t * default registration point that is the upper left of the stage,\r\n\t * point (0,0). The default projection transformation center is in the\r\n\t * middle of the stage, which means the three-dimensional display\r\n\t * objects disappear toward the center of the stage as they move\r\n\t * backwards in the z axis.</p>\r\n\t */\r\n\tpublic projectionCenter:Point;\r\n\r\n\t/**\r\n\t * Creates an instance of a PerspectiveProjection object.\r\n\t */\r\n\tconstructor()\r\n\t{\r\n\r\n\t}\r\n\t/**\r\n\t * Returns the underlying Matrix3D object of the display object.\r\n\t *\r\n\t * <p>A display object, like the root object, can have a\r\n\t * PerspectiveProjection object without needing a Matrix3D property\r\n\t * defined for its transformations. In fact, use either a\r\n\t * PerspectiveProjection or a Matrix3D object to specify the\r\n\t * perspective transformation. If when using the PerspectiveProjection\r\n\t * object, a Matrix3D object was needed, the <code>toMatrix3D()</code>\r\n\t * method can retrieve the underlying Matrix3D object of the display\r\n\t * object. For example, the <code>toMatrix3D()</code> method can be\r\n\t * used with the <code>Utils3D.projectVectors()</code> method.</p>\r\n\t *\r\n\t * @see away.geom.Matrix3D\r\n\t */\r\n\tpublic toMatrix3D():Matrix3D\r\n\t{\r\n\t\treturn this._matrix3D;\r\n\t}\r\n}\r\n\r\nexport = PerspectiveProjection;",
    "import PlaneClassification\t= require(\"awayjs-core/lib/geom/PlaneClassification\");\r\nimport Vector3D\t\t\t\t= require(\"awayjs-core/lib/geom/Vector3D\");\r\n\r\nclass Plane3D\r\n{\r\n\t/**\r\n\t * The A coefficient of this plane. (Also the x dimension of the plane normal)\r\n\t */\r\n\tpublic a:number;\r\n\r\n\t/**\r\n\t * The B coefficient of this plane. (Also the y dimension of the plane normal)\r\n\t */\r\n\tpublic b:number;\r\n\r\n\t/**\r\n\t * The C coefficient of this plane. (Also the z dimension of the plane normal)\r\n\t */\r\n\tpublic c:number;\r\n\r\n\t/**\r\n\t * The D coefficient of this plane. (Also the inverse dot product between normal and point)\r\n\t */\r\n\tpublic d:number;\r\n\r\n\tpublic _iAlignment:number;\r\n\r\n\t// indicates the alignment of the plane\r\n\tpublic static ALIGN_ANY:number = 0;\r\n\tpublic static ALIGN_XY_AXIS:number = 1;\r\n\tpublic static ALIGN_YZ_AXIS:number = 2;\r\n\tpublic static ALIGN_XZ_AXIS:number = 3;\r\n\r\n\t/**\r\n\t * Create a Plane3D with ABCD coefficients\r\n\t */\r\n\tconstructor(a:number = 0, b:number = 0, c:number = 0, d:number = 0)\r\n\t{\r\n\t\tthis.a = a;\r\n\t\tthis.b = b;\r\n\t\tthis.c = c;\r\n\t\tthis.d = d;\r\n\r\n\t\tif (a == 0 && b == 0) {\r\n\r\n\t\t\tthis._iAlignment = Plane3D.ALIGN_XY_AXIS;\r\n\r\n\t\t} else if (b == 0 && c == 0) {\r\n\r\n\t\t\tthis._iAlignment = Plane3D.ALIGN_YZ_AXIS;\r\n\r\n\t\t} else if (a == 0 && c == 0) {\r\n\r\n\t\t\tthis._iAlignment = Plane3D.ALIGN_XZ_AXIS;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis._iAlignment = Plane3D.ALIGN_ANY;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Fills this Plane3D with the coefficients from 3 points in 3d space.\r\n\t * @param p0 Vector3D\r\n\t * @param p1 Vector3D\r\n\t * @param p2 Vector3D\r\n\t */\r\n\tpublic fromPoints(p0:Vector3D, p1:Vector3D, p2:Vector3D)\r\n\t{\r\n\t\tvar d1x:number = p1.x - p0.x;\r\n\t\tvar d1y:number = p1.y - p0.y;\r\n\t\tvar d1z:number = p1.z - p0.z;\r\n\r\n\t\tvar d2x:number = p2.x - p0.x;\r\n\t\tvar d2y:number = p2.y - p0.y;\r\n\t\tvar d2z:number = p2.z - p0.z;\r\n\r\n\t\tthis.a = d1y*d2z - d1z*d2y;\r\n\t\tthis.b = d1z*d2x - d1x*d2z;\r\n\t\tthis.c = d1x*d2y - d1y*d2x;\r\n\t\tthis.d = this.a*p0.x + this.b*p0.y + this.c*p0.z;\r\n\r\n\t\t// not using epsilon, since a plane is infinite and a small incorrection can grow very large\r\n\t\tif (this.a == 0 && this.b == 0) {\r\n\r\n\t\t\tthis._iAlignment = Plane3D.ALIGN_XY_AXIS;\r\n\r\n\t\t} else if (this.b == 0 && this.c == 0) {\r\n\r\n\t\t\tthis._iAlignment = Plane3D.ALIGN_YZ_AXIS;\r\n\r\n\t\t} else if (this.a == 0 && this.c == 0) {\r\n\r\n\t\t\tthis._iAlignment = Plane3D.ALIGN_XZ_AXIS;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis._iAlignment = Plane3D.ALIGN_ANY;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Fills this Plane3D with the coefficients from the plane's normal and a point in 3d space.\r\n\t * @param normal Vector3D\r\n\t * @param point  Vector3D\r\n\t */\r\n\tpublic fromNormalAndPoint(normal:Vector3D, point:Vector3D)\r\n\t{\r\n\t\tthis.a = normal.x;\r\n\t\tthis.b = normal.y;\r\n\t\tthis.c = normal.z;\r\n\t\tthis.d = this.a*point.x + this.b*point.y + this.c*point.z;\r\n\t\tif (this.a == 0 && this.b == 0) {\r\n\r\n\t\t\tthis._iAlignment = Plane3D.ALIGN_XY_AXIS;\r\n\r\n\t\t} else if (this.b == 0 && this.c == 0) {\r\n\r\n\t\t\tthis._iAlignment = Plane3D.ALIGN_YZ_AXIS;\r\n\r\n\t\t} else if (this.a == 0 && this.c == 0) {\r\n\r\n\t\t\tthis._iAlignment = Plane3D.ALIGN_XZ_AXIS;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis._iAlignment = Plane3D.ALIGN_ANY;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Normalize this Plane3D\r\n\t * @return Plane3D This Plane3D.\r\n\t */\r\n\tpublic normalize():Plane3D\r\n\t{\r\n\t\tvar len:number = 1/Math.sqrt(this.a*this.a + this.b*this.b + this.c*this.c);\r\n\t\tthis.a *= len;\r\n\t\tthis.b *= len;\r\n\t\tthis.c *= len;\r\n\t\tthis.d *= len;\r\n\t\treturn this;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns the signed distance between this Plane3D and the point p.\r\n\t * @param p Vector3D\r\n\t * @returns Number\r\n\t */\r\n\tpublic distance(p:Vector3D):number\r\n\t{\r\n\r\n\t\tif (this._iAlignment == Plane3D.ALIGN_YZ_AXIS) {\r\n\r\n\t\t\treturn this.a*p.x - this.d;\r\n\r\n\t\t} else if (this._iAlignment == Plane3D.ALIGN_XZ_AXIS) {\r\n\t\t\treturn this.b*p.y - this.d;\r\n\t\t}\r\n\r\n\t\telse if (this._iAlignment == Plane3D.ALIGN_XY_AXIS) {\r\n\r\n\t\t\treturn this.c*p.z - this.d;\r\n\r\n\t\t} else {\r\n\r\n\t\t\treturn this.a*p.x + this.b*p.y + this.c*p.z - this.d;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Classify a point against this Plane3D. (in front, back or intersecting)\r\n\t * @param p Vector3D\r\n\t * @return int Plane3.FRONT or Plane3D.BACK or Plane3D.INTERSECT\r\n\t */\r\n\tpublic classifyPoint(p:Vector3D, epsilon:number = 0.01):number\r\n\t{\r\n\t\t// check NaN\r\n\t\tif (this.d != this.d)\r\n\t\t\treturn PlaneClassification.FRONT;\r\n\r\n\t\tvar len:number;\r\n\t\tif (this._iAlignment == Plane3D.ALIGN_YZ_AXIS)\r\n\t\t\tlen = this.a*p.x - this.d; else if (this._iAlignment == Plane3D.ALIGN_XZ_AXIS)\r\n\t\t\tlen = this.b*p.y - this.d; else if (this._iAlignment == Plane3D.ALIGN_XY_AXIS)\r\n\t\t\tlen = this.c*p.z - this.d; else\r\n\t\t\tlen = this.a*p.x + this.b*p.y + this.c*p.z - this.d;\r\n\r\n\t\tif (len < -epsilon)\r\n\t\t\treturn PlaneClassification.BACK; else if (len > epsilon)\r\n\t\t\treturn PlaneClassification.FRONT; else\r\n\t\t\treturn PlaneClassification.INTERSECT;\r\n\t}\r\n\r\n\tpublic toString():string\r\n\t{\r\n\t\treturn \"Plane3D [a:\" + this.a + \", b:\" + this.b + \", c:\" + this.c + \", d:\" + this.d + \"]\";\r\n\t}\r\n}\r\n\r\nexport = Plane3D;",
    "class PlaneClassification\r\n{\r\n\t// \"back\" is synonymous with \"in\", but used for planes (back of plane is \"inside\" a solid volume walled by a plane)\r\n\tpublic static BACK:number = 0;\r\n\tpublic static FRONT:number = 1;\r\n\r\n\tpublic static IN:number = 0;\r\n\tpublic static OUT:number = 1;\r\n\tpublic static INTERSECT:number = 2;\r\n\r\n}\r\n\r\nexport = PlaneClassification;",
    "/**\r\n * The Point object represents a location in a two-dimensional coordinate\r\n * system, where <i>x</i> represents the horizontal axis and <i>y</i>\r\n * represents the vertical axis.\r\n *\r\n * <p>The following code creates a point at(0,0):</p>\r\n *\r\n * <p>Methods and properties of the following classes use Point objects:</p>\r\n *\r\n * <ul>\r\n *   <li>BitmapData</li>\r\n *   <li>DisplayObject</li>\r\n *   <li>DisplayObjectContainer</li>\r\n *   <li>DisplacementMapFilter</li>\r\n *   <li>NativeWindow</li>\r\n *   <li>Matrix</li>\r\n *   <li>Rectangle</li>\r\n * </ul>\r\n *\r\n * <p>You can use the <code>new Point()</code> constructor to create a Point\r\n * object.</p>\r\n */\r\nclass Point\r\n{\r\n\t/**\r\n\t * The horizontal coordinate of the point. The default value is 0.\r\n\t */\r\n\tpublic x:number;\r\n\r\n\t/**\r\n\t * The vertical coordinate of the point. The default value is 0.\r\n\t */\r\n\tpublic y:number;\r\n\r\n\t/**\r\n\t * The length of the line segment from(0,0) to this point.\r\n\t */\r\n\tpublic get length():number\r\n\t{\r\n\t\treturn Math.sqrt(this.x*this.x + this.y*this.y);\r\n\t}\r\n\r\n\t/**\r\n\t * Creates a new point. If you pass no parameters to this method, a point is\r\n\t * created at(0,0).\r\n\t *\r\n\t * @param x The horizontal coordinate.\r\n\t * @param y The vertical coordinate.\r\n\t */\r\n\tconstructor(x:number = 0, y:number = 0)\r\n\t{\r\n\t\tthis.x = x;\r\n\t\tthis.y = y;\r\n\t}\r\n\r\n\t/**\r\n\t * Adds the coordinates of another point to the coordinates of this point to\r\n\t * create a new point.\r\n\t *\r\n\t * @param v The point to be added.\r\n\t * @return The new point.\r\n\t */\r\n\tpublic add(v:Point):Point\r\n\t{\r\n\t\treturn new Point(this.x + v.x, this.y + v.y);\r\n\t}\r\n\r\n\t/**\r\n\t * Creates a copy of this Point object.\r\n\t *\r\n\t * @return The new Point object.\r\n\t */\r\n\tpublic clone():Point\r\n\t{\r\n\t\treturn new Point(this.x, this.y);\r\n\t}\r\n\r\n\tpublic copyFrom(sourcePoint:Point)\r\n\t{\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Determines whether two points are equal. Two points are equal if they have\r\n\t * the same <i>x</i> and <i>y</i> values.\r\n\t *\r\n\t * @param toCompare The point to be compared.\r\n\t * @return A value of <code>true</code> if the object is equal to this Point\r\n\t *         object; <code>false</code> if it is not equal.\r\n\t */\r\n\tpublic equals(toCompare:Point):boolean\r\n\t{\r\n\t\treturn (this.x == toCompare.x && this.y == toCompare.y);\r\n\t}\r\n\r\n\t/**\r\n\t * Scales the line segment between(0,0) and the current point to a set\r\n\t * length.\r\n\t *\r\n\t * @param thickness The scaling value. For example, if the current point is\r\n\t *                 (0,5), and you normalize it to 1, the point returned is\r\n\t *                  at(0,1).\r\n\t */\r\n\tpublic normalize(thickness:number = 1)\r\n\t{\r\n\t\tif (this.length != 0) {\r\n\t\t\tvar invLength = thickness/this.length;\r\n\t\t\tthis.x *= invLength;\r\n\t\t\tthis.y *= invLength;\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthrow \"Cannot divide by zero length.\";\r\n\t}\r\n\r\n\t/**\r\n\t * Offsets the Point object by the specified amount. The value of\r\n\t * <code>dx</code> is added to the original value of <i>x</i> to create the\r\n\t * new <i>x</i> value. The value of <code>dy</code> is added to the original\r\n\t * value of <i>y</i> to create the new <i>y</i> value.\r\n\t *\r\n\t * @param dx The amount by which to offset the horizontal coordinate,\r\n\t *           <i>x</i>.\r\n\t * @param dy The amount by which to offset the vertical coordinate, <i>y</i>.\r\n\t */\r\n\tpublic offset(dx:number, dy:number)\r\n\t{\r\n\t\tthis.x += dx;\r\n\t\tthis.y += dy;\r\n\t}\r\n\r\n\tpublic setTo(xa:number, ya:number)\r\n\t{\r\n\t\tthis.x = xa;\r\n\t\tthis.y = ya;\r\n\t}\r\n\r\n\t/**\r\n\t * Subtracts the coordinates of another point from the coordinates of this\r\n\t * point to create a new point.\r\n\t *\r\n\t * @param v The point to be subtracted.\r\n\t * @return The new point.\r\n\t */\r\n\tpublic subtract(v:Point):Point\r\n\t{\r\n\t\treturn new Point(this.x - v.x, this.y - v.y);\r\n\t}\r\n\r\n\t/**\r\n\t * Returns a string that contains the values of the <i>x</i> and <i>y</i>\r\n\t * coordinates. The string has the form <code>\"(x=<i>x</i>,\r\n\t * y=<i>y</i>)\"</code>, so calling the <code>toString()</code> method for a\r\n\t * point at 23,17 would return <code>\"(x=23, y=17)\"</code>.\r\n\t *\r\n\t * @return The string representation of the coordinates.\r\n\t */\r\n\tpublic toString():string\r\n\t{\r\n\t\treturn \"[Point] (x=\" + this.x + \", y=\" + this.y + \")\";\r\n\t}\r\n\r\n\t/**\r\n\t * Returns the distance between <code>pt1</code> and <code>pt2</code>.\r\n\t *\r\n\t * @param pt1 The first point.\r\n\t * @param pt2 The second point.\r\n\t * @return The distance between the first and second points.\r\n\t */\r\n\tpublic static distance(pt1:Point, pt2:Point):number\r\n\t{\r\n\t\tvar dx:number = pt2.x - pt1.x;\r\n\t\tvar dy:number = pt2.y - pt1.y;\r\n\r\n\t\treturn Math.sqrt(dx*dx + dy*dy);\r\n\t}\r\n\r\n\t/**\r\n\t * Determines a point between two specified points. The parameter\r\n\t * <code>f</code> determines where the new interpolated point is located\r\n\t * relative to the two end points specified by parameters <code>pt1</code>\r\n\t * and <code>pt2</code>. The closer the value of the parameter <code>f</code>\r\n\t * is to <code>1.0</code>, the closer the interpolated point is to the first\r\n\t * point(parameter <code>pt1</code>). The closer the value of the parameter\r\n\t * <code>f</code> is to 0, the closer the interpolated point is to the second\r\n\t * point(parameter <code>pt2</code>).\r\n\t *\r\n\t * @param pt1 The first point.\r\n\t * @param pt2 The second point.\r\n\t * @param f   The level of interpolation between the two points. Indicates\r\n\t *            where the new point will be, along the line between\r\n\t *            <code>pt1</code> and <code>pt2</code>. If <code>f</code>=1,\r\n\t *            <code>pt1</code> is returned; if <code>f</code>=0,\r\n\t *            <code>pt2</code> is returned.\r\n\t * @return The new, interpolated point.\r\n\t */\r\n\tpublic static interpolate(pt1:Point, pt2:Point, f:number):Point\r\n\t{\r\n\t\treturn new Point(pt2.x + (pt1.x - pt2.x)*f, pt2.y + (pt1.y - pt2.y)*f);\r\n\t}\r\n\r\n\t/**\r\n\t * Converts a pair of polar coordinates to a Cartesian point coordinate.\r\n\t *\r\n\t * @param len   The length coordinate of the polar pair.\r\n\t * @param angle The angle, in radians, of the polar pair.\r\n\t * @return The Cartesian point.\r\n\t */\r\n\tpublic static polar(len:number, angle:number):Point\r\n\t{\r\n\t\treturn new Point(len*Math.cos(angle), len*Math.sin(angle));\r\n\t}\r\n}\r\n\r\nexport = Point;\r\n",
    "class PoissonLookup\r\n{\r\n\tpublic static _distributions:Array<Array<number>>;\r\n\r\n\tpublic static initDistributions():void\r\n\t{\r\n\t\t// precalculated for best control\r\n\t\tthis._distributions = new Array<Array<number>>();\r\n\t\tthis._distributions[0] = new Array<number>(0.3082841, 0.4320919);\r\n\t\tthis._distributions[1] = new Array<number>(0.3082841, 0.4320919, -0.2274942, -0.6640266);\r\n\t\tthis._distributions[2] = new Array<number>(0.8742689, 0.0009265686, -0.6864116, -0.5536607, -0.2325206, 0.7678371);\r\n\t\tthis._distributions[3] = new Array<number>(0.3913446, -0.7084417, -0.7511101, -0.5935929, -0.2323436, 0.5320091, 0.8435315, 0.5035911);\r\n\t\tthis._distributions[4] = new Array<number>(0.2122471, -0.5771395, -0.8543506, -0.1763534, 0.5189021, 0.8323698, -0.3616908, 0.5865368, 0.9523004, -0.04948437);\r\n\t\tthis._distributions[5] = new Array<number>(0.5791035, 0.3496495, 0.2959551, -0.6006749, -0.2419119, -0.06879545, -0.7403072, 0.6110353, -0.04555973, 0.8059174, -0.5275017, -0.737129);\r\n\t\tthis._distributions[6] = new Array<number>(0.06941478, 0.8519508, -0.7441907, 0.2426432, 0.6439992, -0.2405252, -0.1007523, -0.2327587, -0.6427067, -0.7248485, 0.8050759, 0.5492936, 0.3573822, -0.8824506);\r\n\t\tthis._distributions[7] = new Array<number>(0.8509863, 0.4452587, -0.09507271, 0.2073005, 0.1706571, -0.6434793, 0.8029777, -0.2718274, -0.4401725, 0.8196304, 0.2715359, 0.8598521, -0.8121575, -0.006447683, -0.6486837, -0.7237598);\r\n\t\tthis._distributions[8] = new Array<number>(0.6951686, -0.2680728, -0.04933243, 0.3710589, 0.6592212, 0.3661054, -0.01579228, -0.6909603, -0.3275101, -0.1756866, 0.3811549, 0.9218544, -0.216032, 0.9755028, -0.7065172, 0.3355389, -0.6579109, -0.6798355);\r\n\t\tthis._distributions[9] = new Array<number>(0.6181276, -0.09790418, -0.2537868, -0.5570995, -0.1964931, 0.3459414, 0.3474613, -0.8885581, 0.5135743, 0.5753114, -0.9549091, 0.1480672, -0.8711916, -0.4293123, -0.6928071, 0.6190156, -0.13369, 0.8892705, 0.0548224, -0.1246777);\r\n\t\tthis._distributions[10] = new Array<number>(0.4853027, -0.5080479, -0.1331675, -0.506597, 0.139575, 0.01316885, 0.803486, -0.07568797, 0.5240274, 0.4883182, -0.4334005, 0.1207938, -0.7794577, -0.3985141, 0.1576432, -0.9861221, -0.3712867, 0.6959021, 0.1517378, 0.9847429, -0.9762396, 0.1661073);\r\n\t\tthis._distributions[11] = new Array<number>(-0.2790166, -0.01252619, 0.3389016, 0.3921154, 0.2408341, -0.313211, -0.8151779, -0.3898362, -0.6347761, 0.3486495, 0.09471484, -0.7722448, -0.1385674, 0.6364574, 0.2456331, 0.9295807, -0.3864306, -0.8247881, 0.6111673, -0.7164014, 0.8287669, 0.05466961, 0.837706, 0.5415626);\r\n\t\tthis._distributions[12] = new Array<number>(0.056417, 0.3185693, -0.8245888, 0.1882799, 0.8575996, 0.1136829, 0.1070375, 0.875332, 0.4076743, -0.06000621, -0.4311306, 0.7239349, 0.2677574, -0.538472, -0.08486642, -0.2083647, -0.888989, -0.3906443, -0.4768958, -0.6664082, 0.09334993, -0.9861541, 0.808736, -0.455949, 0.5889823, 0.7660807);\r\n\t\tthis._distributions[13] = new Array<number>(-0.2681346, -0.3955857, -0.1315102, -0.8852947, -0.5143692, 0.09551838, 0.4344836, -0.546945, -0.8620899, -0.3813288, 0.1650431, 0.02034803, -0.1543657, 0.3842218, -0.828457, 0.5376903, -0.6145, -0.7818927, -0.2639062, 0.8784655, 0.1912684, 0.9720125, 0.3135219, 0.5224229, 0.7850655, 0.4592297, 0.7465045, -0.1368916);\r\n\t\tthis._distributions[14] = new Array<number>(0.4241029, 0.695281, 0.150511, -0.02304107, -0.2482675, 0.9120338, 0.8057325, 0.2622084, -0.2445909, 0.2765962, 0.8588713, -0.1772072, 0.3117845, -0.4385471, -0.3923851, -0.3298936, -0.1751254, -0.7405846, 0.6926506, -0.684163, -0.9304563, -0.3254691, -0.8533293, 0.1523024, 0.2510415, -0.917345, -0.6239773, -0.7105472, -0.6104624, 0.6041355);\r\n\t\tthis._distributions[15] = new Array<number>(0.5844554, 0.06651045, 0.1343258, 0.6756578, 0.3799674, -0.6301104, 0.5590436, 0.7940555, 0.09574714, 0.02262517, 0.8697868, 0.393301, 0.003945862, -0.421735, 0.9043913, -0.2432393, -0.4844007, 0.7190998, -0.3201078, 0.2972371, -0.3852352, -0.6341155, -0.5413069, -0.09223081, -0.8468984, -0.5126905, 0.004156174, -0.8633173, -0.9681889, -0.03305046, -0.846509, 0.4414353);\r\n\t\tthis._distributions[16] = new Array<number>(0.4506488, 0.657668, 0.4621297, 0.07441051, -0.2782125, 0.6201044, 0.9750003, 0.09110117, 0.1019436, 0.2986514, 0.03457398, 0.9631706, 0.542098, -0.5505635, 0.8675668, 0.4938077, -0.5414361, 0.2655292, -0.7941836, 0.6003053, -0.09847672, -0.1001604, -0.9316511, -0.08572888, 0.07286467, -0.611899, -0.5232627, -0.4082253, -0.5481608, -0.827938, -0.1551939, -0.9621193, 0.9220031, -0.3315949);\r\n\t\tthis._distributions[17] = new Array<number>(0.197908, -0.4697656, -0.4474689, -0.3428435, 0.8529873, -0.2228634, 0.6022478, -0.5469642, 0.2545276, -0.931133, -0.1507547, -0.7855865, -0.07606658, 0.1011628, 0.3046715, 0.2785755, 0.4698432, -0.1064076, 0.6831254, 0.4152522, 0.1374381, 0.8363233, -0.2166121, 0.6682042, 0.5511393, 0.7996449, -0.4278994, 0.28836, -0.8875198, 0.2181732, -0.8772842, -0.2818254, -0.7000262, 0.5762185, -0.6062385, -0.7439126);\r\n\t\tthis._distributions[18] = new Array<number>(0.6645703, -0.05678739, 0.5720971, 0.4533803, -0.07660709, 0.08802763, 0.5163431, -0.4426552, 0.1163455, -0.3404382, -0.4004807, -0.5046007, 0.2932099, -0.8201418, -0.5322125, 0.03834766, -0.1490209, -0.8817304, -0.8000439, -0.3509448, 0.5260983, 0.8421043, 0.1197811, 0.6963812, 0.9498612, 0.3122156, -0.9285746, 0.02120355, -0.6670724, 0.7217396, 0.9155889, -0.3510147, -0.271941, 0.4727852, 0.318879, 0.1634057, -0.2686755, 0.9253026);\r\n\t\tthis._distributions[19] = new Array<number>(0.5064292, 0.422527, 0.8935515, -0.06610427, 0.1199719, 0.175568, 0.403388, -0.2003276, 0.1657927, 0.8154403, 0.9301245, 0.2929218, -0.1644068, 0.6201534, 0.7113559, -0.6589743, -0.3364046, -0.1799502, 0.02109996, -0.392765, -0.382213, 0.3219992, -0.9201946, 0.1207967, -0.726185, 0.4291916, -0.7443482, -0.2480059, -0.5147594, 0.7418784, 0.1935272, -0.7406143, -0.3643523, -0.5559214, -0.7147766, -0.6326278, -0.2524151, -0.9096627, 0.5161405, 0.7908453);\r\n\t\tthis._distributions[20] = new Array<number>(0.7921003, -0.3032096, 0.5992879, -0.009052323, 0.2538549, -0.1872749, 0.7053444, 0.3677175, 0.5417761, -0.8170255, 0.9749611, 0.1210478, 0.1969143, -0.6117041, -0.1824499, -0.4634196, -0.1181338, -0.8668742, -0.3050112, -0.1352596, -0.4409327, -0.7082354, -0.03225285, 0.1171548, 0.3113096, 0.3250439, -0.8166144, -0.463995, -0.01014475, 0.4715334, -0.6868284, 0.05091889, -0.4011163, 0.2717285, -0.06756835, 0.8307694, -0.7938535, 0.4352129, -0.4663842, 0.7165329, 0.559729, 0.8093995);\r\n\t\tthis._distributions[21] = new Array<number>(0.07832243, 0.426151, -0.3856795, 0.5799953, 0.01970797, 0.06706189, 0.4822682, 0.3014512, -0.1532982, 0.87485, -0.4959527, 0.07888043, 0.260601, -0.2304784, 0.4996209, 0.7167382, 0.585986, -0.04265174, -0.7679967, 0.5509416, -0.9041753, 0.1802134, -0.8407655, -0.4442826, -0.2058258, -0.2636995, -0.4984115, -0.5928579, 0.2926032, -0.7886473, -0.06933882, -0.621177, 0.578115, -0.4813387, 0.8981777, -0.3291056, 0.1942733, 0.9255584, 0.8084362, 0.5066984, 0.9920095, 0.03103104, -0.2403206, -0.9389018);\r\n\t\tthis._distributions[22] = new Array<number>(-0.5691095, 0.1014316, -0.7788262, 0.384012, -0.8253665, -0.1645582, -0.1830993, 0.002997211, -0.2555013, -0.4177977, -0.6640869, -0.4794711, -0.2351242, 0.5850121, 0.02436554, 0.2825883, 0.006061143, -0.8200245, 0.1618791, -0.3063331, -0.3765897, -0.7249815, 0.6092919, -0.6769328, -0.5956934, 0.6957655, 0.5383642, 0.4522677, -0.1489165, 0.9125596, 0.4167473, 0.1335986, 0.1898309, 0.5874342, 0.2288171, 0.9624356, 0.7540846, -0.07672304, 0.8986252, 0.2788797, 0.3555991, -0.9262139, 0.8454325, -0.4027667, 0.4945236, -0.2935512);\r\n\t\tthis._distributions[23] = new Array<number>(-0.4481403, -0.3758374, -0.8877251, 0.08739938, 0.05015831, -0.1339983, -0.4070427, -0.8534173, 0.1019274, -0.5503222, -0.445998, 0.1997541, -0.8686263, -0.2788867, -0.7695944, -0.6033704, -0.05515742, -0.885711, -0.7714347, 0.5790485, 0.3466263, -0.8799297, 0.4487582, -0.5321087, -0.2461368, 0.6053771, -0.05568117, 0.2457351, -0.4668669, 0.8523816, 0.8103387, -0.4255538, 0.4054182, -0.175663, -0.2802011, -0.08920153, 0.2665959, 0.382935, 0.555679, 0.1621837, 0.105246, 0.8420411, 0.6921161, 0.6902903, 0.880946, 0.2483067, 0.9699264, -0.1021767);\r\n\t\tthis._distributions[24] = new Array<number>(-0.1703323, -0.3119385, 0.2916039, -0.2988263, -0.008472982, -0.9277695, -0.7730271, -0.3277904, 0.3440474, -0.6815342, -0.2910278, 0.03461745, -0.6764899, -0.657078, -0.3505501, -0.7311988, -0.03478927, 0.3258755, -0.6048835, 0.159423, 0.2035525, 0.02212214, 0.5116573, 0.2226856, 0.6664805, -0.2500189, 0.7147882, -0.6609634, 0.03030632, -0.5763278, -0.2516585, 0.6116219, -0.9434413, -0.0116792, 0.9061816, 0.2491155, 0.182867, 0.6076167, 0.286593, 0.9485695, -0.5992439, 0.6970096, -0.2082874, 0.9416641, 0.9880044, -0.1541709, -0.9122881, 0.331555, 0.7324886, 0.6725098);\r\n\t\tthis._distributions[25] = new Array<number>(0.3869598, -0.04974834, 0.7168844, -0.0693711, -0.07166742, 0.1725325, 0.4599592, 0.3232779, 0.5872094, -0.4198674, 0.2442266, -0.625667, 0.1254557, 0.4500048, -0.2290154, -0.1803567, 0.890583, 0.3373493, 0.1256081, 0.7853789, -0.2676466, 0.5305805, -0.7063224, 0.252168, -0.3989835, 0.1189921, 0.09617215, -0.2451447, 0.6302541, 0.6085876, 0.9380925, -0.3234899, 0.5086241, -0.8573482, 0.03576187, -0.9876697, -0.0876712, -0.6365195, -0.5276513, 0.823456, -0.6935764, -0.2240411, -0.5212318, -0.5383121, -0.2116208, 0.9639363, -0.9840096, 0.02743555, -0.3991577, -0.8994547, -0.7830126, 0.614068);\r\n\t\tthis._distributions[26] = new Array<number>(-0.8366601, 0.4464895, -0.5917366, -0.02073906, -0.9845258, 0.1635625, -0.3097973, 0.4379579, -0.5478154, 0.7173221, -0.1685888, 0.9261969, 0.01503595, 0.6046097, 0.4452421, 0.5449086, 0.0315687, 0.1944619, 0.3753404, 0.8688548, 0.4143643, 0.1396648, 0.8711032, 0.4304703, 0.7328773, 0.1461501, 0.6374492, -0.3521495, 0.145613, -0.1341466, 0.9040975, -0.135123, -0.7839059, -0.5450199, -0.516019, -0.3320859, -0.206158, -0.4431106, -0.9703014, -0.2368356, -0.2473119, -0.0864351, 0.2130725, -0.4604077, -0.003726701, -0.7122303, -0.4072131, -0.6833169, 0.1632999, -0.9776646, 0.4686888, -0.680495, -0.2293511, -0.9509777);\r\n\t\tthis._distributions[27] = new Array<number>(0.107311, -0.1311369, -0.4194764, -0.3148777, 0.6171439, -0.2745973, 0.2796618, 0.1937153, -0.09106886, 0.4180236, 0.6044006, 0.05577846, 0.02927299, -0.6738263, -0.2580845, 0.1179939, -0.09023564, -0.3830024, 0.3570953, -0.5000587, 0.81591, -0.5518309, 0.9300217, -0.1257987, 0.4904627, -0.8381903, -0.3163182, -0.8632009, 0.1137595, -0.9875998, 0.8390043, 0.3538185, 0.2149114, 0.4993694, 0.5191584, 0.3833552, 0.5002763, 0.7061465, -0.2567276, 0.9068756, -0.5197366, 0.3467845, 0.03668867, 0.9734009, -0.5347553, 0.66747, -0.9028882, 0.1023768, -0.8967977, 0.412834, -0.5821944, 0.0426479, -0.8032165, -0.2397038, -0.5597343, -0.6358021);\r\n\t\tthis._distributions[28] = new Array<number>(-0.6562496, -0.1781036, -0.9301494, 0.1185208, -0.3861143, -0.4153562, -0.1560799, -0.1099607, -0.5587025, 0.395218, -0.5322112, -0.699701, -0.5008639, 0.08726846, -0.970524, -0.1963461, -0.813577, -0.5185111, -0.1644458, 0.298, -0.3216791, 0.639982, 0.3315373, 0.3339162, 0.2383235, -0.00105722, 0.1137828, 0.5450742, -0.01899921, 0.8798413, 0.2849685, 0.8255596, 0.6974412, 0.2123175, 0.7588523, 0.5470437, 0.5102502, -0.1687844, 0.5853448, 0.8033476, 0.2590716, -0.5262504, 0.5607718, -0.6342825, 0.8666443, -0.1491841, 0.8341052, -0.4935003, -0.1568441, -0.6634066, 0.2512113, -0.8769391, -0.2559827, -0.9572457, -0.01928852, -0.3966542, -0.750667, 0.6409678);\r\n\t\tthis._distributions[29] = new Array<number>(0.3454786, -0.04837726, 0.2649553, 0.2406852, 0.5599093, -0.3839145, -0.1111814, -0.05502108, 0.7586042, -0.05818377, 0.2519488, -0.4665135, -0.1264972, 0.2602723, -0.08766216, -0.3671907, 0.6428129, 0.3999204, -0.6105871, -0.1246869, -0.4589451, -0.7646643, -0.03021116, -0.7899352, -0.6036922, -0.4293956, -0.2481938, 0.6534185, 0.102798, 0.6784465, -0.6392644, 0.4821358, -0.6789002, 0.1779133, -0.9140783, -0.1989647, -0.9262617, 0.3381507, 0.4794891, -0.8093274, 0.3959447, 0.668478, 0.9602883, 0.2272305, -0.123672, 0.9210883, 0.2375148, 0.9523395, -0.52898, 0.7973378, -0.382433, 0.1228794, 0.695015, 0.6948439, 0.7530277, -0.6458191, 0.8777987, -0.3272956, 0.2318525, -0.962768);\r\n\t\tthis._distributions[30] = new Array<number>(0.4518921, -0.1146195, 0.4720805, -0.4238748, 0.3655423, 0.1806341, 0.1589939, -0.23568, 0.7673324, -0.5149941, 0.01163658, 0.09045836, 0.7010971, 0.1245747, 0.7518286, -0.1855433, 0.4960719, 0.4601022, 0.2566979, -0.6308268, -0.0654714, -0.5126389, -0.1823319, -0.1343282, -0.1464312, 0.4883236, -0.3858738, 0.203523, 0.1484799, 0.4432284, -0.477109, -0.116241, 0.2719092, 0.7208626, 0.9104174, 0.3578536, -0.5956199, 0.7662588, -0.6996251, 0.3678654, -0.2514512, 0.9251933, 0.1275825, -0.9478135, -0.204608, -0.8611552, 0.4264838, -0.877443, 0.9854161, 0.05521112, 0.5912951, 0.7997434, 0.1140349, 0.982093, -0.9324368, -0.2094094, -0.42436, -0.6441524, -0.6722705, -0.3554261, -0.7844236, 0.08587621);\r\n\t\tthis._distributions[31] = new Array<number>(-0.4206714, -0.5613642, -0.8733016, -0.3373051, -0.1046226, -0.2902999, -0.1318562, -0.8434365, 0.1145093, -0.5962623, -0.4965627, -0.1873259, -0.5011808, -0.8546229, -0.7165636, -0.5743566, 0.1090901, 0.2017643, 0.3404809, -0.220455, -0.1989015, 0.2372122, -0.4538706, 0.0979171, 0.4514146, -0.572846, 0.2314168, -0.8514503, -0.4247236, 0.5650803, -0.943347, 0.04514639, -0.1309718, 0.5221877, -0.7004157, 0.4561877, 0.6306441, 0.04448673, 0.4301621, 0.5766876, 0.1078042, 0.7245752, 0.3875354, 0.2794483, 0.702876, -0.2924213, 0.7360667, -0.6210318, 0.7486517, 0.6531103, 0.4898235, 0.8591025, 0.6549174, 0.3854057, -0.2596106, 0.7916998, 0.9251194, -0.05296265, -0.5620695, 0.820877, -0.01228026, 0.9937211, 0.9612103, 0.2628758);\r\n\t}\r\n\r\n\tpublic static getDistribution(n:number /*int*/):Array<number>\r\n\t{\r\n\t\tif (!this._distributions)\r\n\t\t\tthis.initDistributions();\r\n\r\n\t\tif (n < 2 || n > 32)\r\n\t\t\treturn null;\r\n\r\n\t\treturn this._distributions[n - 1];\r\n\t}\r\n}\r\n\r\nexport = PoissonLookup;",
    "import Matrix3DUtils\t\t= require(\"awayjs-core/lib/geom/Matrix3DUtils\");\r\nimport Orientation3D\t\t= require(\"awayjs-core/lib/geom/Orientation3D\");\r\nimport Matrix3D\t\t\t\t= require(\"awayjs-core/lib/geom/Matrix3D\");\r\nimport Vector3D\t\t\t\t= require(\"awayjs-core/lib/geom/Vector3D\");\r\n\r\n/**\r\n * A Quaternion object which can be used to represent rotations.\r\n */\r\nclass Quaternion\r\n{\r\n\t/**\r\n\t * The x value of the quaternion.\r\n\t */\r\n\tpublic x:number = 0;\r\n\r\n\t/**\r\n\t * The y value of the quaternion.\r\n\t */\r\n\tpublic y:number = 0;\r\n\r\n\t/**\r\n\t * The z value of the quaternion.\r\n\t */\r\n\tpublic z:number = 0;\r\n\r\n\t/**\r\n\t * The w value of the quaternion.\r\n\t */\r\n\tpublic w:number = 1;\r\n\r\n\t/**\r\n\t * Creates a new Quaternion object.\r\n\t * @param x The x value of the quaternion.\r\n\t * @param y The y value of the quaternion.\r\n\t * @param z The z value of the quaternion.\r\n\t * @param w The w value of the quaternion.\r\n\t */\r\n\tconstructor(x:number = 0, y:number = 0, z:number = 0, w:number = 1)\r\n\t{\r\n\t\tthis.x = x;\r\n\t\tthis.y = y;\r\n\t\tthis.z = z;\r\n\t\tthis.w = w;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns the magnitude of the quaternion object.\r\n\t */\r\n\tpublic get magnitude():number\r\n\t{\r\n\t\treturn Math.sqrt(this.w*this.w + this.x*this.x + this.y*this.y + this.z*this.z);\r\n\t}\r\n\r\n\t/**\r\n\t * Fills the quaternion object with the result from a multiplication of two quaternion objects.\r\n\t *\r\n\t * @param    qa    The first quaternion in the multiplication.\r\n\t * @param    qb    The second quaternion in the multiplication.\r\n\t */\r\n\tpublic multiply(qa:Quaternion, qb:Quaternion)\r\n\t{\r\n\t\tvar w1:number = qa.w, x1:number = qa.x, y1:number = qa.y, z1:number = qa.z;\r\n\t\tvar w2:number = qb.w, x2:number = qb.x, y2:number = qb.y, z2:number = qb.z;\r\n\r\n\t\tthis.w = w1*w2 - x1*x2 - y1*y2 - z1*z2;\r\n\t\tthis.x = w1*x2 + x1*w2 + y1*z2 - z1*y2;\r\n\t\tthis.y = w1*y2 - x1*z2 + y1*w2 + z1*x2;\r\n\t\tthis.z = w1*z2 + x1*y2 - y1*x2 + z1*w2;\r\n\t}\r\n\r\n\tpublic multiplyVector(vector:Vector3D, target:Quaternion = null):Quaternion\r\n\t{\r\n\t\t//target ||= new Quaternion();\r\n\t\tif (target === null) {\r\n\t\t\ttarget = new Quaternion();\r\n\r\n\t\t}\r\n\r\n\r\n\t\tvar x2:number = vector.x;\r\n\t\tvar y2:number = vector.y;\r\n\t\tvar z2:number = vector.z;\r\n\r\n\t\ttarget.w = -this.x*x2 - this.y*y2 - this.z*z2;\r\n\t\ttarget.x = this.w*x2 + this.y*z2 - this.z*y2;\r\n\t\ttarget.y = this.w*y2 - this.x*z2 + this.z*x2;\r\n\t\ttarget.z = this.w*z2 + this.x*y2 - this.y*x2;\r\n\r\n\t\treturn target;\r\n\t}\r\n\r\n\t/**\r\n\t * Fills the quaternion object with values representing the given rotation around a vector.\r\n\t *\r\n\t * @param    axis    The axis around which to rotate\r\n\t * @param    angle    The angle in radians of the rotation.\r\n\t */\r\n\tpublic fromAxisAngle(axis:Vector3D, angle:number)\r\n\t{\r\n\t\tvar sin_a:number = Math.sin(angle/2);\r\n\t\tvar cos_a:number = Math.cos(angle/2);\r\n\r\n\t\tthis.x = axis.x*sin_a;\r\n\t\tthis.y = axis.y*sin_a;\r\n\t\tthis.z = axis.z*sin_a;\r\n\t\tthis.w = cos_a;\r\n\r\n\t\tthis.normalize();\r\n\t}\r\n\r\n\t/**\r\n\t * Spherically interpolates between two quaternions, providing an interpolation between rotations with constant angle change rate.\r\n\t * @param qa The first quaternion to interpolate.\r\n\t * @param qb The second quaternion to interpolate.\r\n\t * @param t The interpolation weight, a value between 0 and 1.\r\n\t */\r\n\tpublic slerp(qa:Quaternion, qb:Quaternion, t:number)\r\n\t{\r\n\t\tvar w1:number = qa.w, x1:number = qa.x, y1:number = qa.y, z1:number = qa.z;\r\n\t\tvar w2:number = qb.w, x2:number = qb.x, y2:number = qb.y, z2:number = qb.z;\r\n\t\tvar dot:number = w1*w2 + x1*x2 + y1*y2 + z1*z2;\r\n\r\n\t\t// shortest direction\r\n\t\tif (dot < 0) {\r\n\t\t\tdot = -dot;\r\n\t\t\tw2 = -w2;\r\n\t\t\tx2 = -x2;\r\n\t\t\ty2 = -y2;\r\n\t\t\tz2 = -z2;\r\n\t\t}\r\n\r\n\t\tif (dot < 0.95) {\r\n\t\t\t// interpolate angle linearly\r\n\t\t\tvar angle:number = Math.acos(dot);\r\n\t\t\tvar s:number = 1/Math.sin(angle);\r\n\t\t\tvar s1:number = Math.sin(angle*(1 - t))*s;\r\n\t\t\tvar s2:number = Math.sin(angle*t)*s;\r\n\t\t\tthis.w = w1*s1 + w2*s2;\r\n\t\t\tthis.x = x1*s1 + x2*s2;\r\n\t\t\tthis.y = y1*s1 + y2*s2;\r\n\t\t\tthis.z = z1*s1 + z2*s2;\r\n\t\t} else {\r\n\t\t\t// nearly identical angle, interpolate linearly\r\n\t\t\tthis.w = w1 + t*(w2 - w1);\r\n\t\t\tthis.x = x1 + t*(x2 - x1);\r\n\t\t\tthis.y = y1 + t*(y2 - y1);\r\n\t\t\tthis.z = z1 + t*(z2 - z1);\r\n\t\t\tvar len:number = 1.0/Math.sqrt(this.w*this.w + this.x*this.x + this.y*this.y + this.z*this.z);\r\n\t\t\tthis.w *= len;\r\n\t\t\tthis.x *= len;\r\n\t\t\tthis.y *= len;\r\n\t\t\tthis.z *= len;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Linearly interpolates between two quaternions.\r\n\t * @param qa The first quaternion to interpolate.\r\n\t * @param qb The second quaternion to interpolate.\r\n\t * @param t The interpolation weight, a value between 0 and 1.\r\n\t */\r\n\tpublic lerp(qa:Quaternion, qb:Quaternion, t:number)\r\n\t{\r\n\t\tvar w1:number = qa.w, x1:number = qa.x, y1:number = qa.y, z1:number = qa.z;\r\n\t\tvar w2:number = qb.w, x2:number = qb.x, y2:number = qb.y, z2:number = qb.z;\r\n\t\tvar len:number;\r\n\r\n\t\t// shortest direction\r\n\t\tif (w1*w2 + x1*x2 + y1*y2 + z1*z2 < 0) {\r\n\t\t\tw2 = -w2;\r\n\t\t\tx2 = -x2;\r\n\t\t\ty2 = -y2;\r\n\t\t\tz2 = -z2;\r\n\t\t}\r\n\r\n\t\tthis.w = w1 + t*(w2 - w1);\r\n\t\tthis.x = x1 + t*(x2 - x1);\r\n\t\tthis.y = y1 + t*(y2 - y1);\r\n\t\tthis.z = z1 + t*(z2 - z1);\r\n\r\n\t\tlen = 1.0/Math.sqrt(this.w*this.w + this.x*this.x + this.y*this.y + this.z*this.z);\r\n\t\tthis.w *= len;\r\n\t\tthis.x *= len;\r\n\t\tthis.y *= len;\r\n\t\tthis.z *= len;\r\n\t}\r\n\r\n\t/**\r\n\t * Fills the quaternion object with values representing the given euler rotation.\r\n\t *\r\n\t * @param    ax        The angle in radians of the rotation around the ax axis.\r\n\t * @param    ay        The angle in radians of the rotation around the ay axis.\r\n\t * @param    az        The angle in radians of the rotation around the az axis.\r\n\t */\r\n\tpublic fromEulerAngles(ax:number, ay:number, az:number)\r\n\t{\r\n\t\tvar halfX:number = ax*.5, halfY:number = ay*.5, halfZ:number = az*.5;\r\n\t\tvar cosX:number = Math.cos(halfX), sinX:number = Math.sin(halfX);\r\n\t\tvar cosY:number = Math.cos(halfY), sinY:number = Math.sin(halfY);\r\n\t\tvar cosZ:number = Math.cos(halfZ), sinZ:number = Math.sin(halfZ);\r\n\r\n\t\tthis.w = cosX*cosY*cosZ + sinX*sinY*sinZ;\r\n\t\tthis.x = sinX*cosY*cosZ - cosX*sinY*sinZ;\r\n\t\tthis.y = cosX*sinY*cosZ + sinX*cosY*sinZ;\r\n\t\tthis.z = cosX*cosY*sinZ - sinX*sinY*cosZ;\r\n\t}\r\n\r\n\t/**\r\n\t * Fills a target Vector3D object with the Euler angles that form the rotation represented by this quaternion.\r\n\t * @param target An optional Vector3D object to contain the Euler angles. If not provided, a new object is created.\r\n\t * @return The Vector3D containing the Euler angles.\r\n\t */\r\n\tpublic toEulerAngles(target:Vector3D = null):Vector3D\r\n\t{\r\n\r\n\t\t//target ||= new Vector3D();\r\n\t\tif (target === null) {\r\n\r\n\t\t\ttarget = new Vector3D();\r\n\r\n\t\t}\r\n\r\n\t\ttarget.x = Math.atan2(2*(this.w*this.x + this.y*this.z), 1 - 2*(this.x*this.x + this.y*this.y));\r\n\t\ttarget.y = Math.asin(2*(this.w*this.y - this.z*this.x));\r\n\t\ttarget.z = Math.atan2(2*(this.w*this.z + this.x*this.y), 1 - 2*(this.y*this.y + this.z*this.z));\r\n\r\n\t\treturn target;\r\n\t}\r\n\r\n\t/**\r\n\t * Normalises the quaternion object.\r\n\t */\r\n\tpublic normalize(val:number = 1)\r\n\t{\r\n\t\tvar mag:number = val/Math.sqrt(this.x*this.x + this.y*this.y + this.z*this.z + this.w*this.w);\r\n\r\n\t\tthis.x *= mag;\r\n\t\tthis.y *= mag;\r\n\t\tthis.z *= mag;\r\n\t\tthis.w *= mag;\r\n\t}\r\n\r\n\t/**\r\n\t * Used to trace the values of a quaternion.\r\n\t *\r\n\t * @return A string representation of the quaternion object.\r\n\t */\r\n\tpublic toString():string\r\n\t{\r\n\t\treturn \"{x:\" + this.x + \" y:\" + this.y + \" z:\" + this.z + \" w:\" + this.w + \"}\";\r\n\t}\r\n\r\n\t/**\r\n\t * Converts the quaternion to a Matrix3D object representing an equivalent rotation.\r\n\t * @param target An optional Matrix3D container to store the transformation in. If not provided, a new object is created.\r\n\t * @return A Matrix3D object representing an equivalent rotation.\r\n\t */\r\n\tpublic toMatrix3D(target:Matrix3D = null):Matrix3D\r\n\t{\r\n\t\tvar rawData:Float32Array = Matrix3DUtils.RAW_DATA_CONTAINER;\r\n\t\tvar xy2:number = 2.0*this.x*this.y, xz2:number = 2.0*this.x*this.z, xw2:number = 2.0*this.x*this.w;\r\n\t\tvar yz2:number = 2.0*this.y*this.z, yw2:number = 2.0*this.y*this.w, zw2:number = 2.0*this.z*this.w;\r\n\t\tvar xx:number = this.x*this.x, yy:number = this.y*this.y, zz:number = this.z*this.z, ww:number = this.w*this.w;\r\n\r\n\t\trawData[0] = xx - yy - zz + ww;\r\n\t\trawData[4] = xy2 - zw2;\r\n\t\trawData[8] = xz2 + yw2;\r\n\t\trawData[12] = 0;\r\n\t\trawData[1] = xy2 + zw2;\r\n\t\trawData[5] = -xx + yy - zz + ww;\r\n\t\trawData[9] = yz2 - xw2;\r\n\t\trawData[13] = 0;\r\n\t\trawData[2] = xz2 - yw2;\r\n\t\trawData[6] = yz2 + xw2;\r\n\t\trawData[10] = -xx - yy + zz + ww;\r\n\t\trawData[14] = 0;\r\n\t\trawData[3] = 0.0;\r\n\t\trawData[7] = 0.0;\r\n\t\trawData[11] = 0;\r\n\t\trawData[15] = 1;\r\n\r\n\t\tif (!target)\r\n\t\t\treturn new Matrix3D(rawData);\r\n\t\telse\r\n\t\t\ttarget.copyRawDataFrom(rawData);\r\n\r\n\t\treturn target;\r\n\t}\r\n\r\n\t/**\r\n\t * Extracts a quaternion rotation matrix out of a given Matrix3D object.\r\n\t * @param matrix The Matrix3D out of which the rotation will be extracted.\r\n\t */\r\n\tpublic fromMatrix(matrix:Matrix3D)\r\n\t{\r\n\t\tvar v:Vector3D = matrix.decompose(Orientation3D.QUATERNION)[1];\r\n\t\tthis.x = v.x;\r\n\t\tthis.y = v.y;\r\n\t\tthis.z = v.z;\r\n\t\tthis.w = v.w;\r\n\t}\r\n\r\n\t/**\r\n\t * Converts the quaternion to a Vector.&lt;Number&gt; matrix representation of a rotation equivalent to this quaternion.\r\n\t * @param target The Vector.&lt;Number&gt; to contain the raw matrix data.\r\n\t * @param exclude4thRow If true, the last row will be omitted, and a 4x3 matrix will be generated instead of a 4x4.\r\n\t */\r\n\tpublic toRawData(target:number[], exclude4thRow:boolean = false)\r\n\t{\r\n\t\tvar xy2:number = 2.0*this.x*this.y, xz2:number = 2.0*this.x*this.z, xw2:number = 2.0*this.x*this.w;\r\n\t\tvar yz2:number = 2.0*this.y*this.z, yw2:number = 2.0*this.y*this.w, zw2:number = 2.0*this.z*this.w;\r\n\t\tvar xx:number = this.x*this.x, yy:number = this.y*this.y, zz:number = this.z*this.z, ww:number = this.w*this.w;\r\n\r\n\t\ttarget[0] = xx - yy - zz + ww;\r\n\t\ttarget[1] = xy2 - zw2;\r\n\t\ttarget[2] = xz2 + yw2;\r\n\t\ttarget[4] = xy2 + zw2;\r\n\t\ttarget[5] = -xx + yy - zz + ww;\r\n\t\ttarget[6] = yz2 - xw2;\r\n\t\ttarget[8] = xz2 - yw2;\r\n\t\ttarget[9] = yz2 + xw2;\r\n\t\ttarget[10] = -xx - yy + zz + ww;\r\n\t\ttarget[3] = target[7] = target[11] = 0;\r\n\r\n\t\tif (!exclude4thRow) {\r\n\t\t\ttarget[12] = target[13] = target[14] = 0;\r\n\t\t\ttarget[15] = 1;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Clones the quaternion.\r\n\t * @return An exact duplicate of the current Quaternion.\r\n\t */\r\n\tpublic clone():Quaternion\r\n\t{\r\n\t\treturn new Quaternion(this.x, this.y, this.z, this.w);\r\n\t}\r\n\r\n\t/**\r\n\t * Rotates a point.\r\n\t * @param vector The Vector3D object to be rotated.\r\n\t * @param target An optional Vector3D object that will contain the rotated coordinates. If not provided, a new object will be created.\r\n\t * @return A Vector3D object containing the rotated point.\r\n\t */\r\n\tpublic rotatePoint(vector:Vector3D, target:Vector3D = null):Vector3D\r\n\t{\r\n\t\tvar x1:number, y1:number, z1:number, w1:number;\r\n\t\tvar x2:number = vector.x, y2:number = vector.y, z2:number = vector.z;\r\n\r\n\t\t//target ||= new Vector3D();\r\n\t\tif (target === null) {\r\n\r\n\t\t\ttarget = new Vector3D();\r\n\r\n\t\t}\r\n\r\n\t\t// p*q'\r\n\t\tw1 = -this.x*x2 - this.y*y2 - this.z*z2;\r\n\t\tx1 = this.w*x2 + this.y*z2 - this.z*y2;\r\n\t\ty1 = this.w*y2 - this.x*z2 + this.z*x2;\r\n\t\tz1 = this.w*z2 + this.x*y2 - this.y*x2;\r\n\r\n\t\ttarget.x = -w1*this.x + x1*this.w - y1*this.z + z1*this.y;\r\n\t\ttarget.y = -w1*this.y + x1*this.z + y1*this.w - z1*this.x;\r\n\t\ttarget.z = -w1*this.z - x1*this.y + y1*this.x + z1*this.w;\r\n\r\n\t\treturn target;\r\n\t}\r\n\r\n\t/**\r\n\t * Copies the data from a quaternion into this instance.\r\n\t * @param q The quaternion to copy from.\r\n\t */\r\n\tpublic copyFrom(q:Quaternion)\r\n\t{\r\n\t\tthis.x = q.x;\r\n\t\tthis.y = q.y;\r\n\t\tthis.z = q.z;\r\n\t\tthis.w = q.w;\r\n\t}\r\n}\r\n\r\nexport = Quaternion;",
    "import Point\t\t\t\t\t= require(\"awayjs-core/lib/geom/Point\");\r\n\r\n/**\r\n * A Rectangle object is an area defined by its position, as indicated by its\r\n * top-left corner point(<i>x</i>, <i>y</i>) and by its width and its height.\r\n *\r\n *\r\n * <p>The <code>x</code>, <code>y</code>, <code>width</code>, and\r\n * <code>height</code> properties of the Rectangle class are independent of\r\n * each other; changing the value of one property has no effect on the others.\r\n * However, the <code>right</code> and <code>bottom</code> properties are\r\n * integrally related to those four properties. For example, if you change the\r\n * value of the <code>right</code> property, the value of the\r\n * <code>width</code> property changes; if you change the <code>bottom</code>\r\n * property, the value of the <code>height</code> property changes. </p>\r\n *\r\n * <p>The following methods and properties use Rectangle objects:</p>\r\n *\r\n * <ul>\r\n *   <li>The <code>applyFilter()</code>, <code>colorTransform()</code>,\r\n * <code>copyChannel()</code>, <code>copyPixels()</code>, <code>draw()</code>,\r\n * <code>fillRect()</code>, <code>generateFilterRect()</code>,\r\n * <code>getColorBoundsRect()</code>, <code>getPixels()</code>,\r\n * <code>merge()</code>, <code>paletteMap()</code>,\r\n * <code>pixelDisolve()</code>, <code>setPixels()</code>, and\r\n * <code>threshold()</code> methods, and the <code>rect</code> property of the\r\n * BitmapData class</li>\r\n *   <li>The <code>getBounds()</code> and <code>getRect()</code> methods, and\r\n * the <code>scrollRect</code> and <code>scale9Grid</code> properties of the\r\n * DisplayObject class</li>\r\n *   <li>The <code>getCharBoundaries()</code> method of the TextField\r\n * class</li>\r\n *   <li>The <code>pixelBounds</code> property of the Transform class</li>\r\n *   <li>The <code>bounds</code> parameter for the <code>startDrag()</code>\r\n * method of the Sprite class</li>\r\n *   <li>The <code>printArea</code> parameter of the <code>addPage()</code>\r\n * method of the PrintJob class</li>\r\n * </ul>\r\n *\r\n * <p>You can use the <code>new Rectangle()</code> constructor to create a\r\n * Rectangle object.</p>\r\n *\r\n * <p><b>Note:</b> The Rectangle class does not define a rectangular Shape\r\n * display object. To draw a rectangular Shape object onscreen, use the\r\n * <code>drawRect()</code> method of the Graphics class.</p>\r\n */\r\nclass Rectangle\r\n{\r\n\tprivate _size:Point;\r\n\tprivate _bottomRight:Point;\r\n\tprivate _topLeft:Point;\r\n\r\n\t/**\r\n\t * The height of the rectangle, in pixels. Changing the <code>height</code>\r\n\t * value of a Rectangle object has no effect on the <code>x</code>,\r\n\t * <code>y</code>, and <code>width</code> properties.\r\n\t */\r\n\tpublic height:number;\r\n\r\n\t/**\r\n\t * The width of the rectangle, in pixels. Changing the <code>width</code>\r\n\t * value of a Rectangle object has no effect on the <code>x</code>,\r\n\t * <code>y</code>, and <code>height</code> properties.\r\n\t */\r\n\tpublic width:number;\r\n\r\n\t/**\r\n\t * The <i>x</i> coordinate of the top-left corner of the rectangle. Changing\r\n\t * the value of the <code>x</code> property of a Rectangle object has no\r\n\t * effect on the <code>y</code>, <code>width</code>, and <code>height</code>\r\n\t * properties.\r\n\t *\r\n\t * <p>The value of the <code>x</code> property is equal to the value of the\r\n\t * <code>left</code> property.</p>\r\n\t */\r\n\tpublic x:number;\r\n\r\n\t/**\r\n\t * The <i>y</i> coordinate of the top-left corner of the rectangle. Changing\r\n\t * the value of the <code>y</code> property of a Rectangle object has no\r\n\t * effect on the <code>x</code>, <code>width</code>, and <code>height</code>\r\n\t * properties.\r\n\t *\r\n\t * <p>The value of the <code>y</code> property is equal to the value of the\r\n\t * <code>top</code> property.</p>\r\n\t */\r\n\tpublic y:number;\r\n\r\n\t/**\r\n\t * The sum of the <code>y</code> and <code>height</code> properties.\r\n\t */\r\n\tpublic get bottom():number\r\n\t{\r\n\t\treturn this.y + this.height;\r\n\t}\r\n\r\n\t/**\r\n\t * The location of the Rectangle object's bottom-right corner, determined by\r\n\t * the values of the <code>right</code> and <code>bottom</code> properties.\r\n\t */\r\n\tpublic get bottomRight():Point\r\n\t{\r\n\t\tif (this._bottomRight == null)\r\n\t\t\tthis._bottomRight = new Point();\r\n\r\n\t\tthis._bottomRight.x = this.x + this.width;\r\n\t\tthis._bottomRight.y = this.y + this.height;\r\n\r\n\t\treturn this._bottomRight;\r\n\t}\r\n\r\n\t/**\r\n\t * The <i>x</i> coordinate of the top-left corner of the rectangle. Changing\r\n\t * the <code>left</code> property of a Rectangle object has no effect on the\r\n\t * <code>y</code> and <code>height</code> properties. However it does affect\r\n\t * the <code>width</code> property, whereas changing the <code>x</code> value\r\n\t * does <i>not</i> affect the <code>width</code> property.\r\n\t *\r\n\t * <p>The value of the <code>left</code> property is equal to the value of\r\n\t * the <code>x</code> property.</p>\r\n\t */\r\n\tpublic get left():number\r\n\t{\r\n\t\treturn this.x;\r\n\t}\r\n\r\n\t/**\r\n\t * The sum of the <code>x</code> and <code>width</code> properties.\r\n\t */\r\n\tpublic get right():number\r\n\t{\r\n\t\treturn this.x + this.width;\r\n\t}\r\n\r\n\t/**\r\n\t * The size of the Rectangle object, expressed as a Point object with the\r\n\t * values of the <code>width</code> and <code>height</code> properties.\r\n\t */\r\n\tpublic get size():Point\r\n\t{\r\n\t\tif (this._size == null)\r\n\t\t\tthis._size = new Point();\r\n\r\n\t\tthis._size.x = this.width;\r\n\t\tthis._size.y = this.height;\r\n\r\n\t\treturn this._size;\r\n\t}\r\n\r\n\t/**\r\n\t * The <i>y</i> coordinate of the top-left corner of the rectangle. Changing\r\n\t * the <code>top</code> property of a Rectangle object has no effect on the\r\n\t * <code>x</code> and <code>width</code> properties. However it does affect\r\n\t * the <code>height</code> property, whereas changing the <code>y</code>\r\n\t * value does <i>not</i> affect the <code>height</code> property.\r\n\t *\r\n\t * <p>The value of the <code>top</code> property is equal to the value of the\r\n\t * <code>y</code> property.</p>\r\n\t */\r\n\tpublic get top():number\r\n\t{\r\n\t\treturn this.y;\r\n\t}\r\n\r\n\t/**\r\n\t * The location of the Rectangle object's top-left corner, determined by the\r\n\t * <i>x</i> and <i>y</i> coordinates of the point.\r\n\t */\r\n\tpublic get topLeft():Point\r\n\t{\r\n\t\tif (this._topLeft == null)\r\n\t\t\tthis._topLeft = new Point();\r\n\r\n\t\tthis._topLeft.x = this.x;\r\n\t\tthis._topLeft.y = this.y;\r\n\r\n\t\treturn this._topLeft;\r\n\t}\r\n\r\n\t/**\r\n\t * Creates a new Rectangle object with the top-left corner specified by the\r\n\t * <code>x</code> and <code>y</code> parameters and with the specified\r\n\t * <code>width</code> and <code>height</code> parameters. If you call this\r\n\t * public without parameters, a rectangle with <code>x</code>,\r\n\t * <code>y</code>, <code>width</code>, and <code>height</code> properties set\r\n\t * to 0 is created.\r\n\t *\r\n\t * @param x      The <i>x</i> coordinate of the top-left corner of the\r\n\t *               rectangle.\r\n\t * @param y      The <i>y</i> coordinate of the top-left corner of the\r\n\t *               rectangle.\r\n\t * @param width  The width of the rectangle, in pixels.\r\n\t * @param height The height of the rectangle, in pixels.\r\n\t */\r\n\tconstructor(x:number = 0, y:number = 0, width:number = 0, height:number = 0)\r\n\t{\r\n\t\tthis.x = x;\r\n\t\tthis.y = y;\r\n\t\tthis.width = width;\r\n\t\tthis.height = height;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns a new Rectangle object with the same values for the\r\n\t * <code>x</code>, <code>y</code>, <code>width</code>, and\r\n\t * <code>height</code> properties as the original Rectangle object.\r\n\t *\r\n\t * @return A new Rectangle object with the same values for the\r\n\t *         <code>x</code>, <code>y</code>, <code>width</code>, and\r\n\t *         <code>height</code> properties as the original Rectangle object.\r\n\t */\r\n\tpublic clone():Rectangle\r\n\t{\r\n\t\treturn new Rectangle(this.x, this.y, this.width, this.height);\r\n\t}\r\n\r\n\t/**\r\n\t * Determines whether the specified point is contained within the rectangular\r\n\t * region defined by this Rectangle object.\r\n\t *\r\n\t * @param x The <i>x</i> coordinate(horizontal position) of the point.\r\n\t * @param y The <i>y</i> coordinate(vertical position) of the point.\r\n\t * @return A value of <code>true</code> if the Rectangle object contains the\r\n\t *         specified point; otherwise <code>false</code>.\r\n\t */\r\n\tpublic contains(x:number, y:number):boolean\r\n\t{\r\n\t\treturn (this.x <= x && this.x + this.width >= x && this.y <= y && this.y + this.height >= y);\r\n\t}\r\n\r\n\t/**\r\n\t * Determines whether the specified point is contained within the rectangular\r\n\t * region defined by this Rectangle object. This method is similar to the\r\n\t * <code>Rectangle.contains()</code> method, except that it takes a Point\r\n\t * object as a parameter.\r\n\t *\r\n\t * @param point The point, as represented by its <i>x</i> and <i>y</i>\r\n\t *              coordinates.\r\n\t * @return A value of <code>true</code> if the Rectangle object contains the\r\n\t *         specified point; otherwise <code>false</code>.\r\n\t */\r\n\tpublic containsPoint(point:Point):boolean\r\n\t{\r\n\t\treturn (this.x <= point.x && this.x + this.width >= point.x && this.y <= point.y && this.y + this.height >= point.y);\r\n\t}\r\n\r\n\t/**\r\n\t * Determines whether the Rectangle object specified by the <code>rect</code>\r\n\t * parameter is contained within this Rectangle object. A Rectangle object is\r\n\t * said to contain another if the second Rectangle object falls entirely\r\n\t * within the boundaries of the first.\r\n\t *\r\n\t * @param rect The Rectangle object being checked.\r\n\t * @return A value of <code>true</code> if the Rectangle object that you\r\n\t *         specify is contained by this Rectangle object; otherwise\r\n\t *         <code>false</code>.\r\n\t */\r\n\tpublic containsRect(rect:Rectangle):boolean\r\n\t{\r\n\t\treturn (this.x <= rect.x && this.x + this.width >= rect.x + rect.width && this.y <= rect.y && this.y + this.height >= rect.y + rect.height)\r\n\t}\r\n\r\n\t/**\r\n\t * Copies all of rectangle data from the source Rectangle object into the\r\n\t * calling Rectangle object.\r\n\t *\r\n\t * @param sourceRect The Rectangle object from which to copy the data.\r\n\t */\r\n\tpublic copyFrom(sourceRect:Rectangle)\r\n\t{\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Determines whether the object specified in the <code>toCompare</code>\r\n\t * parameter is equal to this Rectangle object. This method compares the\r\n\t * <code>x</code>, <code>y</code>, <code>width</code>, and\r\n\t * <code>height</code> properties of an object against the same properties of\r\n\t * this Rectangle object.\r\n\t *\r\n\t * @param toCompare The rectangle to compare to this Rectangle object.\r\n\t * @return A value of <code>true</code> if the object has exactly the same\r\n\t *         values for the <code>x</code>, <code>y</code>, <code>width</code>,\r\n\t *         and <code>height</code> properties as this Rectangle object;\r\n\t *         otherwise <code>false</code>.\r\n\t */\r\n\tpublic equals(toCompare:Rectangle):boolean\r\n\t{\r\n\t\treturn (this.x == toCompare.x && this.y == toCompare.y && this.width == toCompare.width && this.height == toCompare.height)\r\n\t}\r\n\r\n\t/**\r\n\t * Increases the size of the Rectangle object by the specified amounts, in\r\n\t * pixels. The center point of the Rectangle object stays the same, and its\r\n\t * size increases to the left and right by the <code>dx</code> value, and to\r\n\t * the top and the bottom by the <code>dy</code> value.\r\n\t *\r\n\t * @param dx The value to be added to the left and the right of the Rectangle\r\n\t *           object. The following equation is used to calculate the new\r\n\t *           width and position of the rectangle:\r\n\t * @param dy The value to be added to the top and the bottom of the\r\n\t *           Rectangle. The following equation is used to calculate the new\r\n\t *           height and position of the rectangle:\r\n\t */\r\n\tpublic inflate(dx:number, dy:number)\r\n\t{\r\n\t\tthis.x -= dx/2;\r\n\t\tthis.y -= dy/2;\r\n\t\tthis.width += dx/2;\r\n\t\tthis.height += dy/2;\r\n\t}\r\n\r\n\t/**\r\n\t * Increases the size of the Rectangle object. This method is similar to the\r\n\t * <code>Rectangle.inflate()</code> method except it takes a Point object as\r\n\t * a parameter.\r\n\t *\r\n\t * <p>The following two code examples give the same result:</p>\r\n\t *\r\n\t * @param point The <code>x</code> property of this Point object is used to\r\n\t *              increase the horizontal dimension of the Rectangle object.\r\n\t *              The <code>y</code> property is used to increase the vertical\r\n\t *              dimension of the Rectangle object.\r\n\t */\r\n\tpublic inflatePoint(point:Point)\r\n\t{\r\n\t\tthis.x -= point.x/2;\r\n\t\tthis.y -= point.y/2;\r\n\t\tthis.width += point.x/2;\r\n\t\tthis.height += point.y/2;\r\n\t}\r\n\r\n\t/**\r\n\t * If the Rectangle object specified in the <code>toIntersect</code>\r\n\t * parameter intersects with this Rectangle object, returns the area of\r\n\t * intersection as a Rectangle object. If the rectangles do not intersect,\r\n\t * this method returns an empty Rectangle object with its properties set to\r\n\t * 0.\r\n\t *\r\n\t * @param toIntersect The Rectangle object to compare against to see if it\r\n\t *                    intersects with this Rectangle object.\r\n\t * @return A Rectangle object that equals the area of intersection. If the\r\n\t *         rectangles do not intersect, this method returns an empty\r\n\t *         Rectangle object; that is, a rectangle with its <code>x</code>,\r\n\t *         <code>y</code>, <code>width</code>, and <code>height</code>\r\n\t *         properties set to 0.\r\n\t */\r\n\tpublic intersection(toIntersect:Rectangle):Rectangle\r\n\t{\r\n\t\tif (this.intersects(toIntersect)) {\r\n\t\t\tvar i:Rectangle = new Rectangle();\r\n\r\n\t\t\tif (this.x > toIntersect.x) {\r\n\t\t\t\ti.x = this.x;\r\n\t\t\t\ti.width = toIntersect.x - this.x + toIntersect.width;\r\n\r\n\t\t\t\tif (i.width > this.width)\r\n\t\t\t\t\ti.width = this.width;\r\n\t\t\t} else {\r\n\t\t\t\ti.x = toIntersect.x;\r\n\t\t\t\ti.width = this.x - toIntersect.x + this.width;\r\n\r\n\t\t\t\tif (i.width > toIntersect.width)\r\n\t\t\t\t\ti.width = toIntersect.width;\r\n\t\t\t}\r\n\r\n\t\t\tif (this.y > toIntersect.y) {\r\n\t\t\t\ti.y = this.y;\r\n\t\t\t\ti.height = toIntersect.y - this.y + toIntersect.height;\r\n\r\n\t\t\t\tif (i.height > this.height)\r\n\t\t\t\t\ti.height = this.height;\r\n\t\t\t} else {\r\n\t\t\t\ti.y = toIntersect.y;\r\n\t\t\t\ti.height = this.y - toIntersect.y + this.height;\r\n\r\n\t\t\t\tif (i.height > toIntersect.height)\r\n\t\t\t\t\ti.height = toIntersect.height;\r\n\t\t\t}\r\n\r\n\t\t\treturn i;\r\n\t\t}\r\n\r\n\t\treturn new Rectangle();\r\n\t}\r\n\r\n\t/**\r\n\t * Determines whether the object specified in the <code>toIntersect</code>\r\n\t * parameter intersects with this Rectangle object. This method checks the\r\n\t * <code>x</code>, <code>y</code>, <code>width</code>, and\r\n\t * <code>height</code> properties of the specified Rectangle object to see if\r\n\t * it intersects with this Rectangle object.\r\n\t *\r\n\t * @param toIntersect The Rectangle object to compare against this Rectangle\r\n\t *                    object.\r\n\t * @return A value of <code>true</code> if the specified object intersects\r\n\t *         with this Rectangle object; otherwise <code>false</code>.\r\n\t */\r\n\tpublic intersects(toIntersect:Rectangle):boolean\r\n\t{\r\n\t\treturn (this.x + this.width > toIntersect.x && this.x < toIntersect.x + toIntersect.width && this.y + this.height > toIntersect.y && this.y < toIntersect.y + toIntersect.height);\r\n\t}\r\n\r\n\t/**\r\n\t * Determines whether or not this Rectangle object is empty.\r\n\t *\r\n\t * @return A value of <code>true</code> if the Rectangle object's width or\r\n\t *         height is less than or equal to 0; otherwise <code>false</code>.\r\n\t */\r\n\tpublic isEmpty():boolean\r\n\t{\r\n\t\treturn (this.x == 0 && this.y == 0 && this.width == 0 && this.height == 0);\r\n\t}\r\n\r\n\t/**\r\n\t * Adjusts the location of the Rectangle object, as determined by its\r\n\t * top-left corner, by the specified amounts.\r\n\t *\r\n\t * @param dx Moves the <i>x</i> value of the Rectangle object by this amount.\r\n\t * @param dy Moves the <i>y</i> value of the Rectangle object by this amount.\r\n\t */\r\n\tpublic offset(dx:number, dy:number)\r\n\t{\r\n\t\tthis.x += dx;\r\n\t\tthis.y += dy;\r\n\t}\r\n\r\n\t/**\r\n\t * Adjusts the location of the Rectangle object using a Point object as a\r\n\t * parameter. This method is similar to the <code>Rectangle.offset()</code>\r\n\t * method, except that it takes a Point object as a parameter.\r\n\t *\r\n\t * @param point A Point object to use to offset this Rectangle object.\r\n\t */\r\n\tpublic offsetPoint(point:Point)\r\n\t{\r\n\t\tthis.x += point.x;\r\n\t\tthis.y += point.y;\r\n\t}\r\n\r\n\t/**\r\n\t * Sets all of the Rectangle object's properties to 0. A Rectangle object is\r\n\t * empty if its width or height is less than or equal to 0.\r\n\t *\r\n\t * <p> This method sets the values of the <code>x</code>, <code>y</code>,\r\n\t * <code>width</code>, and <code>height</code> properties to 0.</p>\r\n\t *\r\n\t */\r\n\tpublic setEmpty()\r\n\t{\r\n\t\tthis.x = 0;\r\n\t\tthis.y = 0;\r\n\t\tthis.width = 0;\r\n\t\tthis.height = 0;\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the members of Rectangle to the specified values\r\n\t *\r\n\t * @param xa      The <i>x</i> coordinate of the top-left corner of the\r\n\t *                rectangle.\r\n\t * @param ya      The <i>y</i> coordinate of the top-left corner of the\r\n\t *                rectangle.\r\n\t * @param widtha  The width of the rectangle, in pixels.\r\n\t * @param heighta The height of the rectangle, in pixels.\r\n\t */\r\n\tpublic setTo(xa:number, ya:number, widtha:number, heighta:number)\r\n\t{\r\n\t\tthis.x = xa;\r\n\t\tthis.y = ya;\r\n\t\tthis.width = widtha;\r\n\t\tthis.height = heighta;\r\n\t}\r\n\r\n\t/**\r\n\t * Builds and returns a string that lists the horizontal and vertical\r\n\t * positions and the width and height of the Rectangle object.\r\n\t *\r\n\t * @return A string listing the value of each of the following properties of\r\n\t *         the Rectangle object: <code>x</code>, <code>y</code>,\r\n\t *         <code>width</code>, and <code>height</code>.\r\n\t */\r\n\tpublic toString():string\r\n\t{\r\n\t\treturn \"[Rectangle] (x=\" + this.x + \", y=\" + this.y + \", width=\" + this.width + \", height=\" + this.height + \")\";\r\n\t}\r\n\r\n\t/**\r\n\t * Adds two rectangles together to create a new Rectangle object, by filling\r\n\t * in the horizontal and vertical space between the two rectangles.\r\n\t *\r\n\t * <p><b>Note:</b> The <code>union()</code> method ignores rectangles with\r\n\t * <code>0</code> as the height or width value, such as: <code>var\r\n\t * rect2:Rectangle = new Rectangle(300,300,50,0);</code></p>\r\n\t *\r\n\t * @param toUnion A Rectangle object to add to this Rectangle object.\r\n\t * @return A new Rectangle object that is the union of the two rectangles.\r\n\t */\r\n\tpublic union(toUnion:Rectangle):Rectangle\r\n\t{\r\n\t\tvar u:Rectangle = new Rectangle();\r\n\r\n\t\tif (this.x < toUnion.x) {\r\n\t\t\tu.x = this.x;\r\n\t\t\tu.width = toUnion.x - this.x + toUnion.width;\r\n\r\n\t\t\tif (u.width < this.width)\r\n\t\t\t\tu.width = this.width;\r\n\t\t} else {\r\n\t\t\tu.x = toUnion.x;\r\n\t\t\tu.width = this.x - toUnion.x + this.width;\r\n\r\n\t\t\tif (u.width < toUnion.width)\r\n\t\t\t\tu.width = toUnion.width;\r\n\t\t}\r\n\r\n\t\tif (this.y < toUnion.y) {\r\n\t\t\tu.y = this.y;\r\n\t\t\tu.height = toUnion.y - this.y + toUnion.height;\r\n\r\n\t\t\tif (u.height < this.height)\r\n\t\t\t\tu.height = this.height;\r\n\t\t} else {\r\n\t\t\tu.y = toUnion.y;\r\n\t\t\tu.height = this.y - toUnion.y + this.height;\r\n\r\n\t\t\tif (u.height < toUnion.height)\r\n\t\t\t\tu.height = toUnion.height;\r\n\t\t}\r\n\r\n\t\treturn u;\r\n\t}\r\n}\r\n\r\nexport = Rectangle;",
    "import PlaneClassification\t= require(\"awayjs-core/lib/geom/PlaneClassification\");\r\nimport Vector3D\t\t\t\t= require(\"awayjs-core/lib/geom/Vector3D\");\r\n\r\nclass Sphere\r\n{\r\n\t/**\r\n\t *\r\n\t */\r\n\tpublic x:number;\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tpublic y:number;\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tpublic z:number;\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tpublic radius:number;\r\n\r\n\t/**\r\n\t * Create a Sphere with ABCD coefficients\r\n\t */\r\n\tconstructor(x:number = 0, y:number = 0, z:number = 0, radius:number = 0)\r\n\t{\r\n\t\tthis.x = x;\r\n\t\tthis.y = y;\r\n\t\tthis.z = z;\r\n\t\tthis.radius = radius;\r\n\r\n\t}\r\n\r\n\tpublic rayIntersection(position:Vector3D, direction:Vector3D, targetNormal:Vector3D):number\r\n\t{\r\n\t\tif (this.containsPoint(position))\r\n\t\t\treturn 0;\r\n\r\n\t\tvar px:number = position.x - this.x, py:number = position.y - this.y, pz:number = position.z - this.z;\r\n\t\tvar vx:number = direction.x, vy:number = direction.y, vz:number = direction.z;\r\n\t\tvar rayEntryDistance:number;\r\n\r\n\t\tvar a:number = vx*vx + vy*vy + vz*vz;\r\n\t\tvar b:number = 2*( px*vx + py*vy + pz*vz );\r\n\t\tvar c:number = px*px + py*py + pz*pz - this.radius*this.radius;\r\n\t\tvar det:number = b*b - 4*a*c;\r\n\r\n\t\tif (det >= 0) { // ray goes through sphere\r\n\t\t\tvar sqrtDet:number = Math.sqrt(det);\r\n\t\t\trayEntryDistance = ( -b - sqrtDet )/( 2*a );\r\n\t\t\tif (rayEntryDistance >= 0) {\r\n\t\t\t\ttargetNormal.x = px + rayEntryDistance*vx;\r\n\t\t\t\ttargetNormal.y = py + rayEntryDistance*vy;\r\n\t\t\t\ttargetNormal.z = pz + rayEntryDistance*vz;\r\n\t\t\t\ttargetNormal.normalize();\r\n\r\n\t\t\t\treturn rayEntryDistance;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// ray misses sphere\r\n\t\treturn -1;\r\n\t}\r\n\r\n\tpublic containsPoint(position:Vector3D):boolean\r\n\t{\r\n\t\tvar px:number = position.x - this.x;\r\n\t\tvar py:number = position.y - this.y;\r\n\t\tvar pz:number = position.z - this.z;\r\n\t\tvar distance:number = Math.sqrt(px*px + py*py + pz*pz);\r\n\t\treturn distance <= this.radius;\r\n\t}\r\n\r\n\tpublic toString():string\r\n\t{\r\n\t\treturn \"Sphere [x:\" + this.x + \", y:\" + this.y + \", z:\" + this.z + \", radius:\" + this.radius + \"]\";\r\n\t}\r\n}\r\n\r\nexport = Sphere;",
    "import Matrix\t\t\t\t\t= require(\"awayjs-core/lib/geom/Matrix\");\r\n\r\nclass UVTransform\r\n{\r\n\tprivate _uvMatrix:Matrix = new Matrix();\r\n\tprivate _uvMatrixDirty:boolean;\r\n\r\n\tprivate _rotation:number = 0;\r\n\tprivate _scaleU:number = 1;\r\n\tprivate _scaleV:number = 1;\r\n\tprivate _offsetU:number = 0;\r\n\tprivate _offsetV:number = 0;\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tpublic get offsetU():number\r\n\t{\r\n\t\treturn this._offsetU;\r\n\t}\r\n\r\n\tpublic set offsetU(value:number)\r\n\t{\r\n\t\tif (value == this._offsetU)\r\n\t\t\treturn;\r\n\r\n\t\tthis._offsetU = value;\r\n\t\tthis._uvMatrixDirty = true;\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tpublic get offsetV():number\r\n\t{\r\n\t\treturn this._offsetV;\r\n\t}\r\n\r\n\tpublic set offsetV(value:number)\r\n\t{\r\n\t\tif (value == this._offsetV)\r\n\t\t\treturn;\r\n\r\n\t\tthis._offsetV = value;\r\n\t\tthis._uvMatrixDirty = true;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tpublic get rotation():number\r\n\t{\r\n\t\treturn this._rotation;\r\n\t}\r\n\r\n\tpublic set rotation(value:number)\r\n\t{\r\n\t\tif (value == this._rotation)\r\n\t\t\treturn;\r\n\r\n\t\tthis._rotation = value;\r\n\r\n\t\tthis._uvMatrixDirty = true;\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tpublic get scaleU():number\r\n\t{\r\n\t\treturn this._scaleU;\r\n\t}\r\n\r\n\tpublic set scaleU(value:number)\r\n\t{\r\n\t\tif (value == this._scaleU)\r\n\t\t\treturn;\r\n\r\n\t\tthis._scaleU = value;\r\n\r\n\t\tthis._uvMatrixDirty = true;\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tpublic get scaleV():number\r\n\t{\r\n\t\treturn this._scaleV;\r\n\t}\r\n\r\n\tpublic set scaleV(value:number)\r\n\t{\r\n\t\tif (value == this._scaleV)\r\n\t\t\treturn;\r\n\r\n\t\tthis._scaleV = value;\r\n\r\n\t\tthis._uvMatrixDirty = true;\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tpublic get matrix():Matrix\r\n\t{\r\n\t\tif (this._uvMatrixDirty)\r\n\t\t\tthis.updateUVMatrix();\r\n\r\n\t\treturn this._uvMatrix;\r\n\t}\r\n\r\n\tconstructor()\r\n\t{\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * @private\r\n\t */\r\n\tprivate updateUVMatrix()\r\n\t{\r\n\t\tthis._uvMatrix.identity();\r\n\r\n\t\tif (this._rotation != 0)\r\n\t\t\tthis._uvMatrix.rotate(this._rotation);\r\n\r\n\t\tif (this._scaleU != 1 || this._scaleV != 1)\r\n\t\t\tthis._uvMatrix.scale(this._scaleU, this._scaleV);\r\n\r\n\t\tthis._uvMatrix.translate(this._offsetU, this._offsetV);\r\n\r\n\t\tthis._uvMatrixDirty = false;\r\n\t}\r\n}\r\n\r\nexport = UVTransform;",
    "/**\r\n * The Vector3D class represents a point or a location in the three-dimensional\r\n * space using the Cartesian coordinates x, y, and z. As in a two-dimensional\r\n * space, the x property represents the horizontal axis and the y property\r\n * represents the vertical axis. In three-dimensional space, the z property\r\n * represents depth. The value of the x property increases as the object moves\r\n * to the right. The value of the y property increases as the object moves\r\n * down. The z property increases as the object moves farther from the point\r\n * of view. Using perspective projection and scaling, the object is seen to be\r\n * bigger when near and smaller when farther away from the screen. As in a\r\n * right-handed three-dimensional coordinate system, the positive z-axis points\r\n * away from the viewer and the value of the z property increases as the object\r\n * moves away from the viewer's eye. The origin point (0,0,0) of the global\r\n * space is the upper-left corner of the stage.\r\n *\r\n * <p>The Vector3D class can also represent a direction, an arrow pointing from\r\n * the origin of the coordinates, such as (0,0,0), to an endpoint; or a\r\n * floating-point component of an RGB (Red, Green, Blue) color model.</p>\r\n *\r\n * <p>Quaternion notation introduces a fourth element, the w property, which\r\n * provides additional orientation information. For example, the w property can\r\n * define an angle of rotation of a Vector3D object. The combination of the\r\n * angle of rotation and the coordinates x, y, and z can determine the display\r\n * object's orientation. Here is a representation of Vector3D elements in\r\n * matrix notation:</p>\r\n */\r\nclass Vector3D\r\n{\r\n\t/**\r\n\t * The x axis defined as a Vector3D object with coordinates (1,0,0).\r\n\t */\r\n\tpublic static X_AXIS:Vector3D = new Vector3D(1, 0, 0);\r\n\r\n\t/**\r\n\t * The y axis defined as a Vector3D object with coordinates (0,1,0).\r\n\t */\r\n\tpublic static Y_AXIS:Vector3D = new Vector3D(0, 1, 0);\r\n\r\n\t/**\r\n\t * The z axis defined as a Vector3D object with coordinates (0,0,1).\r\n\t */\r\n\tpublic static Z_AXIS:Vector3D = new Vector3D(0, 0, 1);\r\n\r\n\t/**\r\n\t * The first element of a Vector3D object, such as the x coordinate of\r\n\t * a point in the three-dimensional space. The default value is 0.\r\n\t */\r\n\tpublic x:number;\r\n\r\n\t/*\r\n\t *The second element of a Vector3D object, such as the y coordinate of\r\n\t * a point in the three-dimensional space. The default value is 0.\r\n\t */\r\n\tpublic y:number;\r\n\r\n\t/**\r\n\t * The third element of a Vector3D object, such as the y coordinate of\r\n\t * a point in the three-dimensional space. The default value is 0.\r\n\t */\r\n\tpublic z:number;\r\n\r\n\t/**\r\n\t * TThe fourth element of a Vector3D object (in addition to the x, y,\r\n\t * and z properties) can hold data such as the angle of rotation. The\r\n\t * default value is 0.\r\n\t *\r\n\t * <p>Quaternion notation employs an angle as the fourth element in\r\n\t * its calculation of three-dimensional rotation. The w property can\r\n\t * be used to define the angle of rotation about the Vector3D object.\r\n\t * The combination of the rotation angle and the coordinates (x,y,z)\r\n\t * determines the display object's orientation.</p>\r\n\t *\r\n\t * <p>In addition, the w property can be used as a perspective warp\r\n\t * factor for a projected three-dimensional position or as a projection\r\n\t * transform value in representing a three-dimensional coordinate\r\n\t * projected into the two-dimensional space. For example, you can\r\n\t * create a projection matrix using the <code>Matrix3D.rawData</code>\r\n\t * property, that, when applied to a Vector3D object, produces a\r\n\t * transform value in the Vector3D object's fourth element (the w\r\n\t * property). Dividing the Vector3D object's other elements by the\r\n\t * transform value then produces a projected Vector3D object. You can\r\n\t * use the <code>Vector3D.project()</code> method to divide the first\r\n\t * three elements of a Vector3D object by its fourth element.</p>\r\n\t */\r\n\tpublic w:number;\r\n\r\n\t/**\r\n\t * The length, magnitude, of the current Vector3D object from the\r\n\t * origin (0,0,0) to the object's x, y, and z coordinates. The w\r\n\t * property is ignored. A unit vector has a length or magnitude of\r\n\t * one.\r\n\t */\r\n\tpublic get length():number\r\n\t{\r\n\t\treturn Math.sqrt(this.lengthSquared);\r\n\t}\r\n\r\n\t/**\r\n\t * The square of the length of the current Vector3D object, calculated\r\n\t * using the x, y, and z properties. The w property is ignored. Use the\r\n\t * <code>lengthSquared()</code> method whenever possible instead of the\r\n\t * slower <code>Math.sqrt()</code> method call of the\r\n\t * <code>Vector3D.length()</code> method.\r\n\t */\r\n\tpublic get lengthSquared():number\r\n\t{\r\n\t\treturn this.x*this.x + this.y*this.y + this.z*this.z;\r\n\t}\r\n\r\n\t/**\r\n\t * Creates an instance of a Vector3D object. If you do not specify a\r\n\t * parameter for the constructor, a Vector3D object is created with\r\n\t * the elements (0,0,0,0).\r\n\t *\r\n\t * @param x The first element, such as the x coordinate.\r\n\t * @param y The second element, such as the y coordinate.\r\n\t * @param z The third element, such as the z coordinate.\r\n\t * @param w An optional element for additional data such as the angle\r\n\t *          of rotation.\r\n\t */\r\n\tconstructor(x:number = 0, y:number = 0, z:number = 0, w:number = 0)\r\n\t{\r\n\t\tthis.x = x;\r\n\t\tthis.y = y;\r\n\t\tthis.z = z;\r\n\t\tthis.w = w;\r\n\t}\r\n\r\n\t/**\r\n\t * Adds the value of the x, y, and z elements of the current Vector3D\r\n\t * object to the values of the x, y, and z elements of another Vector3D\r\n\t * object. The <code>add()</code> method does not change the current\r\n\t * Vector3D object. Instead, it returns a new Vector3D object with\r\n\t * the new values.\r\n\t *\r\n\t * <p>The result of adding two vectors together is a resultant vector.\r\n\t * One way to visualize the result is by drawing a vector from the\r\n\t * origin or tail of the first vector to the end or head of the second\r\n\t * vector. The resultant vector is the distance between the origin\r\n\t * point of the first vector and the end point of the second vector.\r\n\t * </p>\r\n\t */\r\n\tpublic add(a:Vector3D):Vector3D\r\n\t{\r\n\t\treturn new Vector3D(this.x + a.x, this.y + a.y, this.z + a.z, this.w + a.w)\r\n\t}\r\n\r\n\t/**\r\n\t * Returns the angle in radians between two vectors. The returned angle\r\n\t * is the smallest radian the first Vector3D object rotates until it\r\n\t * aligns with the second Vector3D object.\r\n\t *\r\n\t * <p>The <code>angleBetween()</code> method is a static method. You\r\n\t * can use it directly as a method of the Vector3D class.</p>\r\n\t *\r\n\t * <p>To convert a degree to a radian, you can use the following\r\n\t * formula:</p>\r\n\t *\r\n\t * <p><code>radian = Math.PI/180 * degree</code></p>\r\n\t *\r\n\t * @param a The first Vector3D object.\r\n\t * @param b The second Vector3D object.\r\n\t * @returns The angle between two Vector3D objects.\r\n\t */\r\n\tpublic static angleBetween(a:Vector3D, b:Vector3D):number\r\n\t{\r\n\t\treturn Math.acos(a.dotProduct(b)/(a.length*b.length));\r\n\t}\r\n\r\n\t/**\r\n\t * Returns a new Vector3D object that is an exact copy of the current\r\n\t * Vector3D object.\r\n\t *\r\n\t * @returns A new Vector3D object that is a copy of the current\r\n\t * Vector3D object.\r\n\t */\r\n\tpublic clone():Vector3D\r\n\t{\r\n\t\treturn new Vector3D(this.x, this.y, this.z, this.w);\r\n\t}\r\n\r\n\tpublic static combine(a:Vector3D, b:Vector3D, ascl:number, bscl:number):Vector3D\r\n\t{\r\n\t\treturn new Vector3D(a.x*ascl + b.x*bscl, a.y*ascl + b.y*bscl, a.z*ascl + b.z*bscl);\r\n\t}\r\n\r\n\t/**\r\n\t * Copies all of vector data from the source Vector3D object into the\r\n\t * calling Vector3D object.\r\n\t *\r\n\t * @param src The Vector3D object from which to copy the data.\r\n\t */\r\n\tpublic copyFrom(src:Vector3D):void\r\n\t{\r\n\t\tthis.x = src.x;\r\n\t\tthis.y = src.y;\r\n\t\tthis.z = src.z;\r\n\t\tthis.w = src.w;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns a new Vector3D object that is perpendicular (at a right\r\n\t * angle) to the current Vector3D and another Vector3D object. If the\r\n\t * returned Vector3D object's coordinates are (0,0,0), then the two\r\n\t * Vector3D objects are parallel to each other.\r\n\t *\r\n\t * <p>You can use the normalized cross product of two vertices of a\r\n\t * polygon surface with the normalized vector of the camera or eye\r\n\t * viewpoint to get a dot product. The value of the dot product can\r\n\t * identify whether a surface of a three-dimensional object is hidden\r\n\t * from the viewpoint.</p>\r\n\t *\r\n\t * @param a A second Vector3D object.\r\n\t * @returns A new Vector3D object that is perpendicular to the current\r\n\t *          Vector3D object and the Vector3D object specified as the\r\n\t *          parameter.\r\n\t */\r\n\tpublic crossProduct(a:Vector3D):Vector3D\r\n\t{\r\n\t\treturn new Vector3D(this.y*a.z - this.z*a.y, this.z*a.x - this.x*a.z, this.x*a.y - this.y*a.x, 1);\r\n\t}\r\n\r\n\t/**\r\n\t * Decrements the value of the x, y, and z elements of the current\r\n\t * Vector3D object by the values of the x, y, and z elements of\r\n\t * specified Vector3D object. Unlike the\r\n\t * <code>Vector3D.subtract()</code> method, the\r\n\t * <code>decrementBy()</code> method changes the current Vector3D\r\n\t * object and does not return a new Vector3D object.\r\n\t *\r\n\t * @param a The Vector3D object containing the values to subtract from\r\n\t *          the current Vector3D object.\r\n\t */\r\n\tpublic decrementBy(a:Vector3D)\r\n\t{\r\n\t\tthis.x -= a.x;\r\n\t\tthis.y -= a.y;\r\n\t\tthis.z -= a.z;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns the distance between two Vector3D objects. The\r\n\t * <code>distance()</code> method is a static method. You can use it\r\n\t * directly as a method of the Vector3D class to get the Euclidean\r\n\t * distance between two three-dimensional points.\r\n\t *\r\n\t * @param pt1 A Vector3D object as the first three-dimensional point.\r\n\t * @param pt2 A Vector3D object as the second three-dimensional point.\r\n\t * @returns The distance between two Vector3D objects.\r\n\t */\r\n\tstatic distance(pt1:Vector3D, pt2:Vector3D):number\r\n\t{\r\n\t\tvar x:number = (pt1.x - pt2.x);\r\n\t\tvar y:number = (pt1.y - pt2.y);\r\n\t\tvar z:number = (pt1.z - pt2.z);\r\n\t\treturn Math.sqrt(x*x + y*y + z*z);\r\n\t}\r\n\r\n\t/**\r\n\t * If the current Vector3D object and the one specified as the\r\n\t * parameter are unit vertices, this method returns the cosine of the\r\n\t * angle between the two vertices. Unit vertices are vertices that\r\n\t * point to the same direction but their length is one. They remove the\r\n\t * length of the vector as a factor in the result. You can use the\r\n\t * <code>normalize()</code> method to convert a vector to a unit\r\n\t * vector.\r\n\t *\r\n\t * <p>The <code>dotProduct()</code> method finds the angle between two\r\n\t * vertices. It is also used in backface culling or lighting\r\n\t * calculations. Backface culling is a procedure for determining which\r\n\t * surfaces are hidden from the viewpoint. You can use the normalized\r\n\t * vertices from the camera, or eye, viewpoint and the cross product of\r\n\t * the vertices of a polygon surface to get the dot product. If the dot\r\n\t * product is less than zero, then the surface is facing the camera or\r\n\t * the viewer. If the two unit vertices are perpendicular to each\r\n\t * other, they are orthogonal and the dot product is zero. If the two\r\n\t * vertices are parallel to each other, the dot product is one.</p>\r\n\t *\r\n\t * @param a The second Vector3D object.\r\n\t * @returns A scalar which is the dot product of the current Vector3D\r\n\t *          object and the specified Vector3D object.\r\n\t *\r\n\t * @see away.geom.Vector3D#crossProduct()\r\n\t * @see away.geom.Vector3D#normalize()\r\n\t */\r\n\tpublic dotProduct(a:Vector3D):number\r\n\t{\r\n\t\treturn this.x*a.x + this.y*a.y + this.z*a.z;\r\n\t}\r\n\r\n\t/**\r\n\t * Determines whether two Vector3D objects are equal by comparing the\r\n\t * x, y, and z elements of the current Vector3D object with a\r\n\t * specified Vector3D object. If the values of these elements are the\r\n\t * same, the two Vector3D objects are equal. If the second optional\r\n\t * parameter is set to true, all four elements of the Vector3D objects,\r\n\t * including the w property, are compared.\r\n\t */\r\n\r\n\t/**\r\n\t *\r\n\t * @param toCompare The Vector3D object to be compared with the current\r\n\t *                  Vector3D object.\r\n\t * @param allFour   An optional parameter that specifies whether the w\r\n\t *                  property of the Vector3D objects is used in the\r\n\t *                  comparison.\r\n\t * @returns A value of true if the specified Vector3D object is equal\r\n\t *          to the current Vector3D object; false if it is not equal.\r\n\t */\r\n\tpublic equals(toCompare:Vector3D, allFour:boolean = false):boolean\r\n\t{\r\n\t\treturn (this.x == toCompare.x && this.y == toCompare.y && this.z == toCompare.z && (!allFour || this.w == toCompare.w ));\r\n\t}\r\n\r\n\t/**\r\n\t * Increments the value of the x, y, and z elements of the current\r\n\t * Vector3D object by the values of the x, y, and z elements of a\r\n\t * specified Vector3D object. Unlike the <code>Vector3D.add()</code>\r\n\t * method, the <code>incrementBy()</code> method changes the current\r\n\t * Vector3D object and does not return a new Vector3D object.\r\n\t *\r\n\t * @param a The Vector3D object to be added to the current Vector3D\r\n\t *          object.\r\n\t */\r\n\tpublic incrementBy(a:Vector3D)\r\n\t{\r\n\t\tthis.x += a.x;\r\n\t\tthis.y += a.y;\r\n\t\tthis.z += a.z;\r\n\t}\r\n\r\n\t/**\r\n\t * Compares the elements of the current Vector3D object with the\r\n\t * elements of a specified Vector3D object to determine whether they\r\n\t * are nearly equal. The two Vector3D objects are nearly equal if the\r\n\t * value of all the elements of the two vertices are equal, or the\r\n\t * result of the comparison is within the tolerance range. The\r\n\t * difference between two elements must be less than the number\r\n\t * specified as the tolerance parameter. If the third optional\r\n\t * parameter is set to <code>true</code>, all four elements of the\r\n\t * Vector3D objects, including the <code>w</code> property, are\r\n\t * compared. Otherwise, only the x, y, and z elements are included in\r\n\t * the comparison.\r\n\t */\r\n\r\n\t/**\r\n\t *\r\n\t * @param toCompare The Vector3D object to be compared with the current\r\n\t *                  Vector3D object.\r\n\t * @param tolerance A number determining the tolerance factor. If the\r\n\t *                  difference between the values of the Vector3D\r\n\t *                  element specified in the toCompare parameter and\r\n\t *                  the current Vector3D element is less than the\r\n\t *                  tolerance number, the two values are considered\r\n\t *                  nearly equal.\r\n\t * @param allFour   An optional parameter that specifies whether the w\r\n\t *                  property of the Vector3D objects is used in the\r\n\t *                  comparison.\r\n\t * @returns A value of true if the specified Vector3D object is nearly\r\n\t *          equal to the current Vector3D object; false if it is not\r\n\t *          equal.\r\n\t *\r\n\t * @see away.geom.Vector3D#equals()\r\n\t */\r\n\tpublic nearEquals(toCompare:Vector3D, tolerance:number, allFour:boolean = true):boolean\r\n\t{\r\n\t\treturn ((Math.abs(this.x - toCompare.x) < tolerance) && (Math.abs(this.y - toCompare.y) < tolerance) && (Math.abs(this.z - toCompare.z) < tolerance) && (!allFour || Math.abs(this.w - toCompare.w) < tolerance));\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the current Vector3D object to its inverse. The inverse object\r\n\t * is also considered the opposite of the original object. The value of\r\n\t * the x, y, and z properties of the current Vector3D object is changed\r\n\t * to -x, -y, and -z.\r\n\t */\r\n\tpublic negate():void\r\n\t{\r\n\t\tthis.x = -this.x;\r\n\t\tthis.y = -this.y;\r\n\t\tthis.z = -this.z;\r\n\t}\r\n\r\n\t/**\r\n\t * Converts a Vector3D object to a unit vector by dividing the first\r\n\t * three elements (x, y, z) by the length of the vector. Unit vertices\r\n\t * are vertices that have a direction but their length is one. They\r\n\t * simplify vector calculations by removing length as a factor.\r\n\t */\r\n\t/**\r\n\t * Scales the line segment between(0,0) and the current point to a set\r\n\t * length.\r\n\t *\r\n\t * @param thickness The scaling value. For example, if the current\r\n\t *                  Vector3D object is (0,3,4), and you normalize it to\r\n\t *                  1, the point returned is at(0,0.6,0.8).\r\n\t */\r\n\tpublic normalize(thickness:number = 1)\r\n\t{\r\n\t\tif (this.length != 0) {\r\n\t\t\tvar invLength = thickness/this.length;\r\n\t\t\tthis.x *= invLength;\r\n\t\t\tthis.y *= invLength;\r\n\t\t\tthis.z *= invLength;\r\n\t\t\treturn;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Divides the value of the <code>x</code>, <code>y</code>, and\r\n\t * <code>z</code> properties of the current Vector3D object by the\r\n\t * value of its <code>w</code> property.\r\n\t *\r\n\t * <p>If the current Vector3D object is the result of multiplying a\r\n\t * Vector3D object by a projection Matrix3D object, the w property can\r\n\t * hold the transform value. The <code>project()</code> method then can\r\n\t * complete the projection by dividing the elements by the\r\n\t * <code>w</code> property. Use the <code>Matrix3D.rawData</code>\r\n\t * property to create a projection Matrix3D object.</p>\r\n\t */\r\n\tpublic project():void\r\n\t{\r\n\t\tthis.x /= this.w;\r\n\t\tthis.y /= this.w;\r\n\t\tthis.z /= this.w;\r\n\t}\r\n\r\n\t/**\r\n\t * Scales the current Vector3D object by a scalar, a magnitude. The\r\n\t * Vector3D object's x, y, and z elements are multiplied by the scalar\r\n\t * number specified in the parameter. For example, if the vector is\r\n\t * scaled by ten, the result is a vector that is ten times longer. The\r\n\t * scalar can also change the direction of the vector. Multiplying the\r\n\t * vector by a negative number reverses its direction.\r\n\t *\r\n\t * @param s A multiplier (scalar) used to scale a Vector3D object.\r\n\r\n\t */\r\n\tpublic scaleBy(s:number):void\r\n\t{\r\n\t\tthis.x *= s;\r\n\t\tthis.y *= s;\r\n\t\tthis.z *= s;\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the members of Vector3D to the specified values\r\n\t *\r\n\t * @param xa The first element, such as the x coordinate.\r\n\t * @param ya The second element, such as the y coordinate.\r\n\t * @param za The third element, such as the z coordinate.\r\n\t */\r\n\tpublic setTo(xa:number, ya:number, za:number):void\r\n\t{\r\n\t\tthis.x = xa;\r\n\t\tthis.y = ya;\r\n\t\tthis.z = za;\r\n\t}\r\n\r\n\t/**\r\n\t * Subtracts the value of the x, y, and z elements of the current\r\n\t * Vector3D object from the values of the x, y, and z elements of\r\n\t * another Vector3D object. The <code>subtract()</code> method does not\r\n\t * change the current Vector3D object. Instead, this method returns a\r\n\t * new Vector3D object with the new values.\r\n\t *\r\n\t * @param a The Vector3D object to be subtracted from the current\r\n\t *          Vector3D object.\r\n\t * @returns A new Vector3D object that is the difference between the\r\n\t *          current Vector3D and the specified Vector3D object.\r\n\t *\r\n\t * @see away.geom.Vector3D#decrementBy()\r\n\t */\r\n\tpublic subtract(a:Vector3D):Vector3D\r\n\t{\r\n\t\treturn new Vector3D(this.x - a.x, this.y - a.y, this.z - a.z);\r\n\t}\r\n\r\n\t/**\r\n\t * Returns a string representation of the current Vector3D object. The\r\n\t * string contains the values of the x, y, and z properties.\r\n\t */\r\n\tpublic toString():string\r\n\t{\r\n\t\treturn \"[Vector3D] (x:\" + this.x + \" ,y:\" + this.y + \", z\" + this.z + \", w:\" + this.w + \")\";\r\n\t}\r\n}\r\n\r\nexport = Vector3D;",
    "import IAsset\t\t\t\t\t= require(\"awayjs-core/lib/library/IAsset\");\r\nimport IAssetClass\t\t\t\t= require(\"awayjs-core/lib/library/IAssetClass\");\r\nimport AbstractMethodError\t\t= require(\"awayjs-core/lib/errors/AbstractMethodError\");\r\nimport AssetEvent\t\t\t\t= require(\"awayjs-core/lib/events/AssetEvent\");\r\nimport EventDispatcher\t\t\t= require(\"awayjs-core/lib/events/EventDispatcher\");\r\n\r\nclass AssetBase extends EventDispatcher\r\n{\r\n\tpublic static ID_COUNT:number = 0;\r\n\r\n\tprivate _originalName:string;\r\n\tprivate _namespace:string;\r\n\tprivate _name:string;\r\n\tprivate _id:number;\r\n\tprivate _full_path:Array<string>;\r\n\r\n\tpublic static DEFAULT_NAMESPACE:string = 'default';\r\n\r\n\tconstructor(name:string = null)\r\n\t{\r\n\t\tsuper();\r\n\r\n\t\tthis._id = AssetBase.ID_COUNT++;\r\n\r\n\t\tif (name == null)\r\n\t\t\tname = 'null';\r\n\r\n\t\tthis._name = name;\r\n\t\tthis._originalName = name;\r\n\r\n\t\tthis.updateFullPath();\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tpublic get assetType():string\r\n\t{\r\n\t\tthrow new AbstractMethodError();\r\n\t}\r\n\r\n\t/**\r\n\t * The original name used for this asset in the resource (e.g. file) in which\r\n\t * it was found. This may not be the same as <code>name</code>, which may\r\n\t * have changed due to of a name conflict.\r\n\t */\r\n\tpublic get originalName():string\r\n\t{\r\n\t\treturn this._originalName;\r\n\t}\r\n\r\n\t/**\r\n\t * A unique id for the asset, used to identify assets in an associative array\r\n\t */\r\n\tpublic get id():number\r\n\t{\r\n\t\treturn this._id;\r\n\t}\r\n\r\n\tpublic get name():string\r\n\t{\r\n\t\treturn this._name;\r\n\t}\r\n\r\n\tpublic set name(val:string)\r\n\t{\r\n\t\tvar prev:string;\r\n\r\n\t\tprev = this._name;\r\n\t\tthis._name = val;\r\n\r\n\t\tif (this._name == null)\r\n\t\t\tthis._name = 'null';\r\n\r\n\t\tthis.updateFullPath();\r\n\r\n\t\t//if (hasEventListener(AssetEvent.ASSET_RENAME))\r\n\t\tthis.dispatchEvent(new AssetEvent(AssetEvent.ASSET_RENAME, <IAsset> this, prev));\r\n\r\n\t}\r\n\r\n\tpublic dispose()\r\n\t{\r\n\t\tthrow new AbstractMethodError();\r\n\t}\r\n\r\n\tpublic _clearInterfaces()\r\n\t{\r\n\t\tthrow new AbstractMethodError();\r\n\t}\r\n\r\n\tpublic get assetNamespace():string\r\n\t{\r\n\t\treturn this._namespace;\r\n\t}\r\n\r\n\tpublic get assetFullPath():Array<string>\r\n\t{\r\n\t\treturn this._full_path;\r\n\t}\r\n\r\n\tpublic assetPathEquals(name:string, ns:string):boolean\r\n\t{\r\n\t\treturn (this._name == name && (!ns || this._namespace == ns));\r\n\t}\r\n\r\n\r\n\tpublic isAsset(assetClass:IAssetClass):boolean\r\n\t{\r\n\t\treturn this.assetType == assetClass.assetType;\r\n\t}\r\n\r\n\tpublic resetAssetPath(name:string, ns:string = null, overrideOriginal:boolean = true):void\r\n\t{\r\n\r\n\t\tthis._name = name? name : 'null';\r\n\t\tthis._namespace = ns? ns : AssetBase.DEFAULT_NAMESPACE;\r\n\r\n\t\tif (overrideOriginal)\r\n\t\t\tthis._originalName = this._name;\r\n\r\n\t\tthis.updateFullPath();\r\n\t}\r\n\r\n\tprivate updateFullPath():void\r\n\t{\r\n\t\tthis._full_path = [ this._namespace, this._name ];\r\n\t}\r\n}\r\n\r\nexport = AssetBase;",
    "import URLRequest\t\t\t\t= require(\"awayjs-core/lib/net/URLRequest\");\r\nimport AssetLibrary\t\t\t\t= require(\"awayjs-core/lib/library/AssetLibrary\");\r\nimport AssetLibraryIterator\t\t= require(\"awayjs-core/lib/library/AssetLibraryIterator\");\r\nimport LoaderSession\t\t\t= require(\"awayjs-core/lib/library/LoaderSession\");\r\nimport LoaderContext\t\t\t= require(\"awayjs-core/lib/library/LoaderContext\");\r\nimport ConflictPrecedence\t\t= require(\"awayjs-core/lib/library/ConflictPrecedence\");\r\nimport ConflictStrategy\t\t\t= require(\"awayjs-core/lib/library/ConflictStrategy\");\r\nimport ConflictStrategyBase\t\t= require(\"awayjs-core/lib/library/ConflictStrategyBase\");\r\nimport AssetBase\t\t\t\t= require(\"awayjs-core/lib/library/AssetBase\");\r\nimport IAsset\t\t\t\t\t= require(\"awayjs-core/lib/library/IAsset\");\r\nimport Error\t\t\t\t\t= require(\"awayjs-core/lib/errors/Error\");\r\nimport AssetEvent\t\t\t\t= require(\"awayjs-core/lib/events/AssetEvent\");\r\nimport IOErrorEvent\t\t\t\t= require(\"awayjs-core/lib/events/IOErrorEvent\");\r\nimport LoaderEvent\t\t\t\t= require(\"awayjs-core/lib/events/LoaderEvent\");\r\nimport EventDispatcher\t\t\t= require(\"awayjs-core/lib/events/EventDispatcher\");\r\nimport ParserEvent\t\t\t\t= require(\"awayjs-core/lib/events/ParserEvent\");\r\nimport ParserBase\t\t\t\t= require(\"awayjs-core/lib/parsers/ParserBase\");\r\n\r\n/**\r\n * AssetLibraryBundle enforces a multiton pattern and is not intended to be instanced directly.\r\n * Its purpose is to create a container for 3D data management, both before and after parsing.\r\n * If you are interested in creating multiple library bundles, please use the <code>getInstance()</code> method.\r\n */\r\nclass AssetLibraryBundle extends EventDispatcher\r\n{\r\n\tpublic static _iInstances:Object = new Object();\r\n\r\n\tprivate _loaderSessions:Array<LoaderSession>;\r\n\tprivate _strategy:ConflictStrategyBase;\r\n\tprivate _strategyPreference:string;\r\n\tprivate _assets:Array<IAsset>;\r\n\tprivate _assetDictionary:Object;\r\n\tprivate _assetDictDirty:boolean;\r\n\tprivate _loaderSessionsGarbage:Array<LoaderSession> = new Array<LoaderSession>();\r\n\tprivate _gcTimeoutIID:number;\r\n\r\n\tprivate _onAssetRenameDelegate:(event:AssetEvent) => void;\r\n\tprivate _onAssetConflictResolvedDelegate:(event:AssetEvent) => void;\r\n\tprivate _onResourceCompleteDelegate:(event:LoaderEvent) => void;\r\n\tprivate _onTextureSizeErrorDelegate:(event:AssetEvent) => void;\r\n\tprivate _onAssetCompleteDelegate:(event:AssetEvent) => void;\r\n\tprivate _onLoadErrorDelegate:(event:IOErrorEvent) => boolean;\r\n\tprivate _onParseErrorDelegate:(event:ParserEvent) => boolean;\r\n\r\n\t/**\r\n\t * Creates a new <code>AssetLibraryBundle</code> object.\r\n\t *\r\n\t * @param me A multiton enforcer for the AssetLibraryBundle ensuring it cannnot be instanced.\r\n\t */\r\n\tconstructor()\r\n\t{\r\n\t\tsuper();\r\n\r\n\t\tthis._assets = new Array<IAsset>();//new Vector.<IAsset>;\r\n\t\tthis._assetDictionary = new Object();\r\n\t\tthis._loaderSessions = new Array<LoaderSession>();\r\n\r\n\t\tthis.conflictStrategy = ConflictStrategy.IGNORE.create();\r\n\t\tthis.conflictPrecedence = ConflictPrecedence.FAVOR_NEW;\r\n\r\n\t\tthis._onAssetRenameDelegate = (event:AssetEvent) => this.onAssetRename(event);\r\n\t\tthis._onAssetConflictResolvedDelegate = (event:AssetEvent) => this.onAssetConflictResolved(event);\r\n\t\tthis._onResourceCompleteDelegate = (event:LoaderEvent) => this.onResourceComplete(event);\r\n\t\tthis._onTextureSizeErrorDelegate = (event:AssetEvent) => this.onTextureSizeError(event);\r\n\t\tthis._onAssetCompleteDelegate = (event:AssetEvent) => this.onAssetComplete(event);\r\n\t\tthis._onLoadErrorDelegate = (event:IOErrorEvent) => this.onLoadError(event);\r\n\t\tthis._onParseErrorDelegate = (event:ParserEvent) => this.onParseError(event);\r\n\t}\r\n\r\n\t/**\r\n\t * Returns an AssetLibraryBundle instance. If no key is given, returns the default bundle instance (which is\r\n\t * similar to using the AssetLibraryBundle as a singleton.) To keep several separated library bundles,\r\n\t * pass a string key to this method to define which bundle should be returned. This is\r\n\t * referred to as using the AssetLibrary as a multiton.\r\n\t *\r\n\t * @param key Defines which multiton instance should be returned.\r\n\t * @return An instance of the asset library\r\n\t */\r\n\tpublic static getInstance(key:string = 'default'):AssetLibraryBundle\r\n\t{\r\n\t\tif (!key)\r\n\t\t\tkey = 'default';\r\n\r\n\t\tif (!AssetLibraryBundle._iInstances.hasOwnProperty(key))\r\n\t\t\tAssetLibraryBundle._iInstances[key] = new AssetLibraryBundle();\r\n\r\n\t\treturn AssetLibraryBundle._iInstances[key];\r\n\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tpublic enableParser(parserClass:Object)\r\n\t{\r\n\t\tLoaderSession.enableParser(parserClass);\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tpublic enableParsers(parserClasses:Object[])\r\n\t{\r\n\t\tLoaderSession.enableParsers(parserClasses);\r\n\t}\r\n\r\n\t/**\r\n\t * Defines which strategy should be used for resolving naming conflicts, when two library\r\n\t * assets are given the same name. By default, <code>ConflictStrategy.APPEND_NUM_SUFFIX</code>\r\n\t * is used which means that a numeric suffix is appended to one of the assets. The\r\n\t * <code>conflictPrecedence</code> property defines which of the two conflicting assets will\r\n\t * be renamed.\r\n\t *\r\n\t * @see naming.ConflictStrategy\r\n\t * @see AssetLibrary.conflictPrecedence\r\n\t */\r\n\tpublic get conflictStrategy():ConflictStrategyBase\r\n\t{\r\n\t\treturn this._strategy;\r\n\t}\r\n\r\n\tpublic set conflictStrategy(val:ConflictStrategyBase)\r\n\t{\r\n\r\n\t\tif (!val)\r\n\t\t\tthrow new Error('namingStrategy must not be null. To ignore naming, use AssetLibrary.IGNORE');\r\n\r\n\t\tthis._strategy = val.create();\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Defines which asset should have precedence when resolving a naming conflict between\r\n\t * two assets of which one has just been renamed by the user or by a parser. By default\r\n\t * <code>ConflictPrecedence.FAVOR_NEW</code> is used, meaning that the newly renamed\r\n\t * asset will keep it's new name while the older asset gets renamed to not conflict.\r\n\t *\r\n\t * This property is ignored for conflict strategies that do not actually rename an\r\n\t * asset automatically, such as ConflictStrategy.IGNORE and ConflictStrategy.THROW_ERROR.\r\n\t *\r\n\t * @see away.library.ConflictPrecedence\r\n\t * @see away.library.ConflictStrategy\r\n\t */\r\n\tpublic get conflictPrecedence():string\r\n\t{\r\n\t\treturn this._strategyPreference;\r\n\t}\r\n\r\n\tpublic set conflictPrecedence(val:string)\r\n\t{\r\n\t\tthis._strategyPreference = val;\r\n\t}\r\n\r\n\t/**\r\n\t * Create an AssetLibraryIterator instance that can be used to iterate over the assets\r\n\t * in this asset library instance. The iterator can filter assets on asset type and/or\r\n\t * namespace. A \"null\" filter value means no filter of that type is used.\r\n\t *\r\n\t * @param assetTypeFilter Asset type to filter on (from the AssetType enum class.) Use\r\n\t * null to not filter on asset type.\r\n\t * @param namespaceFilter Namespace to filter on. Use null to not filter on namespace.\r\n\t * @param filterFunc Callback function to use when deciding whether an asset should be\r\n\t * included in the iteration or not. This needs to be a function that takes a single\r\n\t * parameter of type IAsset and returns a boolean where true means it should be included.\r\n\t *\r\n\t * @see away.library.AssetType\r\n\t */\r\n\tpublic createIterator(assetTypeFilter:string = null, namespaceFilter:string = null, filterFunc = null):AssetLibraryIterator\r\n\t{\r\n\t\treturn new AssetLibraryIterator(this._assets, assetTypeFilter, namespaceFilter, filterFunc);\r\n\t}\r\n\r\n\t/**\r\n\t * Loads a file and (optionally) all of its dependencies.\r\n\t *\r\n\t * @param req The URLRequest object containing the URL of the file to be loaded.\r\n\t * @param context An optional context object providing additional parameters for loading\r\n\t * @param ns An optional namespace string under which the file is to be loaded, allowing the differentiation of two resources with identical assets\r\n\t * @param parser An optional parser object for translating the loaded data into a usable resource. If not provided, LoaderSession will attempt to auto-detect the file type.\r\n\t * @return A handle to the retrieved resource.\r\n\t */\r\n\tpublic load(req:URLRequest, context:LoaderContext = null, ns:string = null, parser:ParserBase = null)\r\n\t{\r\n\t\tthis.getLoaderSession().load(req, context, ns, parser);\r\n\t}\r\n\r\n\t/**\r\n\t * Loads a resource from existing data in memory.\r\n\t *\r\n\t * @param data The data object containing all resource information.\r\n\t * @param context An optional context object providing additional parameters for loading\r\n\t * @param ns An optional namespace string under which the file is to be loaded, allowing the differentiation of two resources with identical assets\r\n\t * @param parser An optional parser object for translating the loaded data into a usable resource. If not provided, LoaderSession will attempt to auto-detect the file type.\r\n\t * @return A handle to the retrieved resource.\r\n\t */\r\n\tpublic loadData(data:any, context:LoaderContext = null, ns:string = null, parser:ParserBase = null)\r\n\t{\r\n\t\tthis.getLoaderSession().loadData(data, '', context, ns, parser);\r\n\t}\r\n\r\n\tpublic getLoaderSession():LoaderSession\r\n\t{\r\n\t\tvar loader:LoaderSession = new LoaderSession();\r\n\r\n\t\tthis._loaderSessions.push(loader);\r\n\r\n\t\tloader.addEventListener(LoaderEvent.RESOURCE_COMPLETE, this._onResourceCompleteDelegate);\r\n\t\tloader.addEventListener(AssetEvent.TEXTURE_SIZE_ERROR, this._onTextureSizeErrorDelegate);\r\n\t\tloader.addEventListener(AssetEvent.ASSET_COMPLETE, this._onAssetCompleteDelegate);\r\n\r\n\t\t// Error are handled separately (see documentation for addErrorHandler)\r\n\t\tloader._iAddErrorHandler(this._onLoadErrorDelegate);\r\n\t\tloader._iAddParseErrorHandler(this._onParseErrorDelegate);\r\n\r\n\t\treturn loader;\r\n\t}\r\n\t\r\n\tpublic disposeLoaderSession(loader:LoaderSession)\r\n\t{\r\n\t\tvar index:number = this._loaderSessions.indexOf(loader);\r\n\t\tthis._loaderSessions.splice(index, 1);\r\n\r\n\t\t// Add loader to a garbage array - for a collection sweep and kill\r\n\t\tthis._loaderSessionsGarbage.push(loader);\r\n\t\tthis._gcTimeoutIID = setTimeout(() => {this.loaderSessionGC()}, 100);\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tpublic getAsset(name:string, ns:string = null):IAsset\r\n\t{\r\n\t\tif (this._assetDictDirty)\r\n\t\t\tthis.rehashAssetDict();\r\n\r\n\t\tif (ns == null)\r\n\t\t\tns = AssetBase.DEFAULT_NAMESPACE;\r\n\r\n\t\tif (!this._assetDictionary.hasOwnProperty(ns))\r\n\t\t\treturn null;\r\n\r\n\t\treturn this._assetDictionary[ns][name];\r\n\r\n\t}\r\n\tpublic getAllAssets():Array<IAsset>\r\n\t{\r\n\t\treturn this._assets;\r\n\t}\r\n\t/**\r\n\t * Adds an asset to the asset library, first making sure that it's name is unique\r\n\t * using the method defined by the <code>conflictStrategy</code> and\r\n\t * <code>conflictPrecedence</code> properties.\r\n\t */\r\n\tpublic addAsset(asset:IAsset)\r\n\t{\r\n\t\tvar ns:string;\r\n\t\tvar old:IAsset;\r\n\r\n\t\t// Bail if asset has already been added.\r\n\t\tif (this._assets.indexOf(asset) >= 0)\r\n\t\t\treturn;\r\n\r\n\t\told = this.getAsset(asset.name, asset.assetNamespace);\r\n\t\tns = asset.assetNamespace || AssetBase.DEFAULT_NAMESPACE;\r\n\r\n\t\tif (old != null)\r\n\t\t\tthis._strategy.resolveConflict(asset, old, this._assetDictionary[ns], this._strategyPreference);\r\n\r\n\t\t//create unique-id (for now this is used in AwayBuilder only\r\n\t\t//asset.id = IDUtil.createUID();\r\n\r\n\t\t// Add it\r\n\t\tthis._assets.push(asset);\r\n\r\n\t\tif (!this._assetDictionary.hasOwnProperty(ns))\r\n\t\t\tthis._assetDictionary[ns] = new Object();\r\n\r\n\t\tthis._assetDictionary[ns][asset.name] = asset;\r\n\r\n\t\tasset.addEventListener(AssetEvent.ASSET_RENAME, this._onAssetRenameDelegate);\r\n\t\tasset.addEventListener(AssetEvent.ASSET_CONFLICT_RESOLVED, this._onAssetConflictResolvedDelegate);\r\n\t}\r\n\r\n\t/**\r\n\t * Removes an asset from the library, and optionally disposes that asset by calling\r\n\t * it's disposeAsset() method (which for most assets is implemented as a default\r\n\t * version of that type's dispose() method.\r\n\t *\r\n\t * @param asset The asset which should be removed from this library.\r\n\t * @param dispose Defines whether the assets should also be disposed.\r\n\t */\r\n\tpublic removeAsset(asset:IAsset, dispose:boolean = true)\r\n\t{\r\n\t\tvar idx:number;\r\n\r\n\t\tthis.removeAssetFromDict(asset);\r\n\r\n\t\tasset.removeEventListener(AssetEvent.ASSET_RENAME, this._onAssetRenameDelegate);\r\n\t\tasset.removeEventListener(AssetEvent.ASSET_CONFLICT_RESOLVED, this._onAssetConflictResolvedDelegate);\r\n\r\n\t\tidx = this._assets.indexOf(asset);\r\n\r\n\t\tif (idx >= 0)\r\n\t\t\tthis._assets.splice(idx, 1);\r\n\r\n\t\tif (dispose)\r\n\t\t\tasset.dispose();\r\n\t}\r\n\r\n\t/**\r\n\t * Removes an asset which is specified using name and namespace.\r\n\t *\r\n\t * @param name The name of the asset to be removed.\r\n\t * @param ns The namespace to which the desired asset belongs.\r\n\t * @param dispose Defines whether the assets should also be disposed.\r\n\t *\r\n\t * @see away.library.AssetLibrary.removeAsset()\r\n\t */\r\n\tpublic removeAssetByName(name:string, ns:string = null, dispose:boolean = true):IAsset\r\n\t{\r\n\t\tvar asset:IAsset = this.getAsset(name, ns);\r\n\r\n\t\tif (asset)\r\n\t\t\tthis.removeAsset(asset, dispose);\r\n\r\n\t\treturn asset;\r\n\t}\r\n\r\n\t/**\r\n\t * Removes all assets from the asset library, optionally disposing them as they\r\n\t * are removed.\r\n\t *\r\n\t * @param dispose Defines whether the assets should also be disposed.\r\n\t */\r\n\tpublic removeAllAssets(dispose:boolean = true)\r\n\t{\r\n\t\tif (dispose) {\r\n\t\t\tvar asset:IAsset;\r\n\t\t\tvar len:number = this._assets.length;\r\n\t\t\tfor (var c:number = 0; c < len; c++) {\r\n\t\t\t\tasset = this._assets[c];\r\n\t\t\t\tasset.dispose();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis._assets.length = 0;\r\n\t\tthis.rehashAssetDict();\r\n\t}\r\n\r\n\t/**\r\n\t * Removes all assets belonging to a particular namespace (null for default)\r\n\t * from the asset library, and optionall disposes them by calling their\r\n\t * disposeAsset() method.\r\n\t *\r\n\t * @param ns The namespace from which all assets should be removed.\r\n\t * @param dispose Defines whether the assets should also be disposed.\r\n\t *\r\n\t * @see away.library.AssetLibrary.removeAsset()\r\n\t */\r\n\tpublic removeNamespaceAssets(ns:string = null, dispose:boolean = true)\r\n\t{\r\n\t\tvar idx:number = 0;\r\n\t\tvar asset:IAsset;\r\n\t\tvar old_assets:IAsset[];\r\n\r\n\t\t// Empty the assets vector after having stored a copy of it.\r\n\t\t// The copy will be filled with all assets which weren't removed.\r\n\t\told_assets = this._assets.concat();\r\n\t\tthis._assets.length = 0;\r\n\r\n\t\tif (ns == null)\r\n\t\t\tns = AssetBase.DEFAULT_NAMESPACE;\r\n\r\n\t\tvar len:number = old_assets.length;\r\n\t\tfor (var d:number = 0; d < len; d++) {\r\n\t\t\tasset = old_assets[d];\r\n\r\n\t\t\t// Remove from dict if in the supplied namespace. If not,\r\n\t\t\t// transfer over to the new vector.\r\n\t\t\tif (asset.assetNamespace == ns) {\r\n\t\t\t\tif (dispose)\r\n\t\t\t\t\tasset.dispose();\r\n\r\n\t\t\t\t// Remove asset from dictionary, but don't try to auto-remove\r\n\t\t\t\t// the namespace, which will trigger an unnecessarily expensive\r\n\t\t\t\t// test that is not needed since we know that the namespace\r\n\t\t\t\t// will be empty when loop finishes.\r\n\t\t\t\tthis.removeAssetFromDict(asset, false);\r\n\t\t\t} else {\r\n\t\t\t\tthis._assets[idx++] = asset;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/*\r\n\t\t for each (asset in old_assets) {\r\n\t\t // Remove from dict if in the supplied namespace. If not,\r\n\t\t // transfer over to the new vector.\r\n\t\t if (asset.assetNamespace == ns) {\r\n\t\t if (dispose)\r\n\t\t asset.dispose();\r\n\r\n\t\t // Remove asset from dictionary, but don't try to auto-remove\r\n\t\t // the namespace, which will trigger an unnecessarily expensive\r\n\t\t // test that is not needed since we know that the namespace\r\n\t\t // will be empty when loop finishes.\r\n\t\t removeAssetFromDict(asset, false);\r\n\t\t } else\r\n\t\t _assets[idx++] = asset;\r\n\r\n\t\t }\r\n\t\t */\r\n\r\n\t\t// Remove empty namespace\r\n\t\tif (this._assetDictionary.hasOwnProperty(ns))\r\n\t\t\tdelete this._assetDictionary[ns];\r\n\t}\r\n\r\n\tprivate removeAssetFromDict(asset:IAsset, autoRemoveEmptyNamespace:boolean = true)\r\n\t{\r\n\t\tif (this._assetDictDirty)\r\n\t\t\tthis.rehashAssetDict();\r\n\r\n\t\tif (this._assetDictionary.hasOwnProperty(asset.assetNamespace)) {\r\n\t\t\tif (this._assetDictionary[asset.assetNamespace].hasOwnProperty(asset.name))\r\n\t\t\t\tdelete this._assetDictionary[asset.assetNamespace][asset.name];\r\n\r\n\t\t\tif (autoRemoveEmptyNamespace) {\r\n\r\n\t\t\t\tvar key:string;\r\n\t\t\t\tvar empty:boolean = true;\r\n\r\n\t\t\t\tfor (key in this._assetDictionary[asset.assetNamespace]) {\r\n\t\t\t\t\tempty = false;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (empty)\r\n\t\t\t\t\tdelete this._assetDictionary[asset.assetNamespace];\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tpublic stopAllLoaderSessions()\r\n\t{\r\n\t\tvar len:number = this._loaderSessions.length;\r\n\t\tfor (var i:number = 0; i < len; i++)\r\n\t\t\tthis.killloaderSession(this._loaderSessions[i]);\r\n\r\n\t\tthis._loaderSessions = new Array<LoaderSession>();\r\n\t}\r\n\r\n\tprivate rehashAssetDict()\r\n\t{\r\n\t\tvar asset:IAsset;\r\n\r\n\t\tthis._assetDictionary = {};\r\n\r\n\t\tvar len:number = this._assets.length;\r\n\t\tfor (var c:number = 0; c < len; c++) {\r\n\t\t\tasset = this._assets[c];\r\n\r\n\t\t\tif (!this._assetDictionary.hasOwnProperty(asset.assetNamespace))\r\n\t\t\t\tthis._assetDictionary[asset.assetNamespace] = {};\r\n\r\n\t\t\tthis._assetDictionary[asset.assetNamespace][asset.name] = asset;\r\n\r\n\t\t}\r\n\r\n\t\tthis._assetDictDirty = false;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Called when a an error occurs during loading.\r\n\t */\r\n\tprivate onLoadError(event:IOErrorEvent):boolean\r\n\t{\r\n\t\tif (this.hasEventListener(IOErrorEvent.IO_ERROR)) {\r\n\t\t\tthis.dispatchEvent(event);\r\n\t\t\treturn true;\r\n\t\t} else {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Called when a an error occurs during parsing.\r\n\t */\r\n\tprivate onParseError(event:ParserEvent):boolean\r\n\t{\r\n\t\tif (this.hasEventListener(ParserEvent.PARSE_ERROR)) {\r\n\t\t\tthis.dispatchEvent(event);\r\n\t\t\treturn true;\r\n\t\t} else {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\tprivate onAssetComplete(event:AssetEvent)\r\n\t{\r\n\t\t// Only add asset to library the first time.\r\n\t\tif (event.type == AssetEvent.ASSET_COMPLETE)\r\n\t\t\tthis.addAsset(event.asset);\r\n\r\n\t\tthis.dispatchEvent(event);\r\n\r\n\t}\r\n\r\n\tprivate onTextureSizeError(event:AssetEvent)\r\n\t{\r\n\t\tthis.dispatchEvent(event);\r\n\t}\r\n\r\n\t/**\r\n\t * Called when the resource and all of its dependencies was retrieved.\r\n\t */\r\n\tprivate onResourceComplete(event:LoaderEvent)\r\n\t{\r\n\t\tvar loader:LoaderSession = <LoaderSession> event.target;\r\n\r\n\t\tthis.dispatchEvent(event);\r\n\r\n\t\tthis.disposeLoaderSession(loader);\r\n\t}\r\n\r\n\tprivate loaderSessionGC():void\r\n\t{\r\n\t\tvar loader:LoaderSession;\r\n\r\n\t\twhile (this._loaderSessionsGarbage.length > 0) {\r\n\t\t\tloader = this._loaderSessionsGarbage.pop();\r\n\t\t\tthis.killloaderSession(loader);\r\n\t\t}\r\n\r\n\t\tclearTimeout(this._gcTimeoutIID);\r\n\t\tthis._gcTimeoutIID = null;\r\n\t}\r\n\r\n\tprivate killloaderSession(loader:LoaderSession)\r\n\t{\r\n\t\tloader.removeEventListener(LoaderEvent.RESOURCE_COMPLETE, this._onResourceCompleteDelegate);\r\n\t\tloader.removeEventListener(AssetEvent.TEXTURE_SIZE_ERROR, this._onTextureSizeErrorDelegate);\r\n\t\tloader.removeEventListener(AssetEvent.ASSET_COMPLETE, this._onAssetCompleteDelegate);\r\n\t\tloader.stop();\r\n\t}\r\n\r\n\t/**\r\n\t * Called when unespected error occurs\r\n\t */\r\n\t/*\r\n\t private onResourceError() : void\r\n\t {\r\n\t var msg:string = \"Unexpected parser error\";\r\n\t if(hasEventListener(LoaderEvent.DEPENDENCY_ERROR)){\r\n\t var re:LoaderEvent = new LoaderEvent(LoaderEvent.DEPENDENCY_ERROR, \"\");\r\n\t dispatchEvent(re);\r\n\t } else{\r\n\t throw new Error(msg);\r\n\t }\r\n\t }\r\n\t */\r\n\r\n\tprivate onAssetRename(event:AssetEvent)\r\n\t{\r\n\t\tvar asset:IAsset = <IAsset > event.target;// TODO: was ev.currentTarget - watch this var\r\n\t\tvar old:IAsset = this.getAsset(asset.assetNamespace, asset.name);\r\n\r\n\t\tif (old != null) {\r\n\t\t\tthis._strategy.resolveConflict(asset, old, this._assetDictionary[asset.assetNamespace], this._strategyPreference);\r\n\t\t} else {\r\n\t\t\tvar dict:Object = this._assetDictionary[event.asset.assetNamespace];\r\n\r\n\t\t\tif (dict == null)\r\n\t\t\t\treturn;\r\n\r\n\t\t\tdict[event.assetPrevName] = null;\r\n\t\t\tdict[event.asset.name] = event.asset;\r\n\t\t}\r\n\t}\r\n\r\n\tprivate onAssetConflictResolved(event:AssetEvent)\r\n\t{\r\n\t\tthis.dispatchEvent(event.clone());\r\n\t}\r\n}\r\n\r\nexport = AssetLibraryBundle;",
    "import IAsset\t\t\t\t\t= require(\"awayjs-core/lib/library/IAsset\");\r\n\r\nclass AssetLibraryIterator\r\n{\r\n\r\n\tprivate  _assets:Array<IAsset>;\r\n\tprivate _filtered:Array<IAsset>;\r\n\r\n\tprivate _idx:number;\r\n\r\n\tconstructor(assets:Array<IAsset>, assetTypeFilter:string, namespaceFilter:string, filterFunc)\r\n\t{\r\n\t\tthis._assets = assets;\r\n\t\tthis.filter(assetTypeFilter, namespaceFilter, filterFunc);\r\n\t}\r\n\r\n\tpublic get currentAsset():IAsset\r\n\t{\r\n\t\t// Return current, or null if no current\r\n\t\treturn ( this._idx < this._filtered.length )? this._filtered[ this._idx ] : null;\r\n\t}\r\n\r\n\tpublic get numAssets():number\r\n\t{\r\n\t\treturn this._filtered.length;\r\n\t}\r\n\r\n\tpublic next():IAsset\r\n\t{\r\n\t\tvar next:IAsset = null;\r\n\r\n\t\tif (this._idx < this._filtered.length)\r\n\t\t\tnext = this._filtered[this._idx];\r\n\r\n\t\tthis._idx++;\r\n\r\n\t\treturn next;\r\n\t}\r\n\r\n\tpublic reset()\r\n\t{\r\n\t\tthis._idx = 0;\r\n\t}\r\n\r\n\tpublic setIndex(index:number)\r\n\t{\r\n\t\tthis._idx = index;\r\n\t}\r\n\r\n\tprivate filter(assetTypeFilter:string, namespaceFilter:string, filterFunc)\r\n\t{\r\n\t\tif (assetTypeFilter || namespaceFilter) {\r\n\r\n\t\t\tvar idx:number;\r\n\t\t\tvar asset:IAsset;\r\n\r\n\r\n\t\t\tidx = 0;\r\n\t\t\tthis._filtered = new Array<IAsset>();//new Vector.<IAsset>;\r\n\r\n\t\t\tvar l:number = this._assets.length;\r\n\r\n\t\t\tfor (var c:number = 0; c < l; c++) {\r\n\r\n\t\t\t\tasset = <IAsset> this._assets[c];\r\n\r\n\t\t\t\t// Skip this assets if filtering on type and this is wrong type\r\n\t\t\t\tif (assetTypeFilter && asset.assetType != assetTypeFilter)\r\n\t\t\t\t\tcontinue;\r\n\r\n\t\t\t\t// Skip this asset if filtering on namespace and this is wrong namespace\r\n\t\t\t\tif (namespaceFilter && asset.assetNamespace != namespaceFilter)\r\n\t\t\t\t\tcontinue;\r\n\r\n\t\t\t\t// Skip this asset if a filter func has been provided and it returns false\r\n\t\t\t\tif (filterFunc != null && !filterFunc(asset))\r\n\t\t\t\t\tcontinue;\r\n\r\n\t\t\t\tthis._filtered[idx++] = asset;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t/*\r\n\t\t\t for each (asset in _assets) {\r\n\t\t\t // Skip this assets if filtering on type and this is wrong type\r\n\t\t\t if (assetTypeFilter && asset.assetType != assetTypeFilter)\r\n\t\t\t continue;\r\n\r\n\t\t\t // Skip this asset if filtering on namespace and this is wrong namespace\r\n\t\t\t if (namespaceFilter && asset.assetNamespace != namespaceFilter)\r\n\t\t\t continue;\r\n\r\n\t\t\t // Skip this asset if a filter func has been provided and it returns false\r\n\t\t\t if (filterFunc != null && !filterFunc(asset))\r\n\t\t\t continue;\r\n\r\n\t\t\t _filtered[idx++] = asset;\r\n\t\t\t }\r\n\t\t\t */\r\n\r\n\t\t} else {\r\n\t\t\tthis._filtered = this._assets;\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport = AssetLibraryIterator;",
    "import URLRequest\t\t\t\t= require(\"awayjs-core/lib/net/URLRequest\");\r\nimport AssetLibraryBundle\t\t= require(\"awayjs-core/lib/library/AssetLibraryBundle\");\r\nimport AssetLibraryIterator\t\t= require(\"awayjs-core/lib/library/AssetLibraryIterator\");\r\nimport LoaderSession\t\t\t= require(\"awayjs-core/lib/library/LoaderSession\");\r\nimport LoaderContext\t\t\t= require(\"awayjs-core/lib/library/LoaderContext\");\r\nimport ConflictStrategyBase\t\t= require(\"awayjs-core/lib/library/ConflictStrategyBase\");\r\nimport IAsset\t\t\t\t\t= require(\"awayjs-core/lib/library/IAsset\");\r\nimport ParserBase\t\t\t\t= require(\"awayjs-core/lib/parsers/ParserBase\");\r\n\r\n/**\r\n * AssetLibrary enforces a singleton pattern and is not intended to be instanced.\r\n * It's purpose is to allow access to the default library bundle through a set of static shortcut methods.\r\n * If you are interested in creating multiple library bundles, please use the <code>getBundle()</code> method.\r\n */\r\nclass AssetLibrary\r\n{\r\n\t/**\r\n\t * Creates a new <code>AssetLibrary</code> object.\r\n\t *\r\n\t */\r\n\tconstructor()\r\n\t{\r\n\t}\r\n\r\n\t//*/\r\n\t/**\r\n\t * Returns an AssetLibrary bundle instance. If no key is given, returns the default bundle (which is\r\n\t * similar to using the AssetLibraryBundle as a singleton). To keep several separated library bundles,\r\n\t * pass a string key to this method to define which bundle should be returned. This is\r\n\t * referred to as using the AssetLibraryBundle as a multiton.\r\n\t *\r\n\t * @param key Defines which multiton instance should be returned.\r\n\t * @return An instance of the asset library\r\n\t */\r\n\tpublic static getBundle(key:string = 'default'):AssetLibraryBundle\r\n\t{\r\n\t\treturn AssetLibraryBundle.getInstance(key);\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tpublic static enableParser(parserClass)\r\n\t{\r\n\t\tLoaderSession.enableParser(parserClass);\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tpublic static enableParsers(parserClasses:Array<Object>)\r\n\t{\r\n\t\tLoaderSession.enableParsers(parserClasses);\r\n\t}\r\n\r\n\t/**\r\n\t * Short-hand for conflictStrategy property on default asset library bundle.\r\n\t *\r\n\t * @see AssetLibraryBundle.conflictStrategy\r\n\t */\r\n\tpublic static get conflictStrategy():ConflictStrategyBase\r\n\t{\r\n\t\treturn AssetLibrary.getBundle().conflictStrategy;\r\n\t}\r\n\r\n\tpublic static set conflictStrategy(val:ConflictStrategyBase)\r\n\t{\r\n\t\tAssetLibrary.getBundle().conflictStrategy = val;\r\n\t}\r\n\r\n\t/**\r\n\t * Short-hand for conflictPrecedence property on default asset library bundle.\r\n\t *\r\n\t * @see AssetLibraryBundle.conflictPrecedence\r\n\t */\r\n\tpublic static get conflictPrecedence():string\r\n\t{\r\n\t\treturn AssetLibrary.getBundle().conflictPrecedence;\r\n\t}\r\n\r\n\tpublic static set conflictPrecedence(val:string)\r\n\t{\r\n\t\tAssetLibrary.getBundle().conflictPrecedence = val;\r\n\t}\r\n\r\n\t/**\r\n\t * Short-hand for createIterator() method on default asset library bundle.\r\n\t *\r\n\t * @see AssetLibraryBundle.createIterator()\r\n\t */\r\n\tpublic static createIterator(assetTypeFilter:string = null, namespaceFilter:string = null, filterFunc = null):AssetLibraryIterator\r\n\t{\r\n\t\treturn AssetLibrary.getBundle().createIterator(assetTypeFilter, namespaceFilter, filterFunc);\r\n\t}\r\n\r\n\t/**\r\n\t * Short-hand for load() method on default asset library bundle.\r\n\t *\r\n\t * @see AssetLibraryBundle.load()\r\n\t */\r\n\tpublic static load(req:URLRequest, context:LoaderContext = null, ns:string = null, parser:ParserBase = null)\r\n\t{\r\n\t\tAssetLibrary.getBundle().load(req, context, ns, parser);\r\n\t}\r\n\r\n\t/**\r\n\t * Short-hand for loadData() method on default asset library bundle.\r\n\t *\r\n\t * @see AssetLibraryBundle.loadData()\r\n\t */\r\n\tpublic static loadData(data:any, context:LoaderContext = null, ns:string = null, parser:ParserBase = null)\r\n\t{\r\n\t\tAssetLibrary.getBundle().loadData(data, context, ns, parser);\r\n\t}\r\n\r\n\tpublic static stopLoad()\r\n\t{\r\n\t\tAssetLibrary.getBundle().stopAllLoaderSessions();\r\n\t}\r\n\r\n\tpublic static getLoaderSession():LoaderSession\r\n\t{\r\n\t\treturn AssetLibrary.getBundle().getLoaderSession();\r\n\t}\r\n\r\n\t/**\r\n\t * Short-hand for getAsset() method on default asset library bundle.\r\n\t *\r\n\t * @see AssetLibraryBundle.getAsset()\r\n\t */\r\n\tpublic static getAsset(name:string, ns:string = null):IAsset\r\n\t{\r\n\t\treturn AssetLibrary.getBundle().getAsset(name, ns);\r\n\t}\r\n\r\n\t/**\r\n\t * Short-hand for getAsset() method on default asset library bundle.\r\n\t *\r\n\t * @see AssetLibraryBundle.getAsset()\r\n\t */\r\n\tpublic static getAllAssets():Array<IAsset>\r\n\t{\r\n\t\treturn AssetLibrary.getBundle().getAllAssets();\r\n\t}\r\n\r\n\t/**\r\n\t * Short-hand for addEventListener() method on default asset library bundle.\r\n\t */\r\n\tpublic static addEventListener(type:string, listener:Function)\r\n\t{\r\n\t\tAssetLibrary.getBundle().addEventListener(type, listener);\r\n\t}\r\n\r\n\t/**\r\n\t * Short-hand for removeEventListener() method on default asset library bundle.\r\n\t */\r\n\tpublic static removeEventListener(type:string, listener:Function)\r\n\t{\r\n\t\tAssetLibrary.getBundle().removeEventListener(type, listener);\r\n\t}\r\n\r\n\t/**\r\n\t * Short-hand for hasEventListener() method on default asset library bundle.\r\n\r\n\t public static hasEventListener(type:string):boolean\r\n\t {\r\n\t\treturn AssetLibrary.getBundle().hasEventListener(type);\r\n\t}\r\n\r\n\t public static willTrigger(type:string):boolean\r\n\t {\r\n\t\treturn getBundle().willTrigger(type);\r\n\t}\r\n\t */\r\n\r\n\t/**\r\n\t * Short-hand for addAsset() method on default asset library bundle.\r\n\t *\r\n\t * @see AssetLibraryBundle.addAsset()\r\n\t */\r\n\tpublic static addAsset(asset:IAsset)\r\n\t{\r\n\t\tAssetLibrary.getBundle().addAsset(asset);\r\n\t}\r\n\r\n\t/**\r\n\t * Short-hand for removeAsset() method on default asset library bundle.\r\n\t *\r\n\t * @param asset The asset which should be removed from the library.\r\n\t * @param dispose Defines whether the assets should also be disposed.\r\n\t *\r\n\t * @see AssetLibraryBundle.removeAsset()\r\n\t */\r\n\tpublic static removeAsset(asset:IAsset, dispose:boolean = true)\r\n\t{\r\n\t\tAssetLibrary.getBundle().removeAsset(asset, dispose);\r\n\t}\r\n\r\n\t/**\r\n\t * Short-hand for removeAssetByName() method on default asset library bundle.\r\n\t *\r\n\t * @param name The name of the asset to be removed.\r\n\t * @param ns The namespace to which the desired asset belongs.\r\n\t * @param dispose Defines whether the assets should also be disposed.\r\n\t *\r\n\t * @see AssetLibraryBundle.removeAssetByName()\r\n\t */\r\n\tpublic static removeAssetByName(name:string, ns:string = null, dispose:boolean = true):IAsset\r\n\t{\r\n\t\treturn AssetLibrary.getBundle().removeAssetByName(name, ns, dispose);\r\n\t}\r\n\r\n\t/**\r\n\t * Short-hand for removeAllAssets() method on default asset library bundle.\r\n\t *\r\n\t * @param dispose Defines whether the assets should also be disposed.\r\n\t *\r\n\t * @see AssetLibraryBundle.removeAllAssets()\r\n\t */\r\n\tpublic static removeAllAssets(dispose:boolean = true)\r\n\t{\r\n\t\tAssetLibrary.getBundle().removeAllAssets(dispose);\r\n\t}\r\n\r\n\t/**\r\n\t * Short-hand for removeNamespaceAssets() method on default asset library bundle.\r\n\t *\r\n\t * @see AssetLibraryBundle.removeNamespaceAssets()\r\n\t */\r\n\tpublic static removeNamespaceAssets(ns:string = null, dispose:boolean = true)\r\n\t{\r\n\t\tAssetLibrary.getBundle().removeNamespaceAssets(ns, dispose);\r\n\t}\r\n}\r\n\r\nexport = AssetLibrary;",
    "/**\r\n * Enumaration class for precedence when resolving naming conflicts in the library.\r\n *\r\n * @see away.library.AssetLibrary.conflictPrecedence\r\n * @see away.library.AssetLibrary.conflictStrategy\r\n * @see away.library.naming.ConflictStrategy\r\n */\r\nclass ConflictPrecedence\r\n{\r\n\t/**\r\n\t * Signals that in a conflict, the previous owner of the conflicting name\r\n\t * should be favored (and keep it's name) and that the newly renamed asset\r\n\t * is reverted to a non-conflicting name.\r\n\t */\r\n\tpublic static FAVOR_OLD:string = 'favorOld';\r\n\r\n\t/**\r\n\t * Signales that in a conflict, the newly renamed asset is favored (and keeps\r\n\t * it's newly defined name) and that the previous owner of that name gets\r\n\t * renamed to a non-conflicting name.\r\n\t */\r\n\tpublic static FAVOR_NEW:string = 'favorNew';\r\n}\r\n\r\nexport = ConflictPrecedence;",
    "import ConflictPrecedence\t\t= require(\"awayjs-core/lib/library/ConflictPrecedence\");\r\nimport IAsset\t\t\t\t\t= require(\"awayjs-core/lib/library/IAsset\");\r\nimport AbstractMethodError\t\t= require(\"awayjs-core/lib/errors/AbstractMethodError\");\r\nimport AssetEvent\t\t\t\t= require(\"awayjs-core/lib/events/AssetEvent\");\r\n\r\n/**\r\n * Abstract base class for naming conflict resolution classes. Extend this to create a\r\n * strategy class which the asset library can use to resolve asset naming conflicts, or\r\n * use one of the bundled concrete strategy classes:\r\n *\r\n * <ul>\r\n *   <li>IgnoreConflictStrategy (ConflictStrategy.IGNORE)</li>\r\n *   <li>ErrorConflictStrategy (ConflictStrategy.THROW_ERROR)</li>\r\n *   <li>NumSuffixConflictStrategy (ConflictStrategy.APPEND_NUM_SUFFIX)</li>\r\n * </ul>\r\n *\r\n * @see away.library.AssetLibrary.conflictStrategy\r\n * @see away.library.ConflictStrategy\r\n * @see away.library.IgnoreConflictStrategy\r\n * @see away.library.ErrorConflictStrategy\r\n * @see away.library.NumSuffixConflictStrategy\r\n */\r\nclass ConflictStrategyBase\r\n{\r\n\r\n\tconstructor()\r\n\t{\r\n\t}\r\n\r\n\t/**\r\n\t * Resolve a naming conflict between two assets. Must be implemented by concrete strategy\r\n\t * classes.\r\n\t */\r\n\tpublic resolveConflict(changedAsset:IAsset, oldAsset:IAsset, assetsDictionary:Object, precedence:string)\r\n\t{\r\n\t\tthrow new AbstractMethodError();\r\n\t}\r\n\r\n\t/**\r\n\t * Create instance of this conflict strategy. Used internally by the AssetLibrary to\r\n\t * make sure the same strategy instance is not used in all AssetLibrary instances, which\r\n\t * would break any state caching that happens inside the strategy class.\r\n\t */\r\n\tpublic create():ConflictStrategyBase\r\n\t{\r\n\t\tthrow new AbstractMethodError();\r\n\t}\r\n\r\n\t/**\r\n\t * Provided as a convenience method for all conflict strategy classes, as a way to finalize\r\n\t * the conflict resolution by applying the new names and dispatching the correct events.\r\n\t */\r\n\tpublic _pUpdateNames(ns:string, nonConflictingName:string, oldAsset:IAsset, newAsset:IAsset, assetsDictionary:Object, precedence:string)\r\n\t{\r\n\t\tvar loser_prev_name:string;\r\n\t\tvar winner:IAsset;\r\n\t\tvar loser:IAsset;\r\n\r\n\t\twinner = (precedence === ConflictPrecedence.FAVOR_NEW)? newAsset : oldAsset;\r\n\t\tloser = (precedence === ConflictPrecedence.FAVOR_NEW)? oldAsset : newAsset;\r\n\r\n\t\tloser_prev_name = loser.name;\r\n\r\n\t\tassetsDictionary[winner.name] = winner;\r\n\t\tassetsDictionary[nonConflictingName] = loser;\r\n\t\tloser.resetAssetPath(nonConflictingName, ns, false);\r\n\r\n\t\tloser.dispatchEvent(new AssetEvent(AssetEvent.ASSET_CONFLICT_RESOLVED, loser, loser_prev_name));\r\n\t}\r\n}\r\n\r\nexport = ConflictStrategyBase;",
    "import ConflictStrategyBase\t\t\t= require(\"awayjs-core/lib/library/ConflictStrategyBase\");\r\nimport ErrorConflictStrategy\t\t= require(\"awayjs-core/lib/library/ErrorConflictStrategy\");\r\nimport IgnoreConflictStrategy\t\t= require(\"awayjs-core/lib/library/IgnoreConflictStrategy\");\r\nimport NumSuffixConflictStrategy\t= require(\"awayjs-core/lib/library/NumSuffixConflictStrategy\");\r\n\r\n/**\r\n * Enumeration class for bundled conflict strategies. Set one of these values (or an\r\n * instance of a self-defined sub-class of ConflictStrategyBase) to the conflictStrategy\r\n * property on an AssetLibrary to define how that library resolves naming conflicts.\r\n *\r\n * The value of the <code>AssetLibrary.conflictPrecedence</code> property defines which\r\n * of the conflicting assets will get to keep it's name, and which is renamed (if any.)\r\n *\r\n * @see away.library.AssetLibrary.conflictStrategy\r\n * @see away.library.naming.ConflictStrategyBase\r\n */\r\nclass ConflictStrategy\r\n{\r\n\t/**\r\n\t * Specifies that in case of a naming conflict, one of the assets will be renamed and\r\n\t * a numeric suffix appended to the base name.\r\n\t */\r\n\tpublic static APPEND_NUM_SUFFIX:ConflictStrategyBase = new NumSuffixConflictStrategy();\r\n\r\n\t/**\r\n\t * Specifies that naming conflicts should be ignored. This is not recommended in most\r\n\t * cases, unless it can be 100% guaranteed that the application does not cause naming\r\n\t * conflicts in the library (i.e. when an app-level system is in place to prevent this.)\r\n\t */\r\n\tpublic static IGNORE:ConflictStrategyBase = new IgnoreConflictStrategy();\r\n\r\n\t/**\r\n\t * Specifies that an error should be thrown if a naming conflict is discovered. Use this\r\n\t * to be 100% sure that naming conflicts never occur unnoticed, and when it's undesirable\r\n\t * to have the library automatically rename assets to avoid such conflicts.\r\n\t */\r\n\tpublic static THROW_ERROR:ConflictStrategyBase = new ErrorConflictStrategy();\r\n\r\n\tconstructor(include?:ConflictStrategyBase)\r\n\t{\r\n\t\t//TODO: find out why typescript d.ts files do not include this class\r\n\t}\r\n}\r\n\r\nexport = ConflictStrategy;",
    "import ConflictStrategyBase\t\t= require(\"awayjs-core/lib/library/ConflictStrategyBase\");\r\nimport IAsset\t\t\t\t\t= require(\"awayjs-core/lib/library/IAsset\");\r\nimport Error\t\t\t\t\t= require(\"awayjs-core/lib/errors/Error\");\r\n\r\nclass ErrorConflictStrategy extends ConflictStrategyBase\r\n{\r\n\tconstructor()\r\n\t{\r\n\t\tsuper();\r\n\t}\r\n\r\n\tpublic resolveConflict(changedAsset:IAsset, oldAsset:IAsset, assetsDictionary:Object, precedence:string)\r\n\t{\r\n\t\tthrow new Error('Asset name collision while AssetLibrary.namingStrategy set to AssetLibrary.THROW_ERROR. Asset path: ' + changedAsset.assetFullPath);\r\n\t}\r\n\r\n\tpublic create():ConflictStrategyBase\r\n\t{\r\n\t\treturn new ErrorConflictStrategy();\r\n\t}\r\n}\r\n\r\nexport = ErrorConflictStrategy;",
    "class IDUtil\r\n{\r\n\t/**\r\n\t *  @private\r\n\t *  Char codes for 0123456789ABCDEF\r\n\t */\r\n\tprivate static ALPHA_CHAR_CODES = [48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 65, 66, 67, 68, 69, 70];\r\n\r\n\t/**\r\n\t *  Generates a UID (unique identifier) based on ActionScript's\r\n\t *  pseudo-random number generator and the current time.\r\n\t *\r\n\t *  <p>The UID has the form\r\n\t *  <code>\"XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\"</code>\r\n\t *  where X is a hexadecimal digit (0-9, A-F).</p>\r\n\t *\r\n\t *  <p>This UID will not be truly globally unique; but it is the best\r\n\t *  we can do without player support for UID generation.</p>\r\n\t *\r\n\t *  @return The newly-generated UID.\r\n\t *\r\n\t *  @langversion 3.0\r\n\t *  @playerversion Flash 9\r\n\t *  @playerversion AIR 1.1\r\n\t *  @productversion Flex 3\r\n\t */\r\n\tpublic static createUID():string\r\n\t{\r\n\t\tvar uid = new Array(36);\r\n\t\tvar index:number = 0;\r\n\r\n\t\tvar i:number;\r\n\t\tvar j:number;\r\n\r\n\t\tfor (i = 0; i < 8; i++)\r\n\t\t\tuid[index++] = IDUtil.ALPHA_CHAR_CODES[Math.floor(Math.random()*16)];\r\n\r\n\t\tfor (i = 0; i < 3; i++) {\r\n\t\t\tuid[index++] = 45; // charCode for \"-\"\r\n\r\n\t\t\tfor (j = 0; j < 4; j++)\r\n\t\t\t\tuid[index++] = IDUtil.ALPHA_CHAR_CODES[Math.floor(Math.random()*16)];\r\n\t\t}\r\n\r\n\t\tuid[index++] = 45; // charCode for \"-\"\r\n\r\n\t\tvar time:number = new Date().getTime();\r\n\t\t// Note: time is the number of milliseconds since 1970,\r\n\t\t// which is currently more than one trillion.\r\n\t\t// We use the low 8 hex digits of this number in the UID.\r\n\t\t// Just in case the system clock has been reset to\r\n\t\t// Jan 1-4, 1970 (in which case this number could have only\r\n\t\t// 1-7 hex digits), we pad on the left with 7 zeros\r\n\t\t// before taking the low digits.\r\n\t\tvar timeString:string = (\"0000000\" + time.toString(16).toUpperCase()).substr(-8);\r\n\r\n\t\tfor (i = 0; i < 8; i++)\r\n\t\t\tuid[index++] = timeString.charCodeAt(i);\r\n\r\n\t\tfor (i = 0; i < 4; i++)\r\n\t\t\tuid[index++] = IDUtil.ALPHA_CHAR_CODES[Math.floor(Math.random()*16)];\r\n\r\n\t\treturn String.fromCharCode.apply(null, uid);\r\n\t}\r\n\r\n\t/**\r\n\t * Returns the decimal representation of a hex digit.\r\n\t * @private\r\n\r\n\t private static getDigit(hex:string):number\r\n\t {\r\n\t\tswitch (hex) {\r\n\t\t\tcase \"A\":\r\n\t\t\tcase \"a\":\r\n\t\t\t\treturn 10;\r\n\t\t\tcase \"B\":\r\n\t\t\tcase \"b\":\r\n\t\t\t\treturn 11;\r\n\t\t\tcase \"C\":\r\n\t\t\tcase \"c\":\r\n\t\t\t\treturn 12;\r\n\t\t\tcase \"D\":\r\n\t\t\tcase \"d\":\r\n\t\t\t\treturn 13;\r\n\t\t\tcase \"E\":\r\n\t\t\tcase \"e\":\r\n\t\t\t\treturn 14;\r\n\t\t\tcase \"F\":\r\n\t\t\tcase \"f\":\r\n\t\t\t\treturn 15;\r\n\t\t\tdefault:\r\n\t\t\t\treturn new uint(hex);\r\n\t\t}\r\n\t}\r\n\t */\r\n\r\n}\r\n\r\nexport = IDUtil;",
    "import ConflictStrategyBase\t\t= require(\"awayjs-core/lib/library/ConflictStrategyBase\");\r\nimport IAsset\t\t\t\t\t= require(\"awayjs-core/lib/library/IAsset\");\r\n\r\nclass IgnoreConflictStrategy extends ConflictStrategyBase\r\n{\r\n\tconstructor()\r\n\t{\r\n\t\tsuper();\r\n\t}\r\n\r\n\tpublic resolveConflict(changedAsset:IAsset, oldAsset:IAsset, assetsDictionary:Object, precedence:string)\r\n\t{\r\n\t\t// Do nothing, ignore the fact that there is a conflict.\r\n\t\treturn;\r\n\t}\r\n\r\n\tpublic create():ConflictStrategyBase\r\n\t{\r\n\t\treturn new IgnoreConflictStrategy();\r\n\t}\r\n}\r\n\r\nexport = IgnoreConflictStrategy;",
    "class LoaderContext\r\n{\r\n\tpublic static UNDEFINED:number = 0;\r\n\tpublic static SINGLEPASS_MATERIALS:number = 1;\r\n\tpublic static MULTIPASS_MATERIALS:number = 2;\r\n\r\n\tprivate _includeDependencies:boolean;\r\n\tprivate _dependencyBaseUrl:string;\r\n\tprivate _embeddedDataByUrl:Object;\r\n\tprivate _remappedUrls:Object;\r\n\tprivate _materialMode:number;\r\n\r\n\tprivate _overrideAbsPath:boolean;\r\n\tprivate _overrideFullUrls:boolean;\r\n\r\n\t/**\r\n\t * LoaderContext provides configuration for the LoaderSession load() and parse() operations.\r\n\t * Use it to configure how (and if) dependencies are loaded, or to map dependency URLs to\r\n\t * embedded data.\r\n\t *\r\n\t * @see away.loading.LoaderSession\r\n\t */\r\n\tconstructor(includeDependencies:boolean = true, dependencyBaseUrl:string = null)\r\n\t{\r\n\t\tthis._includeDependencies = includeDependencies;\r\n\t\tthis._dependencyBaseUrl = dependencyBaseUrl || '';\r\n\t\tthis._embeddedDataByUrl = {};\r\n\t\tthis._remappedUrls = {};\r\n\t\tthis._materialMode = LoaderContext.UNDEFINED;\r\n\t}\r\n\r\n\t/**\r\n\t * Defines whether dependencies (all files except the one at the URL given to the load() or\r\n\t * parseData() operations) should be automatically loaded. Defaults to true.\r\n\t */\r\n\tpublic get includeDependencies():boolean\r\n\t{\r\n\t\treturn this._includeDependencies;\r\n\t}\r\n\r\n\tpublic set includeDependencies(val:boolean)\r\n\t{\r\n\t\tthis._includeDependencies = val;\r\n\t}\r\n\r\n\t/**\r\n\t * MaterialMode defines, if the Parser should create SinglePass or MultiPass Materials\r\n\t * Options:\r\n\t * 0 (Default / undefined) - All Parsers will create SinglePassMaterials, but the AWD2.1parser will create Materials as they are defined in the file\r\n\t * 1 (Force SinglePass) - All Parsers create SinglePassMaterials\r\n\t * 2 (Force MultiPass) - All Parsers will create MultiPassMaterials\r\n\t *\r\n\t */\r\n\tpublic get materialMode():number\r\n\t{\r\n\t\treturn this._materialMode;\r\n\t}\r\n\r\n\tpublic set materialMode(materialMode:number)\r\n\t{\r\n\t\tthis._materialMode = materialMode;\r\n\t}\r\n\r\n\t/**\r\n\t * A base URL that will be prepended to all relative dependency URLs found in a loaded resource.\r\n\t * Absolute paths will not be affected by the value of this property.\r\n\t */\r\n\tpublic get dependencyBaseUrl():string\r\n\t{\r\n\t\treturn this._dependencyBaseUrl;\r\n\t}\r\n\r\n\tpublic set dependencyBaseUrl(val:string)\r\n\t{\r\n\t\tthis._dependencyBaseUrl = val;\r\n\t}\r\n\r\n\t/**\r\n\t * Defines whether absolute paths (defined as paths that begin with a \"/\") should be overridden\r\n\t * with the dependencyBaseUrl defined in this context. If this is true, and the base path is\r\n\t * \"base\", /path/to/asset.jpg will be resolved as base/path/to/asset.jpg.\r\n\t */\r\n\tpublic get overrideAbsolutePaths():boolean\r\n\t{\r\n\t\treturn this._overrideAbsPath;\r\n\t}\r\n\r\n\tpublic set overrideAbsolutePaths(val:boolean)\r\n\t{\r\n\t\tthis._overrideAbsPath = val;\r\n\t}\r\n\r\n\t/**\r\n\t * Defines whether \"full\" URLs (defined as a URL that includes a scheme, e.g. http://) should be\r\n\t * overridden with the dependencyBaseUrl defined in this context. If this is true, and the base\r\n\t * path is \"base\", http://example.com/path/to/asset.jpg will be resolved as base/path/to/asset.jpg.\r\n\t */\r\n\tpublic get overrideFullURLs():boolean\r\n\t{\r\n\t\treturn this._overrideFullUrls;\r\n\t}\r\n\r\n\tpublic set overrideFullURLs(val:boolean)\r\n\t{\r\n\t\tthis._overrideFullUrls = val;\r\n\t}\r\n\r\n\t/**\r\n\t * Map a URL to another URL, so that files that are referred to by the original URL will instead\r\n\t * be loaded from the new URL. Use this when your file structure does not match the one that is\r\n\t * expected by the loaded file.\r\n\t *\r\n\t * @param originalUrl The original URL which is referenced in the loaded resource.\r\n\t * @param newUrl The URL from which away.should load the resource instead.\r\n\t *\r\n\t * @see mapUrlToData()\r\n\t */\r\n\tpublic mapUrl(originalUrl:string, newUrl:string)\r\n\t{\r\n\t\tthis._remappedUrls[originalUrl] = newUrl;\r\n\t}\r\n\r\n\t/**\r\n\t * Map a URL to embedded data, so that instead of trying to load a dependency from the URL at\r\n\t * which it's referenced, the dependency data will be retrieved straight from the memory instead.\r\n\t *\r\n\t * @param originalUrl The original URL which is referenced in the loaded resource.\r\n\t * @param data The embedded data. Can be ByteArray or a class which can be used to create a bytearray.\r\n\t */\r\n\tpublic mapUrlToData(originalUrl:string, data:any)\r\n\t{\r\n\t\tthis._embeddedDataByUrl[originalUrl] = data;\r\n\t}\r\n\r\n\t/**\r\n\t * @private\r\n\t * Defines whether embedded data has been mapped to a particular URL.\r\n\t */\r\n\tpublic _iHasDataForUrl(url:string):boolean\r\n\t{\r\n\t\treturn this._embeddedDataByUrl.hasOwnProperty(url);\r\n\t}\r\n\r\n\t/**\r\n\t * @private\r\n\t * Returns embedded data for a particular URL.\r\n\t */\r\n\tpublic _iGetDataForUrl(url:string):any\r\n\t{\r\n\t\treturn this._embeddedDataByUrl[url];\r\n\t}\r\n\r\n\t/**\r\n\t * @private\r\n\t * Defines whether a replacement URL has been mapped to a particular URL.\r\n\t */\r\n\tpublic _iHasMappingForUrl(url:string):boolean\r\n\t{\r\n\t\treturn this._remappedUrls.hasOwnProperty(url);\r\n\t}\r\n\r\n\t/**\r\n\t * @private\r\n\t * Returns new (replacement) URL for a particular original URL.\r\n\t */\r\n\tpublic _iGetRemappedUrl(originalUrl:string):string\r\n\t{\r\n\t\treturn this._remappedUrls[originalUrl];\r\n\t}\r\n}\r\n\r\nexport = LoaderContext;",
    "import LoaderContext\t\t\t= require(\"awayjs-core/lib/library/LoaderContext\");\r\nimport URLLoader\t\t\t\t= require(\"awayjs-core/lib/net/URLLoader\");\r\nimport URLLoaderDataFormat\t\t= require(\"awayjs-core/lib/net/URLLoaderDataFormat\");\r\nimport URLRequest\t\t\t\t= require(\"awayjs-core/lib/net/URLRequest\");\r\nimport Error\t\t\t\t\t= require(\"awayjs-core/lib/errors/Error\");\r\nimport AssetEvent\t\t\t\t= require(\"awayjs-core/lib/events/AssetEvent\");\r\nimport Event\t\t\t\t\t= require(\"awayjs-core/lib/events/Event\");\r\nimport EventDispatcher\t\t\t= require(\"awayjs-core/lib/events/EventDispatcher\");\r\nimport IOErrorEvent\t\t\t\t= require(\"awayjs-core/lib/events/IOErrorEvent\");\r\nimport LoaderEvent\t\t\t\t= require(\"awayjs-core/lib/events/LoaderEvent\");\r\nimport ParserEvent\t\t\t\t= require(\"awayjs-core/lib/events/ParserEvent\");\r\nimport Image2DParser\t\t\t= require(\"awayjs-core/lib/parsers/Image2DParser\");\r\nimport ImageCubeParser\t\t\t= require(\"awayjs-core/lib/parsers/ImageCubeParser\");\r\nimport TextureAtlasParser\t\t= require(\"awayjs-core/lib/parsers/TextureAtlasParser\");\r\nimport ParserBase\t\t\t\t= require(\"awayjs-core/lib/parsers/ParserBase\");\r\nimport ResourceDependency\t\t= require(\"awayjs-core/lib/parsers/ResourceDependency\");\r\nimport WaveAudioParser\t\t\t= require(\"awayjs-core/lib/parsers/WaveAudioParser\");\r\n\r\n\r\n\r\n/**\r\n * Dispatched when any asset finishes parsing. Also see specific events for each\r\n * individual asset type (meshes, materials et c.)\r\n *\r\n * @eventType away.events.AssetEvent\r\n */\r\n//[Event(name=\"assetComplete\", type=\"away3d.events.AssetEvent\")]\r\n\r\n\r\n/**\r\n * Dispatched when a full resource (including dependencies) finishes loading.\r\n *\r\n * @eventType away.events.LoaderEvent\r\n */\r\n//[Event(name=\"resourceComplete\", type=\"away3d.events.LoaderEvent\")]\r\n\r\n\r\n/**\r\n * Dispatched when a single dependency (which may be the main file of a resource)\r\n * finishes loading.\r\n *\r\n * @eventType away.events.LoaderEvent\r\n */\r\n//[Event(name=\"dependencyComplete\", type=\"away3d.events.LoaderEvent\")]\r\n\r\n\r\n/**\r\n * Dispatched when an error occurs during loading. I\r\n *\r\n * @eventType away.events.LoaderEvent\r\n */\r\n//[Event(name=\"loadError\", type=\"away3d.events.LoaderEvent\")]\r\n\r\n\r\n/**\r\n * Dispatched when an error occurs during parsing.\r\n *\r\n * @eventType away.events.ParserEvent\r\n */\r\n//[Event(name=\"parseError\", type=\"away3d.events.ParserEvent\")]\r\n\r\n/**\r\n * Dispatched when an image asset dimensions are not a power of 2\r\n *\r\n * @eventType away.events.AssetEvent\r\n */\r\n//[Event(name=\"textureSizeError\", type=\"away3d.events.AssetEvent\")]\r\n\r\n/**\r\n * LoaderSession can load any file format that away.supports (or for which a third-party parser\r\n * has been plugged in) and it's dependencies. Events are dispatched when assets are encountered\r\n * and for when the resource (or it's dependencies) have been loaded.\r\n *\r\n * The LoaderSession will not make assets available in any other way than through the dispatched\r\n * events. To store assets and make them available at any point from any module in an application,\r\n * use the AssetLibrary to load and manage assets.\r\n *\r\n * @see away.library.AssetLibrary\r\n */\r\nclass LoaderSession extends EventDispatcher\r\n{\r\n\tprivate _context:LoaderContext;\r\n\tprivate _uri:string;\r\n\tprivate _materialMode:number;\r\n\r\n\tprivate _errorHandlers:Array<Function>;\r\n\tprivate _parseErrorHandlers:Array<Function>;\r\n\r\n\tprivate _stack:Array<ResourceDependency>;\r\n\tprivate _baseDependency:ResourceDependency;\r\n\tprivate _currentDependency:ResourceDependency;\r\n\tprivate _namespace:string;\r\n\r\n\tprivate _onReadyForDependenciesDelegate:(event:ParserEvent) => void;\r\n\tprivate _onParseCompleteDelegate:(event:ParserEvent) => void;\r\n\tprivate _onParseErrorDelegate:(event:ParserEvent) => void;\r\n\tprivate _onLoadCompleteDelegate:(event:Event) => void;\r\n\tprivate _onLoadErrorDelegate:(event:IOErrorEvent) => void;\r\n\tprivate _onTextureSizeErrorDelegate:(event:AssetEvent) => void;\r\n\tprivate _onAssetCompleteDelegate:(event:AssetEvent) => void;\r\n\r\n\t// Image parser only parser that is added by default, to save file size.\r\n\tprivate static _parsers:Array<any> = new Array<any>(Image2DParser, ImageCubeParser, TextureAtlasParser, WaveAudioParser);\r\n\r\n\t/**\r\n\t * Enables a specific parser.\r\n\t * When no specific parser is set for a loading/parsing opperation,\r\n\t * loader3d can autoselect the correct parser to use.\r\n\t * A parser must have been enabled, to be considered when autoselecting the parser.\r\n\t *\r\n\t * @param parser The parser class to enable.\r\n\t *\r\n\t * @see away.parsers.Parsers\r\n\t */\r\n\tpublic static enableParser(parser)\r\n\t{\r\n\t\tif (LoaderSession._parsers.indexOf(parser) < 0)\r\n\t\t\tLoaderSession._parsers.push(parser);\r\n\t}\r\n\r\n\t/**\r\n\t * Enables a list of parsers.\r\n\t * When no specific parser is set for a loading/parsing opperation,\r\n\t * LoaderSession can autoselect the correct parser to use.\r\n\t * A parser must have been enabled, to be considered when autoselecting the parser.\r\n\t *\r\n\t * @param parsers A Vector of parser classes to enable.\r\n\t * @see away.parsers.Parsers\r\n\t */\r\n\tpublic static enableParsers(parsers:Array<Object>)\r\n\t{\r\n\t\tfor (var c:number = 0; c < parsers.length; c++)\r\n\t\t\tLoaderSession.enableParser(parsers[ c ]);\r\n\t}\r\n\r\n\t/**\r\n\t * Returns the base dependency of the loader\r\n\t */\r\n\tpublic get baseDependency():ResourceDependency\r\n\t{\r\n\t\treturn this._baseDependency;\r\n\t}\r\n\r\n\t/**\r\n\t * Create a new ResourceLoadSession object.\r\n\t */\r\n\tconstructor(materialMode:number = 0)\r\n\t{\r\n\t\tsuper();\r\n\r\n\t\tthis._materialMode = materialMode;\r\n\r\n\t\tthis._stack = new Array<ResourceDependency>();\r\n\t\tthis._errorHandlers = new Array<Function>();\r\n\t\tthis._parseErrorHandlers = new Array<Function>();\r\n\r\n\t\tthis._onReadyForDependenciesDelegate = (event:ParserEvent) => this.onReadyForDependencies(event);\r\n\t\tthis._onParseCompleteDelegate = (event:ParserEvent) => this.onParseComplete(event);\r\n\t\tthis._onParseErrorDelegate = (event:ParserEvent) => this.onParseError(event);\r\n\t\tthis._onLoadCompleteDelegate = (event:Event) => this.onLoadComplete(event);\r\n\t\tthis._onLoadErrorDelegate = (event:IOErrorEvent) => this.onLoadError(event);\r\n\t\tthis._onTextureSizeErrorDelegate = (event:AssetEvent) => this.onTextureSizeError(event);\r\n\t\tthis._onAssetCompleteDelegate = (event:AssetEvent) => this.onAssetComplete(event);\r\n\t}\r\n\r\n\t/**\r\n\t * Loads a file and (optionally) all of its dependencies.\r\n\t *\r\n\t * @param req The URLRequest object containing the URL of the file to be loaded.\r\n\t * @param context An optional context object providing additional parameters for loading\r\n\t * @param ns An optional namespace string under which the file is to be loaded, allowing the differentiation of two resources with identical assets\r\n\t * @param parser An optional parser object for translating the loaded data into a usable resource. If not provided, LoaderSession will attempt to auto-detect the file type.\r\n\t */\r\n\tpublic load(req:URLRequest, context:LoaderContext = null, ns:string = null, parser:ParserBase = null)\r\n\t{\r\n\t\tthis._uri = req.url = req.url.replace(/\\\\/g, \"/\");\r\n\t\tthis._context = context;\r\n\t\tthis._namespace = ns;\r\n\r\n\t\tthis._baseDependency = new ResourceDependency('', req, null, parser, null);\r\n\t\tthis.retrieveDependency(this._baseDependency);\r\n\t}\r\n\r\n\t/**\r\n\t * Loads a resource from already loaded data.\r\n\t *\r\n\t * @param data The data object containing all resource information.\r\n\t * @param context An optional context object providing additional parameters for loading\r\n\t * @param ns An optional namespace string under which the file is to be loaded, allowing the differentiation of two resources with identical assets\r\n\t * @param parser An optional parser object for translating the loaded data into a usable resource. If not provided, LoaderSession will attempt to auto-detect the file type.\r\n\t */\r\n\tpublic loadData(data:any, id:string, context:LoaderContext = null, ns:string = null, parser:ParserBase = null)\r\n\t{\r\n\t\tthis._uri = id;\r\n\t\tthis._context = context;\r\n\t\tthis._namespace = ns;\r\n\r\n\t\tthis._baseDependency = new ResourceDependency(id, null, data, parser, null);\r\n\t\tthis.retrieveDependency(this._baseDependency);\r\n\t}\r\n\r\n\t/**\r\n\t * Recursively retrieves the next to-be-loaded and parsed dependency on the stack, or pops the list off the\r\n\t * stack when complete and continues on the top set.\r\n\t * @param parser The parser that will translate the data into a usable resource.\r\n\t */\r\n\tprivate retrieveNext(parser:ParserBase = null)\r\n\t{\r\n\t\tif (this._currentDependency.dependencies.length) {\r\n\r\n\t\t\tvar next:ResourceDependency = this._currentDependency.dependencies.pop();\r\n\r\n\t\t\tthis._stack.push(this._currentDependency);\r\n\t\t\tthis.retrieveDependency(next);\r\n\r\n\t\t} else if (this._currentDependency.parser && this._currentDependency.parser.parsingPaused) {\r\n\r\n\t\t\tthis._currentDependency.parser._iResumeParsing();\r\n\t\t\tthis._stack.pop();\r\n\r\n\t\t} else if (this._stack.length) {\r\n\r\n\t\t\tvar prev:ResourceDependency = this._currentDependency;\r\n\r\n\t\t\tthis._currentDependency = this._stack.pop();\r\n\r\n\t\t\tif (prev._iSuccess)\r\n\t\t\t\tprev.resolve();\r\n\r\n\t\t\tthis.retrieveNext(parser);\r\n\r\n\t\t} else {\r\n\t\t\tthis.dispatchEvent(new LoaderEvent(LoaderEvent.RESOURCE_COMPLETE, this._uri, this._baseDependency.parser.content, this._baseDependency.assets));\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Retrieves a single dependency.\r\n\t * @param parser The parser that will translate the data into a usable resource.\r\n\t */\r\n\tprivate retrieveDependency(dependency:ResourceDependency)\r\n\t{\r\n\t\tvar data:any;\r\n\r\n\t\tif (this._context && this._context.materialMode != 0)\r\n\t\t\tthis._materialMode = this._context.materialMode;\r\n\r\n\t\tthis._currentDependency = dependency;\r\n\r\n\t\tdependency._iLoader = new URLLoader();\r\n\r\n\t\tthis.addEventListeners(dependency._iLoader);\r\n\r\n\t\t// Get already loaded (or mapped) data if available\r\n\t\tdata = dependency.data;\r\n\r\n\t\tif (this._context && dependency.request && this._context._iHasDataForUrl(dependency.request.url))\r\n\t\t\tdata = this._context._iGetDataForUrl(dependency.request.url);\r\n\r\n\t\tif (data) {\r\n\t\t\tif (data.constructor === Function)\r\n\t\t\t\tdata = new data();\r\n\r\n\t\t\tdependency._iSetData(data);\r\n\r\n\t\t\tif (dependency.retrieveAsRawData) {\r\n\t\t\t\t// No need to parse. The parent parser is expecting this\r\n\t\t\t\t// to be raw data so it can be passed directly.\r\n\t\t\t\tdependency.resolve();\r\n\r\n\t\t\t\t// Move on to next dependency\r\n\t\t\t\tthis.retrieveNext();\r\n\r\n\t\t\t} else {\r\n\t\t\t\tthis.parseDependency(dependency);\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\t\t\t// Resolve URL and start loading\r\n\t\t\tdependency.request.url = this.resolveDependencyUrl(dependency);\r\n\r\n\t\t\tif (dependency.retrieveAsRawData) {\r\n\t\t\t\t// Always use binary for raw data loading\r\n\t\t\t\tdependency._iLoader.dataFormat = URLLoaderDataFormat.BINARY;\r\n\t\t\t} else {\r\n\r\n\t\t\t\tif (!dependency.parser)\r\n\t\t\t\t\tdependency._iSetParser(this.getParserFromSuffix(dependency.request.url));\r\n\r\n\t\t\t\tif (dependency.parser) {\r\n\t\t\t\t\tdependency._iLoader.dataFormat = dependency.parser.dataFormat;\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// Always use BINARY for unknown file formats. The thorough\r\n\t\t\t\t\t// file type check will determine format after load, and if\r\n\t\t\t\t\t// binary, a text load will have broken the file data.\r\n\t\t\t\t\tdependency._iLoader.dataFormat = URLLoaderDataFormat.BINARY;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tdependency._iLoader.load(dependency.request);\r\n\t\t}\r\n\t}\r\n\r\n\tprivate joinUrl(base:string, end:string):string\r\n\t{\r\n\t\tif (end.charAt(0) == '/' || end.charAt(0) == '\\\\')\r\n\t\t\tend = end.substr(1);\r\n\r\n\t\tif (end.charAt(0) == '.')\r\n\t\t\tend = end.substr(2);\r\n\r\n\t\tif (base.length == 0)\r\n\t\t\treturn end;\r\n\r\n\t\tif (base.charAt(base.length - 1) == '/' || base.charAt(base.length - 1) == '\\\\')\r\n\t\t\tbase = base.substr(0, base.length - 1);\r\n\r\n\t\treturn base.concat('/', end);\r\n\r\n\t}\r\n\r\n\tprivate resolveDependencyUrl(dependency:ResourceDependency):string\r\n\t{\r\n\t\tvar scheme_re:RegExp;\r\n\t\tvar base:string;\r\n\t\tvar url:string = dependency.request.url;\r\n\r\n\t\t// Has the user re-mapped this URL?\r\n\t\tif (this._context && this._context._iHasMappingForUrl(url))\r\n\t\t\treturn this._context._iGetRemappedUrl(url);\r\n\r\n\t\t// This is the \"base\" dependency, i.e. the actual requested asset.\r\n\t\t// We will not try to resolve this since the user can probably be\r\n\t\t// thrusted to know this URL better than our automatic resolver. :)\r\n\t\tif (url == this._uri)\r\n\t\t\treturn url;\r\n\r\n\r\n\t\t// Absolute URL? Check if starts with slash or a URL\r\n\t\t// scheme definition (e.g. ftp://, http://, file://)\r\n\t\tscheme_re = new RegExp('/^[a-zA-Z]{3,4}:\\/\\//');\r\n\r\n\t\tif (url.charAt(0) == '/') {\r\n\t\t\tif (this._context && this._context.overrideAbsolutePaths)\r\n\t\t\t\treturn this.joinUrl(this._context.dependencyBaseUrl, url); else\r\n\t\t\t\treturn url;\r\n\t\t} else if (scheme_re.test(url)) {\r\n\t\t\t// If overriding full URLs, get rid of scheme (e.g. \"http://\")\r\n\t\t\t// and replace with the dependencyBaseUrl defined by user.\r\n\t\t\tif (this._context && this._context.overrideFullURLs) {\r\n\r\n\t\t\t\tvar noscheme_url : string  = url.replace( scheme_re , '' );//url['replace'](scheme_re);\r\n\t\t\t\treturn this.joinUrl(this._context.dependencyBaseUrl, <string> noscheme_url);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Since not absolute, just get rid of base file name to find it's\r\n\t\t// folder and then concatenate dynamic URL\r\n\t\tif (this._context && this._context.dependencyBaseUrl) {\r\n\t\t\tbase = this._context.dependencyBaseUrl;\r\n\t\t\treturn this.joinUrl(base, url);\r\n\t\t} else {\r\n\t\t\tbase = this._uri.substring(0, this._uri.lastIndexOf('/') + 1);\r\n\t\t\treturn this.joinUrl(base, url);\r\n\t\t}\r\n\t}\r\n\r\n\tprivate retrieveParserDependencies()\r\n\t{\r\n\t\tif (!this._currentDependency)\r\n\t\t\treturn;\r\n\r\n\t\tvar parserDependancies = this._currentDependency.parser.dependencies;\r\n\t\tvar i:number, len:number = parserDependancies.length;\r\n\r\n\t\tfor (i = 0; i < len; i++)\r\n\t\t\tthis._currentDependency.dependencies[i] = parserDependancies[i];\r\n\r\n\t\t// Since more dependencies might be added eventually, empty this\r\n\t\t// list so that the same dependency isn't retrieved more than once.\r\n\t\tparserDependancies.length = 0;\r\n\r\n\t\tthis._stack.push(this._currentDependency);\r\n\r\n\t\tthis.retrieveNext();\r\n\t}\r\n\r\n\tprivate resolveParserDependencies()\r\n\t{\r\n\t\tthis._currentDependency._iSuccess = true;\r\n\r\n\t\t// Retrieve any last dependencies remaining on this parser, or\r\n\t\t// if none exists, just move on.\r\n\t\tif (this._currentDependency.parser && this._currentDependency.parser.dependencies.length && (!this._context || this._context.includeDependencies))//context may be null\r\n\t\t\tthis.retrieveParserDependencies();\r\n\t\telse\r\n\t\t\tthis.retrieveNext();\r\n\t}\r\n\r\n\t/**\r\n\t * Called when a single dependency loading failed, and pushes further dependencies onto the stack.\r\n\t * @param event\r\n\t */\r\n\tprivate onLoadError(event:IOErrorEvent)\r\n\t{\r\n\t\tvar handled:boolean;\r\n\t\tvar isDependency:boolean = (this._currentDependency != this._baseDependency);\r\n\t\tvar loader:URLLoader = <URLLoader> event.target;//TODO: keep on eye on this one\r\n\r\n\t\tthis.removeEventListeners(loader);\r\n\r\n\t\tif (this.hasEventListener(IOErrorEvent.IO_ERROR )) {\r\n\t\t\tthis.dispatchEvent(event);\r\n\t\t\thandled = true;\r\n\t\t} else {\r\n\t\t\t// TODO: Consider not doing this even when LoaderSession does have it's own LOAD_ERROR listener\r\n\t\t\tvar i:number, len:number = this._errorHandlers.length;\r\n\t\t\tfor (i = 0; i < len; i++)\r\n\t\t\t\tif (!handled)\r\n\t\t\t\t\thandled = <boolean> this._errorHandlers[i](event);\r\n\t\t}\r\n\r\n\t\tif (handled) {\r\n\r\n\t\t\t//if (isDependency && ! event.isDefaultPrevented()) {\r\n\t\t\tif (isDependency) { // TODO: JS / AS3 Change - we don't have isDefaultPrevented - so will this work\r\n\r\n\t\t\t\tthis._currentDependency.resolveFailure();\r\n\t\t\t\tthis.retrieveNext();\r\n\r\n\t\t\t} else {\r\n\t\t\t\t// Either this was the base file (last left in the stack) or\r\n\t\t\t\t// default behavior was prevented by the handlers, and hence\r\n\t\t\t\t// there is nothing more to do than clean up and bail.\r\n\t\t\t\tthis.dispose();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t} else {\r\n\r\n\t\t\t// Error event was not handled by listeners directly on LoaderSession or\r\n\t\t\t// on any of the subscribed loaders (in the list of error handlers.)\r\n\t\t\tthrow new Error();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Called when a dependency parsing failed, and dispatches a <code>ParserEvent.PARSE_ERROR</code>\r\n\t * @param event\r\n\t */\r\n\tprivate onParseError(event:ParserEvent)\r\n\t{\r\n\t\tvar handled:boolean;\r\n\r\n\t\tvar isDependency:boolean = (this._currentDependency != this._baseDependency);\r\n\r\n\t\tvar loader:URLLoader = <URLLoader>event.target;\r\n\r\n\t\tthis.removeEventListeners(loader);\r\n\r\n\t\tif (this.hasEventListener(ParserEvent.PARSE_ERROR)) {\r\n\t\t\tthis.dispatchEvent(event);\r\n\t\t\thandled = true;\r\n\t\t} else {\r\n\t\t\t// TODO: Consider not doing this even when LoaderSession does\r\n\t\t\t// have it's own LOAD_ERROR listener\r\n\t\t\tvar i:number, len:number = this._parseErrorHandlers.length;\r\n\r\n\t\t\tfor (i = 0; i < len; i++)\r\n\t\t\t\tif (!handled)\r\n\t\t\t\t\thandled = <boolean> this._parseErrorHandlers[i](event);\r\n\t\t}\r\n\r\n\t\tif (handled) {\r\n\t\t\tthis.retrieveNext();\r\n\t\t} else {\r\n\t\t\t// Error event was not handled by listeners directly on LoaderSession or\r\n\t\t\t// on any of the subscribed loaders (in the list of error handlers.)\r\n\t\t\tthrow new Error(event.message);\r\n\t\t}\r\n\t}\r\n\r\n\tprivate onAssetComplete(event:AssetEvent)\r\n\t{\r\n\t\t// Add loaded asset to list of assets retrieved as part\r\n\t\t// of the current dependency. This list will be inspected\r\n\t\t// by the parent parser when dependency is resolved\r\n\t\tif (this._currentDependency)\r\n\t\t\tthis._currentDependency.assets.push(event.asset);\r\n\r\n\t\tevent.asset.resetAssetPath(event.asset.name, this._namespace);\r\n\r\n\t\tif (!this._currentDependency.suppresAssetEvents)\r\n\t\t\tthis.dispatchEvent(event);\r\n\t}\r\n\r\n\tprivate onReadyForDependencies(event:ParserEvent)\r\n\t{\r\n\t\tvar parser:ParserBase = <ParserBase> event.target;\r\n\r\n\t\tif (this._context && !this._context.includeDependencies)\r\n\t\t\tparser._iResumeParsing();\r\n\t\telse\r\n\t\t\tthis.retrieveParserDependencies();\r\n\t}\r\n\r\n\t/**\r\n\t * Called when a single dependency was parsed, and pushes further dependencies onto the stack.\r\n\t * @param event\r\n\t */\r\n\tprivate onLoadComplete(event:Event)\r\n\t{\r\n\t\tvar loader:URLLoader = <URLLoader> event.target;\r\n\r\n\t\tthis.removeEventListeners(loader);\r\n\r\n\t\t// Resolve this dependency\r\n\t\tthis._currentDependency._iSetData(loader.data);\r\n\r\n\t\tif (this._currentDependency.retrieveAsRawData) {\r\n\t\t\t// No need to parse this data, which should be returned as is\r\n\t\t\tthis.resolveParserDependencies();\r\n\t\t} else {\r\n\t\t\tthis.parseDependency(this._currentDependency);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Called when parsing is complete.\r\n\t */\r\n\tprivate onParseComplete(event:ParserEvent):void\r\n\t{\r\n\t\tvar parser:ParserBase = <ParserBase> event.target;\r\n\r\n\t\tthis.resolveParserDependencies();//resolve in front of removing listeners to allow any remaining asset events to propagate\r\n\r\n\t\tparser.removeEventListener(ParserEvent.READY_FOR_DEPENDENCIES, this._onReadyForDependenciesDelegate);\r\n\t\tparser.removeEventListener(ParserEvent.PARSE_COMPLETE, this._onParseCompleteDelegate);\r\n\t\tparser.removeEventListener(ParserEvent.PARSE_ERROR, this._onParseErrorDelegate);\r\n\t\tparser.removeEventListener(AssetEvent.TEXTURE_SIZE_ERROR, this._onTextureSizeErrorDelegate);\r\n\t\tparser.removeEventListener(AssetEvent.ASSET_COMPLETE, this._onAssetCompleteDelegate);\r\n\t}\r\n\r\n\t/**\r\n\t * Called when an image is too large or it's dimensions are not a power of 2\r\n\t * @param event\r\n\t */\r\n\tprivate onTextureSizeError(event:AssetEvent)\r\n\t{\r\n\t\tevent.asset.name = this._currentDependency.resolveName(event.asset);\r\n\r\n\t\tthis.dispatchEvent(event);\r\n\t}\r\n\r\n\tprivate addEventListeners(loader:URLLoader)\r\n\t{\r\n\t\tloader.addEventListener(Event.COMPLETE, this._onLoadCompleteDelegate);\r\n\t\tloader.addEventListener(IOErrorEvent.IO_ERROR, this._onLoadErrorDelegate);\r\n\t}\r\n\r\n\tprivate removeEventListeners(loader:URLLoader)\r\n\t{\r\n\t\tloader.removeEventListener(Event.COMPLETE, this._onLoadCompleteDelegate);\r\n\t\tloader.removeEventListener(IOErrorEvent.IO_ERROR, this._onLoadErrorDelegate);\r\n\t}\r\n\r\n\tpublic stop()\r\n\t{\r\n\t\tthis.dispose();\r\n\t}\r\n\r\n\tprivate dispose()\r\n\t{\r\n\t\tthis._errorHandlers = null;\r\n\t\tthis._parseErrorHandlers = null;\r\n\t\tthis._context = null;\r\n\t\tthis._stack = null;\r\n\r\n\t\tif (this._currentDependency && this._currentDependency._iLoader)\r\n\t\t\tthis.removeEventListeners(this._currentDependency._iLoader);\r\n\r\n\t\tthis._currentDependency = null;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * @private\r\n\t * This method is used by other loader classes (e.g. Loader3D and AssetLibraryBundle) to\r\n\t * add error event listeners to the LoaderSession instance. This system is used instead of\r\n\t * the regular EventDispatcher system so that the AssetLibrary error handler can be sure\r\n\t * that if hasEventListener() returns true, it's client code that's listening for the\r\n\t * event. Secondly, functions added as error handler through this custom method are\r\n\t * expected to return a boolean value indicating whether the event was handled (i.e.\r\n\t * whether they in turn had any client code listening for the event.) If no handlers\r\n\t * return true, the LoaderSession knows that the event wasn't handled and will throw an RTE.\r\n\t */\r\n\r\n\tpublic _iAddParseErrorHandler(handler)\r\n\t{\r\n\t\tif (this._parseErrorHandlers.indexOf(handler) < 0)\r\n\t\t\tthis._parseErrorHandlers.push(handler);\r\n\t}\r\n\r\n\tpublic _iAddErrorHandler(handler)\r\n\t{\r\n\t\tif (this._errorHandlers.indexOf(handler) < 0)\r\n\t\t\tthis._errorHandlers.push(handler);\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * Guesses the parser to be used based on the file contents.\r\n\t * @param data The data to be parsed.\r\n\t * @param uri The url or id of the object to be parsed.\r\n\t * @return An instance of the guessed parser.\r\n\t */\r\n\tprivate getParserFromData(data:any):ParserBase\r\n\t{\r\n\t\tvar len:number = LoaderSession._parsers.length;\r\n\r\n\t\t// go in reverse order to allow application override of default parser added in away.proper\r\n\t\tfor (var i:number = len - 1; i >= 0; i--)\r\n\t\t\tif (LoaderSession._parsers[i].supportsData(data))\r\n\t\t\t\treturn new LoaderSession._parsers[i]();\r\n\r\n\t\treturn null;\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * Initiates parsing of the loaded dependency.\r\n\t *\r\n\t * @param The dependency to be parsed.\r\n\t */\r\n\tprivate parseDependency(dependency:ResourceDependency):void\r\n\t{\r\n\t\tvar parser:ParserBase = dependency.parser;\r\n\r\n\t\t// If no parser has been defined, try to find one by letting\r\n\t\t// all plugged in parsers inspect the actual data.\r\n\t\tif (!parser)\r\n\t\t\tdependency._iSetParser(parser = this.getParserFromData(dependency.data));\r\n\r\n\t\tif (parser) {\r\n\t\t\tparser.addEventListener(ParserEvent.READY_FOR_DEPENDENCIES, this._onReadyForDependenciesDelegate);\r\n\t\t\tparser.addEventListener(ParserEvent.PARSE_COMPLETE, this._onParseCompleteDelegate);\r\n\t\t\tparser.addEventListener(ParserEvent.PARSE_ERROR, this._onParseErrorDelegate);\r\n\t\t\tparser.addEventListener(AssetEvent.TEXTURE_SIZE_ERROR, this._onTextureSizeErrorDelegate);\r\n\t\t\tparser.addEventListener(AssetEvent.ASSET_COMPLETE, this._onAssetCompleteDelegate);\r\n\r\n\t\t\tif (dependency.request && dependency.request.url)\r\n\t\t\t\tparser._iFileName = dependency.request.url;\r\n\r\n\t\t\tparser.materialMode = this._materialMode;\r\n\r\n\t\t\tparser.parseAsync(dependency.data);\r\n\r\n\t\t} else {\r\n\t\t\tvar handled:boolean;\r\n\t\t\tvar message:string = \"No parser defined. To enable all parsers for auto-detection, use Parsers.enableAllBundled()\";\r\n\t\t\tvar event:ParserEvent = new ParserEvent(ParserEvent.PARSE_ERROR, message);\r\n\t\t\tif (this.hasEventListener(ParserEvent.PARSE_ERROR)) {\r\n\t\t\t\tthis.dispatchEvent(event);\r\n\t\t\t\thandled = true;\r\n\t\t\t} else {\r\n\t\t\t\t// TODO: Consider not doing this even when LoaderSession does\r\n\t\t\t\t// have it's own LOAD_ERROR listener\r\n\t\t\t\tvar i:number, len:number = this._parseErrorHandlers.length;\r\n\r\n\t\t\t\tfor (i = 0; i < len; i++)\r\n\t\t\t\t\tif (!handled)\r\n\t\t\t\t\t\thandled = <boolean> this._parseErrorHandlers[i](event);\r\n\t\t\t}\r\n\r\n\t\t\tif (handled) {\r\n\t\t\t\tthis.retrieveNext();\r\n\t\t\t} else {\r\n\t\t\t\t// Error event was not handled by listeners directly on LoaderSession or\r\n\t\t\t\t// on any of the subscribed loaders (in the list of error handlers.)\r\n\t\t\t\tthrow new Error(message);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Guesses the parser to be used based on the file extension.\r\n\t * @return An instance of the guessed parser.\r\n\t */\r\n\tprivate getParserFromSuffix(url:string):ParserBase\r\n\t{\r\n\t\t// Get rid of query string if any and extract extension\r\n\t\tvar base:string = (url.indexOf('?') > 0)? url.split('?')[0] : url;\r\n\t\tvar fileExtension:string = base.substr(base.lastIndexOf('.') + 1).toLowerCase();\r\n\r\n\t\tvar len:number = LoaderSession._parsers.length;\r\n\r\n\t\t// go in reverse order to allow application override of default parser added in away.proper\r\n\t\tfor (var i:number = len - 1; i >= 0; i--) {\r\n\t\t\tvar parserClass:any = LoaderSession._parsers[i];\r\n\t\t\tif (parserClass.supportsType(fileExtension))\r\n\t\t\t\treturn new parserClass();\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\t}\r\n}\r\n\r\nexport = LoaderSession;",
    "import ConflictStrategyBase\t\t= require(\"awayjs-core/lib/library/ConflictStrategyBase\");\r\nimport IAsset\t\t\t\t\t= require(\"awayjs-core/lib/library/IAsset\");\r\n\r\nclass NumSuffixConflictStrategy extends ConflictStrategyBase\r\n{\r\n\tprivate _separator:string;\r\n\tprivate _next_suffix:Object;\r\n\r\n\tconstructor(separator:string = '.')\r\n\t{\r\n\t\tsuper();\r\n\r\n\t\tthis._separator = separator;\r\n\t\tthis._next_suffix = {};\r\n\t}\r\n\r\n\tpublic resolveConflict(changedAsset:IAsset, oldAsset:IAsset, assetsDictionary:Object, precedence:string)\r\n\t{\r\n\t\tvar orig:string;\r\n\t\tvar new_name:string;\r\n\t\tvar base:string;\r\n\t\tvar suffix:number;\r\n\r\n\t\torig = changedAsset.name;\r\n\r\n\t\tif (orig.indexOf(this._separator) >= 0) {\r\n\t\t\t// Name has an ocurrence of the separator, so get base name and suffix,\r\n\t\t\t// unless suffix is non-numerical, in which case revert to zero and\r\n\t\t\t// use entire name as base\r\n\t\t\tbase = orig.substring(0, orig.lastIndexOf(this._separator));\r\n\t\t\tsuffix = parseInt(orig.substring(base.length - 1));\r\n\r\n\t\t\tif (isNaN(suffix)) {\r\n\t\t\t\tbase = orig;\r\n\t\t\t\tsuffix = 0;\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\t\t\tbase = orig;\r\n\t\t\tsuffix = 0;\r\n\t\t}\r\n\r\n\t\tif (suffix == 0 && this._next_suffix.hasOwnProperty(base)) {\r\n\r\n\t\t\tsuffix = this._next_suffix[base];\r\n\r\n\t\t}\r\n\r\n\t\t// Find the first suffixed name that does\r\n\t\t// not collide with other names.\r\n\t\tdo {\r\n\r\n\t\t\tsuffix++;\r\n\r\n\t\t\tnew_name = base.concat(this._separator, suffix.toString());\r\n\r\n\t\t} while (assetsDictionary.hasOwnProperty(new_name));\r\n\r\n\t\tthis._next_suffix[ base ] = suffix;\r\n\t\tthis._pUpdateNames(oldAsset.assetNamespace, new_name, oldAsset, changedAsset, assetsDictionary, precedence);\r\n\r\n\t}\r\n\r\n\tpublic create():ConflictStrategyBase\r\n\t{\r\n\t\treturn new NumSuffixConflictStrategy(this._separator);\r\n\t}\r\n}\r\n\r\nexport = NumSuffixConflictStrategy;",
    "import StreamingAudioChannel\t= require(\"awayjs-core/lib/managers/StreamingAudioChannel\");\r\nimport WebAudioChannel\t\t\t= require(\"awayjs-core/lib/managers/WebAudioChannel\");\r\nimport IAudioChannel\t\t\t= require(\"awayjs-core/lib/managers/IAudioChannel\");\r\nimport IAudioChannelClass\t\t= require(\"awayjs-core/lib/managers/IAudioChannelClass\");\r\n\r\nclass AudioManager\r\n{\r\n\tpublic static getChannel(byteLength:number):IAudioChannel\r\n\t{\r\n\t\t//choose best audio channel by bytelength\r\n\t\tvar channelClass:IAudioChannelClass = (byteLength > 50000)? StreamingAudioChannel : WebAudioChannel;\r\n\r\n\t\tvar i:number = 0;\r\n\t\twhile(channelClass._channels[i] && channelClass._channels[i].isPlaying())\r\n\t\t\ti++;\r\n\r\n\t\tif (i == channelClass.maxChannels) {\r\n\t\t\t//pick the oldest channel to reuse, ignoring looping channels\r\n\t\t\tvar channel:IAudioChannel;\r\n\t\t\tvar len:number = channelClass._channels.length;\r\n\t\t\tfor (var j:number = 0; j < len; j++) {\r\n\t\t\t\tchannel = channelClass._channels[j];\r\n\t\t\t\tif (!channel.isLooping() && !channel.isDecoding()) {\r\n\t\t\t\t\tchannelClass._channels.push(channelClass._channels.splice(j, 1)[0]);\r\n\t\t\t\t\tchannel.stop();\r\n\t\t\t\t\treturn channel;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t//do not return channel until one is freed up\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\treturn channelClass._channels[i] || (channelClass._channels[i] = new channelClass());\r\n\t}\r\n\r\n\r\n}\r\n\r\nexport = AudioManager;",
    "\r\nclass StreamingAudioChannel\r\n{\r\n\tpublic static maxChannels:number = 4;\r\n\r\n\tpublic static _channels:Array<StreamingAudioChannel> = new Array<StreamingAudioChannel>();\r\n\r\n\tprivate _sourceOpenDelegate:(event) => void;\r\n\tprivate _updateEndDelegate:(event) => void;\r\n\tprivate _sourceBuffer:SourceBuffer;\r\n\tprivate _sourceDirty:boolean;\r\n\tprivate _isPlaying:boolean = false;\r\n\tprivate _isLooping:boolean = false;\r\n\tprivate _isQueuing:boolean;\r\n\tprivate _isOpening:boolean;\r\n\tprivate _buffer:ArrayBuffer;\r\n\tprivate _offset:number;\r\n\tprivate _volume:number;\r\n\tprivate _startTime:number = 0;\r\n\tprivate _duration:number;\r\n\t\r\n\tprivate _audio:HTMLAudioElement;\r\n\t\r\n\tprivate _mediaSource:MediaSource;\r\n\tprivate _urlString:string;\r\n\r\n\tpublic get duration():number\r\n\t{\r\n\t\treturn this._duration;\r\n\t}\r\n\r\n\tpublic get currentTime():number\r\n\t{\r\n\t\treturn this._audio.currentTime - this._startTime;\r\n\t}\r\n\r\n\r\n\tpublic get volume():number\r\n\t{\r\n\t\treturn this._volume;\r\n\t}\r\n\r\n\tpublic set volume(value:number)\r\n\t{\r\n\t\tif (this._volume == value)\r\n\t\t\treturn;\r\n\r\n\t\tthis._volume = value;\r\n\r\n\t\tthis._audio.volume = this._volume;\r\n\t}\r\n\r\n\tpublic isPlaying():boolean\r\n\t{\r\n\t\treturn this._isPlaying;\r\n\t}\r\n\r\n\tpublic isLooping():boolean\r\n\t{\r\n\t\treturn this._isLooping;\r\n\t}\r\n\r\n\tpublic isDecoding():boolean\r\n\t{\r\n\t\treturn false;\r\n\t}\r\n\r\n\tconstructor()\r\n\t{\r\n\t\tthis._sourceOpenDelegate = (event) => this._sourceOpen(event);\r\n\t\tthis._updateEndDelegate = (event) => this._updateEnd(event);\r\n\r\n\t\tthis._audio = new Audio();\r\n\t\tthis._audio.ontimeupdate = (event) => this._onTimeUpdate(event);\r\n\r\n\t\tthis._updateSource();\r\n\r\n\t}\r\n\t\r\n\tpublic play(buffer:ArrayBuffer, offset:number = 0, loop:boolean = false)\r\n\t{\r\n\t\tthis._isPlaying = true;\r\n\r\n\t\tif (this._isLooping || this._isLooping != loop) {\r\n\t\t\tthis._isLooping = loop;\r\n\t\t\tthis._sourceDirty = true;\r\n\t\t}\r\n\r\n\t\tif (this._sourceDirty)\r\n\t\t\tthis._updateSource();\r\n\r\n\t\tthis._buffer = buffer;\r\n\t\tthis._offset = offset;\r\n\r\n\t\tif (!this._isQueuing && !this._isOpening)\r\n\t\t\tthis._queueBuffer();\r\n\t}\r\n\r\n\tpublic stop()\r\n\t{\r\n\t\tthis._audio.pause();\r\n\t\tthis._isPlaying = false;\r\n\t\tthis._isLooping = false;\r\n\t}\r\n\t\r\n\tprivate _sourceOpen(event)\r\n\t{\r\n\t\tthis._isOpening = false;\r\n\r\n\t\t//TODO: find out how in the name of all that is holy how this can be executed more than once on a MediaSource object\r\n\t\tif (this._mediaSource.activeSourceBuffers.length) {\r\n\t\t\tconsole.log(\"ERR: double sourceopen event called\")\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis._sourceBuffer = this._mediaSource.addSourceBuffer('audio/mpeg');\r\n\t\tthis._sourceBuffer.addEventListener(\"updateend\", this._updateEndDelegate);\r\n\r\n\t\tif (this._isPlaying)\r\n\t\t\tthis._queueBuffer();\r\n\t}\r\n\r\n\tprivate _queueBuffer()\r\n\t{\r\n\t\tthis._isQueuing = true;\r\n\r\n\t\tthis._startTime = this._sourceBuffer.timestampOffset;\r\n\t\tthis._sourceBuffer.appendBuffer(this._buffer);\r\n\t}\r\n\r\n\tprivate _updateEnd(event)\r\n\t{\r\n\t\tthis._isQueuing = false;\r\n\r\n\t\tif (this._isLooping)\r\n\t\t\tthis._mediaSource.endOfStream();\r\n\r\n\t\tthis._duration = this._sourceBuffer.timestampOffset - this._startTime;\r\n\r\n\t\tthis._audio.currentTime = this._startTime + this._offset;\r\n\t\tthis._audio.play();\r\n\t}\r\n\r\n\tprivate _onTimeUpdate(event)\r\n\t{\r\n\t\t//TODO: more accurate end detection\r\n\t\tif (!this._isLooping && this._duration < this._audio.currentTime - this._startTime + 0.1)\r\n\t\t\tthis.stop();\r\n\t}\r\n\r\n\tprivate _updateSource()\r\n\t{\r\n\t\tif(this._mediaSource)\r\n\t\t\tthis._disposeSource();\r\n\r\n\t\tthis._isQueuing = false;\r\n\t\tthis._isOpening = true;\r\n\r\n\t\tthis._mediaSource = new MediaSource();\r\n\t\tthis._mediaSource.addEventListener(\"sourceopen\", this._sourceOpenDelegate);\r\n\t\tthis._urlString = URL.createObjectURL(this._mediaSource);\r\n\t\tthis._audio.src = this._urlString;\r\n\t\tthis._audio.loop = this._isLooping;\r\n\r\n\t\tthis._sourceDirty = false;\r\n\t}\r\n\r\n\tprivate _disposeSource()\r\n\t{\r\n\t\tif (!this._isOpening) {\r\n\t\t\tif (this._sourceBuffer.timestampOffset)\r\n\t\t\t\tthis._sourceBuffer.remove(0, this._sourceBuffer.timestampOffset);\r\n\r\n\t\t\tthis._sourceBuffer.removeEventListener(\"updateend\", this._updateEndDelegate);\r\n\t\t\tthis._mediaSource.removeSourceBuffer(this._sourceBuffer);\r\n\t\t\tdelete this._sourceBuffer;\r\n\t\t\tthis._sourceBuffer = null;\r\n\t\t}\r\n\r\n\t\tthis._mediaSource.removeEventListener(\"sourceopen\", this._sourceOpenDelegate);\r\n\t\tURL.revokeObjectURL(this._urlString);\r\n\t\tdelete this._mediaSource;\r\n\t\tthis._mediaSource = null;\r\n\t}\r\n}\r\n\r\nexport = StreamingAudioChannel;",
    "\r\nclass WebAudioChannel\r\n{\r\n\tpublic static maxChannels:number = 64;\r\n\r\n\tpublic static _channels:Array<WebAudioChannel> = new Array<WebAudioChannel>();\r\n\r\n\tpublic static _decodeCache:Object = new Object();\r\n\tpublic static _errorCache:Object = new Object();\r\n\r\n\tprivate static _audioCtx;\r\n\tprivate _audioCtx;\r\n\r\n\tprivate _gainNode;\r\n\tprivate _source;\r\n\r\n\tprivate _isPlaying:boolean = false;\r\n\tprivate _isLooping:boolean = false;\r\n\tprivate _isDecoding:boolean = false;\r\n\tprivate _currentTime:number;\r\n\tprivate _id:number;\r\n\tprivate _volume:number = 1;\r\n\tprivate _startTime:number = 0;\r\n\tprivate _duration:number;\r\n\r\n\tprivate _onEndedDelegate : (event:any) => void;\r\n\r\n\tpublic get duration():number\r\n\t{\r\n\t\treturn this._duration;\r\n\t}\r\n\r\n\tpublic get currentTime():number\r\n\t{\r\n\t\treturn this._audioCtx.currentTime - this._startTime;\r\n\t}\r\n\r\n\tpublic get volume():number\r\n\t{\r\n\t\treturn this._volume;\r\n\t}\r\n\r\n\tpublic set volume(value:number)\r\n\t{\r\n\t\tif (this._volume == value)\r\n\t\t\treturn;\r\n\r\n\t\tthis._volume = value;\r\n\r\n\t\tthis._gainNode.gain.value = this._volume;\r\n\t}\r\n\r\n\r\n\tpublic isPlaying():boolean\r\n\t{\r\n\t\treturn this._isPlaying;\r\n\t}\r\n\r\n\tpublic isLooping():boolean\r\n\t{\r\n\t\treturn this._isLooping;\r\n\t}\r\n\r\n\tpublic isDecoding():boolean\r\n\t{\r\n\t\treturn this._isDecoding;\r\n\t}\r\n\r\n\tconstructor()\r\n\t{\r\n\t\tthis._audioCtx = WebAudioChannel._audioCtx || (WebAudioChannel._audioCtx = new (window[\"AudioContext\"] || window[\"webkitAudioContext\"])());\r\n\r\n\t\tthis._gainNode = this._audioCtx.createGain();\r\n\t\tthis._gainNode.gain.value = this._volume;\r\n\r\n\t\tthis._gainNode.connect(this._audioCtx.destination);\r\n\r\n\t\tthis._onEndedDelegate = (event) => this._onEnded(event);\r\n\t}\r\n\r\n\tpublic play(buffer:ArrayBuffer, offset:number = 0, loop:boolean = false, id:number = 0)\r\n\t{\r\n\t\tthis._isPlaying = true;\r\n\t\tthis._isLooping = loop;\r\n\r\n\t\tthis._currentTime = offset;\r\n\r\n\t\tthis._id = id;\r\n\r\n\t\tthis._isDecoding = true;\r\n\r\n\t\t//fast path for short sounds\r\n\t\tif (WebAudioChannel._decodeCache[id])\r\n\t\t\tthis._onDecodeComplete(WebAudioChannel._decodeCache[id]);\r\n\t\telse if (!WebAudioChannel._errorCache[id])\r\n\t\t\tthis._audioCtx.decodeAudioData(buffer, (buffer) => this._onDecodeComplete(buffer), (event) => this._onError(event));\r\n\t\telse\r\n\t\t\tthis.stop();\r\n\t}\r\n\r\n\tpublic stop()\r\n\t{\r\n\t\tif (!this._isPlaying)\r\n\t\t\treturn;\r\n\r\n\t\tthis._isPlaying = false;\r\n\t\tthis._isLooping = false;\r\n\t\tthis._isDecoding = false;\r\n\r\n\t\tif (this._source)\r\n\t\t\tthis._disposeSource();\r\n\t}\r\n\r\n\tpublic _onDecodeComplete(buffer)\r\n\t{\r\n\t\tif (!this._isPlaying)\r\n\t\t\treturn;\r\n\r\n\t\tthis._isDecoding = false;\r\n\r\n\t\t//if (buffer.duration < 2) //cache all buffers?\r\n\t\tWebAudioChannel._decodeCache[this._id] = buffer;\r\n\r\n\t\tif (this._source)\r\n\t\t\tthis._disposeSource();\r\n\r\n\t\tthis._source = this._audioCtx.createBufferSource();\r\n\r\n\t\tthis._source.loop = this._isLooping;\r\n\t\tthis._source.connect(this._gainNode);\r\n\r\n\t\tthis._source.buffer = buffer;\r\n\t\tthis._duration = buffer.duration;\r\n\r\n\t\tthis._startTime = this._audioCtx.currentTime - this._currentTime;\r\n\t\tthis._source.onended = this._onEndedDelegate;\r\n\t\ttry {\r\n\t\t\tthis._source.start(this._audioCtx.currentTime, this._currentTime);\r\n\t\t} catch (error) {\r\n\t\t\tconsole.log(\"Error starting audio: \" + error);\r\n\t\t\tthis._disposeSource();\r\n\t\t}\r\n\t}\r\n\r\n\tpublic _onError(event)\r\n\t{\r\n\t\tconsole.log(\"Error with decoding audio data\");\r\n\t\tWebAudioChannel._errorCache[this._id] = true;\r\n\t\tthis.stop();\r\n\t}\r\n\r\n\tprivate _onEnded(event):void\r\n\t{\r\n\t\tthis.stop();\r\n\t}\r\n\r\n\tprivate _disposeSource()\r\n\t{\r\n\t\t//clean up\r\n\t\tthis._source.stop(this._audioCtx.currentTime);\r\n\t\tthis._source.onended = null;\r\n\t\tthis._source.disconnect();\r\n\t\tdelete this._source.buffer;\r\n\t\tdelete this._source;\r\n\t\tthis._source = null;\r\n\t}\r\n}\r\n\r\nexport = WebAudioChannel;",
    "class CrossDomainPolicy\r\n{\r\n\tpublic static ANONYMOUS:string = 'anonymous';\r\n\r\n\tpublic static USE_CREDENTIALS:string = 'use-credentials';\r\n}\r\n\r\nexport = CrossDomainPolicy;\r\n",
    "class URLLoaderDataFormat\r\n{\r\n\t/**\r\n\t * TEXT\r\n\t * @type {string}\r\n\t */\r\n\tpublic static TEXT:string = \"text\";\r\n\r\n\t/**\r\n\t * Variables / Value Pairs\r\n\t * @type {string}\r\n\t */\r\n\tpublic static VARIABLES:string = \"variables\";\r\n\r\n\t/**\r\n\t *\r\n\t * @type {string}\r\n\t */\r\n\tpublic static BLOB:string = \"blob\";\r\n\r\n\t/**\r\n\t *\r\n\t * @type {string}\r\n\t */\r\n\tpublic static ARRAY_BUFFER:string = \"arraybuffer\";\r\n\r\n\t/**\r\n\t *\r\n\t * @type {string}\r\n\t */\r\n\tpublic static BINARY:string = \"binary\";\r\n}\r\n\r\nexport = URLLoaderDataFormat;",
    "import URLLoaderDataFormat\t\t\t= require(\"awayjs-core/lib/net/URLLoaderDataFormat\");\r\nimport URLRequest\t\t\t\t\t= require(\"awayjs-core/lib/net/URLRequest\");\r\nimport URLRequestMethod\t\t\t\t= require(\"awayjs-core/lib/net/URLRequestMethod\");\r\nimport URLVariables\t\t\t\t\t= require(\"awayjs-core/lib/net/URLVariables\");\r\nimport AwayEvent\t\t\t\t\t= require(\"awayjs-core/lib/events/Event\");\r\nimport EventDispatcher\t\t\t\t= require(\"awayjs-core/lib/events/EventDispatcher\");\r\nimport HTTPStatusEvent\t\t\t\t= require(\"awayjs-core/lib/events/HTTPStatusEvent\");\r\nimport IOErrorEvent\t\t\t\t\t= require(\"awayjs-core/lib/events/IOErrorEvent\");\r\nimport AwayProgressEvent\t\t\t= require(\"awayjs-core/lib/events/ProgressEvent\");\r\n\r\n/**\r\n * The URLLoader is used to load a single file, as part of a resource.\r\n *\r\n * While URLLoader can be used directly, e.g. to create a third-party asset\r\n * management system, it's recommended to use any of the classes Loader3D, LoaderSession\r\n * and AssetLibrary instead in most cases.\r\n *\r\n * @see LoaderSession\r\n * @see away.library.AssetLibrary\r\n */\r\nclass URLLoader extends EventDispatcher\r\n{\r\n\tprivate _XHR:XMLHttpRequest;\r\n\tprivate _bytesLoaded:number = 0;\r\n\tprivate _bytesTotal:number = 0;\r\n\tprivate _dataFormat:string = URLLoaderDataFormat.TEXT;\r\n\tprivate _loadError:boolean = false;\r\n\r\n\tprivate _request:URLRequest;\r\n\tprivate _data:any;\r\n\r\n\tprivate _loadStartEvent:AwayEvent;\r\n\tprivate _loadErrorEvent:IOErrorEvent;\r\n\tprivate _loadCompleteEvent:AwayEvent;\r\n\tprivate _progressEvent:AwayProgressEvent;\r\n\r\n\t/**\r\n\t * Creates a new URLLoader object.\r\n\t */\r\n\tconstructor()\r\n\t{\r\n\t\tsuper();\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tpublic get url():string\r\n\t{\r\n\r\n\t\treturn this._request? this._request.url : '';\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tpublic get data():any\r\n\t{\r\n\t\treturn this._data;\r\n\t}\r\n\r\n\r\n\t/**\r\n\t *\r\n\t * URLLoaderDataFormat.BINARY\r\n\t * URLLoaderDataFormat.TEXT\r\n\t * URLLoaderDataFormat.VARIABLES\r\n\t *\r\n\t * @param format\r\n\t */\r\n\tpublic set dataFormat(format:string)\r\n\t{\r\n\t\tthis._dataFormat = format;\r\n\t}\r\n\r\n\tpublic get dataFormat():string\r\n\t{\r\n\t\treturn this._dataFormat;\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t * @returns {number}\r\n\t */\r\n\tpublic get bytesLoaded():number\r\n\t{\r\n\t\treturn this._bytesLoaded;\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t * @returns {number}\r\n\t */\r\n\tpublic get bytesTotal():number\r\n\t{\r\n\t\treturn this._bytesTotal;\r\n\t}\r\n\r\n\t/**\r\n\t * Load a resource from a file.\r\n\t *\r\n\t * @param request The URLRequest object containing the URL of the object to be loaded.\r\n\t */\r\n\tpublic load(request:URLRequest):void\r\n\t{\r\n\t\tthis._request = request;\r\n\r\n\t\tthis.initXHR();\r\n\r\n\t\tif (request.method === URLRequestMethod.POST)\r\n\t\t\tthis.postRequest(request);\r\n\t\telse\r\n\t\t\tthis.getRequest(request);\r\n\t}\r\n\r\n\tpublic isSupported():boolean {\r\n\t\treturn window != null;\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tpublic close():void\r\n\t{\r\n\t\tthis._XHR.abort();\r\n\t\tthis.disposeXHR();\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tpublic dispose():void\r\n\t{\r\n\t\tif (this._XHR)\r\n\t\t\tthis._XHR.abort();\r\n\r\n\t\tthis.disposeXHR();\r\n\r\n\t\tthis._data = null;\r\n\t\tthis._dataFormat = null;\r\n\t\tthis._bytesLoaded = null;\r\n\t\tthis._bytesTotal = null;\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t * @param xhr\r\n\t * @param responseType\r\n\t */\r\n\tprivate setResponseType(xhr:XMLHttpRequest, responseType:string):void\r\n\t{\r\n\t\tswitch (responseType) {\r\n\t\t\tcase URLLoaderDataFormat.ARRAY_BUFFER:\r\n\t\t\tcase URLLoaderDataFormat.BLOB:\r\n\t\t\tcase URLLoaderDataFormat.TEXT:\r\n\t\t\t\txhr.responseType = responseType;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase URLLoaderDataFormat.VARIABLES:\r\n\t\t\t\txhr.responseType = URLLoaderDataFormat.TEXT;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase URLLoaderDataFormat.BINARY:\r\n\t\t\t\txhr.responseType = '';\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t * @param request {URLRequest}\r\n\t */\r\n\tprivate getRequest(request:URLRequest):void\r\n\t{\r\n\t\ttry {\r\n\t\t\tthis._XHR.open(request.method, request.url, request.async);\r\n\t\t\tthis.setResponseType(this._XHR, this._dataFormat);\r\n\t\t\tthis._XHR.send(); // No data to send\r\n\t\t} catch (e /* <XMLHttpRequestException> */) {\r\n\t\t\tthis.handleXmlHttpRequestException(e);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t * @param request {URLRequest}\r\n\t */\r\n\tprivate postRequest(request:URLRequest):void\r\n\t{\r\n\t\tthis._loadError = false;\r\n\r\n\t\tthis._XHR.open(request.method, request.url, request.async);\r\n\r\n\t\tif (request.data != null) {\r\n\t\t\tif (request.data instanceof URLVariables) {\r\n\t\t\t\tvar urlVars:URLVariables = <URLVariables> request.data;\r\n\r\n\t\t\t\ttry {\r\n\t\t\t\t\tthis._XHR.responseType = 'text';\r\n\t\t\t\t\tthis._XHR.send(urlVars.formData);\r\n\t\t\t\t} catch (e /* <XMLHttpRequestException> */) {\r\n\t\t\t\t\tthis.handleXmlHttpRequestException(e);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tthis.setResponseType(this._XHR, this._dataFormat);\r\n\r\n\t\t\t\tif (request.data)\r\n\t\t\t\t\tthis._XHR.send(request.data); // TODO: Test\r\n\t\t\t\telse\r\n\t\t\t\t\tthis._XHR.send(); // no data to send\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tthis._XHR.send(); // No data to send\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t * @param error {XMLHttpRequestException}\r\n\t */\r\n\tprivate handleXmlHttpRequestException(error:any /* <XMLHttpRequestException> */):void\r\n\t{\r\n\t\tswitch (error.code) {\r\n\r\n\t\t/******************************************************************************************************************************************************************************************************\r\n\t\t *\r\n\t\t *  XMLHttpRequestException { message: \"NETWORK_ERR: XMLHttpRequest Exception 101\", name: \"NETWORK_ERR\", code: 101, stack: \"Error: A network error occurred in synchronous req…\",NETWORK_ERR: 101… }\r\n\t\t *  code: 101 , message: \"NETWORK_ERR: XMLHttpRequest Exception 101\" ,  name: \"NETWORK_ERR\"\r\n\t\t *\r\n\t\t ******************************************************************************************************************************************************************************************************/\r\n\r\n\t\t\tcase 101:\r\n\t\t\t\t// Note: onLoadError event throws IO_ERROR event - this case is already Covered\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tprivate initXHR()\r\n\t{\r\n\t\tif (!this._XHR) {\r\n\t\t\tthis._XHR = new XMLHttpRequest();\r\n\r\n\t\t\tthis._XHR.onloadstart = (event:ProgressEvent) => this.onLoadStart(event);                 // loadstart\t        - When the request starts.\r\n\t\t\tthis._XHR.onprogress = (event:ProgressEvent) => this.onProgress(event);\t                // progress\t            - While loading and sending data.\r\n\t\t\tthis._XHR.onabort = (event:UIEvent) => this.onAbort(event);\t                        // abort\t            - When the request has been aborted, either by invoking the abort() method or navigating away from the page.\r\n\t\t\tthis._XHR.onerror = (event:ErrorEvent) => this.onLoadError(event);                     // error\t            - When the request has failed.\r\n\t\t\tthis._XHR.onload = (event:Event) => this.onLoadComplete(event);                   // load\t                - When the request has successfully completed.\r\n\t\t\tthis._XHR.ontimeout = (event:Event) => this.onTimeOut(event);                     // timeout\t            - When the author specified timeout has passed before the request could complete.\r\n\t\t\tthis._XHR.onloadend = (event:ProgressEvent) => this.onLoadEnd(event);                     // loadend\t            - When the request has completed, regardless of whether or not it was successful.\r\n\t\t\tthis._XHR.onreadystatechange = (event:Event) => this.onReadyStateChange(event);   // onreadystatechange   - When XHR state changes\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tprivate disposeXHR()\r\n\t{\r\n\t\tif (this._XHR !== null) {\r\n\t\t\tthis._XHR.onloadstart = null;\r\n\t\t\tthis._XHR.onprogress = null;\r\n\t\t\tthis._XHR.onabort = null;\r\n\t\t\tthis._XHR.onerror = null;\r\n\t\t\tthis._XHR.onload = null;\r\n\t\t\tthis._XHR.ontimeout = null;\r\n\t\t\tthis._XHR.onloadend = null;\r\n\t\t\tthis._XHR = null;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t * @param source\r\n\t */\r\n\tpublic decodeURLVariables(source:string):Object\r\n\t{\r\n\t\tvar result:Object = new Object();\r\n\r\n\t\tsource = source.split(\"+\").join(\" \");\r\n\r\n\t\tvar tokens, re = /[?&]?([^=]+)=([^&]*)/g;\r\n\r\n\t\twhile (tokens = re.exec(source))\r\n\t\t\tresult[decodeURIComponent(tokens[1])] = decodeURIComponent(tokens[2]);\r\n\r\n\t\treturn result;\r\n\t}\r\n\r\n\t// XMLHttpRequest - Event Handlers\r\n\r\n\t/**\r\n\t * When XHR state changes\r\n\t * @param event\r\n\t */\r\n\tprivate onReadyStateChange(event:Event)\r\n\t{\r\n\t\tif (this._XHR.readyState == 4) {\r\n\t\t\tif (this._XHR.status == 404) {\r\n\t\t\t\tthis._loadError = true;\r\n\r\n\t\t\t\tif (!this._loadErrorEvent)\r\n\t\t\t\t\tthis._loadErrorEvent = new IOErrorEvent(IOErrorEvent.IO_ERROR);\r\n\r\n\t\t\t\tthis.dispatchEvent(this._loadErrorEvent);\r\n\t\t\t}\r\n\r\n\t\t\tthis.dispatchEvent(new HTTPStatusEvent(HTTPStatusEvent.HTTP_STATUS, this._XHR.status));\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * When the request has completed, regardless of whether or not it was successful.\r\n\t * @param event\r\n\t */\r\n\tprivate onLoadEnd(event:ProgressEvent)\r\n\t{\r\n\t\tif (this._loadError === true)\r\n\t\t\treturn;\r\n\t}\r\n\r\n\t/**\r\n\t * When the author specified timeout has passed before the request could complete.\r\n\t * @param event\r\n\t */\r\n\tprivate onTimeOut(event:Event)\r\n\t{\r\n\t\t//TODO: Timeout not currently implemented ( also not part of AS3 API )\r\n\t}\r\n\r\n\t/**\r\n\t * When the request has been aborted, either by invoking the abort() method or navigating away from the page.\r\n\t * @param event\r\n\t */\r\n\tprivate onAbort(event:UIEvent)\r\n\t{\r\n\t\t// TODO: investigate whether this needs to be an IOError\r\n\t}\r\n\r\n\t/**\r\n\t * While loading and sending data.\r\n\t * @param event\r\n\t */\r\n\tprivate onProgress(event:ProgressEvent)\r\n\t{\r\n\t\tif (!this._progressEvent)\r\n\t\t\tthis._progressEvent = new AwayProgressEvent(AwayProgressEvent.PROGRESS);\r\n\r\n\t\tthis._progressEvent.bytesTotal = event.total;\r\n\t\tthis._progressEvent.bytesLoaded = event.loaded;\r\n\r\n\t\tthis.dispatchEvent(this._progressEvent);\r\n\t}\r\n\r\n\t/**\r\n\t * When the request starts.\r\n\t * @param event\r\n\t */\r\n\tprivate onLoadStart(event:ProgressEvent)\r\n\t{\r\n\t\tif (!this._loadStartEvent)\r\n\t\t\tthis._loadStartEvent = new AwayEvent(AwayEvent.OPEN);\r\n\r\n\t\tthis.dispatchEvent(this._loadStartEvent);\r\n\t}\r\n\r\n\t/**\r\n\t * When the request has successfully completed.\r\n\t * @param event\r\n\t */\r\n\tprivate onLoadComplete(event:Event)\r\n\t{\r\n\t\tif (this._loadError === true)\r\n\t\t\treturn;\r\n\r\n\t\tswitch (this._dataFormat) {\r\n\t\t\tcase URLLoaderDataFormat.TEXT:\r\n\t\t\t\tthis._data = this._XHR.responseText;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase URLLoaderDataFormat.VARIABLES:\r\n\t\t\t\tthis._data = this.decodeURLVariables(this._XHR.responseText);\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase URLLoaderDataFormat.BLOB:\r\n\t\t\tcase URLLoaderDataFormat.ARRAY_BUFFER:\r\n\t\t\tcase URLLoaderDataFormat.BINARY:\r\n\t\t\t\tthis._data = this._XHR.response;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\t\t\t\tthis._data = this._XHR.responseText;\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\tif (!this._loadCompleteEvent)\r\n\t\t\tthis._loadCompleteEvent = new AwayEvent(AwayEvent.COMPLETE);\r\n\r\n\t\tthis.dispatchEvent(this._loadCompleteEvent);\r\n\t}\r\n\r\n\t/**\r\n\t * When the request has failed. ( due to network issues ).\r\n\t * @param event\r\n\t */\r\n\tprivate onLoadError(event:Event)\r\n\t{\r\n\t\tthis._loadError = true;\r\n\r\n\t\tif (!this._loadErrorEvent)\r\n\t\t\tthis._loadErrorEvent = new IOErrorEvent(IOErrorEvent.IO_ERROR);\r\n\r\n\t\tthis.dispatchEvent(this._loadErrorEvent);\r\n\t}\r\n}\r\n\r\nexport = URLLoader;",
    "class URLRequestMethod\r\n{\r\n\t/**\r\n\t *\r\n\t * @type {string}\r\n\t */\r\n\tpublic static POST:string = 'POST';\r\n\t/**\r\n\t *\r\n\t * @type {string}\r\n\t */\r\n\tpublic static GET:string = 'GET';\r\n}\r\n\r\nexport = URLRequestMethod;",
    "import URLRequestMethod\t\t\t\t= require(\"awayjs-core/lib/net/URLRequestMethod\");\r\n\r\nclass URLRequest\r\n{\r\n\t/*\r\n\t * The MIME content type of the content in the the data property.\r\n\t * @type {string}\r\n\t */\r\n\t//public contentType      : string = 'application/x-www-form-urlencoded'; //Note: Not used for now.\r\n\r\n\t/**\r\n\t * Object containing data to be transmited with URL Request ( URL Variables / binary / string )\r\n\t *\r\n\t */\r\n\tpublic data:any;\r\n\r\n\t/**\r\n\t *\r\n\t * away.net.URLRequestMethod.GET\r\n\t * away.net.URLRequestMethod.POST\r\n\t *\r\n\t * @type {string}\r\n\t */\r\n\tpublic method:string = URLRequestMethod.GET;\r\n\r\n\t/**\r\n\t * Use asynchronous XMLHttpRequest\r\n\t * @type {boolean}\r\n\t */\r\n\tpublic async:boolean = true;\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tprivate _url:string;\r\n\r\n\t/**\r\n\r\n\t * @param url\r\n\t */\r\n\tconstructor(url:string = null)\r\n\t{\r\n\t\tthis._url = url;\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t * @returns {string}\r\n\t */\r\n\tpublic get url():string\r\n\t{\r\n\t\treturn this._url;\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t * @param value\r\n\t */\r\n\tpublic set url(value:string)\r\n\t{\r\n\t\tthis._url = value;\r\n\t}\r\n\r\n\t/**\r\n\t * dispose\r\n\t */\r\n\tpublic dispose():void\r\n\t{\r\n\t\tthis.data = null;\r\n\t\tthis._url = null;\r\n\t}\r\n}\r\n\r\nexport = URLRequest;",
    "class URLVariables\r\n{\r\n\tprivate _variables:Object = new Object();\r\n\r\n\t/**\r\n\t *\r\n\t * @param source\r\n\t */\r\n\tconstructor(source:string = null)\r\n\t{\r\n\t\tif (source !== null)\r\n\t\t\tthis.decode(source);\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t * @param source\r\n\t */\r\n\tpublic decode(source:string):void\r\n\t{\r\n\t\tsource = source.split(\"+\").join(\" \");\r\n\r\n\t\tvar tokens, re = /[?&]?([^=]+)=([^&]*)/g;\r\n\r\n\t\twhile (tokens = re.exec(source))\r\n\t\t\tthis._variables[decodeURIComponent(tokens[1])] = decodeURIComponent(tokens[2]);\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t * @returns {string}\r\n\t */\r\n\tpublic toString():string\r\n\t{\r\n\t\treturn '';\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t * @returns {Object}\r\n\t */\r\n\tpublic get variables():Object\r\n\t{\r\n\t\treturn this._variables;\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t * @returns {Object}\r\n\t */\r\n\tpublic get formData():FormData\r\n\t{\r\n\t\tvar fd:FormData = new FormData();\r\n\r\n\t\tfor (var s in this._variables)\r\n\t\t\tfd.append(s, this._variables[s]);\r\n\r\n\t\treturn fd;\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t * @returns {Object}\r\n\t */\r\n\tpublic set variables(obj:Object)\r\n\t{\r\n\t\tthis._variables = obj;\r\n\t}\r\n}\r\n\r\nexport = URLVariables;",
    "import BitmapImage2D\t\t\t= require(\"awayjs-core/lib/data/BitmapImage2D\");\r\nimport IAsset\t\t\t\t\t= require(\"awayjs-core/lib/library/IAsset\");\r\nimport URLLoaderDataFormat\t\t= require(\"awayjs-core/lib/net/URLLoaderDataFormat\");\r\nimport ParserBase\t\t\t\t= require(\"awayjs-core/lib/parsers/ParserBase\");\r\nimport ParserUtils\t\t\t\t= require(\"awayjs-core/lib/parsers/ParserUtils\");\r\nimport ByteArray\t\t\t\t= require(\"awayjs-core/lib/utils/ByteArray\");\r\nimport ImageUtils\t\t\t\t= require(\"awayjs-core/lib/utils/ImageUtils\");\r\n\r\n/**\r\n * Image2DParser provides a \"parser\" for natively supported image types (jpg, png). While it simply loads bytes into\r\n * a loader object, it wraps it in a BitmapDataResource so resource management can happen consistently without\r\n * exception cases.\r\n */\r\nclass Image2DParser extends ParserBase\r\n{\r\n\tprivate _startedParsing:boolean;\r\n\tprivate _doneParsing:boolean;\r\n\tprivate _loadingImage:boolean;\r\n\tprivate _htmlImageElement:HTMLImageElement;\r\n\r\n\t/**\r\n\t * Creates a new Image2DParser object.\r\n\t * @param uri The url or id of the data or file to be parsed.\r\n\t * @param extra The holder for extra contextual data that the parser might need.\r\n\t */\r\n\tconstructor()\r\n\t{\r\n\t\tsuper(URLLoaderDataFormat.BLOB);\r\n\t}\r\n\r\n\t/**\r\n\t * Indicates whether or not a given file extension is supported by the parser.\r\n\t * @param extension The file extension of a potential file to be parsed.\r\n\t * @return Whether or not the given file type is supported.\r\n\t */\r\n\tpublic static supportsType(extension:string):boolean\r\n\t{\r\n\r\n\t\textension = extension.toLowerCase();\r\n\t\treturn extension == \"jpg\" || extension == \"jpeg\" || extension == \"png\" || extension == \"gif\";//|| extension == \"bmp\";//|| extension == \"atf\";\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Tests whether a data block can be parsed by the parser.\r\n\t * @param data The data block to potentially be parsed.\r\n\t * @return Whether or not the given data is supported.\r\n\t */\r\n\tpublic static supportsData(data:any):boolean\r\n\t{\r\n\r\n\t\tif (data  instanceof HTMLImageElement)\r\n\t\t\treturn true;\r\n\r\n\t\tif (!(data instanceof ByteArray))\r\n\t\t\treturn false;\r\n\r\n\t\tvar ba:ByteArray = <ByteArray> data;\r\n\t\tba.position = 0;\r\n\r\n\t\tif (ba.readUnsignedShort() == 0xffd8)\r\n\t\t\treturn true; // JPEG, maybe check for \"JFIF\" as well?\r\n\r\n\t\tba.position = 0;\r\n\t\tif (ba.readShort() == 0x424D)\r\n\t\t\treturn true; // BMP\r\n\r\n\t\tba.position = 1;\r\n\t\tif (ba.readUTFBytes(3) == 'PNG')\r\n\t\t\treturn true;\r\n\r\n\t\tba.position = 0;\r\n\t\tif (ba.readUTFBytes(3) == 'GIF' && ba.readShort() == 0x3839 && ba.readByte() == 0x61)\r\n\t\t\treturn true;\r\n\r\n\t\tba.position = 0;\r\n\t\tif (ba.readUTFBytes(3) == 'ATF')\r\n\t\t\treturn true;\r\n\r\n\t\treturn false;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic _pProceedParsing():boolean\r\n\t{\r\n\r\n\t\tvar asset:BitmapImage2D;\r\n\t\tvar sizeError:boolean = false;\r\n\r\n\t\tif (this._loadingImage) {\r\n\t\t\treturn ParserBase.MORE_TO_PARSE;\r\n\t\t} else if (this._htmlImageElement) {\r\n\t\t\tif (ImageUtils.isHTMLImageElementValid(this._htmlImageElement)) {\r\n\t\t\t\tasset = ParserUtils.imageToBitmapImage2D(this._htmlImageElement);\r\n\t\t\t\tthis._pFinalizeAsset(<IAsset> asset, this._iFileName);\r\n\t\t\t}\r\n\t\t} else if (this.data instanceof HTMLImageElement) {// Parse HTMLImageElement\r\n\t\t\tvar htmlImageElement:HTMLImageElement = <HTMLImageElement> this.data;\r\n\t\t\tif (ImageUtils.isHTMLImageElementValid(htmlImageElement)) {\r\n\r\n\t\t\t\tasset = ParserUtils.imageToBitmapImage2D(htmlImageElement);\r\n\t\t\t\tthis._pFinalizeAsset(<IAsset> asset, this._iFileName);\r\n\t\t\t} else {\r\n\t\t\t\tsizeError = true;\r\n\t\t\t}\r\n\r\n\t\t} else if (this.data instanceof ByteArray) { // Parse a ByteArray\r\n\r\n\t\t\tvar ba:ByteArray = this.data;\r\n\t\t\tba.position = 0;\r\n\t\t\tvar htmlImageElement:HTMLImageElement = ParserUtils.byteArrayToImage(this.data);\r\n\r\n\t\t\tif (ImageUtils.isHTMLImageElementValid(htmlImageElement)) {\r\n\t\t\t\tasset = ParserUtils.imageToBitmapImage2D(htmlImageElement);\r\n\t\t\t\tthis._pFinalizeAsset(<IAsset> asset, this._iFileName);\r\n\t\t\t} else {\r\n\t\t\t\tsizeError = true;\r\n\t\t\t}\r\n\r\n\t\t} else if (this.data instanceof ArrayBuffer) {// Parse an ArrayBuffer\r\n\r\n\t\t\tthis._htmlImageElement = ParserUtils.arrayBufferToImage(this.data);\r\n\r\n\t\t\tasset = ParserUtils.imageToBitmapImage2D(this._htmlImageElement);\r\n\t\t\tthis._pFinalizeAsset(<IAsset> asset, this._iFileName);\r\n\r\n\t\t} else if (this.data instanceof Blob) { // Parse a Blob\r\n\r\n\t\t\tthis._htmlImageElement = ParserUtils.blobToImage(this.data);\r\n\r\n\t\t\tthis._htmlImageElement.onload = (event) => this.onLoadComplete(event);\r\n\t\t\tthis._loadingImage = true;\r\n\r\n\t\t\treturn ParserBase.MORE_TO_PARSE;\r\n\t\t}\r\n\r\n\t\tif (sizeError == true) // Generate new Checkerboard texture material\r\n\t\t{\r\n//\t\t\t\tasset = new BitmapTexture(DefaultMaterialManager.createCheckeredBitmapData(), false);\r\n//\t\t\t\tthis._pFinalizeAsset(<IAsset> asset, this._iFileName);\r\n//\t\t\t\tthis.dispatchEvent(new away.events.AssetEvent(away.events.AssetEvent.TEXTURE_SIZE_ERROR, <IAsset> asset));\r\n\t\t}\r\n\r\n\t\tthis._pContent = asset;\r\n\r\n\t\treturn ParserBase.PARSING_DONE;\r\n\r\n\t}\r\n\r\n\tpublic onLoadComplete(event)\r\n\t{\r\n\t\tthis._loadingImage = false;\r\n\t}\r\n}\r\n\r\nexport = Image2DParser;",
    "import BitmapImage2D\t\t\t= require(\"awayjs-core/lib/data/BitmapImage2D\");\r\nimport BitmapImageCube\t\t\t= require(\"awayjs-core/lib/data/BitmapImageCube\");\r\nimport IAsset\t\t\t\t\t= require(\"awayjs-core/lib/library/IAsset\");\r\nimport URLLoaderDataFormat\t\t= require(\"awayjs-core/lib/net/URLLoaderDataFormat\");\r\nimport URLRequest\t\t\t\t= require(\"awayjs-core/lib/net/URLRequest\");\r\nimport ParserBase\t\t\t\t= require(\"awayjs-core/lib/parsers/ParserBase\");\r\nimport ResourceDependency\t\t= require(\"awayjs-core/lib/parsers/ResourceDependency\");\r\n\r\n/**\r\n * ImageCubeParser provides a \"parser\" for natively supported image types (jpg, png). While it simply loads bytes into\r\n * a loader object, it wraps it in a BitmapImage2DResource so resource management can happen consistently without\r\n * exception cases.\r\n */\r\nclass ImageCubeParser extends ParserBase\r\n{\r\n\tprivate static posX:string = 'posX';\r\n\tprivate static negX:string = 'negX';\r\n\tprivate static posY:string = 'posY';\r\n\tprivate static negY:string = 'negY';\r\n\tprivate static posZ:string = 'posZ';\r\n\tprivate static negZ:string = 'negZ';\r\n\r\n\tprivate _imgDependencyDictionary:Object;\r\n\r\n\t/**\r\n\t * Creates a new ImageCubeParser object.\r\n\t * @param uri The url or id of the data or file to be parsed.\r\n\t * @param extra The holder for extra contextual data that the parser might need.\r\n\t */\r\n\tconstructor()\r\n\t{\r\n\t\tsuper(URLLoaderDataFormat.TEXT);\r\n\t}\r\n\r\n\t/**\r\n\t * Indicates whether or not a given file extension is supported by the parser.\r\n\t * @param extension The file extension of a potential file to be parsed.\r\n\t * @return Whether or not the given file type is supported.\r\n\t */\r\n\r\n\tpublic static supportsType(extension:string):boolean\r\n\t{\r\n\t\textension = extension.toLowerCase();\r\n\t\treturn extension == \"cube\";\r\n\t}\r\n\r\n\t/**\r\n\t * Tests whether a data block can be parsed by the parser.\r\n\t * @param data The data block to potentially be parsed.\r\n\t * @return Whether or not the given data is supported.\r\n\t */\r\n\tpublic static supportsData(data:any):boolean\r\n\t{\r\n\t\ttry {\r\n\t\t\tvar obj = JSON.parse(data);\r\n\r\n\t\t\tif (obj) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t} catch (e) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t}\r\n\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic _iResolveDependency(resourceDependency:ResourceDependency)\r\n\t{\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic _iResolveDependencyFailure(resourceDependency:ResourceDependency)\r\n\t{\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic _pProceedParsing():boolean\r\n\t{\r\n\t\tif (this._imgDependencyDictionary != null) { //all images loaded\r\n\t\t\tvar asset:BitmapImageCube = new BitmapImageCube(this._getBitmapImage2D(ImageCubeParser.posX).width);\r\n\r\n\t\t\tasset.draw(BitmapImageCube.posX, this._getBitmapImage2D(ImageCubeParser.posX));\r\n\t\t\tasset.draw(BitmapImageCube.negX, this._getBitmapImage2D(ImageCubeParser.negX));\r\n\t\t\tasset.draw(BitmapImageCube.posY, this._getBitmapImage2D(ImageCubeParser.posY));\r\n\t\t\tasset.draw(BitmapImageCube.negY, this._getBitmapImage2D(ImageCubeParser.negY));\r\n\t\t\tasset.draw(BitmapImageCube.posZ, this._getBitmapImage2D(ImageCubeParser.posZ));\r\n\t\t\tasset.draw(BitmapImageCube.negZ, this._getBitmapImage2D(ImageCubeParser.negZ));\r\n\r\n\t\t\t//clear dictionary\r\n\t\t\tthis._imgDependencyDictionary = null;\r\n\r\n\t\t\tasset.name = this._iFileName;\r\n\r\n\t\t\tthis._pFinalizeAsset(<IAsset> asset, this._iFileName);\r\n\r\n\t\t\treturn ParserBase.PARSING_DONE;\r\n\t\t}\r\n\r\n\t\ttry {\r\n\t\t\tvar json:any = JSON.parse(this.data);\r\n\t\t\tvar data:Array<Object> = <Array<Object>> json.data;\r\n\t\t\tvar rec:any;\r\n\r\n\t\t\tif (data.length != 6)\r\n\t\t\t\tthis._pDieWithError('ImageCubeParser: Error - cube texture should have exactly 6 images');\r\n\r\n\t\t\tif (json) {\r\n\t\t\t\tthis._imgDependencyDictionary = new Object();\r\n\r\n\t\t\t\tfor (var c:number = 0; c < data.length; c++) {\r\n\t\t\t\t\trec = data[c];\r\n\t\t\t\t\tthis._imgDependencyDictionary[rec.id] = this._pAddDependency(rec.id, new URLRequest(rec.image.toString()));\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (!this._validateCubeData()) {\r\n\r\n\t\t\t\t\tthis._pDieWithError(\"ImageCubeParser: JSON data error - cubes require id of:   \\n\" + ImageCubeParser.posX + ', ' + ImageCubeParser.negX + ',  \\n' + ImageCubeParser.posY + ', ' + ImageCubeParser.negY + ',  \\n' + ImageCubeParser.posZ + ', ' + ImageCubeParser.negZ);\r\n\r\n\t\t\t\t\treturn ParserBase.PARSING_DONE;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis._pPauseAndRetrieveDependencies();\r\n\r\n\t\t\t\treturn ParserBase.MORE_TO_PARSE;\r\n\t\t\t}\r\n\t\t} catch (e) {\r\n\t\t\tthis._pDieWithError('CubeTexturePaser Error parsing JSON');\r\n\t\t}\r\n\r\n\t\treturn ParserBase.PARSING_DONE;\r\n\r\n\t}\r\n\r\n\tprivate _validateCubeData():boolean\r\n\t{\r\n\t\treturn  ( this._imgDependencyDictionary[ ImageCubeParser.posX ] != null && this._imgDependencyDictionary[ ImageCubeParser.negX ] != null && this._imgDependencyDictionary[ ImageCubeParser.posY ] != null && this._imgDependencyDictionary[ ImageCubeParser.negY ] != null && this._imgDependencyDictionary[ ImageCubeParser.posZ ] != null && this._imgDependencyDictionary[ ImageCubeParser.negZ ] != null );\r\n\t}\r\n\r\n\tprivate _getBitmapImage2D(name:string):BitmapImage2D\r\n\t{\r\n\t\tvar dependency:ResourceDependency = <ResourceDependency> this._imgDependencyDictionary[ name ];\r\n\r\n\t\tif (dependency)\r\n\t\t\treturn <BitmapImage2D> dependency.assets[0];\r\n\r\n\t\treturn null;\r\n\t}\r\n\r\n}\r\n\r\nexport = ImageCubeParser;",
    "import BitmapImage2D\t\t\t= require(\"awayjs-core/lib/data/BitmapImage2D\");\r\nimport IAsset\t\t\t\t\t= require(\"awayjs-core/lib/library/IAsset\");\r\nimport URLRequest\t\t\t\t= require(\"awayjs-core/lib/net/URLRequest\");\r\nimport AbstractMethodError\t\t= require(\"awayjs-core/lib/errors/AbstractMethodError\");\r\nimport AssetEvent\t\t\t\t= require(\"awayjs-core/lib/events/AssetEvent\");\r\nimport EventDispatcher\t\t\t= require(\"awayjs-core/lib/events/EventDispatcher\");\r\nimport ParserEvent\t\t\t\t= require(\"awayjs-core/lib/events/ParserEvent\");\r\nimport TimerEvent\t\t\t\t= require(\"awayjs-core/lib/events/TimerEvent\");\r\nimport ParserUtils\t\t\t\t= require(\"awayjs-core/lib/parsers/ParserUtils\");\r\nimport ResourceDependency\t\t= require(\"awayjs-core/lib/parsers/ResourceDependency\");\r\nimport ByteArray\t\t\t\t= require(\"awayjs-core/lib/utils/ByteArray\");\r\nimport ImageUtils\t\t\t\t= require(\"awayjs-core/lib/utils/ImageUtils\");\r\nimport Timer\t\t\t\t\t= require(\"awayjs-core/lib/utils/Timer\");\r\nimport getTimer\t\t\t\t\t= require(\"awayjs-core/lib/utils/getTimer\");\r\n\r\n/**\r\n * <code>ParserBase</code> provides an abstract base class for objects that convert blocks of data to data structures\r\n * supported by away.\r\n *\r\n * If used by <code>LoaderSession</code> to automatically determine the parser type, two public static methods should\r\n * be implemented, with the following signatures:\r\n *\r\n * <code>public static supportsType(extension : string) : boolean</code>\r\n * Indicates whether or not a given file extension is supported by the parser.\r\n *\r\n * <code>public static supportsData(data : *) : boolean</code>\r\n * Tests whether a data block can be parsed by the parser.\r\n *\r\n * Furthermore, for any concrete subtype, the method <code>initHandle</code> should be overridden to immediately\r\n * create the object that will contain the parsed data. This allows <code>ResourceManager</code> to return an object\r\n * handle regardless of whether the object was loaded or not.\r\n *\r\n * @see LoaderSession\r\n */\r\nclass ParserBase extends EventDispatcher\r\n{\r\n\tpublic _isParsing:boolean;\r\n\tpublic _iFileName:string;\r\n\tprivate _dataFormat:string;\r\n\tprivate _data:any;\r\n\tprivate _frameLimit:number;\r\n\tprivate _lastFrameTime:number;\r\n\tprivate _pOnIntervalDelegate:(event:TimerEvent) => void;\r\n\tpublic _pContent:IAsset;\r\n\r\n\t//----------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n\t// TODO: add error checking for the following ( could cause a problem if this function is not implemented )\r\n\t//----------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n\t// Needs to be implemented in all Parsers (\r\n\t//<code>public static supportsType(extension : string) : boolean</code>\r\n\t//* Indicates whether or not a given file extension is supported by the parser.\r\n\t//----------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n\r\n\tpublic static supportsType(extension:string):boolean\r\n\t{\r\n\t\tthrow new AbstractMethodError();\r\n\t}\r\n\r\n\tprivate _dependencies:Array<ResourceDependency>;\r\n\tprivate _parsingPaused:boolean;\r\n\tprivate _parsingComplete:boolean;\r\n\tprivate _parsingFailure:boolean;\r\n\tprivate _timer:Timer;\r\n\tprivate _materialMode:number;\r\n\r\n\t/**\r\n\t * Returned by <code>proceedParsing</code> to indicate no more parsing is needed.\r\n\t */\r\n\tpublic static PARSING_DONE:boolean = true;\r\n\t/* Protected */\r\n\r\n\t/**\r\n\t * Returned by <code>proceedParsing</code> to indicate more parsing is needed, allowing asynchronous parsing.\r\n\t */\r\n\tpublic static MORE_TO_PARSE:boolean = false;\r\n\t/* Protected */\r\n\r\n\r\n\tpublic get content():IAsset\r\n\t{\r\n\t\treturn this._pContent;\r\n\t}\r\n\r\n\t/**\r\n\t * Creates a new ParserBase object\r\n\t * @param format The data format of the file data to be parsed. Can be either <code>ParserDataFormat.BINARY</code> or <code>ParserDataFormat.PLAIN_TEXT</code>, and should be provided by the concrete subtype.\r\n\t *\r\n\t * @see away.loading.parsers.ParserDataFormat\r\n\t */\r\n\tconstructor(format:string)\r\n\t{\r\n\t\tsuper();\r\n\r\n\t\tthis._materialMode = 0;\r\n\t\tthis._dataFormat = format;\r\n\t\tthis._dependencies = new Array<ResourceDependency>();\r\n\r\n\t\tthis._pOnIntervalDelegate = (event:TimerEvent) => this._pOnInterval(event);\r\n\t}\r\n\r\n\t/**\r\n\t * Validates a bitmapData loaded before assigning to a default BitmapMaterial\r\n\t */\r\n\r\n\tpublic isBitmapImage2DValid(bitmapImage2D:BitmapImage2D):boolean\r\n\t{\r\n\t\tvar isValid:boolean = ImageUtils.isImage2DValid(bitmapImage2D);\r\n\r\n\t\tif (!isValid) {\r\n\r\n\t\t\tconsole.log(\">> Bitmap loaded is not having power of 2 dimensions or is higher than 2048\");\r\n\t\t}\r\n\r\n\t\treturn isValid;\r\n\t}\r\n\r\n\tpublic set parsingFailure(b:boolean)\r\n\t{\r\n\t\tthis._parsingFailure = b;\r\n\t}\r\n\r\n\tpublic get parsingFailure():boolean\r\n\t{\r\n\t\treturn this._parsingFailure;\r\n\t}\r\n\r\n\tpublic get parsingPaused():boolean\r\n\t{\r\n\t\treturn this._parsingPaused;\r\n\t}\r\n\r\n\tpublic get parsingComplete():boolean\r\n\t{\r\n\t\treturn this._parsingComplete;\r\n\t}\r\n\r\n\tpublic set materialMode(newMaterialMode:number)\r\n\t{\r\n\t\tthis._materialMode = newMaterialMode;\r\n\t}\r\n\r\n\tpublic get materialMode():number\r\n\t{\r\n\t\treturn this._materialMode;\r\n\t}\r\n\r\n\tpublic get data():any\r\n\t{\r\n\t\treturn this._data;\r\n\t}\r\n\r\n\t/**\r\n\t * The data format of the file data to be parsed. Options are <code>URLLoaderDataFormat.BINARY</code>, <code>URLLoaderDataFormat.ARRAY_BUFFER</code>, <code>URLLoaderDataFormat.BLOB</code>, <code>URLLoaderDataFormat.VARIABLES</code> or <code>URLLoaderDataFormat.TEXT</code>.\r\n\t */\r\n\tpublic get dataFormat():string\r\n\t{\r\n\t\treturn this._dataFormat;\r\n\t}\r\n\r\n\t/**\r\n\t * Parse data (possibly containing bytearry, plain text or BitmapAsset) asynchronously, meaning that\r\n\t * the parser will periodically stop parsing so that the AVM may proceed to the\r\n\t * next frame.\r\n\t *\r\n\t * @param data The untyped data object in which the loaded data resides.\r\n\t * @param frameLimit number of milliseconds of parsing allowed per frame. The\r\n\t * actual time spent on a frame can exceed this number since time-checks can\r\n\t * only be performed between logical sections of the parsing procedure.\r\n\t */\r\n\tpublic parseAsync(data:any, frameLimit:number = 30)\r\n\t{\r\n\t\tthis._data = data;\r\n\t\tthis._pStartParsing(frameLimit);\r\n\t}\r\n\r\n\t/**\r\n\t * A list of dependencies that need to be loaded and resolved for the object being parsed.\r\n\t */\r\n\tpublic get dependencies():Array<ResourceDependency>\r\n\t{\r\n\t\treturn this._dependencies;\r\n\t}\r\n\r\n\t/**\r\n\t * Resolve a dependency when it's loaded. For example, a dependency containing an ImageResource would be assigned\r\n\t * to a Mesh instance as a BitmapMaterial, a scene graph object would be added to its intended parent. The\r\n\t * dependency should be a member of the dependencies property.\r\n\t *\r\n\t * @param resourceDependency The dependency to be resolved.\r\n\t */\r\n\tpublic _iResolveDependency(resourceDependency:ResourceDependency)\r\n\t{\r\n\t\tthrow new AbstractMethodError();\r\n\t}\r\n\r\n\t/**\r\n\t * Resolve a dependency loading failure. Used by parser to eventually provide a default map\r\n\t *\r\n\t * @param resourceDependency The dependency to be resolved.\r\n\t */\r\n\tpublic _iResolveDependencyFailure(resourceDependency:ResourceDependency)\r\n\t{\r\n\t\tthrow new AbstractMethodError();\r\n\t}\r\n\r\n\t/**\r\n\t * Resolve a dependency name\r\n\t *\r\n\t * @param resourceDependency The dependency to be resolved.\r\n\t */\r\n\tpublic _iResolveDependencyName(resourceDependency:ResourceDependency, asset:IAsset):string\r\n\t{\r\n\t\treturn asset.name;\r\n\t}\r\n\r\n\tpublic _iResumeParsing()\r\n\t{\r\n\t\tthis._parsingPaused = false;\r\n\r\n\t\tif (this._timer)\r\n\t\t\tthis._timer.start();\r\n\r\n\t\t//get started!\r\n\t\tif (!this._isParsing)\r\n\t\t\tthis._pOnInterval();\r\n\t}\r\n\r\n\tpublic _pFinalizeAsset(asset:IAsset, name:string = null)\r\n\t{\r\n\t\tvar type_event:string;\r\n\t\tvar type_name:string;\r\n\r\n\t\tif (name != null)\r\n\t\t\tasset.name = name;\r\n\r\n\t\t// If the asset has no name, give it\r\n\t\t// a per-type default name.\r\n\t\tif (!asset.name)\r\n\t\t\tasset.name = asset.assetType;\r\n\r\n\t\tthis.dispatchEvent(new AssetEvent(AssetEvent.ASSET_COMPLETE, asset));\r\n\t}\r\n\r\n\t/**\r\n\t * Parse the next block of data.\r\n\t * @return Whether or not more data needs to be parsed. Can be <code>ParserBase.ParserBase.PARSING_DONE</code> or\r\n\t * <code>ParserBase.ParserBase.MORE_TO_PARSE</code>.\r\n\t */\r\n\tpublic _pProceedParsing():boolean\r\n\t{\r\n\t\tthrow new AbstractMethodError();\r\n\t}\r\n\r\n\tpublic _pDieWithError(message:string = 'Unknown parsing error')\r\n\t{\r\n\t\tif (this._timer) {\r\n\t\t\tthis._timer.removeEventListener(TimerEvent.TIMER, this._pOnIntervalDelegate);\r\n\t\t\tthis._timer.stop();\r\n\t\t\tthis._timer = null;\r\n\t\t}\r\n\r\n\t\tthis.dispatchEvent(new ParserEvent(ParserEvent.PARSE_ERROR, message));\r\n\t}\r\n\r\n\tpublic _pAddDependency(id:string, req:URLRequest, retrieveAsRawData:boolean = false, data:any = null, suppressErrorEvents:boolean = false, sub_id:number=0):ResourceDependency\r\n\t{\r\n\t\tvar dependency:ResourceDependency = new ResourceDependency(id, req, data, null, this, retrieveAsRawData, suppressErrorEvents, sub_id);\r\n\t\tthis._dependencies.push(dependency);\r\n\r\n\t\treturn dependency;\r\n\t}\r\n\r\n\tpublic _pPauseAndRetrieveDependencies()\r\n\t{\r\n\t\tthis._pPauseParsing();\r\n\r\n\t\tthis.dispatchEvent(new ParserEvent(ParserEvent.READY_FOR_DEPENDENCIES));\r\n\t}\r\n\r\n\tpublic _pPauseParsing()\r\n\t{\r\n\t\tif (this._timer)\r\n\t\t\tthis._timer.stop();\r\n\r\n\t\tthis._parsingPaused = true;\r\n\t}\r\n\r\n\t/**\r\n\t * Tests whether or not there is still time left for parsing within the maximum allowed time frame per session.\r\n\t * @return True if there is still time left, false if the maximum allotted time was exceeded and parsing should be interrupted.\r\n\t */\r\n\tpublic _pHasTime():boolean\r\n\t{\r\n\t\treturn ((getTimer() - this._lastFrameTime) < this._frameLimit);\r\n\t}\r\n\r\n\t/**\r\n\t * Called when the parsing pause interval has passed and parsing can proceed.\r\n\t */\r\n\tpublic _pOnInterval(event:TimerEvent = null)\r\n\t{\r\n\t\tthis._lastFrameTime = getTimer();\r\n\t\tthis._isParsing = true;\r\n\r\n\t\tif (this._pProceedParsing() && !this._parsingFailure)\r\n\t\t\tthis._pFinishParsing();\r\n\r\n\t\tthis._isParsing = false;\r\n\t}\r\n\r\n\t/**\r\n\t * Initializes the parsing of data.\r\n\t * @param frameLimit The maximum duration of a parsing session.\r\n\t */\r\n\tpublic _pStartParsing(frameLimit:number)\r\n\t{\r\n\t\tthis._frameLimit = frameLimit;\r\n\t\tthis._timer = new Timer(this._frameLimit, 0);\r\n\t\tthis._timer.addEventListener(TimerEvent.TIMER, this._pOnIntervalDelegate);\r\n\t\tthis._timer.start();\r\n\r\n\t\t//get started!\r\n\t\tthis._pOnInterval();\r\n\t}\r\n\r\n\t/**\r\n\t * Finish parsing the data.\r\n\t */\r\n\tpublic _pFinishParsing()\r\n\t{\r\n\t\tif (this._timer) {\r\n\t\t\tthis._timer.removeEventListener(TimerEvent.TIMER, this._pOnIntervalDelegate);\r\n\t\t\tthis._timer.stop();\r\n\t\t}\r\n\r\n\t\tthis._timer = null;\r\n\t\tthis._parsingComplete = true;\r\n\t\tthis._isParsing = false;\r\n\r\n\t\tthis.dispatchEvent(new ParserEvent(ParserEvent.PARSE_COMPLETE));\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t * @returns {string}\r\n\t * @private\r\n\t */\r\n\tpublic _pGetTextData():string\r\n\t{\r\n\t\treturn ParserUtils.toString(this._data);\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t * @returns {ByteArray}\r\n\t * @private\r\n\t */\r\n\tpublic _pGetByteData():ByteArray\r\n\t{\r\n\t\treturn ParserUtils.toByteArray(this._data);\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t * @returns {any}\r\n\t * @private\r\n\t */\r\n\tpublic _pGetData():any\r\n\t{\r\n\t\treturn this._data;\r\n\t}\r\n\r\n}\r\n\r\nexport = ParserBase;",
    "/**\r\n * An enumeration providing values to describe the data format of parsed data.\r\n */\r\nclass ParserDataFormat\r\n{\r\n\t/**\r\n\t * Describes the format of a binary file.\r\n\t */\r\n\tpublic static BINARY:string = \"binary\";\r\n\r\n\t/**\r\n\t * Describes the format of a plain text file.\r\n\t */\r\n\tpublic static PLAIN_TEXT:string = \"plainText\";\r\n\r\n\t/**\r\n\t * Describes the format of an image file\r\n\t */\r\n\tpublic static IMAGE:string = \"image\";\r\n\r\n}\r\n\r\nexport = ParserDataFormat;",
    "import BitmapImage2D\t\t\t= require(\"awayjs-core/lib/data/BitmapImage2D\");\r\nimport WaveAudio\t\t\t\t= require(\"awayjs-core/lib/data/WaveAudio\");\r\nimport ByteArray\t\t\t\t= require(\"awayjs-core/lib/utils/ByteArray\");\r\n\r\nclass ParserUtils\r\n{\r\n\tpublic static arrayBufferToBase64(data:ArrayBuffer, mimeType:string)\r\n\t{\r\n\t\tvar byteStr:string = '';\r\n\t\tvar bytes:Uint8Array = new Uint8Array(data);\r\n\t\tvar len:number = bytes.byteLength;\r\n\r\n\t\tfor (var i = 0; i < len; i++)\r\n\t\t\tbyteStr += String.fromCharCode(bytes[ i ])\r\n\r\n\t\tvar base64Image:string = window.btoa(byteStr);\r\n\t\treturn 'data:' + mimeType + ';base64,' + base64Image;\r\n\t}\r\n\r\n\tpublic static arrayBufferToAudio(data:ArrayBuffer, fileType:string):HTMLAudioElement\r\n\t{\r\n\t\tvar str:string = ParserUtils.arrayBufferToBase64(data, 'audio/' + fileType);\r\n\t\tvar audio:HTMLAudioElement = <HTMLAudioElement> new Audio();\r\n\t\taudio.src = str;\r\n\t\treturn audio;\r\n\t}\r\n\r\n\t/**\r\n\t * Converts an ArrayBuffer to a base64 string\r\n\t *\r\n\t * @param image data as a ByteArray\r\n\t *\r\n\t * @return HTMLImageElement\r\n\t *\r\n\t */\r\n\tpublic static arrayBufferToImage(data:ArrayBuffer):HTMLImageElement\r\n\t{\r\n\t\tvar str:string = ParserUtils.arrayBufferToBase64(data, 'image/png');\r\n\t\tvar img:HTMLImageElement = <HTMLImageElement> new Image();\r\n\t\timg.src = str;\r\n\t\treturn img;\r\n\t}\r\n\r\n\t/**\r\n\t * Converts an ByteArray to an Image - returns an HTMLImageElement\r\n\t *\r\n\t * @param image data as a ByteArray\r\n\t *\r\n\t * @return HTMLImageElement\r\n\t *\r\n\t */\r\n\tpublic static byteArrayToImage(data:ByteArray):HTMLImageElement\r\n\t{\r\n\t\tvar str:string = ParserUtils.arrayBufferToBase64(data.arraybytes, 'image/png');\r\n\t\tvar img:HTMLImageElement = <HTMLImageElement> new Image();\r\n\t\timg.src = str;\r\n\t\treturn img;\r\n\t}\r\n\r\n\tpublic static byteArrayToAudio(data:ByteArray, filetype:string):HTMLAudioElement\r\n\t{\r\n\t\tvar str:string = ParserUtils.arrayBufferToBase64(data.arraybytes, 'audio/' + filetype);\r\n\t\tvar audio:HTMLAudioElement = <HTMLAudioElement> new Audio();\r\n\t\taudio.src = str;\r\n\t\treturn audio;\r\n\t}\r\n\r\n\t/**\r\n\t * Converts an Blob to an Image - returns an HTMLImageElement\r\n\t *\r\n\t * @param image data as a Blob\r\n\t *\r\n\t * @return HTMLImageElement\r\n\t *\r\n\t */\r\n\tpublic static blobToImage(data:Blob):HTMLImageElement\r\n\t{\r\n\t\tvar URLObj:URL = window['URL'] || window['webkitURL'];\r\n\t\tvar src = URLObj.createObjectURL(data);\r\n\t\tvar img:HTMLImageElement = <HTMLImageElement> new Image();\r\n\t\timg.src = src;\r\n\t\treturn img;\r\n\t}\r\n\r\n\t/**\r\n\t * Converts an Blob to audio - returns an HTMLAudioElement\r\n\t *\r\n\t * @param audio data as a Blob\r\n\t *\r\n\t * @return HTMLAudioElement\r\n\t *\r\n\t */\r\n\tpublic static blobToAudio(data:Blob):HTMLAudioElement\r\n\t{\r\n\t\tvar URLObj:URL = window['URL'] || window['webkitURL'];\r\n\t\tvar src = URLObj.createObjectURL(data);\r\n\t\tvar img:HTMLAudioElement = <HTMLAudioElement> new Audio();\r\n\t\timg.src = src;\r\n\t\treturn img;\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tpublic static imageToBitmapImage2D(img:HTMLImageElement, powerOfTwo:boolean = true):BitmapImage2D\r\n\t{\r\n\t\tvar bitmapData:BitmapImage2D = new BitmapImage2D(img.width, img.height, true, null, powerOfTwo);\r\n\t\tbitmapData.draw(img);\r\n\r\n\t\treturn bitmapData;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns a object as ByteArray, if possible.\r\n\t *\r\n\t * @param data The object to return as ByteArray\r\n\t *\r\n\t * @return The ByteArray or null\r\n\t *\r\n\t */\r\n\tpublic static toByteArray(data:any):ByteArray\r\n\t{\r\n\t\tvar b:ByteArray = new ByteArray();\r\n\t\tb.setArrayBuffer(data);\r\n\t\treturn b;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns a object as String, if possible.\r\n\t *\r\n\t * @param data The object to return as String\r\n\t * @param length The length of the returned String\r\n\t *\r\n\t * @return The String or null\r\n\t *\r\n\t */\r\n\tpublic static toString(data:any, length:number = 0):string\r\n\t{\r\n\r\n\t\tif (typeof data === 'string') {\r\n\t\t\tvar s:string = <string> data;\r\n\r\n\t\t\tif (s['substr'] != null)\r\n\t\t\t\treturn s.substr(0, s.length);\r\n\t\t}\r\n\r\n\t\tif (data instanceof ByteArray) {\r\n\t\t\tvar ba:ByteArray = <ByteArray> data;\r\n\t\t\tba.position = 0;\r\n\t\t\treturn ba.readUTFBytes(Math.min(ba.getBytesAvailable(), length));\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\r\n\t\t/*\r\n\t\t var ba:ByteArray;\r\n\r\n\t\t length ||= uint.MAX_VALUE;\r\n\r\n\t\t if (data is String)\r\n\t\t return String(data).substr(0, length);\r\n\r\n\t\t ba = toByteArray(data);\r\n\t\t if (ba) {\r\n\t\t ba.position = 0;\r\n\t\t return ba.readUTFBytes(Math.min(ba.bytesAvailable, length));\r\n\t\t }\r\n\r\n\t\t return null;\r\n\r\n\t\t */\r\n\r\n\t}\r\n}\r\n\r\nexport = ParserUtils;",
    "﻿import IAsset\t\t\t\t\t= require(\"awayjs-core/lib/library/IAsset\");\r\nimport URLLoader\t\t\t\t= require(\"awayjs-core/lib/net/URLLoader\");\r\nimport URLRequest\t\t\t\t= require(\"awayjs-core/lib/net/URLRequest\");\r\nimport ParserBase\t\t\t\t= require(\"awayjs-core/lib/parsers/ParserBase\");\r\n\r\n/**\r\n * ResourceDependency represents the data required to load, parse and resolve additional files (\"dependencies\")\r\n * required by a parser, used by ResourceLoadSession.\r\n *\r\n */\r\nclass ResourceDependency\r\n{\r\n\tprivate _id:string;\r\n\tprivate _sub_id:number;\r\n\r\n\tprivate _request:URLRequest;\r\n\tprivate _assets:Array<IAsset>;\r\n\tprivate _parser:ParserBase;\r\n\tprivate _parentParser:ParserBase;\r\n\tprivate _data:any;\r\n\tprivate _retrieveAsRawData:boolean;\r\n\tprivate _suppressAssetEvents:boolean;\r\n\tprivate _dependencies:Array<ResourceDependency>;\r\n\r\n\tpublic _iLoader:URLLoader;\r\n\tpublic _iSuccess:boolean;\r\n\r\n\r\n\tconstructor(id:string, request:URLRequest, data:any, parser:ParserBase, parentParser:ParserBase, retrieveAsRawData:boolean = false, suppressAssetEvents:boolean = false, sub_id:number=0)\r\n\t{\r\n\t\tthis._id = id;\r\n\t\tthis._sub_id = sub_id;\r\n\t\tthis._request = request;\r\n\t\tthis._data = data;\r\n\t\tthis._parser = parser;\r\n\t\tthis._parentParser = parentParser;\r\n\t\tthis._retrieveAsRawData = retrieveAsRawData;\r\n\t\tthis._suppressAssetEvents = suppressAssetEvents;\r\n\t\tthis._assets = new Array<IAsset>();\r\n\t\tthis._dependencies = new Array<ResourceDependency>();\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tpublic get id():string\r\n\t{\r\n\t\treturn this._id;\r\n\t}\r\n\tpublic get sub_id():number\r\n\t{\r\n\t\treturn this._sub_id;\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tpublic get request():URLRequest\r\n\t{\r\n\t\treturn this._request;\r\n\t}\r\n\r\n\t/**\r\n\t * The data containing the dependency to be parsed, if the resource was already loaded.\r\n\t */\r\n\tpublic get data():any\r\n\t{\r\n\t\treturn this._data;\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tpublic get parser():ParserBase\r\n\t{\r\n\t\treturn this._parser;\r\n\t}\r\n\r\n\t/**\r\n\t * The parser which is dependent on this ResourceDependency object.\r\n\t */\r\n\tpublic get parentParser():ParserBase\r\n\t{\r\n\t\treturn this._parentParser;\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tpublic get retrieveAsRawData():boolean\r\n\t{\r\n\t\treturn this._retrieveAsRawData;\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tpublic get suppresAssetEvents():boolean\r\n\t{\r\n\t\treturn this._suppressAssetEvents;\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tpublic get assets():Array<IAsset>\r\n\t{\r\n\t\treturn this._assets;\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tpublic get dependencies():Array<ResourceDependency>\r\n\t{\r\n\t\treturn this._dependencies;\r\n\t}\r\n\r\n\t/**\r\n\t * @private\r\n\t * Method to set data after having already created the dependency object, e.g. after load.\r\n\t */\r\n\tpublic _iSetData(data:any):void\r\n\t{\r\n\t\tthis._data = data;\r\n\t}\r\n\r\n\t/**\r\n\t * @private\r\n\t *\r\n\t */\r\n\tpublic _iSetParser(parser:ParserBase):void\r\n\t{\r\n\t\tthis._parser = parser;\r\n\t}\r\n\r\n\t/**\r\n\t * Resolve the dependency when it's loaded with the parent parser. For example, a dependency containing an\r\n\t * ImageResource would be assigned to a Mesh instance as a BitmapMaterial, a scene graph object would be added\r\n\t * to its intended parent. The dependency should be a member of the dependencies property.\r\n\t */\r\n\tpublic resolve():void\r\n\t{\r\n\t\tif (this._parentParser)\r\n\t\t\tthis._parentParser._iResolveDependency(this);\r\n\t}\r\n\r\n\t/**\r\n\t * Resolve a dependency failure. For example, map loading failure from a 3d file\r\n\t */\r\n\tpublic resolveFailure():void\r\n\t{\r\n\t\tif (this._parentParser)\r\n\t\t\tthis._parentParser._iResolveDependencyFailure(this);\r\n\t}\r\n\r\n\t/**\r\n\t * Resolve the dependencies name\r\n\t */\r\n\tpublic resolveName(asset:IAsset):string\r\n\t{\r\n\t\tif (this._parentParser)\r\n\t\t\treturn this._parentParser._iResolveDependencyName(this, asset);\r\n\r\n\t\treturn asset.name;\r\n\t}\r\n}\r\n\r\nexport = ResourceDependency;",
    "import Sampler2D\t\t\t\t= require(\"awayjs-core/lib/data/Sampler2D\");\r\nimport BitmapImage2D\t\t\t= require(\"awayjs-core/lib/data/BitmapImage2D\");\r\nimport Rectangle\t\t\t\t= require(\"awayjs-core/lib/geom/Rectangle\");\r\nimport IAsset\t\t\t\t\t= require(\"awayjs-core/lib/library/IAsset\");\r\nimport URLLoaderDataFormat\t\t= require(\"awayjs-core/lib/net/URLLoaderDataFormat\");\r\nimport URLRequest\t\t\t\t= require(\"awayjs-core/lib/net/URLRequest\");\r\nimport ParserBase\t\t\t\t= require(\"awayjs-core/lib/parsers/ParserBase\");\r\nimport ParserUtils\t\t\t\t= require(\"awayjs-core/lib/parsers/ParserUtils\");\r\nimport ResourceDependency\t\t= require(\"awayjs-core/lib/parsers/ResourceDependency\");\r\nimport XmlUtils\t\t\t\t\t= require(\"awayjs-core/lib/utils/XmlUtils\");\r\n\r\n/**\r\n * TextureAtlasParser provides a \"parser\" for natively supported image types (jpg, png). While it simply loads bytes into\r\n * a loader object, it wraps it in a BitmapImage2DResource so resource management can happen consistently without\r\n * exception cases.\r\n */\r\nclass TextureAtlasParser extends ParserBase\r\n{\r\n\tprivate _doc:Node;\r\n\tprivate _imagePath:string;\r\n\tprivate _imageData:BitmapImage2D;\r\n\tprivate _subTextureNodes:NodeList;\r\n\tprivate _parseState:number = 0;\r\n\r\n\t/**\r\n\t * Creates a new TextureAtlasParser object.\r\n\t * @param uri The url or id of the data or file to be parsed.\r\n\t * @param extra The holder for extra contextual data that the parser might need.\r\n\t */\r\n\tconstructor()\r\n\t{\r\n\t\tsuper(URLLoaderDataFormat.TEXT);\r\n\t}\r\n\r\n\t/**\r\n\t * Indicates whether or not a given file extension is supported by the parser.\r\n\t * @param extension The file extension of a potential file to be parsed.\r\n\t * @return Whether or not the given file type is supported.\r\n\t */\r\n\r\n\tpublic static supportsType(extension:string):boolean\r\n\t{\r\n\t\textension = extension.toLowerCase();\r\n\t\treturn extension == \"xml\";\r\n\t}\r\n\r\n\t/**\r\n\t * Tests whether a data block can be parsed by the parser.\r\n\t * @param data The data block to potentially be parsed.\r\n\t * @return Whether or not the given data is supported.\r\n\t */\r\n\tpublic static supportsData(data:any):boolean\r\n\t{\r\n\t\ttry {\r\n\t\t\tvar content:string = ParserUtils.toString(data);\r\n\t\t\tif(content.indexOf(\"TextureAtlas\") != -1 || content.indexOf(\"textureatlas\") != -1)\r\n\t\t\t\treturn true;\r\n\r\n\t\t\treturn false;\r\n\t\t} catch (e) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t}\r\n\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic _iResolveDependency(resourceDependency:ResourceDependency)\r\n\t{\r\n\t\tif(resourceDependency.assets.length) {\r\n\t\t\tthis._imageData = <BitmapImage2D> resourceDependency.assets[0];\r\n\t\t\tthis._pFinalizeAsset(this._imageData);\r\n\t\t\tthis._parseState = TextureAtlasParserState.PARSE_SUBTEXTURES;\r\n\t\t} else {\r\n\t\t\tthis._parseState = TextureAtlasParserState.PARSE_COMPLETE;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic _iResolveDependencyFailure(resourceDependency:ResourceDependency)\r\n\t{\r\n\t\tthis._parseState = TextureAtlasParserState.PARSE_COMPLETE;\r\n\t}\r\n\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic _pProceedParsing():boolean\r\n\t{\r\n\t\tvar nodes:NodeList;\r\n\r\n\t\tswitch(this._parseState) {\r\n\t\t\tcase TextureAtlasParserState.PARSE_XML:\r\n\t\t\t\ttry {\r\n\t\t\t\t\tthis._doc = XmlUtils.getChildrenWithTag(XmlUtils.strToXml(this._pGetTextData()), \"TextureAtlas\")[0];\r\n\r\n\t\t\t\t\tthis._imagePath = XmlUtils.readAttributeValue(this._doc, \"imagePath\");\r\n\r\n\t\t\t\t\tthis._subTextureNodes = XmlUtils.getChildrenWithTag(this._doc, \"SubTexture\");\r\n\r\n\t\t\t\t\tthis._parseState = TextureAtlasParserState.PARSE_IMAGE;\r\n\r\n\t\t\t\t} catch(Error) {\r\n\t\t\t\t\treturn ParserBase.PARSING_DONE;\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase TextureAtlasParserState.PARSE_IMAGE:\r\n\t\t\t\tif (this._imagePath){\r\n\t\t\t\t\tthis._pAddDependency(this._imagePath, new URLRequest(this._imagePath));\r\n\t\t\t\t\tthis._pPauseAndRetrieveDependencies();\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn ParserBase.PARSING_DONE;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase TextureAtlasParserState.PARSE_SUBTEXTURES:\r\n\t\t\t\tvar sampler:Sampler2D;\r\n\t\t\t\tvar element:Node;\r\n\t\t\t\tvar x:string;\r\n\t\t\t\tvar y:string;\r\n\t\t\t\tvar width:string;\r\n\t\t\t\tvar height:string;\r\n\t\t\t\tvar len:number = this._subTextureNodes.length;\r\n\t\t\t\tfor (var i:number = 0; i < len; i++) {\r\n\t\t\t\t\telement = this._subTextureNodes[i];\r\n\t\t\t\t\tsampler = new Sampler2D();\r\n\r\n\t\t\t\t\t//setup subtexture rect\r\n\t\t\t\t\tx = XmlUtils.readAttributeValue(element, \"x\");\r\n\t\t\t\t\ty = XmlUtils.readAttributeValue(element, \"y\");\r\n\t\t\t\t\twidth = XmlUtils.readAttributeValue(element, \"width\");\r\n\t\t\t\t\theight = XmlUtils.readAttributeValue(element, \"height\");\r\n\t\t\t\t\tif (x || y || width || height)\r\n\t\t\t\t\t\tsampler.imageRect = new Rectangle(parseInt(x), parseInt(y), parseInt(width), parseInt(height));\r\n\r\n\t\t\t\t\t//setup frame rect\r\n\t\t\t\t\tx = XmlUtils.readAttributeValue(element, \"frameX\");\r\n\t\t\t\t\ty = XmlUtils.readAttributeValue(element, \"frameY\");\r\n\t\t\t\t\twidth = XmlUtils.readAttributeValue(element, \"frameWidth\");\r\n\t\t\t\t\theight = XmlUtils.readAttributeValue(element, \"frameHeight\");\r\n\t\t\t\t\tif (x || y || width || height)\r\n\t\t\t\t\t\tsampler.frameRect = new Rectangle(parseInt(x), parseInt(y), parseInt(width), parseInt(height));\r\n\r\n\t\t\t\t\tthis._pFinalizeAsset(sampler, XmlUtils.readAttributeValue(element, \"name\"));\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis._parseState = TextureAtlasParserState.PARSE_COMPLETE;\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase TextureAtlasParserState.PARSE_COMPLETE:\r\n\t\t\t\treturn ParserBase.PARSING_DONE;\r\n\t\t}\r\n\r\n\t\treturn ParserBase.MORE_TO_PARSE;\r\n\t}\r\n}\r\n\r\nexport = TextureAtlasParser;\r\n\r\nclass TextureAtlasParserState {\r\n\tpublic static PARSE_XML:number = 0;\r\n\tpublic static PARSE_IMAGE:number = 1;\r\n\tpublic static PARSE_SUBTEXTURES:number = 2;\r\n\tpublic static PARSE_COMPLETE:number = 3;\r\n}",
    "import WaveAudio\t\t\t\t= require(\"awayjs-core/lib/data/WaveAudio\");\r\nimport IAsset\t\t\t\t\t= require(\"awayjs-core/lib/library/IAsset\");\r\nimport URLLoaderDataFormat\t\t= require(\"awayjs-core/lib/net/URLLoaderDataFormat\");\r\nimport ParserBase\t\t\t\t= require(\"awayjs-core/lib/parsers/ParserBase\");\r\nimport ParserUtils\t\t\t\t= require(\"awayjs-core/lib/parsers/ParserUtils\");\r\nimport ByteArray\t\t\t\t= require(\"awayjs-core/lib/utils/ByteArray\");\r\n\r\nclass WaveAudioParser extends ParserBase\r\n{\r\n\tconstructor()\r\n\t{\r\n\t\tsuper(URLLoaderDataFormat.BLOB);\r\n\t}\r\n\r\n\tpublic static supportsType(extension:string):boolean\r\n\t{\r\n\r\n\t\textension = extension.toLowerCase();\r\n\t\treturn extension == \"wav\" || extension == \"mp3\" || extension == \"ogg\";\r\n\r\n\t}\r\n\r\n\tpublic static supportsData(data:any):boolean\r\n\t{\r\n\t\tif (!(data instanceof ByteArray))\r\n\t\t\treturn false;\r\n\r\n\t\tvar ba:ByteArray = <ByteArray> data;\r\n\t\tvar filetype : string = WaveAudioParser.parseFileType(ba);\r\n\t\treturn filetype? true : false;\r\n\t}\r\n\r\n\tpublic _pStartParsing(frameLimit:number)\r\n\t{\r\n\t\t//clear content\r\n\t\tdelete this._pContent;\r\n\t\tthis._pContent = null;\r\n\r\n\t\tsuper._pStartParsing(frameLimit);\r\n\t}\r\n\r\n\tpublic _pProceedParsing():boolean\r\n\t{\r\n\t\tif (this.data instanceof ByteArray) { // Parse a ByteArray\r\n\t\t\tthis._pContent = new WaveAudio(this.data.arraybytes);\r\n\t\t\tthis._pFinalizeAsset(this._pContent, this._iFileName);\r\n\t\t} else if (this.data instanceof ArrayBuffer) {// Parse an ArrayBuffer\r\n\t\t\tthis._pContent = new WaveAudio(this.data);\r\n\t\t\tthis._pFinalizeAsset(this._pContent, this._iFileName);\r\n\t\t}\r\n\r\n\t\treturn ParserBase.PARSING_DONE;\r\n\r\n\t}\r\n\r\n\tprivate static parseFileType(ba:ByteArray):string\r\n\t{\r\n\t\tba.position = 0;\r\n\r\n\t\tba.position = 0;\r\n\t\tif (ba.readUnsignedShort() & 0xFFE0) {\r\n\t\t\treturn 'mp3'; // test for MP3 syncword\r\n\t\t}\r\n\r\n\t\tba.position = 0;\r\n\t\tif (ba.readUTFBytes(4) == 'RIFF')\r\n\t\t\treturn 'wav';\r\n\r\n\t\tba.position = 0;\r\n\t\tif (ba.readUTFBytes(4) == 'OggS')\r\n\t\t\treturn 'ogg';\r\n\r\n\t\tba.position = 0;\r\n\r\n\t\treturn null;\r\n\t}\r\n}\r\n\r\nexport = WaveAudioParser;",
    "/**\r\n * Provides constant values for camera lens projection options use the the <code>coordinateSystem</code> property\r\n *\r\n * @see away.projections.PerspectiveLens#coordinateSystem\r\n */\r\nclass CoordinateSystem\r\n{\r\n\t/**\r\n\t * Default option, projects to a left-handed coordinate system\r\n\t */\r\n\tpublic static LEFT_HANDED:string = \"leftHanded\";\r\n\r\n\t/**\r\n\t * Projects to a right-handed coordinate system\r\n\t */\r\n\tpublic static RIGHT_HANDED:string = \"rightHanded\";\r\n}\r\n\r\nexport = CoordinateSystem;",
    "import PerspectiveProjection\t= require(\"awayjs-core/lib/projections/PerspectiveProjection\");\r\nimport ProjectionBase\t\t\t= require(\"awayjs-core/lib/projections/ProjectionBase\");\r\n\r\nclass FreeMatrixProjection extends ProjectionBase\r\n{\r\n\tconstructor()\r\n\t{\r\n\t\tsuper();\r\n\r\n\t\tthis._pMatrix.copyFrom(new PerspectiveProjection().matrix);\r\n\t}\r\n\r\n\t//@override\r\n\tpublic set near(value:number)\r\n\t{\r\n\t\tthis._pNear = value;\r\n\t}\r\n\r\n\t//@override\r\n\tpublic set far(value:number)\r\n\t{\r\n\t\tthis._pFar = value;\r\n\t}\r\n\r\n\t//@override\r\n\tpublic set iAspectRatio(value:number)\r\n\t{\r\n\t\tthis._pAspectRatio = value;\r\n\t}\r\n\r\n\t//@override\r\n\tpublic clone():ProjectionBase\r\n\t{\r\n\t\tvar clone:FreeMatrixProjection = new FreeMatrixProjection();\r\n\t\tclone._pMatrix.copyFrom(this._pMatrix);\r\n\t\tclone._pNear = this._pNear;\r\n\t\tclone._pFar = this._pFar;\r\n\t\tclone._pAspectRatio = this._pAspectRatio;\r\n\t\tclone.pInvalidateMatrix();\r\n\t\treturn clone;\r\n\t}\r\n\r\n\t//@override\r\n\tpublic pUpdateMatrix()\r\n\t{\r\n\t\tthis._pMatrixInvalid = false;\r\n\t}\r\n}\r\n\r\nexport = FreeMatrixProjection;",
    "import Matrix3D\t\t\t\t\t= require(\"awayjs-core/lib/geom/Matrix3D\");\r\nimport Plane3D\t\t\t\t\t= require(\"awayjs-core/lib/geom/Plane3D\");\r\nimport Vector3D\t\t\t\t\t= require(\"awayjs-core/lib/geom/Vector3D\");\r\nimport ProjectionEvent\t\t\t= require(\"awayjs-core/lib/events/ProjectionEvent\");\r\nimport IProjection\t\t\t\t= require(\"awayjs-core/lib/projections/IProjection\");\r\nimport ProjectionBase\t\t\t= require(\"awayjs-core/lib/projections/ProjectionBase\");\r\n\r\nclass ObliqueNearPlaneProjection extends ProjectionBase\r\n{\r\n\r\n\tprivate _baseProjection:IProjection;\r\n\tprivate _plane:Plane3D;\r\n\tprivate _onProjectionMatrixChangedDelegate:(event:ProjectionEvent) => void;\r\n\r\n\tconstructor(baseProjection:IProjection, plane:Plane3D)\r\n\t{\r\n\t\tsuper();\r\n\t\tthis.baseProjection = baseProjection;\r\n\t\tthis.plane = plane;\r\n\r\n\t\tthis._onProjectionMatrixChangedDelegate = (event:ProjectionEvent) => this.onProjectionMatrixChanged(event);\r\n\t}\r\n\r\n\t//@override\r\n\tpublic get frustumCorners():number[]\r\n\t{\r\n\t\treturn this._baseProjection.frustumCorners;\r\n\t}\r\n\r\n\t//@override\r\n\tpublic get near():number\r\n\t{\r\n\t\treturn this._baseProjection.near;\r\n\t}\r\n\r\n\t//@override\r\n\tpublic set near(value:number)\r\n\t{\r\n\t\tthis._baseProjection.near = value;\r\n\t}\r\n\r\n\t//@override\r\n\tpublic get far():number\r\n\t{\r\n\t\treturn this._baseProjection.far;\r\n\t}\r\n\r\n\t//@override\r\n\tpublic set far(value:number)\r\n\t{\r\n\t\tthis._baseProjection.far = value;\r\n\t}\r\n\r\n\t//@override\r\n\tpublic get iAspectRatio():number\r\n\t{\r\n\t\treturn this._baseProjection._iAspectRatio;\r\n\t}\r\n\r\n\t//@override\r\n\tpublic set iAspectRatio(value:number)\r\n\t{\r\n\t\tthis._baseProjection._iAspectRatio = value;\r\n\t}\r\n\r\n\tpublic get plane():Plane3D\r\n\t{\r\n\t\treturn this._plane;\r\n\t}\r\n\r\n\tpublic set plane(value:Plane3D)\r\n\t{\r\n\t\tthis._plane = value;\r\n\t\tthis.pInvalidateMatrix();\r\n\t}\r\n\r\n\tpublic set baseProjection(value:IProjection)\r\n\t{\r\n\t\tif (this._baseProjection) {\r\n\t\t\tthis._baseProjection.removeEventListener(ProjectionEvent.MATRIX_CHANGED, this._onProjectionMatrixChangedDelegate);\r\n\t\t}\r\n\t\tthis._baseProjection = value;\r\n\r\n\t\tif (this._baseProjection) {\r\n\t\t\tthis._baseProjection.addEventListener(ProjectionEvent.MATRIX_CHANGED, this._onProjectionMatrixChangedDelegate);\r\n\t\t}\r\n\t\tthis.pInvalidateMatrix();\r\n\t}\r\n\r\n\tprivate onProjectionMatrixChanged(event:ProjectionEvent)\r\n\t{\r\n\t\tthis.pInvalidateMatrix();\r\n\t}\r\n\r\n\t//@override\r\n\tpublic pUpdateMatrix()\r\n\t{\r\n\t\tthis._pMatrix.copyFrom(this._baseProjection.matrix);\r\n\r\n\t\tvar cx:number = this._plane.a;\r\n\t\tvar cy:number = this._plane.b;\r\n\t\tvar cz:number = this._plane.c;\r\n\t\tvar cw:number = -this._plane.d + .05;\r\n\t\tvar signX:number = cx >= 0? 1 : -1;\r\n\t\tvar signY:number = cy >= 0? 1 : -1;\r\n\t\tvar p:Vector3D = new Vector3D(signX, signY, 1, 1);\r\n\t\tvar inverse:Matrix3D = this._pMatrix.clone();\r\n\t\tinverse.invert();\r\n\t\tvar q:Vector3D = inverse.transformVector(p);\r\n\t\tthis._pMatrix.copyRowTo(3, p);\r\n\t\tvar a:number = (q.x*p.x + q.y*p.y + q.z*p.z + q.w*p.w)/(cx*q.x + cy*q.y + cz*q.z + cw*q.w);\r\n\t\tthis._pMatrix.copyRowFrom(2, new Vector3D(cx*a, cy*a, cz*a, cw*a));\r\n\t}\r\n}\r\n\r\nexport = ObliqueNearPlaneProjection;",
    "import Matrix3DUtils\t\t\t= require(\"awayjs-core/lib/geom/Matrix3DUtils\");\r\nimport Vector3D\t\t\t\t\t= require(\"awayjs-core/lib/geom/Vector3D\");\r\nimport ProjectionBase\t\t\t= require(\"awayjs-core/lib/projections/ProjectionBase\");\r\n\r\nclass OrthographicOffCenterProjection extends ProjectionBase\r\n{\r\n\r\n\tprivate _minX:number;\r\n\tprivate _maxX:number;\r\n\tprivate _minY:number;\r\n\tprivate _maxY:number;\r\n\r\n\tconstructor(minX:number, maxX:number, minY:number, maxY:number)\r\n\t{\r\n\t\tsuper();\r\n\t\tthis._minX = minX;\r\n\t\tthis._maxX = maxX;\r\n\t\tthis._minY = minY;\r\n\t\tthis._maxY = maxY;\r\n\t}\r\n\r\n\tpublic get minX():number\r\n\t{\r\n\t\treturn this._minX;\r\n\t}\r\n\r\n\tpublic set minX(value:number)\r\n\t{\r\n\t\tthis._minX = value;\r\n\t\tthis.pInvalidateMatrix();\r\n\t}\r\n\r\n\tpublic get maxX():number\r\n\t{\r\n\t\treturn this._maxX;\r\n\t}\r\n\r\n\tpublic set maxX(value:number)\r\n\t{\r\n\t\tthis._maxX = value;\r\n\t\tthis.pInvalidateMatrix();\r\n\t}\r\n\r\n\tpublic get minY():number\r\n\t{\r\n\t\treturn this._minY;\r\n\t}\r\n\r\n\tpublic set minY(value:number)\r\n\t{\r\n\t\tthis._minY = value;\r\n\t\tthis.pInvalidateMatrix();\r\n\t}\r\n\r\n\tpublic get maxY():number\r\n\t{\r\n\t\treturn this._maxY;\r\n\t}\r\n\r\n\tpublic set maxY(value:number)\r\n\t{\r\n\t\tthis._maxY = value;\r\n\t\tthis.pInvalidateMatrix();\r\n\t}\r\n\r\n\t//@override\r\n\tpublic unproject(nX:number, nY:number, sZ:number):Vector3D\r\n\t{\r\n\t\tvar v:Vector3D = new Vector3D(nX, -nY, sZ, 1.0);\r\n\t\tv = this.unprojectionMatrix.transformVector(v);\r\n\t\t//z is unaffected by transform\r\n\t\tv.z = sZ;\r\n\r\n\t\treturn v;\r\n\t}\r\n\r\n\t//@override\r\n\tpublic clone():ProjectionBase\r\n\t{\r\n\t\tvar clone:OrthographicOffCenterProjection = new OrthographicOffCenterProjection(this._minX, this._maxX, this._minY, this._maxY);\r\n\t\tclone._pNear = this._pNear;\r\n\t\tclone._pFar = this._pFar;\r\n\t\tclone._pAspectRatio = this._pAspectRatio;\r\n\t\treturn clone;\r\n\t}\r\n\r\n\t//@override\r\n\tpublic pUpdateMatrix()\r\n\t{\r\n\t\tvar raw:Float32Array = Matrix3DUtils.RAW_DATA_CONTAINER;\r\n\t\tvar w:number = 1/(this._maxX - this._minX);\r\n\t\tvar h:number = 1/(this._maxY - this._minY);\r\n\t\tvar d:number = 1/(this._pFar - this._pNear);\r\n\r\n\t\traw[0] = 2*w;\r\n\t\traw[5] = 2*h;\r\n\t\traw[10] = d;\r\n\t\traw[12] = -(this._maxX + this._minX)*w;\r\n\t\traw[13] = -(this._maxY + this._minY)*h;\r\n\t\traw[14] = -this._pNear*d;\r\n\t\traw[15] = 1;\r\n\t\traw[1] = raw[2] = raw[3] = raw[4] = raw[6] = raw[7] = raw[8] = raw[9] = raw[11] = 0;\r\n\t\tthis._pMatrix.copyRawDataFrom(raw);\r\n\r\n\t\tthis._pFrustumCorners[0] = this._pFrustumCorners[9] = this._pFrustumCorners[12] = this._pFrustumCorners[21] = this._minX;\r\n\t\tthis._pFrustumCorners[3] = this._pFrustumCorners[6] = this._pFrustumCorners[15] = this._pFrustumCorners[18] = this._maxX;\r\n\t\tthis._pFrustumCorners[1] = this._pFrustumCorners[4] = this._pFrustumCorners[13] = this._pFrustumCorners[16] = this._minY;\r\n\t\tthis._pFrustumCorners[7] = this._pFrustumCorners[10] = this._pFrustumCorners[19] = this._pFrustumCorners[22] = this._maxY;\r\n\t\tthis._pFrustumCorners[2] = this._pFrustumCorners[5] = this._pFrustumCorners[8] = this._pFrustumCorners[11] = this._pNear;\r\n\t\tthis._pFrustumCorners[14] = this._pFrustumCorners[17] = this._pFrustumCorners[20] = this._pFrustumCorners[23] = this._pFar;\r\n\r\n\t\tthis._pMatrixInvalid = false;\r\n\t}\r\n}\r\n\r\nexport = OrthographicOffCenterProjection;",
    "import Matrix3DUtils\t\t\t= require(\"awayjs-core/lib/geom/Matrix3DUtils\");\r\nimport Vector3D\t\t\t\t\t= require(\"awayjs-core/lib/geom/Vector3D\");\r\nimport ProjectionBase\t\t\t= require(\"awayjs-core/lib/projections/ProjectionBase\");\r\n\r\nclass OrthographicProjection extends ProjectionBase\r\n{\r\n\r\n\tprivate _projectionHeight:number;\r\n\tprivate _xMax:number;\r\n\tprivate _yMax:number;\r\n\r\n\tconstructor(projectionHeight:number = 500)\r\n\t{\r\n\t\tsuper();\r\n\t\tthis._projectionHeight = projectionHeight;\r\n\t}\r\n\r\n\tpublic get projectionHeight():number\r\n\t{\r\n\t\treturn this._projectionHeight;\r\n\t}\r\n\r\n\tpublic set projectionHeight(value:number)\r\n\t{\r\n\t\tif (value == this._projectionHeight) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis._projectionHeight = value;\r\n\t\tthis.pInvalidateMatrix();\r\n\t}\r\n\r\n\t//@override\r\n\tpublic unproject(nX:number, nY:number, sZ:number):Vector3D\r\n\t{\r\n\t\tvar v:Vector3D = new Vector3D(nX + this.matrix.rawData[12], -nY + this.matrix.rawData[13], sZ, 1.0);\r\n\t\tv = this.unprojectionMatrix.transformVector(v);\r\n\r\n\t\t//z is unaffected by transform\r\n\t\tv.z = sZ;\r\n\r\n\t\treturn v;\r\n\t}\r\n\r\n\t//@override\r\n\tpublic clone():ProjectionBase\r\n\t{\r\n\t\tvar clone:OrthographicProjection = new OrthographicProjection();\r\n\t\tclone._pNear = this._pNear;\r\n\t\tclone._pFar = this._pFar;\r\n\t\tclone._pAspectRatio = this._pAspectRatio;\r\n\t\tclone.projectionHeight = this._projectionHeight;\r\n\t\treturn clone;\r\n\t}\r\n\r\n\t//@override\r\n\tpublic pUpdateMatrix()\r\n\t{\r\n\t\tvar raw:Float32Array = Matrix3DUtils.RAW_DATA_CONTAINER;\r\n\t\tthis._yMax = this._projectionHeight*.5;\r\n\t\tthis._xMax = this._yMax*this._pAspectRatio;\r\n\r\n\t\tvar left:number;\r\n\t\tvar right:number;\r\n\t\tvar top:number;\r\n\t\tvar bottom:number;\r\n\r\n\t\tif (this._pScissorRect.x == 0 && this._pScissorRect.y == 0 && this._pScissorRect.width == this._pViewPort.width && this._pScissorRect.height == this._pViewPort.height) {\r\n\t\t\t// assume symmetric frustum\r\n\r\n\t\t\tleft = -this._xMax;\r\n\t\t\tright = this._xMax;\r\n\t\t\ttop = -this._yMax;\r\n\t\t\tbottom = this._yMax;\r\n\r\n\t\t\traw[0] = 2/(this._projectionHeight*this._pAspectRatio);\r\n\t\t\traw[5] = 2/this._projectionHeight;\r\n\t\t\traw[10] = 1/(this._pFar - this._pNear);\r\n\t\t\traw[14] = this._pNear/(this._pNear - this._pFar);\r\n\t\t\traw[1] = raw[2] = raw[3] = raw[4] = raw[6] = raw[7] = raw[8] = raw[9] = raw[11] = raw[12] = raw[13] = 0;\r\n\t\t\traw[15] = 1;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tvar xWidth:number = this._xMax*(this._pViewPort.width/this._pScissorRect.width);\r\n\t\t\tvar yHgt:number = this._yMax*(this._pViewPort.height/this._pScissorRect.height);\r\n\t\t\tvar center:number = this._xMax*(this._pScissorRect.x*2 - this._pViewPort.width)/this._pScissorRect.width + this._xMax;\r\n\t\t\tvar middle:number = -this._yMax*(this._pScissorRect.y*2 - this._pViewPort.height)/this._pScissorRect.height - this._yMax;\r\n\r\n\t\t\tleft = center - xWidth;\r\n\t\t\tright = center + xWidth;\r\n\t\t\ttop = middle - yHgt;\r\n\t\t\tbottom = middle + yHgt;\r\n\r\n\t\t\traw[0] = 2*1/(right - left);\r\n\t\t\traw[5] = -2*1/(top - bottom);\r\n\t\t\traw[10] = 1/(this._pFar - this._pNear);\r\n\r\n\t\t\traw[12] = (right + left)/(right - left);\r\n\t\t\traw[13] = (bottom + top)/(bottom - top);\r\n\t\t\traw[14] = this._pNear/(this.near - this.far);\r\n\r\n\t\t\traw[1] = raw[2] = raw[3] = raw[4] = raw[6] = raw[7] = raw[8] = raw[9] = raw[11] = 0;\r\n\t\t\traw[15] = 1;\r\n\t\t}\r\n\r\n\t\tthis._pFrustumCorners[0] = this._pFrustumCorners[9] = this._pFrustumCorners[12] = this._pFrustumCorners[21] = left;\r\n\t\tthis._pFrustumCorners[3] = this._pFrustumCorners[6] = this._pFrustumCorners[15] = this._pFrustumCorners[18] = right;\r\n\t\tthis._pFrustumCorners[1] = this._pFrustumCorners[4] = this._pFrustumCorners[13] = this._pFrustumCorners[16] = top;\r\n\t\tthis._pFrustumCorners[7] = this._pFrustumCorners[10] = this._pFrustumCorners[19] = this._pFrustumCorners[22] = bottom;\r\n\t\tthis._pFrustumCorners[2] = this._pFrustumCorners[5] = this._pFrustumCorners[8] = this._pFrustumCorners[11] = this._pNear;\r\n\t\tthis._pFrustumCorners[14] = this._pFrustumCorners[17] = this._pFrustumCorners[20] = this._pFrustumCorners[23] = this._pFar;\r\n\r\n\t\tthis._pMatrix.copyRawDataFrom(raw);\r\n\r\n\t\tthis._pMatrixInvalid = false;\r\n\t}\r\n}\r\n\r\nexport= OrthographicProjection;",
    "import Matrix3DUtils\t\t\t= require(\"awayjs-core/lib/geom/Matrix3DUtils\");\r\nimport Vector3D\t\t\t\t\t= require(\"awayjs-core/lib/geom/Vector3D\");\r\nimport CoordinateSystem\t\t\t= require(\"awayjs-core/lib/projections/CoordinateSystem\");\r\nimport ProjectionBase\t\t\t= require(\"awayjs-core/lib/projections/ProjectionBase\");\r\n\r\nclass PerspectiveProjection extends ProjectionBase\r\n{\r\n\tprivate _fieldOfView:number = 60;\r\n\tprivate _focalLength:number = 1000;\r\n\tprivate _hFieldOfView:number = 60;\r\n\tprivate _hFocalLength:number = 1000;\r\n\tprivate _preserveAspectRatio:boolean = true;\r\n\tprivate _preserveFocalLength:boolean = false;\r\n\r\n\tconstructor(fieldOfView:number = 60, coordinateSystem:string = \"leftHanded\")\r\n\t{\r\n\t\tsuper(coordinateSystem);\r\n\t\tthis.fieldOfView = fieldOfView;\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tpublic get preserveAspectRatio():boolean\r\n\t{\r\n\t\treturn this._preserveAspectRatio;\r\n\t}\r\n\r\n\tpublic set preserveAspectRatio(value:boolean)\r\n\t{\r\n\t\tif (this._preserveAspectRatio == value)\r\n\t\t\treturn;\r\n\r\n\t\tthis._preserveAspectRatio = value;\r\n\r\n\t\tif (this._preserveAspectRatio)\r\n\t\t\tthis.pInvalidateMatrix();\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tpublic get preserveFocalLength():boolean\r\n\t{\r\n\t\treturn this._preserveFocalLength;\r\n\t}\r\n\r\n\tpublic set preserveFocalLength(value:boolean)\r\n\t{\r\n\t\tif (this._preserveFocalLength == value)\r\n\t\t\treturn;\r\n\r\n\t\tthis._preserveFocalLength = value;\r\n\r\n\t\tthis.pInvalidateMatrix();\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tpublic get fieldOfView():number\r\n\t{\r\n\t\treturn this._fieldOfView;\r\n\t}\r\n\r\n\tpublic set fieldOfView(value:number)\r\n\t{\r\n\t\tif (this._fieldOfView == value)\r\n\t\t\treturn;\r\n\r\n\t\tthis._fieldOfView = value;\r\n\r\n\t\tthis.pInvalidateMatrix();\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tpublic get focalLength():number\r\n\t{\r\n\t\treturn this._focalLength;\r\n\t}\r\n\r\n\tpublic set focalLength(value:number)\r\n\t{\r\n\t\tif (this._focalLength == value)\r\n\t\t\treturn;\r\n\r\n\t\tthis._focalLength = value;\r\n\r\n\t\tthis.pInvalidateMatrix();\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tpublic get hFieldOfView():number\r\n\t{\r\n\t\treturn this._hFieldOfView;\r\n\t}\r\n\r\n\tpublic set hFieldOfView(value:number)\r\n\t{\r\n\t\tif (this._hFieldOfView == value)\r\n\t\t\treturn;\r\n\r\n\t\tthis._hFieldOfView = value;\r\n\r\n\t\tthis._hFocalLength = 1/Math.tan(this._hFieldOfView*Math.PI/360);\r\n\r\n\t\tthis.pInvalidateMatrix();\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tpublic get hFocalLength():number\r\n\t{\r\n\t\treturn this._hFocalLength;\r\n\t}\r\n\r\n\tpublic set hFocalLength(value:number)\r\n\t{\r\n\t\tif (this._hFocalLength == value)\r\n\t\t\treturn;\r\n\r\n\t\tthis._hFocalLength = value;\r\n\r\n\t\tthis.pInvalidateMatrix();\r\n\t}\r\n\r\n\r\n\t//@override\r\n\tpublic unproject(nX:number, nY:number, sZ:number):Vector3D\r\n\t{\r\n\t\tvar v:Vector3D = new Vector3D(nX, -nY, sZ, 1.0);\r\n\r\n\t\tv.x *= sZ;\r\n\t\tv.y *= sZ;\r\n\r\n\t\tv = this.unprojectionMatrix.transformVector(v);\r\n\r\n\t\t//z is unaffected by transform\r\n\t\tv.z = sZ;\r\n\r\n\t\treturn v;\r\n\t}\r\n\r\n\t//@override\r\n\tpublic clone():ProjectionBase\r\n\t{\r\n\t\tvar clone:PerspectiveProjection = new PerspectiveProjection(this._fieldOfView);\r\n\t\tclone._pNear = this._pNear;\r\n\t\tclone._pFar = this._pFar;\r\n\t\tclone._pAspectRatio = this._pAspectRatio;\r\n\t\tclone._pCoordinateSystem = this._pCoordinateSystem;\r\n\t\treturn clone;\r\n\t}\r\n\r\n\t//@override\r\n\tpublic pUpdateMatrix()\r\n\t{\r\n\t\tvar raw:Float32Array = Matrix3DUtils.RAW_DATA_CONTAINER;\r\n\r\n\t\tif (this._preserveFocalLength) {\r\n\t\t\tif (this._preserveAspectRatio)\r\n\t\t\t\tthis._hFocalLength = this._focalLength;\r\n\r\n\t\t\tthis._fieldOfView = Math.atan(0.5*this._pScissorRect.height/this._focalLength)*360/Math.PI;\r\n\t\t\tthis._hFieldOfView = Math.atan(0.5*this._pScissorRect.width/this._hFocalLength)*360/Math.PI;\r\n\t\t} else {\r\n\t\t\tthis._focalLength = 0.5*this._pScissorRect.height/Math.tan(this._fieldOfView*Math.PI/360);\r\n\r\n\t\t\tif (this._preserveAspectRatio)\r\n\t\t\t\tthis._hFocalLength = this._focalLength;\r\n\t\t\telse\r\n\t\t\t\tthis._hFocalLength = 0.5*this._pScissorRect.width/Math.tan(this._hFieldOfView*Math.PI/360);\r\n\t\t}\r\n\r\n\t\tvar tanMinX = -this._pOriginX/this._hFocalLength;\r\n\t\tvar tanMaxX = (1 - this._pOriginX)/this._hFocalLength;\r\n\t\tvar tanMinY = -this._pOriginY/this._focalLength;\r\n\t\tvar tanMaxY = (1 - this._pOriginY)/this._focalLength;\r\n\r\n\t\tvar left:number;\r\n\t\tvar right:number;\r\n\t\tvar top:number;\r\n\t\tvar bottom:number;\r\n\r\n\t\t// assume scissored frustum\r\n\t\tvar center:number = -((tanMinX - tanMaxX)*this._pScissorRect.x + tanMinX*this._pScissorRect.width);\r\n\t\tvar middle:number = ((tanMinY - tanMaxY)*this._pScissorRect.y + tanMinY*this._pScissorRect.height);\r\n\r\n\t\tleft = center - (tanMaxX - tanMinX)*this._pViewPort.width;\r\n\t\tright = center;\r\n\t\ttop = middle;\r\n\t\tbottom = middle + (tanMaxY - tanMinY)*this._pViewPort.height;\r\n\r\n\t\traw[0] = 2/(right - left);\r\n\t\traw[5] = 2/(bottom - top);\r\n\t\traw[8] = (right + left)/(right - left);\r\n\t\traw[9] = (bottom + top)/(bottom - top);\r\n\t\traw[10] = (this._pFar + this._pNear)/(this._pFar - this._pNear);\r\n\t\traw[11] = 1;\r\n\t\traw[1] = raw[2] = raw[3] = raw[4] = raw[6] = raw[7] = raw[12] = raw[13] = raw[15] = 0;\r\n\t\traw[14] = -2*this._pFar*this._pNear/(this._pFar - this._pNear);\r\n\r\n\t\tif (this._pCoordinateSystem == CoordinateSystem.RIGHT_HANDED)\r\n\t\t\traw[5] = -raw[5];\r\n\r\n\t\tthis._pMatrix.copyRawDataFrom(raw);\r\n\r\n\t\tthis._pFrustumCorners[0] = this._pFrustumCorners[9] = this._pNear*left;\r\n\t\tthis._pFrustumCorners[3] = this._pFrustumCorners[6] = this._pNear*right;\r\n\t\tthis._pFrustumCorners[1] = this._pFrustumCorners[4] = this._pNear*top;\r\n\t\tthis._pFrustumCorners[7] = this._pFrustumCorners[10] = this._pNear*bottom;\r\n\r\n\t\tthis._pFrustumCorners[12] = this._pFrustumCorners[21] = this._pFar*left;\r\n\t\tthis._pFrustumCorners[15] = this._pFrustumCorners[18] = this._pFar*right;\r\n\t\tthis._pFrustumCorners[13] = this._pFrustumCorners[16] = this._pFar*top;\r\n\t\tthis._pFrustumCorners[19] = this._pFrustumCorners[22] = this._pFar*bottom;\r\n\r\n\t\tthis._pFrustumCorners[2] = this._pFrustumCorners[5] = this._pFrustumCorners[8] = this._pFrustumCorners[11] = this._pNear;\r\n\t\tthis._pFrustumCorners[14] = this._pFrustumCorners[17] = this._pFrustumCorners[20] = this._pFrustumCorners[23] = this._pFar;\r\n\r\n\t\tthis._pMatrixInvalid = false;\r\n\r\n\r\n\t}\r\n}\r\n\r\nexport = PerspectiveProjection;",
    "import Matrix3D\t\t\t\t\t= require(\"awayjs-core/lib/geom/Matrix3D\");\r\nimport Rectangle\t\t\t\t= require(\"awayjs-core/lib/geom/Rectangle\");\r\nimport Vector3D\t\t\t\t\t= require(\"awayjs-core/lib/geom/Vector3D\");\r\nimport EventDispatcher\t\t\t= require(\"awayjs-core/lib/events/EventDispatcher\");\r\nimport ProjectionEvent\t\t\t= require(\"awayjs-core/lib/events/ProjectionEvent\");\r\nimport AbstractMethodError\t\t= require(\"awayjs-core/lib/errors/AbstractMethodError\");\r\nimport IProjection\t\t\t\t= require(\"awayjs-core/lib/projections/IProjection\");\r\n\r\nclass ProjectionBase extends EventDispatcher implements IProjection\r\n{\r\n\tpublic _pMatrix:Matrix3D = new Matrix3D();\r\n\tpublic _pScissorRect:Rectangle = new Rectangle();\r\n\tpublic _pViewPort:Rectangle = new Rectangle();\r\n\tpublic _pNear:number = 20;\r\n\tpublic _pFar:number = 3000;\r\n\tpublic _pAspectRatio:number = 1;\r\n\r\n\tpublic _pMatrixInvalid:boolean = true;\r\n\tpublic _pFrustumCorners:number[] = [];\r\n\tpublic _pCoordinateSystem:string;\r\n\tpublic _pOriginX:number = 0.5;\r\n\tpublic _pOriginY:number = 0.5;\r\n\r\n\tprivate _unprojection:Matrix3D;\r\n\tprivate _unprojectionInvalid:boolean = true;\r\n\r\n\tconstructor(coordinateSystem:string = \"leftHanded\")\r\n\t{\r\n\t\tsuper();\r\n\r\n\t\tthis.coordinateSystem = coordinateSystem;\r\n\t}\r\n\r\n\t/**\r\n\t * The handedness of the coordinate system projection. The default is LEFT_HANDED.\r\n\t */\r\n\tpublic get coordinateSystem():string\r\n\t{\r\n\t\treturn this._pCoordinateSystem;\r\n\t}\r\n\r\n\tpublic set coordinateSystem(value:string)\r\n\t{\r\n\t\tif (this._pCoordinateSystem == value)\r\n\t\t\treturn;\r\n\r\n\t\tthis._pCoordinateSystem = value;\r\n\r\n\t\tthis.pInvalidateMatrix();\r\n\t}\r\n\r\n\tpublic get frustumCorners():number[]\r\n\t{\r\n\t\treturn this._pFrustumCorners;\r\n\t}\r\n\r\n\tpublic set frustumCorners(frustumCorners:number[])\r\n\t{\r\n\t\tthis._pFrustumCorners = frustumCorners;\r\n\t}\r\n\r\n\tpublic get matrix():Matrix3D\r\n\t{\r\n\t\tif (this._pMatrixInvalid) {\r\n\t\t\tthis.pUpdateMatrix();\r\n\t\t\tthis._pMatrixInvalid = false;\r\n\t\t}\r\n\t\treturn this._pMatrix;\r\n\t}\r\n\r\n\tpublic set matrix(value:Matrix3D)\r\n\t{\r\n\t\tthis._pMatrix = value;\r\n\t\tthis.pInvalidateMatrix();\r\n\t}\r\n\r\n\tpublic get near():number\r\n\t{\r\n\t\treturn this._pNear;\r\n\t}\r\n\r\n\tpublic set near(value:number)\r\n\t{\r\n\t\tif (value == this._pNear) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis._pNear = value;\r\n\t\tthis.pInvalidateMatrix();\r\n\t}\r\n\r\n\tpublic get originX():number\r\n\t{\r\n\t\treturn this._pOriginX;\r\n\t}\r\n\r\n\tpublic set originX(value:number)\r\n\t{\r\n\t\tif (this._pOriginX == value)\r\n\t\t\treturn;\r\n\r\n\t\tthis._pOriginX = value;\r\n\t}\r\n\r\n\tpublic get originY():number\r\n\t{\r\n\t\treturn this._pOriginY;\r\n\t}\r\n\r\n\tpublic set originY(value:number)\r\n\t{\r\n\t\tif (this._pOriginY == value)\r\n\t\t\treturn;\r\n\r\n\t\tthis._pOriginY = value;\r\n\t}\r\n\r\n\tpublic get far():number\r\n\t{\r\n\t\treturn this._pFar;\r\n\t}\r\n\r\n\tpublic set far(value:number)\r\n\t{\r\n\t\tif (value == this._pFar) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis._pFar = value;\r\n\t\tthis.pInvalidateMatrix();\r\n\t}\r\n\r\n\tpublic project(point3d:Vector3D):Vector3D\r\n\t{\r\n\t\tvar v:Vector3D = this.matrix.transformVector(point3d);\r\n\t\tv.x = v.x/v.w;\r\n\t\tv.y = -v.y/v.w;\r\n\r\n\t\t//z is unaffected by transform\r\n\t\tv.z = point3d.z;\r\n\r\n\t\treturn v;\r\n\t}\r\n\r\n\tpublic get unprojectionMatrix():Matrix3D\r\n\t{\r\n\t\tif (this._unprojectionInvalid) {\r\n\t\t\tif (!this._unprojection)\r\n\t\t\t\tthis._unprojection = new Matrix3D();\r\n\r\n\t\t\tthis._unprojection.copyFrom(this.matrix);\r\n\t\t\tthis._unprojection.invert();\r\n\t\t\tthis._unprojectionInvalid = false;\r\n\t\t}\r\n\t\treturn this._unprojection;\r\n\t}\r\n\r\n\tpublic unproject(nX:number, nY:number, sZ:number):Vector3D\r\n\t{\r\n\t\tthrow new AbstractMethodError();\r\n\t}\r\n\r\n\tpublic clone():ProjectionBase\r\n\t{\r\n\t\tthrow new AbstractMethodError();\r\n\t}\r\n\r\n\tpublic get _iAspectRatio():number\r\n\t{\r\n\t\treturn this._pAspectRatio;\r\n\t}\r\n\r\n\tpublic set _iAspectRatio(value:number)\r\n\t{\r\n\t\tif (this._pAspectRatio == value)\r\n\t\t\treturn;\r\n\r\n\t\tthis._pAspectRatio = value;\r\n\r\n\t\tthis.pInvalidateMatrix();\r\n\t}\r\n\r\n\tpublic pInvalidateMatrix()\r\n\t{\r\n\t\tthis._pMatrixInvalid = true;\r\n\t\tthis._unprojectionInvalid = true;\r\n\t\tthis.dispatchEvent(new ProjectionEvent(ProjectionEvent.MATRIX_CHANGED, this));\r\n\t}\r\n\r\n\tpublic pUpdateMatrix()\r\n\t{\r\n\t\tthrow new AbstractMethodError();\r\n\t}\r\n\r\n\tpublic _iUpdateScissorRect(x:number, y:number, width:number, height:number)\r\n\t{\r\n\t\tthis._pScissorRect.x = x;\r\n\t\tthis._pScissorRect.y = y;\r\n\t\tthis._pScissorRect.width = width;\r\n\t\tthis._pScissorRect.height = height;\r\n\t\tthis.pInvalidateMatrix();\r\n\t}\r\n\r\n\tpublic _iUpdateViewport(x:number, y:number, width:number, height:number)\r\n\t{\r\n\t\tthis._pViewPort.x = x;\r\n\t\tthis._pViewPort.y = y;\r\n\t\tthis._pViewPort.width = width;\r\n\t\tthis._pViewPort.height = height;\r\n\t\tthis.pInvalidateMatrix();\r\n\t}\r\n}\r\n\r\nexport = ProjectionBase;",
    "class Keyboard\r\n{\r\n\t/**\r\n\t * Constant associated with the key code value for the A key (65).\r\n\t */\r\n\tpublic static A:number /*uint*/ = 65;\r\n\r\n\t/**\r\n\t * Constant associated with the key code value for the Alternate (Option) key  (18).\r\n\t */\r\n\tpublic static ALTERNATE:number /*uint*/ = 18;\r\n\r\n\t/**\r\n\t * Select the audio mode\r\n\t */\r\n\tpublic static AUDIO:number /*uint*/ = 0x01000017;\r\n\r\n\t/**\r\n\t * Constant associated with the key code value for the B key (66).\r\n\t */\r\n\tpublic static B:number /*uint*/ = 66;\r\n\r\n\t/**\r\n\t * Return to previous page in application\r\n\t */\r\n\tpublic static BACK:number /*uint*/ = 0x01000016;\r\n\r\n\t/**\r\n\t * Constant associated with the key code value for the ` key (192).\r\n\t */\r\n\tpublic static BACKQUOTE:number /*uint*/ = 192;\r\n\r\n\t/**\r\n\t * Constant associated with the key code value for the \\ key (220).\r\n\t */\r\n\tpublic static BACKSLASH:number /*uint*/ = 220;\r\n\r\n\t/**\r\n\t * Constant associated with the key code value for the Backspace key (8).\r\n\t */\r\n\tpublic static BACKSPACE:number /*uint*/ = 8;\r\n\r\n\t/**\r\n\t * Blue function key button\r\n\t */\r\n\tpublic static BLUE:number /*uint*/ = 0x01000003;\r\n\r\n\t/**\r\n\t * Constant associated with the key code value for the C key (67).\r\n\t */\r\n\tpublic static C:number /*uint*/ = 67;\r\n\r\n\t/**\r\n\t * Constant associated with the key code value for the Caps Lock key (20).\r\n\t */\r\n\tpublic static CAPS_LOCK:number /*uint*/ = 20;\r\n\r\n\t/**\r\n\t * Channel down\r\n\t */\r\n\tpublic static CHANNEL_DOWN:number /*uint*/ = 0x01000005;\r\n\r\n\t/**\r\n\t * Channel up\r\n\t */\r\n\tpublic static CHANNEL_UP:number /*uint*/ = 0x01000005;\r\n\r\n\t/**\r\n\t * Constant associated with the key code value for the , key (188).\r\n\t */\r\n\tpublic static COMMA:number /*uint*/ = 188;\r\n\r\n\t/**\r\n\t * Constant associated with the Mac command key (15). This constant is\r\n\t * currently only used for setting menu key equivalents.\r\n\t */\r\n\tpublic static COMMAND:number /*uint*/ = 15;\r\n\r\n\t/**\r\n\t * Constant associated with the key code value for the Control key (17).\r\n\t */\r\n\tpublic static CONTROL:number /*uint*/ = 17;\r\n\r\n\t/**\r\n\t * An array containing all the defined key name constants.\r\n\t */\r\n\tpublic static CharCodeStrings:Array<any>;\r\n\r\n\t/**\r\n\t * Constant associated with the key code value for the D key (68).\r\n\t */\r\n\tpublic static D:number /*uint*/ = 68;\r\n\r\n\t/**\r\n\t * Constant associated with the key code value for the Delete key (46).\r\n\t */\r\n\tpublic static DELETE:number /*uint*/ = 46;\r\n\r\n\t/**\r\n\t * Constant associated with the key code value for the Down Arrow key (40).\r\n\t */\r\n\tpublic static DOWN:number /*uint*/ = 40;\r\n\r\n\t/**\r\n\t * Engage DVR application mode\r\n\t */\r\n\tpublic static DVR:number /*uint*/ = 0x01000019;\r\n\r\n\t/**\r\n\t * Constant associated with the key code value for the E key (69).\r\n\t */\r\n\tpublic static E:number /*uint*/ = 69;\r\n\r\n\t/**\r\n\t * Constant associated with the key code value for the End key (35).\r\n\t */\r\n\tpublic static END:number /*uint*/ = 35;\r\n\r\n\t/**\r\n\t * Constant associated with the key code value for the Enter key (13).\r\n\t */\r\n\tpublic static ENTER:number /*uint*/ = 13;\r\n\r\n\t/**\r\n\t * Constant associated with the key code value for the = key (187).\r\n\t */\r\n\tpublic static EQUAL:number /*uint*/ = 187;\r\n\r\n\t/**\r\n\t * Constant associated with the key code value for the Escape key (27).\r\n\t */\r\n\tpublic static ESCAPE:number /*uint*/ = 27;\r\n\r\n\t/**\r\n\t * Exits current application mode\r\n\t */\r\n\tpublic static EXIT:number /*uint*/ = 0x01000015;\r\n\r\n\t/**\r\n\t * Constant associated with the key code value for the F key (70).\r\n\t */\r\n\tpublic static F:number /*uint*/ = 70;\r\n\r\n\t/**\r\n\t * Constant associated with the key code value for the F1 key (112).\r\n\t */\r\n\tpublic static F1:number /*uint*/ = 112;\r\n\r\n\t/**\r\n\t * Constant associated with the key code value for the F10 key (121).\r\n\t */\r\n\tpublic static F10:number /*uint*/ = 121;\r\n\r\n\t/**\r\n\t * Constant associated with the key code value for the F11 key (122).\r\n\t */\r\n\tpublic static F11:number /*uint*/ = 122;\r\n\r\n\t/**\r\n\t * Constant associated with the key code value for the F12 key (123).\r\n\t */\r\n\tpublic static F12:number /*uint*/ = 123;\r\n\r\n\t/**\r\n\t * Constant associated with the key code value for the F13 key (124).\r\n\t */\r\n\tpublic static F13:number /*uint*/ = 124;\r\n\r\n\t/**\r\n\t * Constant associated with the key code value for the F14 key (125).\r\n\t */\r\n\tpublic static F14:number /*uint*/ = 125;\r\n\r\n\t/**\r\n\t * Constant associated with the key code value for the F15 key (126).\r\n\t */\r\n\tpublic static F15:number /*uint*/ = 126;\r\n\r\n\t/**\r\n\t * Constant associated with the key code value for the F2 key (113).\r\n\t */\r\n\tpublic static F2:number /*uint*/ = 113;\r\n\r\n\t/**\r\n\t * Constant associated with the key code value for the F3 key (114).\r\n\t */\r\n\tpublic static F3:number /*uint*/ = 114;\r\n\r\n\t/**\r\n\t * Constant associated with the key code value for the F4 key (115).\r\n\t */\r\n\tpublic static F4:number /*uint*/ = 115;\r\n\r\n\t/**\r\n\t * Constant associated with the key code value for the F5 key (116).\r\n\t */\r\n\tpublic static F5:number /*uint*/ = 116;\r\n\r\n\t/**\r\n\t * Constant associated with the key code value for the F6 key (117).\r\n\t */\r\n\tpublic static F6:number /*uint*/ = 117;\r\n\r\n\t/**\r\n\t * Constant associated with the key code value for the F7 key (118).\r\n\t */\r\n\tpublic static F7:number /*uint*/ = 118;\r\n\r\n\t/**\r\n\t * Constant associated with the key code value for the F8 key (119).\r\n\t */\r\n\tpublic static F8:number /*uint*/ = 119;\r\n\r\n\t/**\r\n\t * Constant associated with the key code value for the F9 key (120).\r\n\t */\r\n\tpublic static F9:number /*uint*/ = 120;\r\n\r\n\t/**\r\n\t * Engage fast-forward transport mode\r\n\t */\r\n\tpublic static FAST_FORWARD:number /*uint*/ = 0x0100000A;\r\n\r\n\t/**\r\n\t * Constant associated with the key code value for the G key (71).\r\n\t */\r\n\tpublic static G:number /*uint*/ = 71;\r\n\r\n\t/**\r\n\t * Green function key button\r\n\t */\r\n\tpublic static GREEN:number /*uint*/ = 0x01000001;\r\n\r\n\t/**\r\n\t * Engage program guide\r\n\t */\r\n\tpublic static GUIDE:number /*uint*/ = 0x01000014;\r\n\r\n\t/**\r\n\t * Constant associated with the key code value for the H key (72).\r\n\t */\r\n\tpublic static H:number /*uint*/ = 72;\r\n\r\n\t/**\r\n\t * Engage help application or context-sensitive help\r\n\t */\r\n\tpublic static HELP:number /*uint*/ = 0x0100001D;\r\n\r\n\t/**\r\n\t * Constant associated with the key code value for the Home key (36).\r\n\t */\r\n\tpublic static HOME:number /*uint*/ = 36;\r\n\r\n\t/**\r\n\t * Constant associated with the key code value for the I key (73).\r\n\t */\r\n\tpublic static I:number /*uint*/ = 73;\r\n\r\n\t/**\r\n\t * Info button\r\n\t */\r\n\tpublic static INFO:number /*uint*/ = 0x01000013;\r\n\r\n\t/**\r\n\t * Cycle input\r\n\t */\r\n\tpublic static INPUT:number /*uint*/ = 0x0100001B;\r\n\r\n\t/**\r\n\t * Constant associated with the key code value for the Insert key (45).\r\n\t */\r\n\tpublic static INSERT:number /*uint*/ = 45;\r\n\r\n\t/**\r\n\t * Constant associated with the key code value for the J key (74).\r\n\t */\r\n\tpublic static J:number /*uint*/ = 74;\r\n\r\n\t/**\r\n\t * Constant associated with the key code value for the K key (75).\r\n\t */\r\n\tpublic static K:number /*uint*/ = 75;\r\n\r\n\t/**\r\n\t * The Begin key\r\n\t */\r\n\tpublic static KEYNAME_BEGIN:string = \"Begin\";\r\n\r\n\t/**\r\n\t * The Break key\r\n\t */\r\n\tpublic static KEYNAME_BREAK:string = \"Break\";\r\n\r\n\t/**\r\n\t * The Clear Display key\r\n\t */\r\n\tpublic static KEYNAME_CLEARDISPLAY:string = \"ClrDsp\";\r\n\r\n\t/**\r\n\t * The Clear Line key\r\n\t */\r\n\tpublic static KEYNAME_CLEARLINE:string = \"ClrLn\";\r\n\r\n\t/**\r\n\t * The Delete key\r\n\t */\r\n\tpublic static KEYNAME_DELETE:string = \"Delete\";\r\n\r\n\t/**\r\n\t * The Delete Character key\r\n\t */\r\n\tpublic static KEYNAME_DELETECHAR:string = \"DelChr\";\r\n\r\n\t/**\r\n\t * The Delete Line key\r\n\t */\r\n\tpublic static KEYNAME_DELETELINE:string = \"DelLn\";\r\n\r\n\t/**\r\n\t * The down arrow\r\n\t */\r\n\tpublic static KEYNAME_DOWNARROW:string = \"Down\";\r\n\r\n\t/**\r\n\t * The End key\r\n\t */\r\n\tpublic static KEYNAME_END:string = \"End\";\r\n\r\n\t/**\r\n\t * The Execute key\r\n\t */\r\n\tpublic static KEYNAME_EXECUTE:string = \"Exec\";\r\n\r\n\t/**\r\n\t * The F1 key\r\n\t */\r\n\tpublic static KEYNAME_F1:string = \"F1\";\r\n\r\n\t/**\r\n\t * The F10 key\r\n\t */\r\n\tpublic static KEYNAME_F10:string = \"F10\";\r\n\r\n\t/**\r\n\t * The F11 key\r\n\t */\r\n\tpublic static KEYNAME_F11:string = \"F11\";\r\n\r\n\t/**\r\n\t * The F12 key\r\n\t */\r\n\tpublic static KEYNAME_F12:string = \"F12\";\r\n\r\n\t/**\r\n\t * The F13 key\r\n\t */\r\n\tpublic static KEYNAME_F13:string = \"F13\";\r\n\r\n\t/**\r\n\t * The F14 key\r\n\t */\r\n\tpublic static KEYNAME_F14:string = \"F14\";\r\n\r\n\t/**\r\n\t * The F15 key\r\n\t */\r\n\tpublic static KEYNAME_F15:string = \"F15\";\r\n\r\n\t/**\r\n\t * The F16 key\r\n\t */\r\n\tpublic static KEYNAME_F16:string = \"F16\";\r\n\r\n\t/**\r\n\t * The F17 key\r\n\t */\r\n\tpublic static KEYNAME_F17:string = \"F17\";\r\n\r\n\t/**\r\n\t * The F18 key\r\n\t */\r\n\tpublic static KEYNAME_F18:string = \"F18\";\r\n\r\n\t/**\r\n\t * The F19 key\r\n\t */\r\n\tpublic static KEYNAME_F19:string = \"F19\";\r\n\r\n\t/**\r\n\t * The F2 key\r\n\t */\r\n\tpublic static KEYNAME_F2:string = \"F2\";\r\n\r\n\t/**\r\n\t * The F20 key\r\n\t */\r\n\tpublic static KEYNAME_F20:string = \"F20\";\r\n\r\n\t/**\r\n\t * The F21 key\r\n\t */\r\n\tpublic static KEYNAME_F21:string = \"F21\";\r\n\r\n\t/**\r\n\t * The F22 key\r\n\t */\r\n\tpublic static KEYNAME_F22:string = \"F22\";\r\n\r\n\t/**\r\n\t * The F23 key\r\n\t */\r\n\tpublic static KEYNAME_F23:string = \"F23\";\r\n\r\n\t/**\r\n\t * The F24 key\r\n\t */\r\n\tpublic static KEYNAME_F24:string = \"F24\";\r\n\r\n\t/**\r\n\t * The F25 key\r\n\t */\r\n\tpublic static KEYNAME_F25:string = \"F25\";\r\n\r\n\t/**\r\n\t * The F26 key\r\n\t */\r\n\tpublic static KEYNAME_F26:string = \"F26\";\r\n\r\n\t/**\r\n\t * The F27 key\r\n\t */\r\n\tpublic static KEYNAME_F27:string = \"F27\";\r\n\r\n\t/**\r\n\t * The F28 key\r\n\t */\r\n\tpublic static KEYNAME_F28:string = \"F28\";\r\n\r\n\t/**\r\n\t * The F29 key\r\n\t */\r\n\tpublic static KEYNAME_F29:string = \"F29\";\r\n\r\n\t/**\r\n\t * The F3 key\r\n\t */\r\n\tpublic static KEYNAME_F3:string = \"F3\";\r\n\r\n\t/**\r\n\t * The F30 key\r\n\t */\r\n\tpublic static KEYNAME_F30:string = \"F30\";\r\n\r\n\t/**\r\n\t * The F31 key\r\n\t */\r\n\tpublic static KEYNAME_F31:string = \"F31\";\r\n\r\n\t/**\r\n\t * The F32 key\r\n\t */\r\n\tpublic static KEYNAME_F32:string = \"F32\";\r\n\r\n\t/**\r\n\t * The F33 key\r\n\t */\r\n\tpublic static KEYNAME_F33:string = \"F33\";\r\n\r\n\t/**\r\n\t * The F34 key\r\n\t */\r\n\tpublic static KEYNAME_F34:string = \"F34\";\r\n\r\n\t/**\r\n\t * The F35 key\r\n\t */\r\n\tpublic static KEYNAME_F35:string = \"F35\";\r\n\r\n\t/**\r\n\t * The F4 key\r\n\t */\r\n\tpublic static KEYNAME_F4:string = \"F4\";\r\n\r\n\t/**\r\n\t * The F5 key\r\n\t */\r\n\tpublic static KEYNAME_F5:string = \"F5\";\r\n\r\n\t/**\r\n\t * The F6 key\r\n\t */\r\n\tpublic static KEYNAME_F6:string = \"F6\";\r\n\r\n\t/**\r\n\t * The F7 key\r\n\t */\r\n\tpublic static KEYNAME_F7:string = \"F7\";\r\n\r\n\t/**\r\n\t * The F8 key\r\n\t */\r\n\tpublic static KEYNAME_F8:string = \"F8\";\r\n\r\n\t/**\r\n\t * The F9 key\r\n\t */\r\n\tpublic static KEYNAME_F9:string = \"F9\";\r\n\r\n\t/**\r\n\t * The Find key\r\n\t */\r\n\tpublic static KEYNAME_FIND:string = \"Find\";\r\n\r\n\t/**\r\n\t * The Help key\r\n\t */\r\n\tpublic static KEYNAME_HELP:string = \"Help\";\r\n\r\n\t/**\r\n\t * The Home key\r\n\t */\r\n\tpublic static KEYNAME_HOME:string = \"Home\";\r\n\r\n\t/**\r\n\t * The Insert key\r\n\t */\r\n\tpublic static KEYNAME_INSERT:string = \"Insert\";\r\n\r\n\t/**\r\n\t * The Insert Character key\r\n\t */\r\n\tpublic static KEYNAME_INSERTCHAR:string = \"InsChr\";\r\n\r\n\t/**\r\n\t * The Insert Line key\r\n\t */\r\n\tpublic static KEYNAME_INSERTLINE:string = \"LnsLn\";\r\n\r\n\t/**\r\n\t * The left arrow\r\n\t */\r\n\tpublic static KEYNAME_LEFTARROW:string = \"Left\";\r\n\r\n\t/**\r\n\t * The Menu key\r\n\t */\r\n\tpublic static KEYNAME_MENU:string = \"Menu\";\r\n\r\n\t/**\r\n\t * The Mode Switch key\r\n\t */\r\n\tpublic static KEYNAME_MODESWITCH:string = \"ModeSw\";\r\n\r\n\t/**\r\n\t * The Next key\r\n\t */\r\n\tpublic static KEYNAME_NEXT:string = \"Next\";\r\n\r\n\t/**\r\n\t * The Page Down key\r\n\t */\r\n\tpublic static KEYNAME_PAGEDOWN:string = \"PgDn\";\r\n\r\n\t/**\r\n\t * The Page Up key\r\n\t */\r\n\tpublic static KEYNAME_PAGEUP:string = \"PgUp\";\r\n\r\n\t/**\r\n\t * The Pause key\r\n\t */\r\n\tpublic static KEYNAME_PAUSE:string = \"Pause\";\r\n\r\n\t/**\r\n\t * The Previous key\r\n\t */\r\n\tpublic static KEYNAME_PREV:string = \"Prev\";\r\n\r\n\t/**\r\n\t * The PRINT key\r\n\t */\r\n\tpublic static KEYNAME_PRINT:string = \"Print\";\r\n\r\n\t/**\r\n\t * The PRINT Screen\r\n\t */\r\n\tpublic static KEYNAME_PRINTSCREEN:string = \"PrntScrn\";\r\n\r\n\t/**\r\n\t * The Redo key\r\n\t */\r\n\tpublic static KEYNAME_REDO:string = \"Redo\";\r\n\r\n\t/**\r\n\t * The Reset key\r\n\t */\r\n\tpublic static KEYNAME_RESET:string = \"Reset\";\r\n\r\n\t/**\r\n\t * The right arrow\r\n\t */\r\n\tpublic static KEYNAME_RIGHTARROW:string = \"Right\";\r\n\r\n\t/**\r\n\t * The Scroll Lock key\r\n\t */\r\n\tpublic static KEYNAME_SCROLLLOCK:string = \"ScrlLck\";\r\n\r\n\t/**\r\n\t * The Select key\r\n\t */\r\n\tpublic static KEYNAME_SELECT:string = \"Select\";\r\n\r\n\t/**\r\n\t * The Stop key\r\n\t */\r\n\tpublic static KEYNAME_STOP:string = \"Stop\";\r\n\r\n\t/**\r\n\t * The System Request key\r\n\t */\r\n\tpublic static KEYNAME_SYSREQ:string = \"SysReq\";\r\n\r\n\t/**\r\n\t * The System key\r\n\t */\r\n\tpublic static KEYNAME_SYSTEM:string = \"Sys\";\r\n\r\n\t/**\r\n\t * The Undo key\r\n\t */\r\n\tpublic static KEYNAME_UNDO:string = \"Undo\";\r\n\r\n\t/**\r\n\t * The up arrow\r\n\t */\r\n\tpublic static KEYNAME_UPARROW:string = \"Up\";\r\n\r\n\t/**\r\n\t * The User key\r\n\t */\r\n\tpublic static KEYNAME_USER:string = \"User\";\r\n\r\n\t/**\r\n\t * Constant associated with the key code value for the L key (76).\r\n\t */\r\n\tpublic static L:number /*uint*/ = 76;\r\n\r\n\t/**\r\n\t * Watch last channel or show watched\r\n\t */\r\n\tpublic static LAST:number /*uint*/ = 0x01000011;\r\n\r\n\t/**\r\n\t * Constant associated with the key code value for the Left Arrow key (37).\r\n\t */\r\n\tpublic static LEFT:number /*uint*/ = 37;\r\n\r\n\t/**\r\n\t * Constant associated with the key code value for the [ key (219).\r\n\t */\r\n\tpublic static LEFTBRACKET:number /*uint*/ = 219;\r\n\r\n\t/**\r\n\t * Return to live [position in broadcast]\r\n\t */\r\n\tpublic static LIVE:number /*uint*/ = 0x01000010;\r\n\r\n\t/**\r\n\t * Constant associated with the key code value for the M key (77).\r\n\t */\r\n\tpublic static M:number /*uint*/ = 77;\r\n\r\n\t/**\r\n\t * Engage \"Master Shell\" e.g. TiVo or other vendor button\r\n\t */\r\n\tpublic static MASTER_SHELL:number /*uint*/ = 0x0100001E;\r\n\r\n\t/**\r\n\t * Engage menu\r\n\t */\r\n\tpublic static MENU:number /*uint*/ = 0x01000012;\r\n\r\n\t/**\r\n\t * Constant associated with the key code value for the - key (189).\r\n\t */\r\n\tpublic static MINUS:number /*uint*/ = 189;\r\n\r\n\t/**\r\n\t * Constant associated with the key code value for the N key (78).\r\n\t */\r\n\tpublic static N:number /*uint*/ = 78;\r\n\r\n\t/**\r\n\t * Skip to next track or chapter\r\n\t */\r\n\tpublic static NEXT:number /*uint*/ = 0x0100000E;\r\n\r\n\t/**\r\n\t * Constant associated with the key code value for the 0 key (48).\r\n\t */\r\n\tpublic static NUMBER_0:number /*uint*/ = 48;\r\n\r\n\t/**\r\n\t * Constant associated with the key code value for the 1 key (49).\r\n\t */\r\n\tpublic static NUMBER_1:number /*uint*/ = 49;\r\n\r\n\t/**\r\n\t * Constant associated with the key code value for the 2 key (50).\r\n\t */\r\n\tpublic static NUMBER_2:number /*uint*/ = 50;\r\n\r\n\t/**\r\n\t * Constant associated with the key code value for the 3 key (51).\r\n\t */\r\n\tpublic static NUMBER_3:number /*uint*/ = 51;\r\n\r\n\t/**\r\n\t * Constant associated with the key code value for the 4 key (52).\r\n\t */\r\n\tpublic static NUMBER_4:number /*uint*/ = 52;\r\n\r\n\t/**\r\n\t * Constant associated with the key code value for the 5 key (53).\r\n\t */\r\n\tpublic static NUMBER_5:number /*uint*/ = 53;\r\n\r\n\t/**\r\n\t * Constant associated with the key code value for the 6 key (54).\r\n\t */\r\n\tpublic static NUMBER_6:number /*uint*/ = 54;\r\n\r\n\t/**\r\n\t * Constant associated with the key code value for the 7 key (55).\r\n\t */\r\n\tpublic static NUMBER_7:number /*uint*/ = 55;\r\n\r\n\t/**\r\n\t * Constant associated with the key code value for the 8 key (56).\r\n\t */\r\n\tpublic static NUMBER_8:number /*uint*/ = 56;\r\n\r\n\t/**\r\n\t * Constant associated with the key code value for the 9 key (57).\r\n\t */\r\n\tpublic static NUMBER_9:number /*uint*/ = 57;\r\n\r\n\t/**\r\n\t * Constant associated with the pseudo-key code for the the number pad (21). Use to set numpad modifier on key equivalents\r\n\t */\r\n\tpublic static NUMPAD:number /*uint*/ = 21;\r\n\r\n\t/**\r\n\t * Constant associated with the key code value for the number 0 key on the number pad (96).\r\n\t */\r\n\tpublic static NUMPAD_0:number /*uint*/ = 96;\r\n\r\n\t/**\r\n\t * Constant associated with the key code value for the number 1 key on the number pad (97).\r\n\t */\r\n\tpublic static NUMPAD_1:number /*uint*/ = 97;\r\n\r\n\t/**\r\n\t * Constant associated with the key code value for the number 2 key on the number pad (98).\r\n\t */\r\n\tpublic static NUMPAD_2:number /*uint*/ = 98;\r\n\r\n\t/**\r\n\t * Constant associated with the key code value for the number 3 key on the number pad (99).\r\n\t */\r\n\tpublic static NUMPAD_3:number /*uint*/ = 99;\r\n\r\n\t/**\r\n\t * Constant associated with the key code value for the number 4 key on the number pad (100).\r\n\t */\r\n\tpublic static NUMPAD_4:number /*uint*/ = 100;\r\n\r\n\t/**\r\n\t * Constant associated with the key code value for the number 5 key on the number pad (101).\r\n\t */\r\n\tpublic static NUMPAD_5:number /*uint*/ = 101;\r\n\r\n\t/**\r\n\t * Constant associated with the key code value for the number 6 key on the number pad (102).\r\n\t */\r\n\tpublic static NUMPAD_6:number /*uint*/ = 102;\r\n\r\n\t/**\r\n\t * Constant associated with the key code value for the number 7 key on the number pad (103).\r\n\t */\r\n\tpublic static NUMPAD_7:number /*uint*/ = 103;\r\n\r\n\t/**\r\n\t * Constant associated with the key code value for the number 8 key on the number pad (104).\r\n\t */\r\n\tpublic static NUMPAD_8:number /*uint*/ = 104;\r\n\r\n\t/**\r\n\t * Constant associated with the key code value for the number 9 key on the number pad (105).\r\n\t */\r\n\tpublic static NUMPAD_9:number /*uint*/ = 105;\r\n\r\n\t/**\r\n\t * Constant associated with the key code value for the addition key on the number pad (107).\r\n\t */\r\n\tpublic static NUMPAD_ADD:number /*uint*/ = 107;\r\n\r\n\t/**\r\n\t * Constant associated with the key code value for the decimal key on the number pad (110).\r\n\t */\r\n\tpublic static NUMPAD_DECIMAL:number /*uint*/ = 110;\r\n\r\n\t/**\r\n\t * Constant associated with the key code value for the division key on the number pad (111).\r\n\t */\r\n\tpublic static NUMPAD_DIVIDE:number /*uint*/ = 111;\r\n\r\n\t/**\r\n\t * Constant associated with the key code value for the Enter key on the number pad (108).\r\n\t */\r\n\tpublic static NUMPAD_ENTER:number /*uint*/ = 108;\r\n\r\n\t/**\r\n\t * Constant associated with the key code value for the multiplication key on the number pad (106).\r\n\t */\r\n\tpublic static NUMPAD_MULTIPLY:number /*uint*/ = 106;\r\n\r\n\t/**\r\n\t * Constant associated with the key code value for the subtraction key on the number pad (109).\r\n\t */\r\n\tpublic static NUMPAD_SUBTRACT:number /*uint*/ = 109;\r\n\r\n\t/**\r\n\t * Constant associated with the key code value for the O key (79).\r\n\t */\r\n\tpublic static O:number /*uint*/ = 79;\r\n\r\n\t/**\r\n\t * Constant associated with the key code value for the P key (80).\r\n\t */\r\n\tpublic static P:number /*uint*/ = 80;\r\n\r\n\t/**\r\n\t * Constant associated with the key code value for the Page Down key (34).\r\n\t */\r\n\tpublic static PAGE_DOWN:number /*uint*/ = 34;\r\n\r\n\t/**\r\n\t * Constant associated with the key code value for the Page Up key (33).\r\n\t */\r\n\tpublic static PAGE_UP:number /*uint*/ = 33;\r\n\r\n\t/**\r\n\t * Engage pause transport mode\r\n\t */\r\n\tpublic static PAUSE:number /*uint*/ = 0x01000008;\r\n\r\n\t/**\r\n\t * Constant associated with the key code value for the . key (190).\r\n\t */\r\n\tpublic static PERIOD:number /*uint*/ = 190;\r\n\r\n\t/**\r\n\t * Engage play transport mode\r\n\t */\r\n\tpublic static PLAY:number /*uint*/ = 0x01000007;\r\n\r\n\t/**\r\n\t * Skip to previous track or chapter\r\n\t */\r\n\tpublic static PREVIOUS:number /*uint*/ = 0x0100000F;\r\n\r\n\t/**\r\n\t * Constant associated with the key code value for the Q key (81).\r\n\t */\r\n\tpublic static Q:number /*uint*/ = 81;\r\n\r\n\t/**\r\n\t * Constant associated with the key code value for the ' key (222).\r\n\t */\r\n\tpublic static QUOTE:number /*uint*/ = 222;\r\n\r\n\t/**\r\n\t * Constant associated with the key code value for the R key (82).\r\n\t */\r\n\tpublic static R:number /*uint*/ = 82;\r\n\r\n\t/**\r\n\t * Record item or engage record transport mode\r\n\t */\r\n\tpublic static RECORD:number /*uint*/ = 0x01000006;\r\n\r\n\t/**\r\n\t * Red function key button\r\n\t */\r\n\tpublic static RED:number /*uint*/ = 0x01000000;\r\n\r\n\t/**\r\n\t * Engage rewind transport mode\r\n\t */\r\n\tpublic static REWIND:number /*uint*/ = 0x0100000B;\r\n\r\n\t/**\r\n\t * Constant associated with the key code value for the Right Arrow key (39).\r\n\t */\r\n\tpublic static RIGHT:number /*uint*/ = 39;\r\n\r\n\t/**\r\n\t * Constant associated with the key code value for the ] key (221).\r\n\t */\r\n\tpublic static RIGHTBRACKET:number /*uint*/ = 221;\r\n\r\n\t/**\r\n\t * Constant associated with the key code value for the S key (83).\r\n\t */\r\n\tpublic static S:number /*uint*/ = 83;\r\n\r\n\t/**\r\n\t * Search button\r\n\t */\r\n\tpublic static SEARCH:number /*uint*/ = 0x0100001F;\r\n\r\n\t/**\r\n\t * Constant associated with the key code value for the ; key (186).\r\n\t */\r\n\tpublic static SEMICOLON:number /*uint*/ = 186;\r\n\r\n\t/**\r\n\t * Engage setup application or menu\r\n\t */\r\n\tpublic static SETUP:number /*uint*/ = 0x0100001C;\r\n\r\n\t/**\r\n\t * Constant associated with the key code value for the Shift key (16).\r\n\t */\r\n\tpublic static SHIFT:number /*uint*/ = 16;\r\n\r\n\t/**\r\n\t * Quick skip backward (usually 7-10 seconds)\r\n\t */\r\n\tpublic static SKIP_BACKWARD:number /*uint*/ = 0x0100000D;\r\n\r\n\t/**\r\n\t * Quick skip ahead (usually 30 seconds)\r\n\t */\r\n\tpublic static SKIP_FORWARD:number /*uint*/ = 0x0100000C;\r\n\r\n\t/**\r\n\t * Constant associated with the key code value for the / key (191).\r\n\t */\r\n\tpublic static SLASH:number /*uint*/ = 191;\r\n\r\n\t/**\r\n\t * Constant associated with the key code value for the Spacebar (32).\r\n\t */\r\n\tpublic static SPACE:number /*uint*/ = 32;\r\n\r\n\t/**\r\n\t * Engage stop transport mode\r\n\t */\r\n\tpublic static STOP:number /*uint*/ = 0x01000009;\r\n\r\n\t/**\r\n\t * Toggle subtitles\r\n\t */\r\n\tpublic static SUBTITLE:number /*uint*/ = 0x01000018;\r\n\r\n\t/**\r\n\t * Constant associated with the key code value for the T key (84).\r\n\t */\r\n\tpublic static T:number /*uint*/ = 84;\r\n\r\n\t/**\r\n\t * Constant associated with the key code value for the Tab key (9).\r\n\t */\r\n\tpublic static TAB:number /*uint*/ = 9;\r\n\r\n\t/**\r\n\t * Constant associated with the key code value for the U key (85).\r\n\t */\r\n\tpublic static U:number /*uint*/ = 85;\r\n\r\n\t/**\r\n\t * Constant associated with the key code value for the Up Arrow key (38).\r\n\t */\r\n\tpublic static UP:number /*uint*/ = 38;\r\n\r\n\t/**\r\n\t * Constant associated with the key code value for the V key (86).\r\n\t */\r\n\tpublic static V:number /*uint*/ = 86;\r\n\r\n\t/**\r\n\t * Engage video-on-demand\r\n\t */\r\n\tpublic static VOD:number /*uint*/ = 0x0100001A;\r\n\r\n\t/**\r\n\t * Constant associated with the key code value for the W key (87).\r\n\t */\r\n\tpublic static W:number /*uint*/ = 87;\r\n\r\n\t/**\r\n\t * Constant associated with the key code value for the X key (88).\r\n\t */\r\n\tpublic static X:number /*uint*/ = 88;\r\n\r\n\t/**\r\n\t * Constant associated with the key code value for the Y key (89).\r\n\t */\r\n\tpublic static Y:number /*uint*/ = 89;\r\n\r\n\t/**\r\n\t * Yellow function key button\r\n\t */\r\n\tpublic static YELLOW:number /*uint*/ = 0x01000002;\r\n\r\n\t/**\r\n\t * Constant associated with the key code value for the Z key (90).\r\n\t */\r\n\tpublic static Z:number /*uint*/ = 90;\r\n\r\n}\r\n\r\nexport = Keyboard;",
    "import BlendMode\t\t\t\t= require(\"awayjs-core/lib/data/BlendMode\");\r\nimport ColorTransform\t\t\t= require(\"awayjs-core/lib/geom/ColorTransform\");\r\nimport Matrix\t\t\t\t\t= require(\"awayjs-core/lib/geom/Matrix\");\r\nimport Rectangle\t\t\t\t= require(\"awayjs-core/lib/geom/Rectangle\");\r\nimport ColorUtils\t\t\t\t= require(\"awayjs-core/lib/utils/ColorUtils\");\r\n\r\nclass BitmapImageUtils\r\n{\r\n\tpublic static _fillRect(context:CanvasRenderingContext2D, rect:Rectangle, color:number, transparent:boolean)\r\n\t{\r\n\t\tif (color == 0x0 && transparent) {\r\n\t\t\tcontext.clearRect(rect.x, rect.y, rect.width, rect.height);\r\n\t\t} else {\r\n\t\t\tvar argb:number[] = ColorUtils.float32ColorToARGB(color);\r\n\r\n\t\t\tif (transparent)\r\n\t\t\t\tcontext.fillStyle = 'rgba(' + argb[1] + ',' + argb[2] + ',' + argb[3] + ',' + argb[0]/255 + ')';\r\n\t\t\telse\r\n\t\t\t\tcontext.fillStyle = 'rgba(' + argb[1] + ',' + argb[2] + ',' + argb[3] + ',1)';\r\n\r\n\t\t\tcontext.fillRect(rect.x, rect.y, rect.width, rect.height);\r\n\t\t}\r\n\t}\r\n\r\n\tpublic static _copyPixels(context:CanvasRenderingContext2D, bmpd:HTMLElement, sourceRect:Rectangle, destRect:Rectangle)\r\n\t{\r\n\t\tcontext.drawImage(bmpd, sourceRect.x, sourceRect.y, sourceRect.width, sourceRect.height, destRect.x, destRect.y, destRect.width, destRect.height);\r\n\t}\r\n\r\n\tpublic static _draw(context:CanvasRenderingContext2D, source:any, matrix:Matrix, colorTransform:ColorTransform, blendMode:BlendMode, clipRect:Rectangle, smoothing:boolean)\r\n\t{\r\n\t\tcontext.save();\r\n\r\n\t\tif (matrix != null)\r\n\t\t\tcontext.setTransform(matrix.a, matrix.b, matrix.c, matrix.d, matrix.tx, matrix.ty);\r\n\r\n\t\tif (clipRect != null)\r\n\t\t\tcontext.drawImage(source, clipRect.x, clipRect.y, clipRect.width, clipRect.height);\r\n\t\telse\r\n\t\t\tcontext.drawImage(source, 0, 0);\r\n\r\n\t\tcontext.restore();\r\n\t}\r\n}\r\n\r\nexport = BitmapImageUtils;",
    "import AbstractMethodError\t\t= require(\"awayjs-core/lib/errors/AbstractMethodError\");\r\n\r\nclass ByteArrayBase\r\n{\r\n\tpublic position:number = 0;\r\n\tpublic length:number = 0;\r\n\tpublic _mode:string = \"\";\r\n\r\n\tpublic static Base64Key = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\";\r\n\r\n\tconstructor()\r\n\t{\r\n\t}\r\n\r\n\tpublic writeByte(b:number)\r\n\t{\r\n\t\tthrow \"Virtual method\";\r\n\t}\r\n\r\n\tpublic readByte():number\r\n\t{\r\n\t\tthrow \"Virtual method\";\r\n\t}\r\n\r\n\tpublic writeUnsignedByte(b:number)\r\n\t{\r\n\t\tthrow \"Virtual method\";\r\n\t}\r\n\r\n\tpublic readUnsignedByte():number\r\n\t{\r\n\t\tthrow \"Virtual method\";\r\n\t}\r\n\r\n\tpublic writeUnsignedShort(b:number)\r\n\t{\r\n\t\tthrow \"Virtual method\";\r\n\t}\r\n\r\n\tpublic readUnsignedShort():number\r\n\t{\r\n\t\tthrow \"Virtual method\";\r\n\t}\r\n\r\n\tpublic writeUnsignedInt(b:number)\r\n\t{\r\n\t\tthrow \"Virtual method\";\r\n\t}\r\n\r\n\tpublic readUnsignedInt():number\r\n\t{\r\n\t\tthrow \"Virtual method\";\r\n\t}\r\n\r\n\tpublic writeFloat(b:number)\r\n\t{\r\n\t\tthrow \"Virtual method\";\r\n\t}\r\n\r\n\tpublic toFloatBits(x:number)\r\n\t{\r\n\t\tthrow \"Virtual method\";\r\n\t}\r\n\r\n\tpublic readFloat(b:number)\r\n\t{\r\n\t\tthrow \"Virtual method\";\r\n\t}\r\n\r\n\tpublic fromFloatBits(x:number)\r\n\t{\r\n\t\tthrow \"Virtual method\";\r\n\t}\r\n\r\n\tpublic getBytesAvailable():number\r\n\t{\r\n\t\tthrow new AbstractMethodError('ByteArrayBase, getBytesAvailable() not implemented ');\r\n\t}\r\n\r\n\tpublic toString():string\r\n\t{\r\n\t\treturn \"[ByteArray] ( \" + this._mode + \" ) position=\" + this.position + \" length=\" + this.length;\r\n\t}\r\n\r\n\tpublic compareEqual(other, count)\r\n\t{\r\n\t\tif (count == undefined || count > this.length - this.position)\r\n\t\t\tcount = this.length - this.position;\r\n\t\tif (count > other.length - other.position)\r\n\t\t\tcount = other.length - other.position;\r\n\t\tvar co0 = count;\r\n\t\tvar r = true;\r\n\t\twhile (r && count >= 4) {\r\n\t\t\tcount -= 4;\r\n\t\t\tif (this.readUnsignedInt() != other.readUnsignedInt()) r = false;\r\n\t\t}\r\n\t\twhile (r && count >= 1) {\r\n\t\t\tcount--;\r\n\t\t\tif (this.readUnsignedByte() != other.readUnsignedByte()) r = false;\r\n\t\t}\r\n\t\tvar c0;\r\n\t\tthis.position -= (c0 - count);\r\n\t\tother.position -= (c0 - count);\r\n\t\treturn r;\r\n\t}\r\n\r\n\tpublic writeBase64String(s:string)\r\n\t{\r\n\t\tfor (var i:number = 0; i < s.length; i++) {\r\n\t\t\tvar v = s.charAt(i);\r\n\t\t}\r\n\t}\r\n\r\n\tpublic dumpToConsole()\r\n\t{\r\n\t\tvar oldpos = this.position;\r\n\t\tthis.position = 0;\r\n\t\tvar nstep:number = 8;\r\n\r\n\t\tfunction asHexString(x, digits)\r\n\t\t{\r\n\t\t\tvar lut:Array<string> = [ \"0\", \"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \"a\", \"b\", \"c\", \"d\", \"e\", \"f\" ];\r\n\t\t\tvar sh:string = \"\";\r\n\t\t\tfor (var d:number = 0; d < digits; d++) {\r\n\t\t\t\tsh = lut[(x >> (d << 2)) & 0xf] + sh;\r\n\t\t\t}\r\n\t\t\treturn sh;\r\n\t\t}\r\n\r\n\t\tfor (var i = 0; i < this.length; i += nstep) {\r\n\t\t\tvar s:string = asHexString(i, 4) + \":\";\r\n\t\t\tfor (var j:number = 0; j < nstep && i + j < this.length; j++) {\r\n\t\t\t\ts += \" \" + asHexString(this.readUnsignedByte(), 2);\r\n\t\t\t}\r\n\t\t\tconsole.log(s);\r\n\t\t}\r\n\t\tthis.position = oldpos;\r\n\t}\r\n\r\n\tpublic readBase64String(count:number)\r\n\t{\r\n\t\tif (count == undefined || count > this.length - this.position)\r\n\t\t\tcount = this.length - this.position;\r\n\t\tif (!(count > 0)) return \"\";\r\n\r\n\t\treturn ByteArrayBase.internalGetBase64String(count, this.readUnsignedByte, this);\r\n\t}\r\n\r\n\tpublic static internalGetBase64String(count, getUnsignedByteFunc, self)\r\n\t{ // return base64 string of the next count bytes\r\n\t\tvar r = \"\";\r\n\t\tvar b0, b1, b2, enc1, enc2, enc3, enc4;\r\n\t\tvar base64Key = ByteArrayBase.Base64Key;\r\n\t\twhile (count >= 3) {\r\n\t\t\tb0 = getUnsignedByteFunc.apply(self);\r\n\t\t\tb1 = getUnsignedByteFunc.apply(self);\r\n\t\t\tb2 = getUnsignedByteFunc.apply(self);\r\n\t\t\tenc1 = b0 >> 2;\r\n\t\t\tenc2 = ((b0 & 3) << 4) | (b1 >> 4);\r\n\t\t\tenc3 = ((b1 & 15) << 2) | (b2 >> 6);\r\n\t\t\tenc4 = b2 & 63;\r\n\t\t\tr += base64Key.charAt(enc1) + base64Key.charAt(enc2) + base64Key.charAt(enc3) + base64Key.charAt(enc4);\r\n\t\t\tcount -= 3;\r\n\t\t}\r\n\t\t// pad\r\n\t\tif (count == 2) {\r\n\t\t\tb0 = getUnsignedByteFunc.apply(self);\r\n\t\t\tb1 = getUnsignedByteFunc.apply(self);\r\n\t\t\tenc1 = b0 >> 2;\r\n\t\t\tenc2 = ((b0 & 3) << 4) | (b1 >> 4);\r\n\t\t\tenc3 = ((b1 & 15) << 2);\r\n\t\t\tr += base64Key.charAt(enc1) + base64Key.charAt(enc2) + base64Key.charAt(enc3) + \"=\";\r\n\t\t} else if (count == 1) {\r\n\t\t\tb0 = getUnsignedByteFunc.apply(self);\r\n\t\t\tenc1 = b0 >> 2;\r\n\t\t\tenc2 = ((b0 & 3) << 4);\r\n\t\t\tr += base64Key.charAt(enc1) + base64Key.charAt(enc2) + \"==\";\r\n\t\t}\r\n\t\treturn r;\r\n\t}\r\n}\r\n\r\nexport = ByteArrayBase;",
    "import ByteArrayBase\t\t\t= require(\"awayjs-core/lib/utils/ByteArrayBase\");\r\n\r\nclass ByteArrayBuffer extends ByteArrayBase\r\n{\r\n\r\n\t/*\r\n\t public maxlength:number = 0;\r\n\t public arraybytes; //ArrayBuffer\r\n\t public unalignedarraybytestemp; //ArrayBuffer\r\n\t */\r\n\r\n\tpublic _bytes:number[];\r\n\r\n\tconstructor()\r\n\t{\r\n\t\tsuper();\r\n\t\tthis._bytes = [];\r\n\t\tthis._mode = \"Array\";\r\n\t}\r\n\r\n\tpublic writeByte(b:number)\r\n\t{\r\n\t\tvar bi:number = ~~b;\r\n\t\tthis._bytes[ this.position++ ] = bi;\r\n\t\tif (this.position > this.length) {\r\n\t\t\tthis.length = this.position;\r\n\t\t}\r\n\t}\r\n\r\n\tpublic readByte():number\r\n\t{\r\n\t\tif (this.position >= this.length) {\r\n\t\t\tthrow \"ByteArray out of bounds read. Position=\" + this.position + \", Length=\" + this.length;\r\n\t\t}\r\n\t\treturn this._bytes[ this.position++ ];\r\n\t}\r\n\r\n\tpublic writeUnsignedByte(b:number)\r\n\t{\r\n\t\tvar bi:number = ~~b;\r\n\t\tthis._bytes[this.position++] = bi & 0xff;\r\n\t\tif (this.position > this.length) {\r\n\t\t\tthis.length = this.position;\r\n\t\t}\r\n\t}\r\n\r\n\tpublic readUnsignedByte():number\r\n\t{\r\n\t\tif (this.position >= this.length) {\r\n\t\t\tthrow \"ByteArray out of bounds read. Position=\" + this.position + \", Length=\" + this.length;\r\n\t\t}\r\n\t\treturn this._bytes[ this.position++ ];\r\n\t}\r\n\r\n\tpublic writeUnsignedShort(b:number)\r\n\t{\r\n\t\tvar bi:number = ~~b;\r\n\t\tthis._bytes[ this.position++ ] = bi & 0xff;\r\n\t\tthis._bytes[ this.position++ ] = (bi >> 8) & 0xff;\r\n\t\tif (this.position > this.length) {\r\n\t\t\tthis.length = this.position;\r\n\t\t}\r\n\t}\r\n\r\n\tpublic readUnsignedShort():number\r\n\t{\r\n\t\tif (this.position + 2 > this.length) {\r\n\t\t\tthrow \"ByteArray out of bounds read. Position=\" + this.position + \", Length=\" + this.length;\r\n\t\t}\r\n\t\tvar r:number = this._bytes[ this.position ] | ( this._bytes[ this.position + 1 ] << 8 );\r\n\t\tthis.position += 2;\r\n\t\treturn r;\r\n\t}\r\n\r\n\tpublic writeUnsignedInt(b:number)\r\n\t{\r\n\t\tvar bi:number = ~~b;\r\n\t\tthis._bytes[ this.position++ ] = bi & 0xff;\r\n\t\tthis._bytes[ this.position++ ] = (bi >>> 8) & 0xff;\r\n\t\tthis._bytes[ this.position++ ] = (bi >>> 16) & 0xff;\r\n\t\tthis._bytes[ this.position++ ] = (bi >>> 24) & 0xff;\r\n\t\tif (this.position > this.length) {\r\n\t\t\tthis.length = this.position;\r\n\t\t}\r\n\t}\r\n\r\n\tpublic readUnsignedInt():number\r\n\t{\r\n\t\tif (this.position + 4 > this.length) {\r\n\t\t\tthrow \"ByteArray out of bounds read. Position=\" + this.position + \", Length=\" + this.length;\r\n\t\t}\r\n\t\tvar r:number = this._bytes[ this.position ] | ( this._bytes[this.position + 1] << 8 ) | ( this._bytes[this.position + 2] << 16 ) | ( this._bytes[this.position + 3] << 24 );\r\n\t\tthis.position += 4;\r\n\t\treturn r >>> 0;\r\n\t}\r\n\r\n\tpublic writeFloat(b:number)\r\n\t{\r\n\t\t// this is crazy slow and silly, but as a fallback...\r\n\r\n\t\tthis.writeUnsignedInt(this.toFloatBits(Number(b)));\r\n\t}\r\n\r\n\tpublic toFloatBits(x:number)\r\n\t{\r\n\t\t// don't handle inf/nan yet\r\n\t\t// special case zero\r\n\t\tif (x == 0) {\r\n\t\t\treturn 0;\r\n\t\t}\r\n\t\t// remove the sign, after this we only deal with positive numbers\r\n\t\tvar sign:number = 0;\r\n\t\tif (x < 0) {\r\n\t\t\tx = -x;\r\n\t\t\tsign = 1;\r\n\t\t} else {\r\n\t\t\tsign = 0;\r\n\t\t}\r\n\t\t// a float value is now defined as: x = (1+(mantissa*2^-23))*(2^(exponent-127))\r\n\t\tvar exponent:number = Math.log(x)/Math.log(2);  // rough exponent\r\n\t\texponent = Math.floor(exponent);\r\n\t\tx = x*Math.pow(2, 23 - exponent);             // normalize to 24 bits\r\n\t\tvar mantissa = Math.floor(x) - 0x800000;\r\n\t\texponent = exponent + 127;\r\n\t\treturn( ( sign << 31 ) >>> 0) | ( exponent << 23 ) | mantissa;\r\n\t}\r\n\r\n\tpublic readFloat(b:number)\r\n\t{\r\n\t\treturn this.fromFloatBits(this.readUnsignedInt());\r\n\t}\r\n\r\n\tpublic fromFloatBits(x:number)\r\n\t{\r\n\t\tif (x == 0) {\r\n\t\t\treturn 0;\r\n\t\t}\r\n\t\tvar exponent:number = ( x >>> 23 ) & 0xff;\r\n\t\tvar mantissa:number = ( x & 0x7fffff ) | 0x800000;\r\n\t\tvar y = Math.pow(2, ( exponent - 127 ) - 23)*mantissa;\r\n\t\tif (x >>> 31 != 0) {\r\n\t\t\ty = -y;\r\n\t\t}\r\n\t\treturn y;\r\n\t}\r\n\r\n\t/*\r\n\t public ensureWriteableSpace( n:number )\r\n\t {\r\n\t this.ensureSpace( n + this.position );\r\n\t }\r\n\r\n\t private ensureSpace( n:number )\r\n\t {\r\n\t if ( n > this.maxlength ) {\r\n\t var newmaxlength:number = (n+255)&(~255);\r\n\t var newarraybuffer = new ArrayBuffer(newmaxlength);\r\n\t var view = new Uint8Array(this.arraybytes, 0, this.length);\r\n\t var newview = new Uint8Array(newarraybuffer, 0, this.length);\r\n\t newview.set(view);      // memcpy\r\n\t this.arraybytes = newarraybuffer;\r\n\t this.maxlength = newmaxlength;\r\n\t }\r\n\t }\r\n\t */\r\n}\r\n\r\nexport = ByteArrayBuffer;",
    "import ByteArrayBase\t\t\t= require(\"awayjs-core/lib/utils/ByteArrayBase\");\r\n\r\nclass ByteArray extends ByteArrayBase\r\n{\r\n\tpublic maxlength:number;\r\n\tpublic arraybytes; //ArrayBuffer\r\n\tpublic unalignedarraybytestemp; //ArrayBuffer\r\n\r\n\tconstructor(maxlength:number = 4)\r\n\t{\r\n\t\tsuper();\r\n\t\tthis._mode = \"Typed array\";\r\n\t\tthis.maxlength = Math.max((maxlength + 255) & (~255), 4);\r\n\t\tthis.arraybytes = new ArrayBuffer(this.maxlength);\r\n\t\tthis.unalignedarraybytestemp = new ArrayBuffer(16);\r\n\t}\r\n\r\n\tpublic ensureWriteableSpace(n:number)\r\n\t{\r\n\t\tthis.ensureSpace(n + this.position);\r\n\t}\r\n\r\n\tpublic setArrayBuffer(aBuffer:ArrayBuffer):void\r\n\t{\r\n\t\tthis.ensureSpace(aBuffer.byteLength);\r\n\r\n\t\tthis.length = aBuffer.byteLength;\r\n\r\n\t\tvar inInt8AView:Int8Array = new Int8Array(aBuffer);\r\n\t\tvar localInt8View:Int8Array = new Int8Array(this.arraybytes, 0, this.length);\r\n\r\n\t\tlocalInt8View.set(inInt8AView);\r\n\r\n\t\tthis.position = 0;\r\n\r\n\t}\r\n\r\n\tpublic getBytesAvailable():number\r\n\t{\r\n\t\treturn ( this.length ) - ( this.position );\r\n\t}\r\n\r\n\tpublic ensureSpace(n:number)\r\n\t{\r\n\t\tif (n > this.maxlength) {\r\n\t\t\tvar newmaxlength:number = (n + 255) & (~255);\r\n\t\t\tvar newarraybuffer = new ArrayBuffer(newmaxlength);\r\n\t\t\tvar view = new Uint8Array(this.arraybytes, 0, this.length);\r\n\t\t\tvar newview = new Uint8Array(newarraybuffer, 0, this.length);\r\n\t\t\tnewview.set(view);      // memcpy\r\n\t\t\tthis.arraybytes = newarraybuffer;\r\n\t\t\tthis.maxlength = newmaxlength;\r\n\t\t}\r\n\t}\r\n\r\n\tpublic writeByte(b:number)\r\n\t{\r\n\t\tthis.ensureWriteableSpace(1);\r\n\r\n\t\tvar view = new Int8Array(this.arraybytes);\r\n\t\tview[ this.position++ ] = (~~b); // ~~ is cast to int in js...\r\n\t\tif (this.position > this.length) {\r\n\t\t\tthis.length = this.position;\r\n\t\t}\r\n\t}\r\n\r\n\tpublic readByte()\r\n\t{\r\n\t\tif (this.position >= this.length)\r\n\t\t\tthrow \"ByteArray out of bounds read. Positon=\" + this.position + \", Length=\" + this.length;\r\n\r\n\t\tvar view = new Int8Array(this.arraybytes);\r\n\r\n\t\treturn view[ this.position++ ];\r\n\t}\r\n\r\n\tpublic readBytes(bytes:ByteArray, offset:number = 0, length:number = 0)\r\n\t{\r\n\t\tif (length == null)\r\n\t\t\tlength = bytes.length;\r\n\r\n\t\tbytes.ensureWriteableSpace(offset + length);\r\n\r\n\t\tvar byteView:Int8Array = new Int8Array(bytes.arraybytes);\r\n\t\tvar localByteView:Int8Array = new Int8Array(this.arraybytes);\r\n\r\n\t\tbyteView.set(localByteView.subarray(this.position, this.position + length), offset);\r\n\r\n\t\tthis.position += length;\r\n\r\n\t\tif (length + offset > bytes.length)\r\n\t\t\tbytes.length += ( length + offset ) - bytes.length;\r\n\t}\r\n\r\n\tpublic writeUnsignedByte(b:number)\r\n\t{\r\n\t\tthis.ensureWriteableSpace(1);\r\n\r\n\t\tvar view = new Uint8Array(this.arraybytes);\r\n\t\tview[this.position++] = (~~b) & 0xff; // ~~ is cast to int in js...\r\n\r\n\t\tif (this.position > this.length)\r\n\t\t\tthis.length = this.position;\r\n\t}\r\n\r\n\tpublic readUnsignedByte()\r\n\t{\r\n\t\tif (this.position >= this.length)\r\n\t\t\tthrow \"ByteArray out of bounds read. Positon=\" + this.position + \", Length=\" + this.length;\r\n\r\n\t\tvar view = new Uint8Array(this.arraybytes);\r\n\t\treturn view[this.position++];\r\n\t}\r\n\r\n\tpublic writeUnsignedShort(b:number)\r\n\t{\r\n\t\tthis.ensureWriteableSpace(2);\r\n\r\n\t\tif (( this.position & 1 ) == 0) {\r\n\t\t\tvar view = new Uint16Array(this.arraybytes);\r\n\t\t\tview[ this.position >> 1 ] = (~~b) & 0xffff; // ~~ is cast to int in js...\r\n\t\t} else {\r\n\t\t\tvar view = new Uint16Array(this.unalignedarraybytestemp, 0, 1);\r\n\t\t\tview[0] = (~~b) & 0xffff;\r\n\t\t\tvar view2 = new Uint8Array(this.arraybytes, this.position, 2);\r\n\t\t\tvar view3 = new Uint8Array(this.unalignedarraybytestemp, 0, 2);\r\n\t\t\tview2.set(view3);\r\n\t\t}\r\n\r\n\t\tthis.position += 2;\r\n\r\n\t\tif (this.position > this.length)\r\n\t\t\tthis.length = this.position;\r\n\t}\r\n\r\n\tpublic readUTFBytes(len:number):string\r\n\t{\r\n\t\tvar value:string = \"\";\r\n\t\tvar max:number = this.position + len;\r\n\t\tvar data:DataView = new DataView(this.arraybytes);\r\n\r\n\t\t// utf8-encode\r\n\t\twhile (this.position < max) {\r\n\r\n\t\t\tvar c:number = data.getUint8(this.position++);\r\n\r\n\t\t\tif (c < 0x80) {\r\n\r\n\t\t\t\tif (c == 0) break;\r\n\t\t\t\tvalue += String.fromCharCode(c);\r\n\r\n\t\t\t} else if (c < 0xE0) {\r\n\r\n\t\t\t\tvalue += String.fromCharCode(((c & 0x3F) << 6) | (data.getUint8(this.position++) & 0x7F));\r\n\r\n\t\t\t} else if (c < 0xF0) {\r\n\r\n\t\t\t\tvar c2 = data.getUint8(this.position++);\r\n\t\t\t\tvalue += String.fromCharCode(((c & 0x1F) << 12) | ((c2 & 0x7F) << 6) | (data.getUint8(this.position++) & 0x7F));\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tvar c2 = data.getUint8(this.position++);\r\n\t\t\t\tvar c3 = data.getUint8(this.position++);\r\n\r\n\t\t\t\tvalue += String.fromCharCode(((c & 0x0F) << 18) | ((c2 & 0x7F) << 12) | ((c3 << 6) & 0x7F) | (data.getUint8(this.position++) & 0x7F));\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn value;\r\n\t}\r\n\r\n\tpublic readInt():number\r\n\t{\r\n\t\tvar data:DataView = new DataView(this.arraybytes);\r\n\t\tvar int:number = data.getInt32(this.position, true);\r\n\r\n\t\tthis.position += 4;\r\n\r\n\t\treturn int;\r\n\t}\r\n\r\n\tpublic readShort():number\r\n\t{\r\n\t\tvar data:DataView = new DataView(this.arraybytes);\r\n\t\tvar short:number = data.getInt16(this.position, true);\r\n\r\n\t\tthis.position += 2;\r\n\r\n\t\treturn short;\r\n\t}\r\n\r\n\tpublic readDouble():number\r\n\t{\r\n\t\tvar data:DataView = new DataView(this.arraybytes);\r\n\t\tvar double:number = data.getFloat64(this.position, true);\r\n\r\n\t\tthis.position += 8;\r\n\r\n\t\treturn double;\r\n\t}\r\n\r\n\tpublic readUnsignedShort()\r\n\t{\r\n\t\tif (this.position > this.length + 2)\r\n\t\t\tthrow \"ByteArray out of bounds read. Position=\" + this.position + \", Length=\" + this.length;\r\n\r\n\t\tif (( this.position & 1 ) == 0) {\r\n\t\t\tvar view = new Uint16Array(this.arraybytes);\r\n\t\t\tvar pa:number = this.position >> 1;\r\n\t\t\tthis.position += 2;\r\n\t\t\treturn view[ pa ];\r\n\t\t} else {\r\n\t\t\tvar view = new Uint16Array(this.unalignedarraybytestemp, 0, 1);\r\n\t\t\tvar view2 = new Uint8Array(this.arraybytes, this.position, 2);\r\n\t\t\tvar view3 = new Uint8Array(this.unalignedarraybytestemp, 0, 2);\r\n\t\t\tview3.set(view2);\r\n\t\t\tthis.position += 2;\r\n\t\t\treturn view[0];\r\n\t\t}\r\n\t}\r\n\r\n\tpublic writeUnsignedInt(b:number)\r\n\t{\r\n\t\tthis.ensureWriteableSpace(4);\r\n\r\n\t\tif (( this.position & 3 ) == 0) {\r\n\t\t\tvar view = new Uint32Array(this.arraybytes);\r\n\t\t\tview[ this.position >> 2 ] = (~~b) & 0xffffffff; // ~~ is cast to int in js...\r\n\t\t} else {\r\n\t\t\tvar view = new Uint32Array(this.unalignedarraybytestemp, 0, 1);\r\n\t\t\tview[0] = (~~b) & 0xffffffff;\r\n\t\t\tvar view2 = new Uint8Array(this.arraybytes, this.position, 4);\r\n\t\t\tvar view3 = new Uint8Array(this.unalignedarraybytestemp, 0, 4);\r\n\t\t\tview2.set(view3);\r\n\t\t}\r\n\t\tthis.position += 4;\r\n\r\n\t\tif (this.position > this.length)\r\n\t\t\tthis.length = this.position;\r\n\t}\r\n\r\n\tpublic readUnsignedInt()\r\n\t{\r\n\t\tif (this.position > this.length + 4)\r\n\t\t\tthrow \"ByteArray out of bounds read. Position=\" + this.position + \", Length=\" + this.length;\r\n\r\n\t\tif (( this.position & 3 ) == 0) {\r\n\t\t\tvar view = new Uint32Array(this.arraybytes);\r\n\t\t\tvar pa:number = this.position >> 2;\r\n\t\t\tthis.position += 4;\r\n\t\t\treturn view[ pa ];\r\n\t\t} else {\r\n\t\t\tvar view = new Uint32Array(this.unalignedarraybytestemp, 0, 1);\r\n\t\t\tvar view2 = new Uint8Array(this.arraybytes, this.position, 4);\r\n\t\t\tvar view3 = new Uint8Array(this.unalignedarraybytestemp, 0, 4);\r\n\t\t\tview3.set(view2);\r\n\t\t\tthis.position += 4;\r\n\t\t\treturn view[0];\r\n\t\t}\r\n\t}\r\n\r\n\tpublic writeFloat(b:number)\r\n\t{\r\n\t\tthis.ensureWriteableSpace(4);\r\n\r\n\t\tif (( this.position & 3 ) == 0) {\r\n\t\t\tvar view = new Float32Array(this.arraybytes);\r\n\t\t\tview[ this.position >> 2 ] = b;\r\n\t\t} else {\r\n\t\t\tvar view = new Float32Array(this.unalignedarraybytestemp, 0, 1);\r\n\t\t\tview[0] = b;\r\n\t\t\tvar view2 = new Uint8Array(this.arraybytes, this.position, 4);\r\n\t\t\tvar view3 = new Uint8Array(this.unalignedarraybytestemp, 0, 4);\r\n\t\t\tview2.set(view3);\r\n\t\t}\r\n\t\tthis.position += 4;\r\n\r\n\t\tif (this.position > this.length)\r\n\t\t\tthis.length = this.position;\r\n\t}\r\n\r\n\tpublic readFloat()\r\n\t{\r\n\t\tif (this.position > this.length + 4)\r\n\t\t\tthrow \"ByteArray out of bounds read. Positon=\" + this.position + \", Length=\" + this.length;\r\n\r\n\t\tif ((this.position & 3) == 0) {\r\n\t\t\tvar view = new Float32Array(this.arraybytes);\r\n\t\t\tvar pa = this.position >> 2;\r\n\t\t\tthis.position += 4;\r\n\t\t\treturn view[pa];\r\n\t\t} else {\r\n\t\t\tvar view = new Float32Array(this.unalignedarraybytestemp, 0, 1);\r\n\t\t\tvar view2 = new Uint8Array(this.arraybytes, this.position, 4);\r\n\t\t\tvar view3 = new Uint8Array(this.unalignedarraybytestemp, 0, 4);\r\n\t\t\tview3.set(view2);\r\n\t\t\tthis.position += 4;\r\n\t\t\treturn view[ 0 ];\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport = ByteArray;",
    "class CSS\r\n{\r\n\tpublic static setElementSize(element:HTMLElement, width:number, height:number)\r\n\t{\r\n\t\tif(!element) return;\r\n\t\telement.style.width = width + \"px\";\r\n\t\telement.style.height = height + \"px\";\r\n\t\telement[\"width\"] = width;\r\n\t\telement[\"height\"] = height;\r\n\t}\r\n\r\n\tpublic static setElementWidth(element:HTMLElement, width:number)\r\n\t{\r\n\t\tif(!element) return;\r\n\t\telement.style.width = width + \"px\";\r\n\t\telement[\"width\"] = width;\r\n\t}\r\n\r\n\tpublic static setElementHeight(element:HTMLElement, height:number)\r\n\t{\r\n\t\tif(!element) return;\r\n\t\telement.style.height = height + \"px\";\r\n\t\telement[\"height\"] = height;\r\n\t}\r\n\r\n\tpublic static setElementX(element:HTMLElement, x:number)\r\n\t{\r\n\t\tif(!element) return;\r\n\t\telement.style.position = 'absolute';\r\n\t\telement.style.left = x + \"px\";\r\n\t}\r\n\r\n\tpublic static setElementY(element:HTMLElement, y:number)\r\n\t{\r\n\t\tif(!element) return;\r\n\t\telement.style.position = 'absolute';\r\n\t\telement.style.top = y + \"px\";\r\n\t}\r\n\r\n\tpublic static getElementVisibility(element:HTMLElement):boolean\r\n\t{\r\n\t\tif(!element) return false;\r\n\t\treturn element.style.visibility == 'visible';\r\n\t}\r\n\r\n\tpublic static setElementVisibility(element:HTMLElement, visible:boolean)\r\n\t{\r\n\t\tif(!element) return;\r\n\t\tif (visible) {\r\n\t\t\telement.style.visibility = 'visible';\r\n\t\t} else {\r\n\t\t\telement.style.visibility = 'hidden';\r\n\t\t}\r\n\t}\r\n\r\n\tpublic static setElementAlpha(element:HTMLElement, alpha:number)\r\n\t{\r\n\t\tif (element instanceof HTMLCanvasElement) {\r\n\t\t\tvar context = (<HTMLCanvasElement> element).getContext(\"2d\");\r\n\t\t\tcontext.globalAlpha = alpha;\r\n\t\t}\r\n\t}\r\n\r\n\tpublic static setElementPosition(element:HTMLElement, x:number, y:number, absolute:boolean = false)\r\n\t{\r\n\t\tif(!element) return;\r\n\t\tif (absolute) {\r\n\t\t\telement.style.position = \"absolute\";\r\n\t\t} else {\r\n\t\t\telement.style.position = \"relative\";\r\n\t\t}\r\n\r\n\t\telement.style.left = x + \"px\";\r\n\t\telement.style.top = y + \"px\";\r\n\t}\r\n}\r\n\r\nexport = CSS;",
    "/**\r\n *\r\n */\r\nclass ColorUtils\r\n{\r\n\tpublic static float32ColorToARGB(float32Color:number):number[]\r\n\t{\r\n\t\tvar a:number = ( float32Color & 0xff000000 ) >>> 24;\r\n\t\tvar r:number = ( float32Color & 0xff0000 ) >>> 16;\r\n\t\tvar g:number = ( float32Color & 0xff00 ) >>> 8;\r\n\t\tvar b:number = float32Color & 0xff;\r\n\t\tvar result:number[] = [ a, r , g , b ];\r\n\r\n\t\treturn result;\r\n\t}\r\n\r\n\tpublic static ARGBtoFloat32(a:number, r:number, g:number, b:number):number\r\n\t{\r\n\t\treturn ((a << 24) | (r << 16) | (g << 8) | b);\r\n\t}\r\n\r\n\tprivate static componentToHex(c:number):string\r\n\t{\r\n\t\tvar hex = c.toString(16);\r\n\t\treturn hex.length == 1? \"0\" + hex : hex;\r\n\t}\r\n\r\n\tpublic static RGBToHexString(argb:number[]):string\r\n\t{\r\n\t\treturn \"#\" + ColorUtils.componentToHex(argb[1]) + ColorUtils.componentToHex(argb[2]) + ColorUtils.componentToHex(argb[3]);\r\n\t}\r\n\r\n\tpublic static ARGBToHexString(argb:number[]):string\r\n\t{\r\n\t\treturn \"#\" + ColorUtils.componentToHex(argb[0]) + ColorUtils.componentToHex(argb[1]) + ColorUtils.componentToHex(argb[2]) + ColorUtils.componentToHex(argb[3]);\r\n\t}\r\n}\r\n\r\nexport = ColorUtils;",
    "import PartialImplementationError\t= require(\"awayjs-core/lib/errors/PartialImplementationError\");\r\n\r\n/**\r\n *\r\n */\r\nclass Debug\r\n{\r\n\tpublic static THROW_ERRORS:boolean = true;\r\n\tpublic static ENABLE_LOG:boolean = true;\r\n\tpublic static LOG_PI_ERRORS:boolean = true;\r\n\r\n\tprivate static keyword:string = null;\r\n\r\n\tpublic static breakpoint():void\r\n\t{\r\n\t\tDebug['break']();\r\n\t}\r\n\r\n\tpublic static throwPIROnKeyWordOnly(str:string, enable:boolean = true)\r\n\t{\r\n\t\tif (!enable)\r\n\t\t\tDebug.keyword = null;\r\n\t\telse\r\n\t\t\tDebug.keyword = str;\r\n\t}\r\n\r\n\tpublic static throwPIR(clss:string, fnc:string, msg:string)\r\n\t{\r\n\t\tDebug.logPIR('PartialImplementationError ' + clss, fnc, msg);\r\n\r\n\t\tif (Debug.THROW_ERRORS) {\r\n\t\t\tif (Debug.keyword) {\r\n\t\t\t\tvar e:string = clss + fnc + msg;\r\n\r\n\t\t\t\tif (e.indexOf(Debug.keyword) == -1)\r\n\t\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tthrow new PartialImplementationError(clss + '.' + fnc + ': ' + msg);\r\n\t\t}\r\n\t}\r\n\r\n\tprivate static logPIR(clss:string, fnc:string, msg:string = '')\r\n\t{\r\n\t\tif (Debug.LOG_PI_ERRORS)\r\n\t\t\tconsole.log(clss + '.' + fnc + ': ' + msg);\r\n\t}\r\n\r\n\tpublic static log(...args:any[])\r\n\t{\r\n\t\tif (Debug.ENABLE_LOG)\r\n\t\t\tconsole.log(args);\r\n\t}\r\n}\r\n\r\nexport = Debug;",
    "declare var SIMD:any;\r\n\r\n/**\r\n *\r\n */\r\nclass Extensions\r\n{\r\n\tpublic static SIMD:boolean = Boolean(typeof(SIMD) !== \"undefined\");\r\n}\r\n\r\nexport = Extensions;",
    "import Image2D\t\t\t\t\t\t= require(\"awayjs-core/lib/data/Image2D\");\r\n\r\nclass ImageUtils\r\n{\r\n\tprivate static MAX_SIZE:number = 2048;\r\n\r\n\tpublic static isImage2DValid(image2D:Image2D):boolean\r\n\t{\r\n\t\tif (image2D == null)\r\n\t\t\treturn true;\r\n\r\n\t\treturn ImageUtils.isDimensionValid(image2D.width) && ImageUtils.isDimensionValid(image2D.height);\r\n\t}\r\n\r\n\tpublic static isHTMLImageElementValid(image:HTMLImageElement):boolean\r\n\t{\r\n\t\tif (image == null)\r\n\t\t\treturn true;\r\n\r\n\t\treturn ImageUtils.isDimensionValid(image.width) && ImageUtils.isDimensionValid(image.height);\r\n\t}\r\n\r\n\tpublic static isDimensionValid(d:number):boolean\r\n\t{\r\n\t\treturn d >= 1 && d <= ImageUtils.MAX_SIZE && ImageUtils.isPowerOfTwo(d);\r\n\t}\r\n\r\n\tpublic static isPowerOfTwo(value:number):boolean\r\n\t{\r\n\t\treturn value? ((value & -value) == value) : false;\r\n\t}\r\n\r\n\tpublic static getBestPowerOf2(value:number):number\r\n\t{\r\n\t\tvar p:number = 1;\r\n\r\n\t\twhile (p < value)\r\n\t\t\tp <<= 1;\r\n\r\n\t\tif (p > ImageUtils.MAX_SIZE)\r\n\t\t\tp = ImageUtils.MAX_SIZE;\r\n\r\n\t\treturn p;\r\n\t}\r\n}\r\n\r\nexport = ImageUtils",
    "import BitmapImage2D            = require(\"awayjs-core/lib/data/BitmapImage2D\");\r\nimport CPUCanvas            = require(\"awayjs-core/lib/data/CPUCanvas\");\r\nimport Matrix                    = require(\"awayjs-core/lib/geom/Matrix\");\r\nimport Rectangle                = require(\"awayjs-core/lib/geom/Rectangle\");\r\n\r\nclass MipmapGenerator {\r\n    private static _mipMaps = [];\r\n    private static _mipMapUses = [];\r\n\r\n    private static _matrix:Matrix = new Matrix();\r\n    private static _rect:Rectangle = new Rectangle();\r\n    private static _source:BitmapImage2D;\r\n\r\n    /**\r\n     * Uploads a BitmapImage2D with mip maps to a target Texture object.\r\n     * @param source The source to upload.\r\n     * @param target The target Texture to upload to.\r\n     * @param mipmap An optional mip map holder to avoids creating new instances for fe animated materials.\r\n     * @param alpha Indicate whether or not the uploaded bitmapData is transparent.\r\n     */\r\n    public static _generateMipMaps(source:HTMLElement, output?:Array<BitmapImage2D>, alpha?:boolean);\r\n    public static _generateMipMaps(source:BitmapImage2D, output?:Array<BitmapImage2D>, alpha?:boolean);\r\n    public static _generateMipMaps(source:any, output?:Array<BitmapImage2D>, alpha:boolean = false) {\r\n        var w:number = source.width;\r\n        var h:number = source.height;\r\n        var i:number = 0;\r\n\r\n        var mipmap:BitmapImage2D;\r\n\r\n        MipmapGenerator._rect.width = w;\r\n        MipmapGenerator._rect.height = h;\r\n\r\n        //use (OR) to create non-square texture mipmaps\r\n        while (w >= 1 || h >= 1) {\r\n\r\n            mipmap = output[i] = MipmapGenerator._getMipmapHolder(output[i], MipmapGenerator._rect.width, MipmapGenerator._rect.height);\r\n\r\n            if (alpha)\r\n                mipmap.fillRect(MipmapGenerator._rect, 0);\r\n\r\n\r\n            MipmapGenerator._matrix.a = MipmapGenerator._rect.width / source.width;\r\n            MipmapGenerator._matrix.d = MipmapGenerator._rect.height / source.height;\r\n            //todo: add support for NPOT textures\r\n            if (document) {\r\n                mipmap.draw(source, MipmapGenerator._matrix); //TODO: smoothing?\r\n            } else {\r\n                if (source.constructor.toString().indexOf(\"BitmapImage2D\") > -1) {\r\n                    //for BitmapImage2D\r\n                    var bitmapImage:BitmapImage2D = <BitmapImage2D> source;\r\n                    bitmapImage.lock();\r\n                    mipmap.lock();\r\n                    this.downsampleImage(bitmapImage.getImageData(), mipmap.getImageData());\r\n                    mipmap.unlock();\r\n                    bitmapImage.unlock();\r\n                }else if(source.constructor.toString().indexOf(\"CPUCanvas\") > -1){\r\n                    this.downsampleImage(source.getImageData(), mipmap.getImageData());\r\n                } else {\r\n                    //for imageData\r\n                    this.downsampleImage(source, mipmap.getImageData());\r\n                }\r\n            }\r\n\r\n            w >>= 1;\r\n            h >>= 1;\r\n\r\n            MipmapGenerator._rect.width = w > 1 ? w : 1;\r\n            MipmapGenerator._rect.height = h > 1 ? h : 1;\r\n\r\n            i++;\r\n        }\r\n    }\r\n\r\n    private static _getMipmapHolder(mipMapHolder:BitmapImage2D, newW:number, newH:number):BitmapImage2D {\r\n        if (mipMapHolder) {\r\n            if (mipMapHolder.width == newW && mipMapHolder.height == newH)\r\n                return mipMapHolder;\r\n\r\n            MipmapGenerator._freeMipMapHolder(mipMapHolder);\r\n        }\r\n\r\n        if (!MipmapGenerator._mipMaps[newW]) {\r\n            MipmapGenerator._mipMaps[newW] = [];\r\n            MipmapGenerator._mipMapUses[newW] = [];\r\n        }\r\n\r\n        if (!MipmapGenerator._mipMaps[newW][newH]) {\r\n            mipMapHolder = MipmapGenerator._mipMaps[newW][newH] = new BitmapImage2D(newW, newH, true);\r\n            MipmapGenerator._mipMapUses[newW][newH] = 1;\r\n        } else {\r\n            MipmapGenerator._mipMapUses[newW][newH] = MipmapGenerator._mipMapUses[newW][newH] + 1;\r\n            mipMapHolder = MipmapGenerator._mipMaps[newW][newH];\r\n        }\r\n\r\n        return mipMapHolder;\r\n    }\r\n\r\n    public static _freeMipMapHolder(mipMapHolder:BitmapImage2D) {\r\n        var holderWidth:number = mipMapHolder.width;\r\n        var holderHeight:number = mipMapHolder.height;\r\n\r\n        if (--MipmapGenerator._mipMapUses[holderWidth][holderHeight] == 0) {\r\n            MipmapGenerator._mipMaps[holderWidth][holderHeight].dispose();\r\n            MipmapGenerator._mipMaps[holderWidth][holderHeight] = null;\r\n        }\r\n    }\r\n\r\n    public static downsampleImage(bitmap:ImageData, destBitmap:ImageData):ImageData {\r\n        var box:BoxFilter = new BoxFilter();\r\n        var xkernel:PolyphaseKernel = new PolyphaseKernel(box, bitmap.width, destBitmap.width, 4);\r\n        var ykernel:PolyphaseKernel = new PolyphaseKernel(box, bitmap.height, destBitmap.height, 4);\r\n\r\n        var tempBitmap:number[] = [];//destBitmap.width, bitmap.height\r\n\r\n        var scale:number = 0;\r\n        var iscale:number = 0;\r\n        var kernelLength:number = 0;\r\n        var kernelWidth:number = 0;\r\n        var kernelWindowSize:number = 0;\r\n        var sumR:number = 0;\r\n        var sumG:number = 0;\r\n        var sumB:number = 0;\r\n        var sumA:number = 0;\r\n        var center:number;\r\n        var left:number;\r\n        var i:number = 0;\r\n        var j:number = 0;\r\n        var index:number = 0;\r\n\r\n        for (var y:number = 0; y < bitmap.height; y++) {\r\n            kernelLength = xkernel.len;\r\n            scale = kernelLength / bitmap.width;\r\n            iscale = 1.0 / scale;\r\n            kernelWidth = xkernel.width;\r\n            kernelWindowSize = xkernel.windowSize;\r\n\r\n            for (i = 0; i < kernelLength; i++) {\r\n                center = (0.5 + i) * iscale;\r\n                left = Math.floor(center - kernelWidth);\r\n                sumR = 0;\r\n                sumG = 0;\r\n                sumB = 0;\r\n                sumA = 0;\r\n                for (var j:number = 0; j < kernelWindowSize; ++j) {\r\n                    index = (y * bitmap.width + (left + j) ) * 4;\r\n                    var colorR:number = bitmap.data[index];\r\n                    var colorG:number = bitmap.data[index + 1];\r\n                    var colorB:number = bitmap.data[index + 2];\r\n                    var colorA:number = bitmap.data[index + 3];\r\n\r\n                    var value:number = xkernel.valueAt(i, j);\r\n                    sumR += value * colorR;\r\n                    sumG += value * colorG;\r\n                    sumB += value * colorB;\r\n                    sumA += value * colorA;\r\n                }\r\n\r\n                index = (y * destBitmap.width + i) * 4;\r\n                tempBitmap[index] = sumR;\r\n                tempBitmap[index + 1] = sumG;\r\n                tempBitmap[index + 2] = sumB;\r\n                tempBitmap[index + 3] = sumA;\r\n            }\r\n        }\r\n\r\n        for (var x:number = 0; x < destBitmap.width; x++) {\r\n            kernelLength = ykernel.len;\r\n            scale = kernelLength / bitmap.height;\r\n            iscale = 1.0 / scale;\r\n            kernelWidth = ykernel.width;\r\n            kernelWindowSize = ykernel.windowSize;\r\n\r\n            for (i = 0; i < kernelLength; i++) {\r\n                center = (0.5 + i) * iscale;\r\n\r\n                left = Math.floor(center - kernelWidth);\r\n\r\n                sumR = 0;\r\n                sumG = 0;\r\n                sumB = 0;\r\n                sumA = 0;\r\n                for (j = 0; j < kernelWindowSize; ++j) {\r\n                    index = ((j + left) * destBitmap.width + x) * 4;\r\n                    var colorR:number = tempBitmap[index];\r\n                    var colorG:number = tempBitmap[index + 1];\r\n                    var colorB:number = tempBitmap[index + 2];\r\n                    var colorA:number = tempBitmap[index + 3];\r\n\r\n                    var value:number = ykernel.valueAt(i, j);\r\n                    sumR += value * colorR;\r\n                    sumG += value * colorG;\r\n                    sumB += value * colorB;\r\n                    sumA += value * colorA;\r\n                }\r\n\r\n                index = (i * destBitmap.width + x) * 4;\r\n                destBitmap.data[index] = sumR;\r\n                destBitmap.data[index + 1] = sumG;\r\n                destBitmap.data[index + 2] = sumB;\r\n                destBitmap.data[index + 3] = sumA;\r\n            }\r\n        }\r\n\r\n        return destBitmap;\r\n    }\r\n}\r\nclass PolyphaseKernel {\r\n    public len:number;\r\n    public width:number;\r\n    public windowSize:number;\r\n    public data:number[];\r\n\r\n    constructor(f:BoxFilter, srcLength:number, dstLength:number, samples:number) {\r\n\r\n        var scale:number = dstLength / srcLength;\r\n        var iscale:number = 1.0 / scale;\r\n\r\n        if (scale > 1) {\r\n            // Upsampling.\r\n            samples = 1;\r\n            scale = 1;\r\n        }\r\n\r\n        this.len = dstLength;\r\n        this.width = f.width * iscale;\r\n        this.windowSize = Math.ceil(this.width * 2);\r\n\r\n        this.data = [];\r\n\r\n        for (var i:number = 0; i < this.len; i++) {\r\n            var center:number = (0.5 + i) * iscale;\r\n\r\n            var left:number = Math.floor(center - this.width);\r\n\r\n            var total:number = 0.0;\r\n            for (var j:number = 0; j < this.windowSize; j++) {\r\n                var sample:number = f.sampleBox(left + j - center, scale, samples);\r\n\r\n                //printf(\"%f %X\\n\", sample, *(uint32 *)&sample);\r\n\r\n                this.data[i * this.windowSize + j] = sample;\r\n                total += sample;\r\n            }\r\n\r\n            // normalize weights.\r\n            for (var j:number = 0; j < this.windowSize; j++) {\r\n                this.data[i * this.windowSize + j] /= total;\r\n            }\r\n        }\r\n    }\r\n\r\n    public valueAt(column:number, x:number):number {\r\n        return this.data[column * this.windowSize + x];\r\n    }\r\n}\r\n\r\nclass BoxFilter {\r\n    public get width():number {\r\n        return 0.5;\r\n    }\r\n\r\n    public sampleBox(x:number, scale:number, samples:number):number {\r\n        var sum:number = 0;\r\n        var isamples:number = 1.0 / samples;\r\n\r\n        for (var s:number = 0; s < samples; s++) {\r\n            var p:number = (x + (s + 0.5) * isamples) * scale;\r\n            var value:number = this.evaluate(p);\r\n            sum += value;\r\n        }\r\n\r\n        return sum * isamples;\r\n    }\r\n\r\n    public evaluate(x:number):number {\r\n        if (Math.abs(x) <= this.width) return 1.0;\r\n        else return 0.0;\r\n    }\r\n}\r\nexport = MipmapGenerator;",
    "import getTimer\t\t\t\t\t= require(\"awayjs-core/lib/utils/getTimer\");\r\n\r\nclass RequestAnimationFrame\r\n{\r\n\tprivate _callback:Function;\r\n\tprivate _callbackContext:Object;\r\n\tprivate _active:boolean = false;\r\n\tprivate _rafUpdateFunction:any;\r\n\tprivate _prevTime:number;\r\n\tprivate _dt:number;\r\n\tprivate _currentTime:number;\r\n\tprivate _argsArray:Array<any> = new Array();\r\n\tprivate _getTimer:Function;\r\n\r\n\tconstructor(callback:Function, callbackContext:Object)\r\n\t{\r\n\t\tthis._getTimer = getTimer;\r\n\r\n\t\tthis.setCallback(callback, callbackContext);\r\n\r\n\t\tthis._rafUpdateFunction = () => {\r\n\t\t\tif (this._active)\r\n\t\t\t\tthis._tick();\r\n\t\t}\r\n\r\n\t\tthis._argsArray.push(this._dt);\r\n\t}\r\n\r\n\t// Public\r\n\r\n\t/**\r\n\t *\r\n\t * @param callback\r\n\t * @param callbackContext\r\n\t */\r\n\tpublic setCallback(callback:Function, callbackContext:Object)\r\n\t{\r\n\t\tthis._callback = callback;\r\n\t\tthis._callbackContext = callbackContext;\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tpublic start()\r\n\t{\r\n\t\tthis._prevTime = this._getTimer();\r\n\t\tthis._active = true;\r\n\r\n\t\tif(window) {\r\n\t\t\tif (window.requestAnimationFrame) {\r\n\t\t\t\twindow.requestAnimationFrame(this._rafUpdateFunction);\r\n\t\t\t} else {\r\n\t\t\t\tif (window['mozRequestAnimationFrame'])\r\n\t\t\t\t\twindow.requestAnimationFrame = window['mozRequestAnimationFrame'];\r\n\t\t\t\telse if (window['webkitRequestAnimationFrame'])\r\n\t\t\t\t\twindow.requestAnimationFrame = window['webkitRequestAnimationFrame'];\r\n\t\t\t\telse if (window['oRequestAnimationFrame'])\r\n\t\t\t\t\twindow.requestAnimationFrame = window['oRequestAnimationFrame'];\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tpublic stop()\r\n\t{\r\n\t\tthis._active = false;\r\n\t}\r\n\r\n\t// Get / Set\r\n\r\n\t/**\r\n\t *\r\n\t * @returns {boolean}\r\n\t */\r\n\tpublic get active():boolean\r\n\t{\r\n\t\treturn this._active;\r\n\t}\r\n\r\n\t// Private\r\n\r\n\t/**\r\n\t *\r\n\t * @private\r\n\t */\r\n\tprivate _tick():void\r\n\t{\r\n\t\tthis._currentTime = this._getTimer();\r\n\t\tthis._dt = this._currentTime - this._prevTime;\r\n\t\tthis._argsArray[0] = this._dt;\r\n\t\tthis._callback.apply(this._callbackContext, this._argsArray);\r\n\r\n\t\twindow.requestAnimationFrame(this._rafUpdateFunction);\r\n\r\n\t\tthis._prevTime = this._currentTime;\r\n\t}\r\n\r\n\r\n}\r\n\r\nexport = RequestAnimationFrame;",
    "import Error\t\t\t\t\t= require(\"awayjs-core/lib/errors/Error\");\r\nimport EventDispatcher\t\t\t= require(\"awayjs-core/lib/events/EventDispatcher\");\r\nimport TimerEvent\t\t\t\t= require(\"awayjs-core/lib/events/TimerEvent\");\r\n\r\nclass Timer extends EventDispatcher\r\n{\r\n\tprivate _delay:number;\r\n\tprivate _repeatCount:number = 0;\r\n\tprivate _currentCount:number = 0;\r\n\tprivate _iid:number;\r\n\tprivate _running:boolean = false;\r\n\r\n\tconstructor(delay:number, repeatCount:number = 0)\r\n\t{\r\n\t\tsuper();\r\n\r\n\t\tthis._delay = delay;\r\n\t\tthis._repeatCount = repeatCount;\r\n\r\n\t\tif (isNaN(delay) || delay < 0)\r\n\t\t\tthrow new Error(\"Delay is negative or not a number\");\r\n\t}\r\n\r\n\tpublic get currentCount():number\r\n\t{\r\n\t\treturn this._currentCount;\r\n\t}\r\n\r\n\tpublic get delay():number\r\n\t{\r\n\t\treturn this._delay;\r\n\t}\r\n\r\n\tpublic set delay(value:number)\r\n\t{\r\n\t\tthis._delay = value;\r\n\r\n\t\tif (this._running) {\r\n\t\t\tthis.stop();\r\n\t\t\tthis.start();\r\n\t\t}\r\n\t}\r\n\r\n\tpublic get repeatCount():number\r\n\t{\r\n\t\treturn this._repeatCount;\r\n\t}\r\n\r\n\tpublic set repeatCount(value:number)\r\n\t{\r\n\t\tthis._repeatCount = value;\r\n\t}\r\n\r\n\tpublic reset():void\r\n\t{\r\n\t\tif (this._running)\r\n\t\t\tthis.stop();\r\n\r\n\t\tthis._currentCount = 0;\r\n\t}\r\n\r\n\tpublic get running():boolean\r\n\t{\r\n\t\treturn this._running;\r\n\t}\r\n\r\n\tpublic start():void\r\n\t{\r\n\t\tthis._running = true;\r\n\t\tclearInterval(this._iid);\r\n\t\tthis._iid = setInterval(() => this.tick(), this._delay);\r\n\t}\r\n\r\n\tpublic stop():void\r\n\t{\r\n\t\tthis._running = false;\r\n\t\tclearInterval(this._iid);\r\n\t}\r\n\r\n\tprivate tick():void\r\n\t{\r\n\t\tthis._currentCount++;\r\n\r\n\t\tif (( this._repeatCount > 0 ) && this._currentCount >= this._repeatCount) {\r\n\r\n\t\t\tthis.stop();\r\n\t\t\tthis.dispatchEvent(new TimerEvent(TimerEvent.TIMER));\r\n\t\t\tthis.dispatchEvent(new TimerEvent(TimerEvent.TIMER_COMPLETE));\r\n\r\n\t\t} else {\r\n\t\t\tthis.dispatchEvent(new TimerEvent(TimerEvent.TIMER));\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport = Timer;",
    "class XmlUtils {\r\n\r\n\tpublic static getChildrenWithTag(node:Node, tag:string):NodeList {\r\n\r\n\t\tvar fragment:DocumentFragment = document.createDocumentFragment();\r\n\r\n\t\tif(node) {\r\n\t\t\tvar num:number = node.childNodes.length;\r\n\t\t\tfor(var i:number = 0; i < num; i++) {\r\n\t\t\t\tvar child:Node = node.childNodes[i];\r\n\t\t\t\tif(child != null) {\r\n\t\t\t\t\tif(child.nodeName == tag) {\r\n\t\t\t\t\t\tfragment.appendChild(child);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn fragment.childNodes;\r\n\t}\r\n\r\n\tpublic static filterListByParam(nodes:NodeList, paramName:string, paramValue):NodeList {\r\n\r\n\t\tvar fragment:DocumentFragment = document.createDocumentFragment();\r\n\r\n\t\tif(nodes) {\r\n\t\t\tvar num:number = nodes.length;\r\n\t\t\tfor(var i:number = 0; i < num; i++) {\r\n\t\t\t\tvar child:Node = nodes[i];\r\n\t\t\t\tif(child != null) {\r\n\t\t\t\t\tif(child.attributes.getNamedItem(paramName).value == paramValue) {\r\n\t\t\t\t\t\tfragment.appendChild(child);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn fragment.childNodes;\r\n\t}\r\n\r\n\tpublic static strToXml(str:string):Node {\r\n\t\tvar parser:DOMParser = new DOMParser();\r\n\t\tvar node:Node = parser.parseFromString(str, \"text/xml\");\r\n\t\treturn node;\r\n\t}\r\n\r\n\tpublic static nodeToString(node:Node):string {\r\n\t\tif(!node) return \"\";\r\n\t\tvar str = (new XMLSerializer()).serializeToString(node);\r\n\t\treturn str;\r\n\t}\r\n\r\n\tpublic static readAttributeValue(node:Node, attrName:string):string {\r\n\t\tvar attrs = node.attributes;\r\n\t\tif(attrs == undefined) {\r\n\t\t\treturn \"\";\r\n\t\t}\r\n\t\tvar attribute:Attr = attrs.getNamedItem(attrName);\r\n\t\tif(!attribute) {\r\n\t\t\t//console.log(\"XmlUltils - readAttributeValue() - name: \" + attrName + \", attribute does not exist.\");\r\n\t\t\treturn \"\";\r\n\t\t}\r\n\t\t//console.log(\"XmlUltils - readAttributeValue() - name: \" + attrName + \", value: \" + attribute.value);\r\n\t\treturn attribute.value;\r\n\t}\r\n\r\n\tpublic static writeAttributeValue(node:Node, attrName:string, attrValue:string) {\r\n\t\tvar attribute:Attr = new Attr();\r\n\t\tattribute.name = attrName;\r\n\t\tattribute.value = attrValue;\r\n\t\tattribute = node.attributes.setNamedItem(attribute);\r\n\t\tconsole.log(\"XmlUltils - writeAttributeValue() - name: \" + attribute.name + \", value: \" + attribute.value);\r\n\t}\r\n\r\n\tpublic static hasAttribute(node:Node, attrName:string):boolean {\r\n\t\tvar attrs = node.attributes;\r\n\t\tif(attrs == undefined) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tvar attribute:Attr = attrs.getNamedItem(attrName);\r\n\t\treturn attribute != null;\r\n\t}\r\n}\r\nexport = XmlUtils;\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n",
    "/**\r\n *\r\n *\r\n * @returns {number}\r\n */\r\nfunction getTimer():number\r\n{\r\n\t// number milliseconds of 1970/01/01\r\n\t// this different to AS3 implementation which gets the number of milliseconds\r\n\t// since instance of Flash player was initialised\r\n\treturn Date.now();\r\n}\r\n\r\nexport = getTimer;"
  ],
  "sourceRoot": ""
}